{
    "version": "https://jsonfeed.org/version/1",
    "title": "Eucli • All posts by \"vue3\" tag",
    "description": null,
    "home_page_url": "https://eucli.top",
    "items": [
        {
            "id": "https://eucli.top/2023/05/03/%E3%80%90%E5%B0%8F%E6%BB%A1%E3%80%91Vue3%20+%20vite%20+%20Ts%20+%20pinia%20+%20%E5%AE%9E%E6%88%98%20+%20%E6%BA%90%E7%A0%81%20+electron/",
            "url": "https://eucli.top/2023/05/03/%E3%80%90%E5%B0%8F%E6%BB%A1%E3%80%91Vue3%20+%20vite%20+%20Ts%20+%20pinia%20+%20%E5%AE%9E%E6%88%98%20+%20%E6%BA%90%E7%A0%81%20+electron/",
            "title": "【小满】Vue3 + vite + Ts + pinia + 实战 + 源码 +electron",
            "date_published": "2023-05-03T02:46:00.000Z",
            "content_html": "",
            "tags": [
                "TypeScript",
                "vue3",
                "pinia",
                "vite",
                "electron"
            ]
        },
        {
            "id": "https://eucli.top/2023/03/24/%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%EF%BC%9AVite%20+%20Vue3%20+%20Typescript%20+%20Pinia%20+%20Vueuse%E9%A1%B9%E7%9B%AE/",
            "url": "https://eucli.top/2023/03/24/%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%EF%BC%9AVite%20+%20Vue3%20+%20Typescript%20+%20Pinia%20+%20Vueuse%E9%A1%B9%E7%9B%AE/",
            "title": "快速搭建：Vite + Vue3 + Typescript + Pinia + Vueuse项目",
            "date_published": "2023-03-24T10:01:34.000Z",
            "content_html": "<h1 id=\"vite-vue3-typescript-pinia-vueuse\"><a class=\"markdownIt-Anchor\" href=\"#vite-vue3-typescript-pinia-vueuse\">#</a> Vite + Vue3 + Typescript + Pinia + Vueuse</h1>\n<blockquote>\n<h2 id=\"一个大厂企业级前端项目\"><a class=\"markdownIt-Anchor\" href=\"#一个大厂企业级前端项目\">#</a> 一个大厂企业级前端项目</h2>\n</blockquote>\n<h1 id=\"通过这篇文章你可以学到\"><a class=\"markdownIt-Anchor\" href=\"#通过这篇文章你可以学到\">#</a> 通过这篇文章你可以学到</h1>\n<ul>\n<li>如何使用使用 Vite 搭建项目</li>\n<li>如何在 Vite 中集成  <code>typescript</code></li>\n<li>如何在 Vite 中集成  <code>vue-router4</code>  和  <code>pinia</code></li>\n<li>如何使用 vue3 的伴侣  <code>vueuse</code></li>\n<li>如何在项目中集成  <code>eslint</code>  和  <code>prettier</code>  保证代码质量</li>\n<li>如何规范化  <code>git</code>  提交信息</li>\n<li>如何为团队开发 <code>专属的项目模板</code></li>\n</ul>\n<h1 id=\"环境依赖版本\"><a class=\"markdownIt-Anchor\" href=\"#环境依赖版本\">#</a> 环境依赖版本</h1>\n<ul>\n<li><a href=\"https://github.com/nodejs/node\">node</a>：v14.15.4</li>\n<li><a href=\"https://github.com/vitejs/vite\">vite</a>：^2.8.0</li>\n<li><a href=\"https://github.com/vuejs/vue\">vue</a>：^3.2.25</li>\n<li><a href=\"https://github.com/microsoft/TypeScript\">typescript</a>：^4.5.4</li>\n<li><a href=\"https://github.com/vuejs/pinia\">pinia</a>：^2.0.12</li>\n<li><a href=\"https://github.com/vuejs/router\">vue-router</a>：^4.0.14</li>\n<li><a href=\"https://github.com/vueuse/vueuse\">vueuse</a>：^8.2.0</li>\n<li><a href=\"https://github.com/eslint/eslint\">eslint</a>：^8.12.0</li>\n<li><a href=\"https://github.com/prettier/prettier\">prettier</a>：^2.6.1</li>\n<li><a href=\"https://github.com/commitizen/cz-cli\">commitizen</a>：^4.2.4</li>\n<li><a href=\"https://github.com/typicode/husky\">husky</a>：^7.0.4</li>\n</ul>\n<p><strong>长话短说，直接开干～</strong></p>\n<h1 id=\"1-初始化项目\"><a class=\"markdownIt-Anchor\" href=\"#1-初始化项目\">#</a> 1. 初始化项目</h1>\n<h2 id=\"按步骤提示初始化\"><a class=\"markdownIt-Anchor\" href=\"#按步骤提示初始化\">#</a> 按步骤提示初始化：</h2>\n<ol>\n<li>使用 vite-cli 命令</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># pnpm</span></span><br><span class=\"line\">pnpm create vite</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># npm</span></span><br><span class=\"line\">npm init vite@latest</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># yarn</span></span><br><span class=\"line\">yarn create vite</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>输入项目名：</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">? Project name:  vite-vue3-ts-pinia</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>选择一个框架（vue）</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">? Select a framework: » - Use arrow-keys. Return to submit.</span><br><span class=\"line\">     vanilla // 原生js</span><br><span class=\"line\"> &gt;   vue     // 默认就是 vue3</span><br><span class=\"line\">     react   // react</span><br><span class=\"line\">     preact  // 轻量化react框架</span><br><span class=\"line\">     lit     // 轻量级web组件</span><br><span class=\"line\">     svelte  // svelte框架</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>使用 typescript</li>\n</ol>\n<figure class=\"highlight n1ql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">? <span class=\"keyword\">Select</span> a variant: › - <span class=\"keyword\">Use</span> arrow-<span class=\"keyword\">keys</span>. <span class=\"keyword\">Return</span> <span class=\"keyword\">to</span> submit.</span><br><span class=\"line\">     vue</span><br><span class=\"line\"> ❯   vue-ts</span><br></pre></td></tr></table></figure>\n<ol start=\"5\">\n<li>启动项目</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> vite-vue3-ts-pinia &amp;&amp; pnpm install &amp;&amp; pnpm run dev</span><br></pre></td></tr></table></figure>\n<h2 id=\"快速初始化建议使用\"><a class=\"markdownIt-Anchor\" href=\"#快速初始化建议使用\">#</a> 快速初始化（建议使用）：</h2>\n<figure class=\"highlight livecodeserver\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># pnpm</span></span><br><span class=\"line\">pnpm <span class=\"built_in\">create</span> vite project-name <span class=\"comment\">-- --template vue-ts</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># npm 6.x</span></span><br><span class=\"line\">npm init vite@latest project-name <span class=\"comment\">--template vue-ts</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># npm 7+, 需要额外的双横线：</span></span><br><span class=\"line\">npm init vite@latest project-name <span class=\"comment\">-- --template vue-ts</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># yarn</span></span><br><span class=\"line\">yarn <span class=\"built_in\">create</span> vite project-name <span class=\"comment\">--template vue-ts</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"集成配置\"><a class=\"markdownIt-Anchor\" href=\"#集成配置\">#</a> 集成配置</h2>\n<ol>\n<li>为保证 node 的使用</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pnpm i @types/node --save-dev</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>修改  <code>tsconfig.json</code></li>\n</ol>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;compilerOptions&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;typeRoots&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">      <span class=\"string\">&quot;node_modules/@types&quot;</span><span class=\"punctuation\">,</span> <span class=\"comment\">// 默认值</span></span><br><span class=\"line\">      <span class=\"string\">&quot;src/types&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;target&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;esnext&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;useDefineForClassFields&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;module&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;esnext&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;moduleResolution&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;node&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;strict&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;jsx&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;preserve&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;sourceMap&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;resolveJsonModule&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;esModuleInterop&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;lib&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"string\">&quot;esnext&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;dom&quot;</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;baseUrl&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;./&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;paths&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;@&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"string\">&quot;src&quot;</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;@/*&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"string\">&quot;src/*&quot;</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;include&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"string\">&quot;src/**/*.ts&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;src/**/*.d.ts&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;src/**/*.tsx&quot;</span><span class=\"punctuation\">,</span> <span class=\"string\">&quot;src/**/*.vue&quot;</span><span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>修改  <code>vite.config.ts</code></li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; defineConfig &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vite&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> vue <span class=\"keyword\">from</span> <span class=\"string\">&quot;@vitejs/plugin-vue&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> path <span class=\"keyword\">from</span> <span class=\"string\">&quot;path&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// https://vitejs.dev/config/</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">defineConfig</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">resolve</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">//设置别名</span></span><br><span class=\"line\">    <span class=\"attr\">alias</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">&quot;@&quot;</span>: path.<span class=\"title function_\">resolve</span>(__dirname, <span class=\"string\">&quot;src&quot;</span>),</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [<span class=\"title function_\">vue</span>()],</span><br><span class=\"line\">  <span class=\"attr\">server</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">port</span>: <span class=\"number\">8080</span>, <span class=\"comment\">//启动端口</span></span><br><span class=\"line\">    <span class=\"attr\">hmr</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">host</span>: <span class=\"string\">&quot;127.0.0.1&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">port</span>: <span class=\"number\">8080</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// 设置 https 代理</span></span><br><span class=\"line\">    <span class=\"attr\">proxy</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">&quot;/api&quot;</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">target</span>: <span class=\"string\">&quot;your https address&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">changeOrigin</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"attr\">rewrite</span>: <span class=\"function\">(<span class=\"params\">path: <span class=\"built_in\">string</span></span>) =&gt;</span> path.<span class=\"title function_\">replace</span>(<span class=\"regexp\">/^\\/api/</span>, <span class=\"string\">&quot;&quot;</span>),</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h1 id=\"2-代码质量风格的统一\"><a class=\"markdownIt-Anchor\" href=\"#2-代码质量风格的统一\">#</a> 2. 代码质量风格的统一</h1>\n<h2 id=\"集成-eslint\"><a class=\"markdownIt-Anchor\" href=\"#集成-eslint\">#</a> 集成  <code>eslint</code></h2>\n<ol>\n<li>安装</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pnpm i eslint eslint-plugin-vue --save-dev</span><br></pre></td></tr></table></figure>\n<p>由于 ESLint 默认使用  <a href=\"https://github.com/eslint/espree\">Espree</a>  进行语法解析，无法识别 TypeScript 的一些语法，故我们需要安装  <a href=\"https://github.com/typescript-eslint/typescript-eslint/tree/master/packages/parser\"> <code>@typescript-eslint/parser</code> </a> 替代掉默认的解析器</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pnpm install @typescript-eslint/parser --save-dev</span><br></pre></td></tr></table></figure>\n<p>安装对应的插件  <a href=\"https://github.com/typescript-eslint/typescript-eslint/tree/master/packages/eslint-plugin\">@typescript-eslint/eslint-plugin</a>  它作为 eslint 默认规则的补充，提供了一些额外的适用于 ts 语法的规则。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pnpm install @typescript-eslint/eslint-plugin --save-dev</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>创建配置文件：  <code>.eslintrc.js</code>   或   <code>.eslintrc.json</code></li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">  <span class=\"attr\">parser</span>: <span class=\"string\">&quot;vue-eslint-parser&quot;</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">parserOptions</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">parser</span>: <span class=\"string\">&quot;@typescript-eslint/parser&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">ecmaVersion</span>: <span class=\"number\">2020</span>,</span><br><span class=\"line\">    <span class=\"attr\">sourceType</span>: <span class=\"string\">&quot;module&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">ecmaFeatures</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">jsx</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">extends</span>: [<span class=\"string\">&quot;plugin:vue/vue3-recommended&quot;</span>, <span class=\"string\">&quot;plugin:@typescript-eslint/recommended&quot;</span>],</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">rules</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// override/add rules settings here, such as:</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>创建忽略文件： <code>.eslintignore</code></li>\n</ol>\n<figure class=\"highlight axapta\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node_modules/</span><br><span class=\"line\">dist/</span><br><span class=\"line\"><span class=\"keyword\">index</span>.html</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>命令行式运行：修改  <code>package.json</code></li>\n</ol>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"attr\">&quot;scripts&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        ...</span><br><span class=\"line\">        <span class=\"attr\">&quot;eslint:comment&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;使用 ESLint 检查并自动修复 src 目录下所有扩展名为 .js 和 .vue 的文件&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;eslint&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;eslint --ext .js,.vue --ignore-path .gitignore --fix src&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">    ...</span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"集成-prettier\"><a class=\"markdownIt-Anchor\" href=\"#集成-prettier\">#</a> 集成  <code>prettier</code></h2>\n<ol>\n<li>安装</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pnpm i prettier eslint-config-prettier eslint-plugin-prettier --save-dev</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>创建配置文件：  <code>prettier.config.js</code>  或  <code>.prettierrc.js</code></li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 一行最多 80 字符</span></span><br><span class=\"line\">  <span class=\"attr\">printWidth</span>: <span class=\"number\">80</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 使用 4 个空格缩进</span></span><br><span class=\"line\">  <span class=\"attr\">tabWidth</span>: <span class=\"number\">4</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 不使用 tab 缩进，而使用空格</span></span><br><span class=\"line\">  <span class=\"attr\">useTabs</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 行尾需要有分号</span></span><br><span class=\"line\">  <span class=\"attr\">semi</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 使用单引号代替双引号</span></span><br><span class=\"line\">  <span class=\"attr\">singleQuote</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 对象的 key 仅在必要时用引号</span></span><br><span class=\"line\">  <span class=\"attr\">quoteProps</span>: <span class=\"string\">&quot;as-needed&quot;</span>,</span><br><span class=\"line\">  <span class=\"comment\">// jsx 不使用单引号，而使用双引号</span></span><br><span class=\"line\">  <span class=\"attr\">jsxSingleQuote</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 末尾使用逗号</span></span><br><span class=\"line\">  <span class=\"attr\">trailingComma</span>: <span class=\"string\">&quot;all&quot;</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 大括号内的首尾需要空格 &#123; foo: bar &#125;</span></span><br><span class=\"line\">  <span class=\"attr\">bracketSpacing</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  <span class=\"comment\">// jsx 标签的反尖括号需要换行</span></span><br><span class=\"line\">  <span class=\"attr\">jsxBracketSameLine</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 箭头函数，只有一个参数的时候，也需要括号</span></span><br><span class=\"line\">  <span class=\"attr\">arrowParens</span>: <span class=\"string\">&quot;always&quot;</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 每个文件格式化的范围是文件的全部内容</span></span><br><span class=\"line\">  <span class=\"attr\">rangeStart</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">  <span class=\"attr\">rangeEnd</span>: <span class=\"title class_\">Infinity</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 不需要写文件开头的 @prettier</span></span><br><span class=\"line\">  <span class=\"attr\">requirePragma</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 不需要自动在文件开头插入 @prettier</span></span><br><span class=\"line\">  <span class=\"attr\">insertPragma</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 使用默认的折行标准</span></span><br><span class=\"line\">  <span class=\"attr\">proseWrap</span>: <span class=\"string\">&quot;preserve&quot;</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 根据显示样式决定 html 要不要折行</span></span><br><span class=\"line\">  <span class=\"attr\">htmlWhitespaceSensitivity</span>: <span class=\"string\">&quot;css&quot;</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 换行符使用 lf</span></span><br><span class=\"line\">  <span class=\"attr\">endOfLine</span>: <span class=\"string\">&quot;auto&quot;</span>,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>修改  <code>.eslintrc.js</code>  配置</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"attr\">extends</span>: [</span><br><span class=\"line\">        <span class=\"string\">&#x27;plugin:vue/vue3-recommended&#x27;</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;plugin:@typescript-eslint/recommended&#x27;</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;prettier&#x27;</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;plugin:prettier/recommended&#x27;</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\"></span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>命令行式运行：修改  <code>package.json</code></li>\n</ol>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"attr\">&quot;scripts&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        ...</span><br><span class=\"line\">        <span class=\"attr\">&quot;prettier:comment&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;自动格式化当前目录下的所有文件&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;prettier&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;prettier --write&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">    ...</span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"3-集成-pinia\"><a class=\"markdownIt-Anchor\" href=\"#3-集成-pinia\">#</a> 3. 集成  <code>pinia</code></h1>\n<p><code>Pinia</code>  读音：['piːnə]，是 Vue 官方团队推荐代替 <code>Vuex</code>  的一款轻量级状态管理库。</p>\n<p><strong>Pinia 有如下特点：</strong></p>\n<ul>\n<li>完整的 typescript 的支持；</li>\n<li>足够轻量，压缩后的体积只有 1.6kb;</li>\n<li>去除 mutations，只有 state，getters，actions（这是我最喜欢的一个特点）；</li>\n<li>actions 支持同步和异步；</li>\n<li>没有模块嵌套，只有 store 的概念，store 之间可以自由使用，更好的代码分割；</li>\n<li>无需手动添加 store，store 一旦创建便会自动添加；</li>\n</ul>\n<h2 id=\"安装\"><a class=\"markdownIt-Anchor\" href=\"#安装\">#</a> 安装</h2>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> pnpm <span class=\"selector-tag\">i</span> pinia <span class=\"attr\">--save</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"使用\"><a class=\"markdownIt-Anchor\" href=\"#使用\">#</a> 使用</h2>\n<ol>\n<li>新建 src/store 目录并在其下面创建 index.ts，导出 store</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createPinia &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;pinia&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> store = <span class=\"title function_\">createPinia</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> store;</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>在 main.ts 中引入并使用</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createApp &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">App</span> <span class=\"keyword\">from</span> <span class=\"string\">&quot;./App.vue&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> store <span class=\"keyword\">from</span> <span class=\"string\">&quot;./store&quot;</span>; <span class=\"comment\">// 创建vue实例</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"title function_\">createApp</span>(<span class=\"title class_\">App</span>); <span class=\"comment\">// 挂载pinia</span></span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(store); <span class=\"comment\">// 挂载实例</span></span><br><span class=\"line\">app.<span class=\"title function_\">mount</span>(<span class=\"string\">&quot;#app&quot;</span>);</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li><strong>定义 State：</strong> 在 src/store 下面创建一个 user.ts</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; defineStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;pinia&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> useUserStore = <span class=\"title function_\">defineStore</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">id</span>: <span class=\"string\">&quot;user&quot;</span>, <span class=\"comment\">// id必填，且需要唯一</span></span><br><span class=\"line\">  <span class=\"attr\">state</span>: <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      <span class=\"attr\">name</span>: <span class=\"string\">&quot;张三&quot;</span>,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">actions</span>: &#123;</span><br><span class=\"line\">    <span class=\"title function_\">updateName</span>(<span class=\"params\">name</span>) &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">this</span>.<span class=\"property\">name</span> = name;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li><strong>获取 State：</strong> 在 src/components/usePinia.vue 中使用</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> &lt;template&gt;</span><br><span class=\"line\">   <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>&#123;&#123; userStore.name &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"> &lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;ts&quot;</span> <span class=\"attr\">setup</span>&gt;</span><span class=\"language-javascript\"></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\"> <span class=\"keyword\">import</span> &#123; useUserStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;@/store/user&#x27;</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\"></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\"> <span class=\"keyword\">const</span> userStore = <span class=\"title function_\">useUserStore</span>()</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\"> </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<ol start=\"5\">\n<li><strong>修改 State：</strong></li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"comment\">// 1. 直接修改 state （不建议）</span></span><br><span class=\"line\"> userStore.<span class=\"property\">name</span> = <span class=\"string\">&#x27;李四&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">// 2. 通过 actions 去修改</span></span><br><span class=\"line\"> &lt;script lang=<span class=\"string\">&quot;ts&quot;</span> setup&gt;</span><br><span class=\"line\"> <span class=\"keyword\">import</span> &#123; useUserStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;@/store/user&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">const</span> userStore = <span class=\"title function_\">useUserStore</span>()</span><br><span class=\"line\"> userStore.<span class=\"title function_\">updateName</span>(<span class=\"string\">&#x27;李四&#x27;</span>)</span><br><span class=\"line\"> &lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>更详细上手指南：<a href=\"https://juejin.cn/post/7049196967770980389\">链接</a> 官方文档：<a href=\"https://pinia.vuejs.org/introduction.html\">链接</a></p>\n</blockquote>\n<h1 id=\"4-集成-vue-router4\"><a class=\"markdownIt-Anchor\" href=\"#4-集成-vue-router4\">#</a> 4. 集成  <code>vue-router4</code></h1>\n<h2 id=\"安装-2\"><a class=\"markdownIt-Anchor\" href=\"#安装-2\">#</a> 安装</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> pnpm i vue-router --save</span><br></pre></td></tr></table></figure>\n<h2 id=\"使用-2\"><a class=\"markdownIt-Anchor\" href=\"#使用-2\">#</a> 使用</h2>\n<ol>\n<li>新建 src/router 目录并在其下面创建 index.ts，导出 router</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createRouter, createWebHistory, <span class=\"title class_\">RouteRecordRaw</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue-router&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"attr\">routes</span>: <span class=\"title class_\">Array</span>&lt;<span class=\"title class_\">RouteRecordRaw</span>&gt; = [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"attr\">path</span>: <span class=\"string\">&quot;/login&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">name</span>: <span class=\"string\">&quot;Login&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">meta</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">title</span>: <span class=\"string\">&quot;登录&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">keepAlive</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      <span class=\"attr\">requireAuth</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">component</span>: <span class=\"function\">() =&gt;</span> <span class=\"keyword\">import</span>(<span class=\"string\">&quot;@/pages/login.vue&quot;</span>),</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"attr\">path</span>: <span class=\"string\">&quot;/&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">name</span>: <span class=\"string\">&quot;Index&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">meta</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">title</span>: <span class=\"string\">&quot;首页&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">keepAlive</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      <span class=\"attr\">requireAuth</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">component</span>: <span class=\"function\">() =&gt;</span> <span class=\"keyword\">import</span>(<span class=\"string\">&quot;@/pages/index.vue&quot;</span>),</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> router = <span class=\"title function_\">createRouter</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">history</span>: <span class=\"title function_\">createWebHistory</span>(),</span><br><span class=\"line\">  routes,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> router;</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>在 main.ts 中引入并使用</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createApp &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">App</span> <span class=\"keyword\">from</span> <span class=\"string\">&quot;./App.vue&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> store <span class=\"keyword\">from</span> <span class=\"string\">&quot;./store&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> router <span class=\"keyword\">from</span> <span class=\"string\">&quot;@/router&quot;</span>; <span class=\"comment\">// 创建vue实例</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"title function_\">createApp</span>(<span class=\"title class_\">App</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(router); <span class=\"comment\">// 挂载实例</span></span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">mount</span>(<span class=\"string\">&quot;#app&quot;</span>);</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>修改 App.vue</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">     <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">RouterView</span> /&gt;</span></span> </span><br><span class=\"line\">&lt;/template&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"5-集成-vueuse\"><a class=\"markdownIt-Anchor\" href=\"#5-集成-vueuse\">#</a> 5. 集成  <code>vueuse</code></h1>\n<p><code>VueUse</code>  是一个基于   <code>Composition API</code>  的实用函数集合。</p>\n<h2 id=\"安装-3\"><a class=\"markdownIt-Anchor\" href=\"#安装-3\">#</a> 安装</h2>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> pnpm <span class=\"selector-tag\">i</span> <span class=\"keyword\">@vueuse</span>/core</span><br></pre></td></tr></table></figure>\n<h2 id=\"使用-3\"><a class=\"markdownIt-Anchor\" href=\"#使用-3\">#</a> 使用</h2>\n<ol>\n<li>创建一个新的 src/page/vueUse.vue 页面来做一个简单的 demo</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> &lt;template&gt;</span><br><span class=\"line\">   <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span> 测试 vueUse 的鼠标坐标 <span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span></span><br><span class=\"line\">   <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">h3</span>&gt;</span>Mouse: &#123;&#123;x&#125;&#125; x &#123;&#123;y&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">h3</span>&gt;</span></span></span><br><span class=\"line\"> &lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;ts&quot;</span>&gt;</span><span class=\"language-javascript\"></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">     <span class=\"keyword\">import</span> &#123; defineComponent &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue&#x27;</span>;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">     <span class=\"keyword\">import</span> &#123; useMouse &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;@vueuse/core&#x27;</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\"></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">     <span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">defineComponent</span>(&#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">         <span class=\"attr\">name</span>: <span class=\"string\">&#x27;VueUse&#x27;</span>,</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">         <span class=\"title function_\">setup</span>(<span class=\"params\"></span>) &#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">           <span class=\"keyword\">const</span> &#123; x, y &#125; = <span class=\"title function_\">useMouse</span>()</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\"></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">           <span class=\"keyword\">return</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">             x, y</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">           &#125;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">         &#125;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">     &#125;);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\"> </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<p>useMouse 只是 vueuse 的一个最基本的函数库，还有许多，总会有一个适合你；</p>\n<p>更多函数官方文档：<a href=\"https://vueuse.org/\">链接</a></p>\n<h1 id=\"6-css-的集成\"><a class=\"markdownIt-Anchor\" href=\"#6-css-的集成\">#</a> 6. CSS 的集成</h1>\n<h2 id=\"方案一原生-css-variable-新特性\"><a class=\"markdownIt-Anchor\" href=\"#方案一原生-css-variable-新特性\">#</a> 方案一：原生 css variable 新特性：</h2>\n<p>原生支持，不需要第三方插件，具体使用文档可 <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/var\">查看</a></p>\n<ol>\n<li>新建文件 src/styles/index.css</li>\n</ol>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"selector-pseudo\">:root</span> &#123;</span><br><span class=\"line\">   <span class=\"attr\">--main-bg-color</span>: pink;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> ​</span><br><span class=\"line\"> <span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">   <span class=\"attribute\">background-color</span>: <span class=\"built_in\">var</span>(--main-bg-color);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<p>注：还可以增加 PostCSS 配置，(任何受  <a href=\"https://github.com/postcss/postcss-load-config\">postcss-load-config</a> 支持的格式，例如   <code>postcss.config.js</code>  )，它将会自动应用于所有已导入的 CSS。</p>\n<h2 id=\"方案二scss-或-less\"><a class=\"markdownIt-Anchor\" href=\"#方案二scss-或-less\">#</a> 方案二：scss 或 less：</h2>\n<ol>\n<li>安装</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"comment\"># .scss and .sass</span></span><br><span class=\"line\"> pnpm add -D sass</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\"># .less</span></span><br><span class=\"line\"> pnpm add -D less</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>使用在 .vue 文件模板中</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// .scss</span></span><br><span class=\"line\"> &lt;template&gt;</span><br><span class=\"line\">     <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;root&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">         <span class=\"tag\">&lt;<span class=\"name\">h3</span>&gt;</span>欢迎使用 scss<span class=\"tag\">&lt;/<span class=\"name\">h3</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">     <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"> &lt;/template&gt;</span><br><span class=\"line\"> <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;scss&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">   .root &#123;&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\"> <span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// .less</span></span><br><span class=\"line\"> <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">     <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;root&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">         <span class=\"tag\">&lt;<span class=\"name\">h3</span>&gt;</span>欢迎使用 less<span class=\"tag\">&lt;/<span class=\"name\">h3</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">     <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"> <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span></span><br><span class=\"line\"> <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;less&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">   .root &#123;&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\"> <span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<h1 id=\"7-集成-axios\"><a class=\"markdownIt-Anchor\" href=\"#7-集成-axios\">#</a> 7. 集成  <code>axios</code></h1>\n<p><code>axios</code>  是一个基于 promise 的 HTTP 库，可以用在浏览器和 node.js 中。</p>\n<h2 id=\"安装-4\"><a class=\"markdownIt-Anchor\" href=\"#安装-4\">#</a> 安装</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> pnpm i axios</span><br></pre></td></tr></table></figure>\n<h2 id=\"使用-4\"><a class=\"markdownIt-Anchor\" href=\"#使用-4\">#</a> 使用：</h2>\n<ol>\n<li>新建 src/utils/axios.ts</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios, &#123; <span class=\"title class_\">AxiosResponse</span>, <span class=\"title class_\">AxiosRequestConfig</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;axios&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> service = axios.<span class=\"title function_\">create</span>(); <span class=\"comment\">// Request interceptors</span></span><br><span class=\"line\"></span><br><span class=\"line\">service.<span class=\"property\">interceptors</span>.<span class=\"property\">request</span>.<span class=\"title function_\">use</span>(</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">config: AxiosRequestConfig</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// do something</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> config;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">error: <span class=\"built_in\">any</span></span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"title class_\">Promise</span>.<span class=\"title function_\">reject</span>(error);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">); <span class=\"comment\">// Response interceptors</span></span><br><span class=\"line\"></span><br><span class=\"line\">service.<span class=\"property\">interceptors</span>.<span class=\"property\">response</span>.<span class=\"title function_\">use</span>(</span><br><span class=\"line\">  <span class=\"keyword\">async</span> (<span class=\"attr\">response</span>: <span class=\"title class_\">AxiosResponse</span>) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"comment\">// do something</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">error: <span class=\"built_in\">any</span></span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// do something</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title class_\">Promise</span>.<span class=\"title function_\">reject</span>(error);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> service;</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>在页面中使用即可</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script lang=<span class=\"string\">&quot;ts&quot;</span>&gt;</span><br><span class=\"line\">    <span class=\"keyword\">import</span> request <span class=\"keyword\">from</span> <span class=\"string\">&#x27;@/utils/axios&#x27;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"title function_\">requestRes</span> = <span class=\"keyword\">async</span> (<span class=\"params\"></span>) =&gt; &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> result = <span class=\"keyword\">await</span> <span class=\"title function_\">request</span>(&#123;</span><br><span class=\"line\">                    <span class=\"attr\">url</span>: <span class=\"string\">&#x27;/api/xxx&#x27;</span>,</span><br><span class=\"line\">                    <span class=\"attr\">method</span>: <span class=\"string\">&#x27;get&#x27;</span></span><br><span class=\"line\">                  &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<h2 id=\"封装请求参数和响应数据的所有-api-可选项\"><a class=\"markdownIt-Anchor\" href=\"#封装请求参数和响应数据的所有-api-可选项\">#</a> 封装请求参数和响应数据的所有 api (可选项)</h2>\n<ol>\n<li>新建  <code>src/api/index.ts</code></li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> login <span class=\"keyword\">from</span> <span class=\"string\">&quot;./module/login&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> index <span class=\"keyword\">from</span> <span class=\"string\">&quot;./module/index&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title class_\">Object</span>.<span class=\"title function_\">assign</span>(&#123;&#125;, login, index);</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>新建  <code>src/api/module/login.ts</code>  和  <code>src/api/module/index.ts</code></li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> request <span class=\"keyword\">from</span> <span class=\"string\">&quot;@/utils/axios&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 登录</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> <span class=\"title class_\">IResponseType</span>&lt;P = &#123;&#125;&gt; &#123;</span><br><span class=\"line\">  code?: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  <span class=\"attr\">status</span>: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  <span class=\"attr\">msg</span>: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"attr\">data</span>: P;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">interface</span> <span class=\"title class_\">ILogin</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">token</span>: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"attr\">expires</span>: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> <span class=\"title function_\">login</span> = (<span class=\"params\">username: <span class=\"built_in\">string</span>, password: <span class=\"built_in\">string</span></span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> request&lt;<span class=\"title class_\">IResponseType</span>&lt;<span class=\"title class_\">ILogin</span>&gt;&gt;(&#123;</span><br><span class=\"line\">    <span class=\"attr\">url</span>: <span class=\"string\">&quot;/api/auth/login&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">method</span>: <span class=\"string\">&quot;post&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">data</span>: &#123;</span><br><span class=\"line\">      username,</span><br><span class=\"line\">      password,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>由于使用了 typescript，所以需新增  <code>src/types/shims-axios.d.ts</code></li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">AxiosRequestConfig</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;axios&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 自定义扩展axios模块</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> <span class=\"variable\">Maybe</span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"variable language_\">module</span> <span class=\"string\">&quot;axios&quot;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">AxiosInstance</span> &#123;</span><br><span class=\"line\">    &lt;T = <span class=\"built_in\">any</span>&gt;(<span class=\"attr\">config</span>: <span class=\"title class_\">AxiosRequestConfig</span>): <span class=\"title class_\">Promise</span>&lt;T&gt;;</span><br><span class=\"line\">    request&lt;T = <span class=\"built_in\">any</span>&gt;(<span class=\"attr\">config</span>: <span class=\"title class_\">AxiosRequestConfig</span>): <span class=\"title class_\">Promise</span>&lt;T&gt;;</span><br><span class=\"line\">    get&lt;T = <span class=\"built_in\">any</span>&gt;(<span class=\"attr\">url</span>: <span class=\"built_in\">string</span>, config?: <span class=\"title class_\">AxiosRequestConfig</span>): <span class=\"title class_\">Promise</span>&lt;T&gt;;</span><br><span class=\"line\">    <span class=\"keyword\">delete</span>&lt;T = <span class=\"built_in\">any</span>&gt;(<span class=\"attr\">url</span>: <span class=\"built_in\">string</span>, config?: <span class=\"title class_\">AxiosRequestConfig</span>): <span class=\"title class_\">Promise</span>&lt;T&gt;;</span><br><span class=\"line\">    head&lt;T = <span class=\"built_in\">any</span>&gt;(<span class=\"attr\">url</span>: <span class=\"built_in\">string</span>, config?: <span class=\"title class_\">AxiosRequestConfig</span>): <span class=\"title class_\">Promise</span>&lt;T&gt;;</span><br><span class=\"line\">    post&lt;T = <span class=\"built_in\">any</span>&gt;(<span class=\"attr\">url</span>: <span class=\"built_in\">string</span>, data?: <span class=\"built_in\">any</span>, config?: <span class=\"title class_\">AxiosRequestConfig</span>): <span class=\"title class_\">Promise</span>&lt;T&gt;;</span><br><span class=\"line\">    put&lt;T = <span class=\"built_in\">any</span>&gt;(<span class=\"attr\">url</span>: <span class=\"built_in\">string</span>, data?: <span class=\"built_in\">any</span>, config?: <span class=\"title class_\">AxiosRequestConfig</span>): <span class=\"title class_\">Promise</span>&lt;T&gt;;</span><br><span class=\"line\">    patch&lt;T = <span class=\"built_in\">any</span>&gt;(<span class=\"attr\">url</span>: <span class=\"built_in\">string</span>, data?: <span class=\"built_in\">any</span>, config?: <span class=\"title class_\">AxiosRequestConfig</span>): <span class=\"title class_\">Promise</span>&lt;T&gt;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>在  <code>src/pages/request.vue</code>  页面中使用</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script lang=<span class=\"string\">&quot;ts&quot;</span>&gt;</span><br><span class=\"line\">    <span class=\"keyword\">import</span> <span class=\"variable constant_\">API</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;@/api&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"title function_\">requestRes</span> = <span class=\"keyword\">async</span> (<span class=\"params\"></span>) =&gt; &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> result = <span class=\"keyword\">await</span> <span class=\"variable constant_\">API</span>.<span class=\"title function_\">login</span>(<span class=\"string\">&#x27;zhangsan&#x27;</span>, <span class=\"string\">&#x27;123456&#x27;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h1 id=\"8-css-的-ui-样式库\"><a class=\"markdownIt-Anchor\" href=\"#8-css-的-ui-样式库\">#</a> 8. css 的 UI 样式库</h1>\n<blockquote>\n<p>可选很多，根据自己项目的需求去进行选择即可</p>\n</blockquote>\n<p><strong>注意：UI 库一般需要按需引入（下面以  <code>element-plus</code>  为例）</strong></p>\n<ol>\n<li>安装  <code>vite-plugin-style-import</code></li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pnpm i vite-plugin-style-import --save-dev</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>修改  <code>vite.config.ts</code></li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">import</span> styleImport <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vite-plugin-style-import&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">defineConfig</span>(&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">        <span class=\"title function_\">vue</span>(),</span><br><span class=\"line\">        <span class=\"title function_\">styleImport</span>(&#123;</span><br><span class=\"line\">            <span class=\"attr\">libs</span>: [</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    <span class=\"attr\">libraryName</span>: <span class=\"string\">&#x27;element-plus&#x27;</span>,</span><br><span class=\"line\">                    <span class=\"attr\">esModule</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">                    <span class=\"attr\">resolveStyle</span>: <span class=\"function\">(<span class=\"params\">name</span>) =&gt;</span> &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">return</span> <span class=\"string\">`element-plus/lib/theme-chalk/<span class=\"subst\">$&#123;name&#125;</span>.css`</span>;</span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    <span class=\"attr\">ensureStyleFile</span>: <span class=\"literal\">true</span> <span class=\"comment\">// 忽略文件是否存在, 导入不存在的CSS文件时防止错误。</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h1 id=\"9-使用-commitizen-规范-git-提交\"><a class=\"markdownIt-Anchor\" href=\"#9-使用-commitizen-规范-git-提交\">#</a> 9. 使用 <a href=\"https://github.com/commitizen/cz-cli\">commitizen</a> 规范 git 提交</h1>\n<p>为了使团队多人协作更加的规范，所以需要每次在 git 提交的时候，做一次硬性规范提交，规范 git 的提交信息</p>\n<h2 id=\"安装-commitizen-交互式提交-自定义提示文案-commit-规范\"><a class=\"markdownIt-Anchor\" href=\"#安装-commitizen-交互式提交-自定义提示文案-commit-规范\">#</a> 安装  <code>commitizen</code>  (交互式提交 + 自定义提示文案 + Commit 规范)</h2>\n<ol>\n<li>安装</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pnpm install -D commitizen cz-conventional-changelog @commitlint/config-conventional @commitlint/cli commitlint-config-cz cz-customizable</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>配置  <code>package.json</code></li>\n</ol>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"attr\">&quot;scripts&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;commit:comment&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;引导设置规范化的提交信息&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;commit&quot;</span><span class=\"punctuation\">:</span><span class=\"string\">&quot;git-cz&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">&quot;config&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;commitizen&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;path&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;node_modules/cz-customizable&quot;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  ...</span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>新增配置  <code>commitlint.config.js</code></li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">  <span class=\"attr\">extends</span>: [<span class=\"string\">&quot;@commitlint/config-conventional&quot;</span>, <span class=\"string\">&quot;cz&quot;</span>],</span><br><span class=\"line\">  <span class=\"attr\">rules</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;type-enum&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">2</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;always&quot;</span>,</span><br><span class=\"line\">      [</span><br><span class=\"line\">        <span class=\"string\">&quot;feature&quot;</span>, <span class=\"comment\">// 新功能（feature）</span></span><br><span class=\"line\">        <span class=\"string\">&quot;bug&quot;</span>, <span class=\"comment\">// 此项特别针对bug号，用于向测试反馈bug列表的bug修改情况</span></span><br><span class=\"line\">        <span class=\"string\">&quot;fix&quot;</span>, <span class=\"comment\">// 修补bug</span></span><br><span class=\"line\">        <span class=\"string\">&quot;ui&quot;</span>, <span class=\"comment\">// 更新 ui</span></span><br><span class=\"line\">        <span class=\"string\">&quot;docs&quot;</span>, <span class=\"comment\">// 文档（documentation）</span></span><br><span class=\"line\">        <span class=\"string\">&quot;style&quot;</span>, <span class=\"comment\">// 格式（不影响代码运行的变动）</span></span><br><span class=\"line\">        <span class=\"string\">&quot;perf&quot;</span>, <span class=\"comment\">// 性能优化</span></span><br><span class=\"line\">        <span class=\"string\">&quot;release&quot;</span>, <span class=\"comment\">// 发布</span></span><br><span class=\"line\">        <span class=\"string\">&quot;deploy&quot;</span>, <span class=\"comment\">// 部署</span></span><br><span class=\"line\">        <span class=\"string\">&quot;refactor&quot;</span>, <span class=\"comment\">// 重构（即不是新增功能，也不是修改bug的代码变动）</span></span><br><span class=\"line\">        <span class=\"string\">&quot;test&quot;</span>, <span class=\"comment\">// 增加测试</span></span><br><span class=\"line\">        <span class=\"string\">&quot;chore&quot;</span>, <span class=\"comment\">// 构建过程或辅助工具的变动</span></span><br><span class=\"line\">        <span class=\"string\">&quot;revert&quot;</span>, <span class=\"comment\">// feat(pencil): add ‘graphiteWidth’ option (撤销之前的commit)</span></span><br><span class=\"line\">        <span class=\"string\">&quot;merge&quot;</span>, <span class=\"comment\">// 合并分支， 例如： merge（前端页面）： feature-xxxx修改线程地址</span></span><br><span class=\"line\">        <span class=\"string\">&quot;build&quot;</span>, <span class=\"comment\">// 打包</span></span><br><span class=\"line\">      ],</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"comment\">// &lt;type&gt; 格式 小写</span></span><br><span class=\"line\">    <span class=\"string\">&quot;type-case&quot;</span>: [<span class=\"number\">2</span>, <span class=\"string\">&quot;always&quot;</span>, <span class=\"string\">&quot;lower-case&quot;</span>],</span><br><span class=\"line\">    <span class=\"comment\">// &lt;type&gt; 不能为空</span></span><br><span class=\"line\">    <span class=\"string\">&quot;type-empty&quot;</span>: [<span class=\"number\">2</span>, <span class=\"string\">&quot;never&quot;</span>],</span><br><span class=\"line\">    <span class=\"comment\">// &lt;scope&gt; 范围不能为空</span></span><br><span class=\"line\">    <span class=\"string\">&quot;scope-empty&quot;</span>: [<span class=\"number\">2</span>, <span class=\"string\">&quot;never&quot;</span>],</span><br><span class=\"line\">    <span class=\"comment\">// &lt;scope&gt; 范围格式</span></span><br><span class=\"line\">    <span class=\"string\">&quot;scope-case&quot;</span>: [<span class=\"number\">0</span>],</span><br><span class=\"line\">    <span class=\"comment\">// &lt;subject&gt; 主要 message 不能为空</span></span><br><span class=\"line\">    <span class=\"string\">&quot;subject-empty&quot;</span>: [<span class=\"number\">2</span>, <span class=\"string\">&quot;never&quot;</span>],</span><br><span class=\"line\">    <span class=\"comment\">// &lt;subject&gt; 以什么为结束标志，禁用</span></span><br><span class=\"line\">    <span class=\"string\">&quot;subject-full-stop&quot;</span>: [<span class=\"number\">0</span>, <span class=\"string\">&quot;never&quot;</span>],</span><br><span class=\"line\">    <span class=\"comment\">// &lt;subject&gt; 格式，禁用</span></span><br><span class=\"line\">    <span class=\"string\">&quot;subject-case&quot;</span>: [<span class=\"number\">0</span>, <span class=\"string\">&quot;never&quot;</span>],</span><br><span class=\"line\">    <span class=\"comment\">// &lt;body&gt; 以空行开头</span></span><br><span class=\"line\">    <span class=\"string\">&quot;body-leading-blank&quot;</span>: [<span class=\"number\">1</span>, <span class=\"string\">&quot;always&quot;</span>],</span><br><span class=\"line\">    <span class=\"string\">&quot;header-max-length&quot;</span>: [<span class=\"number\">0</span>, <span class=\"string\">&quot;always&quot;</span>, <span class=\"number\">72</span>],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>自定义提示则添加  <code>.cz-config.js</code></li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">  <span class=\"attr\">types</span>: [</span><br><span class=\"line\">    &#123; <span class=\"attr\">value</span>: <span class=\"string\">&quot;feature&quot;</span>, <span class=\"attr\">name</span>: <span class=\"string\">&quot;feature:  增加新功能&quot;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">value</span>: <span class=\"string\">&quot;bug&quot;</span>, <span class=\"attr\">name</span>: <span class=\"string\">&quot;bug:      测试反馈bug列表中的bug号&quot;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">value</span>: <span class=\"string\">&quot;fix&quot;</span>, <span class=\"attr\">name</span>: <span class=\"string\">&quot;fix:      修复bug&quot;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">value</span>: <span class=\"string\">&quot;ui&quot;</span>, <span class=\"attr\">name</span>: <span class=\"string\">&quot;ui:       更新UI&quot;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">value</span>: <span class=\"string\">&quot;docs&quot;</span>, <span class=\"attr\">name</span>: <span class=\"string\">&quot;docs:     文档变更&quot;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">value</span>: <span class=\"string\">&quot;style&quot;</span>, <span class=\"attr\">name</span>: <span class=\"string\">&quot;style:    代码格式(不影响代码运行的变动)&quot;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">value</span>: <span class=\"string\">&quot;perf&quot;</span>, <span class=\"attr\">name</span>: <span class=\"string\">&quot;perf:     性能优化&quot;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">value</span>: <span class=\"string\">&quot;refactor&quot;</span>, <span class=\"attr\">name</span>: <span class=\"string\">&quot;refactor: 重构(既不是增加feature，也不是修复bug)&quot;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">value</span>: <span class=\"string\">&quot;release&quot;</span>, <span class=\"attr\">name</span>: <span class=\"string\">&quot;release:  发布&quot;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">value</span>: <span class=\"string\">&quot;deploy&quot;</span>, <span class=\"attr\">name</span>: <span class=\"string\">&quot;deploy:   部署&quot;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">value</span>: <span class=\"string\">&quot;test&quot;</span>, <span class=\"attr\">name</span>: <span class=\"string\">&quot;test:     增加测试&quot;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">value</span>: <span class=\"string\">&quot;chore&quot;</span>, <span class=\"attr\">name</span>: <span class=\"string\">&quot;chore:    构建过程或辅助工具的变动(更改配置文件)&quot;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">value</span>: <span class=\"string\">&quot;revert&quot;</span>, <span class=\"attr\">name</span>: <span class=\"string\">&quot;revert:   回退&quot;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">value</span>: <span class=\"string\">&quot;build&quot;</span>, <span class=\"attr\">name</span>: <span class=\"string\">&quot;build:    打包&quot;</span> &#125;,</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"comment\">// override the messages, defaults are as follows</span></span><br><span class=\"line\">  <span class=\"attr\">messages</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">type</span>: <span class=\"string\">&quot;请选择提交类型:&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">customScope</span>: <span class=\"string\">&quot;请输入您修改的范围(可选):&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">subject</span>: <span class=\"string\">&quot;请简要描述提交 message (必填):&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">body</span>: <span class=\"string\">&quot;请输入详细描述(可选，待优化去除，跳过即可):&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">footer</span>: <span class=\"string\">&quot;请输入要关闭的issue(待优化去除，跳过即可):&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">confirmCommit</span>: <span class=\"string\">&quot;确认使用以上信息提交？(y/n/e/h)&quot;</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">allowCustomScopes</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  <span class=\"attr\">skipQuestions</span>: [<span class=\"string\">&quot;body&quot;</span>, <span class=\"string\">&quot;footer&quot;</span>],</span><br><span class=\"line\">  <span class=\"attr\">subjectLimit</span>: <span class=\"number\">72</span>,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ol start=\"5\">\n<li>交互界面测试</li>\n</ol>\n<p><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d2be96b13d3c427e919b11e5bc5404e4~tplv-k3u1fbpfcp-watermark.image?\" alt=\"carbon.png\"></p>\n<ul>\n<li>到目前只是规范了 git 的提交信息，我们对提交前代码的检查还没有做到位，例如 ESLint、Prettier，毕竟谁都会有疏忽的时候，</li>\n<li>那么现在我们的 husky 就闪亮登场了</li>\n</ul>\n<h2 id=\"安装-husky\"><a class=\"markdownIt-Anchor\" href=\"#安装-husky\">#</a> 安装 husky</h2>\n<ol>\n<li>安装</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1.安装</span></span><br><span class=\"line\">pnpm i husky lint-staged -D</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2.生成 .husky 的文件夹</span></span><br><span class=\"line\">npx husky install</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3.添加 hooks，会在 .husky 目录下生成一个 pre-commit 脚本文件</span></span><br><span class=\"line\">npx husky add .husky/pre-commit <span class=\"string\">&quot;npx --no-install lint-staged&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 4.添加 commit-msg</span></span><br><span class=\"line\">npx husky add .husky/commit-msg <span class=\"string\">&#x27;npx --no-install commitlint --edit &quot;$1&quot;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 5. 使用 `git commit -m &quot;message&quot;` 就会看到 hook 生效了。</span></span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>添加配置  <code>package.json</code></li>\n</ol>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"attr\">&quot;lint-staged&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    \t<span class=\"attr\">&quot;*.&#123;js,ts&#125;&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">            <span class=\"string\">&quot;npm run eslint&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"string\">&quot;npm run prettier&quot;</span></span><br><span class=\"line\">    \t<span class=\"punctuation\">]</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  ...</span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"提交日志可选\"><a class=\"markdownIt-Anchor\" href=\"#提交日志可选\">#</a> 提交日志（可选）</h2>\n<ul>\n<li><a href=\"https://github.com/conventional-changelog/standard-version\">standard-version</a> 或者 <a href=\"https://github.com/conventional-changelog/conventional-changelog\">conventional-changelog</a></li>\n</ul>\n<h1 id=\"最后\"><a class=\"markdownIt-Anchor\" href=\"#最后\">#</a> 最后</h1>\n<p>该系列会是一个持续更新系列，关于整个《Vite 从入门到精通》，我主要会从如下图几个方面讲解，请大家拭目以待吧！！！</p>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/52ee2485e3484e8e8d995fbbb7e86835~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp?\" alt=\"Untitled.png\"></p>\n<p><code>靓仔靓女们</code> ，都看到这里了，要不点个赞再走呗 🌹🌹🌹</p>\n",
            "tags": [
                "TypeScript",
                "vue3",
                "pinia",
                "vite",
                "VueUse"
            ]
        },
        {
            "id": "https://eucli.top/2023/03/15/Vue3%E8%A7%82%E5%AF%9F%E7%AC%94%E8%AE%B0/",
            "url": "https://eucli.top/2023/03/15/Vue3%E8%A7%82%E5%AF%9F%E7%AC%94%E8%AE%B0/",
            "title": "Vue3观察笔记",
            "date_published": "2023-03-15T10:20:34.000Z",
            "content_html": "<h1 id=\"介绍-vue\"><a class=\"markdownIt-Anchor\" href=\"#介绍-vue\">#</a> 介绍 vue</h1>\n<p>Vue 是一套用于构建用户界面的渐进式框架。与其它大型框架不同的是，Vue 被设计为可以自底向上逐层应用。Vue 的核心库只关注视图层，不仅易于上手，还便于与第三方库或既有项目整合。另一方面，当与现代化的工具链以及各种支持类库结合使用时，Vue 也完全能够为复杂的单页应用提供驱动。</p>\n<ul>\n<li>MVVM（Model-View-ViewModel）架构</li>\n</ul>\n<ol>\n<li>View：视图层（UI 用户界面）</li>\n<li>ViewModel：业务逻辑层（一切 js 可视为业务逻辑）</li>\n<li>Model：数据层（存储数据及对数据的处理如增删改查）</li>\n</ol>\n<h1 id=\"vue3-新特性介绍\"><a class=\"markdownIt-Anchor\" href=\"#vue3-新特性介绍\">#</a> Vue3 新特性介绍</h1>\n<h2 id=\"一-重写双向绑定\"><a class=\"markdownIt-Anchor\" href=\"#一-重写双向绑定\">#</a> 一、重写双向绑定</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vue2</span><br><span class=\"line\">基于<span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>()实现</span><br><span class=\"line\"></span><br><span class=\"line\">vue3 基于<span class=\"title class_\">Proxy</span></span><br><span class=\"line\">proxy与<span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>(obj, prop, desc)方式相比有以下优势：</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//丢掉麻烦的备份数据</span></span><br><span class=\"line\"><span class=\"comment\">//省去for in 循环</span></span><br><span class=\"line\"><span class=\"comment\">//可以监听数组变化</span></span><br><span class=\"line\"><span class=\"comment\">//代码更简化</span></span><br><span class=\"line\"><span class=\"comment\">//可以监听动态新增的属性；</span></span><br><span class=\"line\"><span class=\"comment\">//可以监听删除的属性 ；</span></span><br><span class=\"line\"><span class=\"comment\">//可以监听数组的索引和 length 属性；</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> proxyObj = <span class=\"keyword\">new</span> <span class=\"title class_\">Proxy</span>(obj,&#123;</span><br><span class=\"line\">        get : <span class=\"keyword\">function</span> (<span class=\"params\">target,prop</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> prop <span class=\"keyword\">in</span> target ? target[prop] : <span class=\"number\">0</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        set : <span class=\"keyword\">function</span> (<span class=\"params\">target,prop,value</span>) &#123;</span><br><span class=\"line\">            target[prop] = <span class=\"number\">888</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br></pre></td></tr></table></figure>\n<h2 id=\"二-vue3-优化-vdom\"><a class=\"markdownIt-Anchor\" href=\"#二-vue3-优化-vdom\">#</a> 二、Vue3 优化 Vdom</h2>\n<p>在 Vue2 中，每次更新 diff, 都是全量对比，Vue3 则只对比带有标记的，这样大大减少了非动态内容的对比消耗</p>\n<h3 id=\"patch-flag-优化静态树\"><a class=\"markdownIt-Anchor\" href=\"#patch-flag-优化静态树\">#</a> patch flag 优化静态树</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>Hello world!<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>Hello world!<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>Hello world!<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>Hello world!<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>Hello world!<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>Hello world! <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>Vue3 编译后的 Vdom 是这个样子的:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">function</span> <span class=\"title function_\">render</span>(<span class=\"params\">_ctx，_cache，$props，$setup，$data，$options</span>)&#123;<span class=\"keyword\">return</span> (<span class=\"title function_\">_openBlock</span>(),<span class=\"title function_\">_createBlock</span>(_Fragment,<span class=\"literal\">null</span>，[</span><br><span class=\"line\"><span class=\"title function_\">_createvNode</span>( <span class=\"string\">&quot;span&quot;</span>, <span class=\"literal\">null</span>,<span class=\"string\">&quot;Hello world ! &quot;</span>),</span><br><span class=\"line\"><span class=\"title function_\">_createvNode</span>( <span class=\"string\">&quot;span&quot;</span>,<span class=\"literal\">null</span>，<span class=\"string\">&quot;Hello world! &quot;</span>),</span><br><span class=\"line\"><span class=\"title function_\">_createvNode</span>( <span class=\"string\">&quot;span&quot;</span>，<span class=\"literal\">null</span>，<span class=\"string\">&quot;Hello world! &quot;</span>),</span><br><span class=\"line\"><span class=\"title function_\">_createvNode</span>( <span class=\"string\">&quot;span&quot;</span>, <span class=\"literal\">null</span>，<span class=\"string\">&quot;Hello world! &quot;</span>),</span><br><span class=\"line\"><span class=\"title function_\">_createVNode</span>(<span class=\"string\">&quot;span&quot;</span>, <span class=\"literal\">null</span>，<span class=\"title function_\">_toDisplaystring</span>(_ctx.<span class=\"property\">msg</span>)，<span class=\"number\">1</span><span class=\"comment\">/* TEXT */</span>)，</span><br><span class=\"line\"><span class=\"title function_\">_createvNode</span>( <span class=\"string\">&quot;span&quot;</span>, <span class=\"literal\">null</span>，<span class=\"string\">&quot;Hello world! &quot;</span>),</span><br><span class=\"line\"><span class=\"title function_\">_createvNode</span>( <span class=\"string\">&quot;span&quot;</span>, <span class=\"literal\">null</span>，<span class=\"string\">&quot;Hello world! &quot;</span>)]，<span class=\"number\">64</span><span class=\"comment\">/*STABLE_FRAGMENT */</span>))</span><br></pre></td></tr></table></figure>\n<p>新增了 patch flag 标记</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable constant_\">TEXT</span> = <span class=\"number\">1</span> <span class=\"comment\">// 动态文本节点</span></span><br><span class=\"line\"><span class=\"variable constant_\">CLASS</span>=<span class=\"number\">1</span>&lt;&lt;<span class=\"number\">1</span>,<span class=\"number\">1</span> <span class=\"comment\">// 2//动态class</span></span><br><span class=\"line\"><span class=\"variable constant_\">STYLE</span>=<span class=\"number\">1</span>&lt;&lt;<span class=\"number\">2</span>，<span class=\"comment\">// 4 //动态style</span></span><br><span class=\"line\"><span class=\"variable constant_\">PROPS</span>=<span class=\"number\">1</span>&lt;&lt;<span class=\"number\">3</span>,<span class=\"comment\">// 8 //动态属性，但不包含类名和样式</span></span><br><span class=\"line\"><span class=\"title class_\">FULLPR0PS</span>=<span class=\"number\">1</span>&lt;&lt;<span class=\"number\">4</span>,<span class=\"comment\">// 16 //具有动态key属性，当key改变时，需要进行完整的diff比较。</span></span><br><span class=\"line\"><span class=\"variable constant_\">HYDRATE_</span> <span class=\"variable constant_\">EVENTS</span> = <span class=\"number\">1</span> &lt;&lt; <span class=\"number\">5</span>，<span class=\"comment\">// 32 //带有监听事件的节点</span></span><br><span class=\"line\"><span class=\"variable constant_\">STABLE</span> <span class=\"variable constant_\">FRAGMENT</span> = <span class=\"number\">1</span> &lt;&lt; <span class=\"number\">6</span>, <span class=\"comment\">// 64 //一个不会改变子节点顺序的fragment</span></span><br><span class=\"line\"><span class=\"variable constant_\">KEYED_</span> <span class=\"variable constant_\">FRAGMENT</span> = <span class=\"number\">1</span> &lt;&lt; <span class=\"number\">7</span>, <span class=\"comment\">// 128 //带有key属性的fragment 或部分子字节有key</span></span><br><span class=\"line\"><span class=\"variable constant_\">UNKEYED</span> <span class=\"variable constant_\">FRAGMENT</span> = <span class=\"number\">1</span>&lt;&lt; <span class=\"number\">8</span>, <span class=\"comment\">// 256 //子节点没有key 的fragment</span></span><br><span class=\"line\"><span class=\"variable constant_\">NEED</span> <span class=\"variable constant_\">PATCH</span> = <span class=\"number\">1</span> &lt;&lt; <span class=\"number\">9</span>, <span class=\"comment\">// 512 //一个节点只会进行非props比较</span></span><br><span class=\"line\"><span class=\"variable constant_\">DYNAMIC_SLOTS</span> = <span class=\"number\">1</span> &lt;&lt; <span class=\"number\">10</span> <span class=\"comment\">// 1024 // 动态slot</span></span><br><span class=\"line\"><span class=\"variable constant_\">HOISTED</span> = -<span class=\"number\">1</span> <span class=\"comment\">// 静态节点</span></span><br><span class=\"line\"><span class=\"variable constant_\">BALL</span> = -<span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n<p>我们发现创建动态 dom 元素的时候，Vdom 除了模拟出来了它的基本信息之外，还给它加了一个标记： 1 /_ TEXT _/</p>\n<p>这个标记就叫做 patch flag（补丁标记）</p>\n<p>patch flag 的强大之处在于，当你的 diff 算法走到 _createBlock 函数的时候，会忽略所有的静态节点，只对有标记的动态节点进行对比，而且在多层的嵌套下依然有效。</p>\n<p>尽管 JavaScript 做 Vdom 的对比已经非常的快，但是 patch flag 的出现还是让 Vue3 的 Vdom 的性能得到了很大的提升，尤其是在针对大组件的时候。</p>\n<h2 id=\"三-vue3-fragment\"><a class=\"markdownIt-Anchor\" href=\"#三-vue3-fragment\">#</a> 三、Vue3 Fragment</h2>\n<p>vue3 允许我们支持多个根节点:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div&gt;12&lt;/div&gt;</span><br><span class=\"line\">  &lt;div&gt;23&lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br></pre></td></tr></table></figure>\n<p>同时支持 render JSX 写法:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">render</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (</span><br><span class=\"line\">            <span class=\"language-xml\"><span class=\"tag\">&lt;&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                &#123;this.visable ? (</span></span><br><span class=\"line\"><span class=\"language-xml\">                    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>&#123;this.obj.name&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                ) : (</span></span><br><span class=\"line\"><span class=\"language-xml\">                    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>&#123;this.obj.price&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                )&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">                <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">v-model</span>=<span class=\"string\">&#123;this.val&#125;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">input</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                &#123;[1, 2, 3].map((v) =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"language-xml\">                   return <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>&#123;v&#125;-----<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span>;</span></span><br><span class=\"line\"><span class=\"language-xml\">                &#125;)&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">            <span class=\"tag\">&lt;/&gt;</span></span></span><br><span class=\"line\">        );</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>同时新增了 Suspense teleport 和 多 v-model 用法</p>\n<h2 id=\"四-vue3-tree-shaking\"><a class=\"markdownIt-Anchor\" href=\"#四-vue3-tree-shaking\">#</a> 四、Vue3 Tree shaking</h2>\n<p>简单来讲，就是在保持代码运行结果不变的前提下，去除无用的代码</p>\n<p>在 Vue2 中，无论我们使用什么功能，它们最终都会出现在生产代码中。主要原因是 Vue 实例在项目中是单例的，捆绑程序无法检测到该对象的哪些属性在代码中被使用到</p>\n<p>而 Vue3 源码引入 tree shaking 特性，将全局 API 进行分块。如果你不使用其某些功能，它们将不会包含在你的基础包中</p>\n<p>就是比如你要用 watch 就是 import {watch} from ‘vue’ 其他的 computed 没用到就不会给你打包减少体积</p>\n<h2 id=\"五-vue-3-composition-api\"><a class=\"markdownIt-Anchor\" href=\"#五-vue-3-composition-api\">#</a> 五、Vue 3 Composition Api</h2>\n<h1 id=\"vite-目录-vue-单文件组件-npm-run-dev-详解\"><a class=\"markdownIt-Anchor\" href=\"#vite-目录-vue-单文件组件-npm-run-dev-详解\">#</a> Vite 目录 &amp; Vue 单文件组件 &amp; npm run dev 详解</h1>\n<h2 id=\"vite-目录\"><a class=\"markdownIt-Anchor\" href=\"#vite-目录\">#</a> Vite 目录</h2>\n<ul>\n<li>\n<p>publicL: 下面的不会被编译 可以存放静态资源</p>\n</li>\n<li>\n<p>assets: 下面可以存放可编译的静态资源</p>\n</li>\n<li>\n<p>components: 下面用来存放我们的组件</p>\n</li>\n<li>\n<p>App.vue: 是全局组件</p>\n</li>\n<li>\n<p>main.ts: 全局的 ts 文件</p>\n</li>\n<li>\n<p>index.html: 非常重要的入口文件 （webpack，rollup 他们的入口文件都是 enrty input 是一个 js 文件 而 Vite 的入口文件是一个 html 文件，他刚开始不会编译这些 js 文件 只有当你用到的时候 如 script src=“xxxxx.js” 会发起一个请求被 vite 拦截这时候才会解析 js 文件）</p>\n</li>\n<li>\n<p>vite.config.ts: 这是 vite 的配置文件具体配置项</p>\n</li>\n</ul>\n<h2 id=\"sfc-语法规范\"><a class=\"markdownIt-Anchor\" href=\"#sfc-语法规范\">#</a> SFC 语法规范</h2>\n<p><code>*.vue</code>  件都由三种类型的顶层语法块所组成： <code>&lt;template&gt;</code> 、 <code>&lt;script&gt;</code> 、 <code>&lt;style&gt;</code></p>\n<p><code>&lt;template&gt;</code> :</p>\n<ul>\n<li>每个  <code>*.vue</code>  文件最多可同时包含一个顶层  <code>&lt;template&gt;</code>  块。</li>\n<li>其中的内容会被提取出来并传递给 @vue/compiler-dom，预编译为 JavaScript 的渲染函数，并附属到导出的组件上作为其 render 选项。</li>\n</ul>\n<p><code>&lt;script&gt;</code> :</p>\n<ul>\n<li>\n<p>每一个  <code>*.vue </code> 文件可以有多个  <code>&lt;script&gt;</code>  块 (不包括 <code>&lt;script setup&gt;</code> )。</p>\n</li>\n<li>\n<p>该脚本将作为 ES Module 来执行。</p>\n</li>\n<li>\n<p>其默认导出的内容应该是 Vue 组件选项对象，它要么是一个普通的对象，要么是 defineComponent 的返回值。</p>\n</li>\n</ul>\n<p><code>&lt;script setup&gt;</code> :</p>\n<ul>\n<li>\n<p>每个  <code>*.vue </code> 文件最多只能有一个  <code>&lt;script setup&gt;</code>  块 (不包括常规的  <code>&lt;script&gt;</code> )</p>\n</li>\n<li>\n<p>该脚本会被预处理并作为组件的  <code>setup()</code>  函数使用，也就是说它会在每个组件实例中执行。 <code>&lt;script setup&gt;</code>  的顶层绑定会自动暴露给模板。</p>\n</li>\n</ul>\n<p><code>&lt;style&gt;</code> :<br>\n 一个 <code>*.vue</code>  文件可以包含多个  <code>&lt;style&gt;</code>  标签。</p>\n<p><code>&lt;style&gt;</code>  标签可以通过 scoped 或 module attribute (更多详情请查看 SFC 样式特性) 将样式封装在当前组件内。</p>\n<h2 id=\"npm-run-dev-详解\"><a class=\"markdownIt-Anchor\" href=\"#npm-run-dev-详解\">#</a> npm run dev 详解</h2>\n<p>在我们执行这个命令的时候会去找 package.json 的 scripts 然后执行对应的 dev 命令</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;scripts&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;dev&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;vite &quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;serve&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;vite --mode production&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;build&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;vue-tsc &amp;&amp; vite build&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;preview&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;vite preview&quot;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br></pre></td></tr></table></figure>\n<p>那为什么我们不直接执行 vite 命令不是更方便吗？因为在我们的电脑上面并没有配置过相关命令 所以无法直接执行</p>\n<p>其实在我们执行 npm install 的时候（包含 vite） 会在 node_modules/.bin/ 创建好可执行文件。 <code>.bin</code>  目录，这个目录不是任何一个 npm 包。目录下的文件，表示这是一个个软链接，打开文件可以看到文件顶部写着 #!/bin/sh ，表示这是一个脚本</p>\n<p>在我们执行 npm run xxx npm 会通过软连接 查找这个软连接存在于源码目录 node_modules/vite</p>\n<p>所以 npm run xxx 的时候，就会到 node_modules/bin 中找对应的映射文件，然后再找到相应的 js 文件来执行</p>\n<ol>\n<li>\n<p>查找规则是先从当前项目的 node_modlue /bin 去找，</p>\n</li>\n<li>\n<p>找不到去全局的 node_module/bin 去找</p>\n</li>\n<li>\n<p>再找不到 去环境变量去找</p>\n</li>\n</ol>\n<h1 id=\"vue-核心虚拟-dom-和-diff-算法\"><a class=\"markdownIt-Anchor\" href=\"#vue-核心虚拟-dom-和-diff-算法\">#</a> Vue 核心虚拟 Dom 和 diff 算法</h1>\n<p><a href=\"https://xiaoman.blog.csdn.net/article/details/122778560\">https://xiaoman.blog.csdn.net/article/details/122778560</a></p>\n<h1 id=\"vue3-新语法糖setup-script\"><a class=\"markdownIt-Anchor\" href=\"#vue3-新语法糖setup-script\">#</a> vue3 新语法糖 ——setup script</h1>\n<ol>\n<li>\n<p>自动注册子组件<br>\n在引入子组件后，不需要再在 components 中注册就可以直接使用</p>\n</li>\n<li>\n<p>属性和方法无需返回<br>\n不用写 <code>return</code>  了，好耶！</p>\n</li>\n<li>\n<p>支持 props、emit 和 context。setup script 语法糖提供了三个新的 API 来供我们使用：defineProps、defineEmit 和 useContext。</p>\n</li>\n</ol>\n<h1 id=\"ref和-reactive\"><a class=\"markdownIt-Anchor\" href=\"#ref和-reactive\">#</a> ref () 和 reactive ()</h1>\n<ul>\n<li>reactive () 只适用于对象或数组，一般用于表单</li>\n<li>ref () 可以接受任何类型，ref 会返回一个包裹对象，并在  <code>.value </code> 属性下暴露内部值。在模板中使用时不需要使用  <code>.value</code> ：它会被自动解包</li>\n</ul>\n<h1 id=\"v-model\"><a class=\"markdownIt-Anchor\" href=\"#v-model\">#</a> v-model</h1>\n<p>使用范围：input、select、表单元素、自定义组件<br>\n v-model 其实是一个语法糖 通过 props 和 emit 组合而成的</p>\n<h1 id=\"自定义指令\"><a class=\"markdownIt-Anchor\" href=\"#自定义指令\">#</a> 自定义指令</h1>\n<h1 id=\"自定义-hooks\"><a class=\"markdownIt-Anchor\" href=\"#自定义-hooks\">#</a> 自定义 Hooks</h1>\n<p>主要用来处理复用代码逻辑的一些封装<br>\n这个在 vue2 就已经有一个东西是 Mixins，mixins 就是将这些多个相同的逻辑抽离出来，各个组件只需要引入 mixins，就能实现一次写代码，多组件受益的效果。弊端就是会涉及到覆盖的问题。第二点就是 变量来源不明确（隐式传入），不利于阅读，使代码变得难以维护。<br>\nVue3 的自定义的 hook：</p>\n<ul>\n<li>Vue3 的 hook 函数 相当于 vue2 的 mixin, 不同在与 hooks 是函数</li>\n<li>Vue3 的 hook 函数 可以帮助我们提高代码的复用性，让我们能在不同的组件中都利用 hooks 函数</li>\n</ul>\n<p>案例：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; onMounted &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">type <span class=\"title class_\">Options</span> = &#123;</span><br><span class=\"line\">  <span class=\"attr\">el</span>: string;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">type <span class=\"title class_\">Return</span> = &#123;</span><br><span class=\"line\">  <span class=\"title class_\">Baseurl</span>: string | <span class=\"literal\">null</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">function</span> (<span class=\"params\">option: Options</span>): <span class=\"title class_\">Promise</span>&lt;<span class=\"title class_\">Return</span>&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">onMounted</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> <span class=\"attr\">file</span>: <span class=\"title class_\">HTMLImageElement</span> = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(option.<span class=\"property\">el</span>) <span class=\"keyword\">as</span> <span class=\"title class_\">HTMLImageElement</span>;</span><br><span class=\"line\">      file.<span class=\"property\">onload</span> = (): <span class=\"function\"><span class=\"params\">void</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"title function_\">resolve</span>(&#123;</span><br><span class=\"line\">          <span class=\"title class_\">Baseurl</span>: <span class=\"title function_\">toBase64</span>(file),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> toBase64 = (<span class=\"attr\">el</span>: <span class=\"title class_\">HTMLImageElement</span>): <span class=\"function\"><span class=\"params\">string</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> <span class=\"attr\">canvas</span>: <span class=\"title class_\">HTMLCanvasElement</span> = <span class=\"variable language_\">document</span>.<span class=\"title function_\">createElement</span>(<span class=\"string\">&quot;canvas&quot;</span>);</span><br><span class=\"line\">      <span class=\"keyword\">const</span> ctx = canvas.<span class=\"title function_\">getContext</span>(<span class=\"string\">&quot;2d&quot;</span>) <span class=\"keyword\">as</span> <span class=\"title class_\">CanvasRenderingContext2D</span>;</span><br><span class=\"line\">      canvas.<span class=\"property\">width</span> = el.<span class=\"property\">width</span>;</span><br><span class=\"line\">      canvas.<span class=\"property\">height</span> = el.<span class=\"property\">height</span>;</span><br><span class=\"line\">      ctx.<span class=\"title function_\">drawImage</span>(el, <span class=\"number\">0</span>, <span class=\"number\">0</span>, canvas.<span class=\"property\">width</span>, canvas.<span class=\"property\">height</span>);</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(el.<span class=\"property\">width</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">return</span> canvas.<span class=\"title function_\">toDataURL</span>(<span class=\"string\">&quot;image/png&quot;</span>);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>案例二：自定义指令 + hooks 双管齐下<br>\n实现一个监听元素变化的 hook<br>\n 主要会用到一个新的 API resizeObserver 兼容性一般 可以做 polyfill<br>\n 但是他可以监听元素的变化 执行回调函数 返回 contentRect 里面有变化之后的宽高。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">App</span>, defineComponent, onMounted &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">useResize</span>(<span class=\"params\">el: HTMLElement, callback: (cr: DOMRectReadOnly, resize: ResizeObserver) =&gt; <span class=\"keyword\">void</span></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> <span class=\"attr\">resize</span>: <span class=\"title class_\">ResizeObserver</span>;</span><br><span class=\"line\">  resize = <span class=\"keyword\">new</span> <span class=\"title class_\">ResizeObserver</span>(<span class=\"function\">(<span class=\"params\">entries</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> entry <span class=\"keyword\">of</span> entries) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> cr = entry.<span class=\"property\">contentRect</span>;</span><br><span class=\"line\">      <span class=\"title function_\">callback</span>(cr, resize);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  resize.<span class=\"title function_\">observe</span>(el);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">install</span> = (<span class=\"params\">app: App</span>) =&gt; &#123;</span><br><span class=\"line\">  app.<span class=\"title function_\">directive</span>(<span class=\"string\">&quot;resize&quot;</span>, &#123;</span><br><span class=\"line\">    <span class=\"title function_\">mounted</span>(<span class=\"params\">el, binding</span>) &#123;</span><br><span class=\"line\">      <span class=\"title function_\">useResize</span>(el, binding.<span class=\"property\">value</span>);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">useResize.<span class=\"property\">install</span> = install;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> useResize;</span><br></pre></td></tr></table></figure>\n<h1 id=\"编写-vue3-插件\"><a class=\"markdownIt-Anchor\" href=\"#编写-vue3-插件\">#</a> 编写 Vue3 插件</h1>\n<p>插件是自包含的代码，通常向 Vue 添加全局级功能。你如果是一个对象需要有 install 方法 Vue 会帮你自动注入到 install 方法 你如果是 function 就直接当 install 方法去使用</p>\n<p>使用插件：在使用 createApp () 初始化 Vue 应用程序后，你可以通过调用 use () 方法将插件添加到你的应用程序中。</p>\n<ul>\n<li>案例：实现一个 Loading<br>\nLoading.Vue</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div v-if=&quot;isShow&quot; class=&quot;loading&quot;&gt;</span><br><span class=\"line\">    &lt;div class=&quot;loading-content&quot;&gt;Loading...&lt;/div&gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class=\"line\">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class=\"line\">const isShow = ref(false); //定位loading 的开关</span><br><span class=\"line\"></span><br><span class=\"line\">const show = () =&gt; &#123;</span><br><span class=\"line\">  isShow.value = true;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">const hide = () =&gt; &#123;</span><br><span class=\"line\">  isShow.value = false;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">//对外暴露 当前组件的属性和方法</span><br><span class=\"line\">defineExpose(&#123;</span><br><span class=\"line\">  isShow,</span><br><span class=\"line\">  show,</span><br><span class=\"line\">  hide,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;style scoped lang=&quot;less&quot;&gt;</span><br><span class=\"line\">.loading &#123;</span><br><span class=\"line\">  position: fixed;</span><br><span class=\"line\">  inset: 0;</span><br><span class=\"line\">  background: rgba(0, 0, 0, 0.8);</span><br><span class=\"line\">  display: flex;</span><br><span class=\"line\">  justify-content: center;</span><br><span class=\"line\">  align-items: center;</span><br><span class=\"line\">  &amp;-content &#123;</span><br><span class=\"line\">    font-size: 30px;</span><br><span class=\"line\">    color: #fff;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br></pre></td></tr></table></figure>\n<p>Loading.ts</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createVNode, render, <span class=\"title class_\">VNode</span>, <span class=\"title class_\">App</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">Loading</span> <span class=\"keyword\">from</span> <span class=\"string\">&quot;./index.vue&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">install</span>(<span class=\"params\">app: App</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">//createVNode vue提供的底层方法 可以给我们组件创建一个虚拟DOM 也就是Vnode</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"attr\">vnode</span>: <span class=\"title class_\">VNode</span> = <span class=\"title function_\">createVNode</span>(<span class=\"title class_\">Loading</span>);</span><br><span class=\"line\">    <span class=\"comment\">//render 把我们的Vnode 生成真实DOM 并且挂载到指定节点</span></span><br><span class=\"line\">    <span class=\"title function_\">render</span>(vnode, <span class=\"variable language_\">document</span>.<span class=\"property\">body</span>);</span><br><span class=\"line\">    <span class=\"comment\">// Vue 提供的全局配置 可以自定义</span></span><br><span class=\"line\">    app.<span class=\"property\">config</span>.<span class=\"property\">globalProperties</span>.<span class=\"property\">$loading</span> = &#123;</span><br><span class=\"line\">      <span class=\"attr\">show</span>: <span class=\"function\">() =&gt;</span> vnode.<span class=\"property\">component</span>?.<span class=\"property\">exposed</span>?.<span class=\"title function_\">show</span>(),</span><br><span class=\"line\">      <span class=\"attr\">hide</span>: <span class=\"function\">() =&gt;</span> vnode.<span class=\"property\">component</span>?.<span class=\"property\">exposed</span>?.<span class=\"title function_\">hide</span>(),</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>main.ts</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">Loading</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./components/loading&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> app = <span class=\"title function_\">createApp</span>(<span class=\"title class_\">App</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(<span class=\"title class_\">Loading</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">type <span class=\"title class_\">Lod</span> = &#123;</span><br><span class=\"line\">    <span class=\"attr\">show</span>: <span class=\"function\">() =&gt;</span> <span class=\"keyword\">void</span>,</span><br><span class=\"line\">    <span class=\"attr\">hide</span>: <span class=\"function\">() =&gt;</span> <span class=\"keyword\">void</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//编写ts loading 声明文件放置报错 和 智能提示</span></span><br><span class=\"line\">declare <span class=\"variable language_\">module</span> <span class=\"string\">&#x27;@vue/runtime-core&#x27;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">export</span> interface <span class=\"title class_\">ComponentCustomProperties</span> &#123;</span><br><span class=\"line\">        <span class=\"attr\">$loading</span>: <span class=\"title class_\">Lod</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">mount</span>(<span class=\"string\">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>\n<p>使用方法：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div&gt;&lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class=\"line\">import &#123; ref, reactive, getCurrentInstance &#125; from &quot;vue&quot;;</span><br><span class=\"line\">const instance = getCurrentInstance();</span><br><span class=\"line\">instance?.proxy?.$Loading.show();</span><br><span class=\"line\">setTimeout(() =&gt; &#123;</span><br><span class=\"line\">  instance?.proxy?.$Loading.hide();</span><br><span class=\"line\">&#125;, 5000);</span><br><span class=\"line\"></span><br><span class=\"line\">// console.log(instance)</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">* &#123;</span><br><span class=\"line\">  padding: 0;</span><br><span class=\"line\">  margin: 0;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"computed-计算属性\"><a class=\"markdownIt-Anchor\" href=\"#computed-计算属性\">#</a> computed 计算属性</h1>\n<p>计算属性就是当依赖的属性的值发生变化的时候，才会触发他的更改，如果依赖的值，不发生变化的时候，使用的是缓存中的属性值。<br>\n计算属性会自动跟踪其计算中所使用的到的其他响应式状态，并将它们收集为自己的依赖。计算结果会被缓存，并只有在其依赖发生改变时才会被自动更新。</p>\n<ol>\n<li>函数形式</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; computed, reactive, ref &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> price = <span class=\"title function_\">ref</span>(<span class=\"number\">0</span>); <span class=\"comment\">//$0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> m =</span><br><span class=\"line\">  computed &lt;</span><br><span class=\"line\">  string &gt;</span><br><span class=\"line\">  (<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`$`</span> + price.<span class=\"property\">value</span>;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">price.<span class=\"property\">value</span> = <span class=\"number\">500</span>;</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>对象形式</li>\n</ol>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div&gt;&#123;&#123; mul &#125;&#125;&lt;/div&gt;</span><br><span class=\"line\">  &lt;div @click=&quot;mul = 100&quot;&gt;click&lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class=\"line\">import &#123; computed, ref &#125; from &quot;vue&quot;;</span><br><span class=\"line\">let price = ref&lt;number | string&gt;(1); //$0</span><br><span class=\"line\">let mul = computed(&#123;</span><br><span class=\"line\">  get: () =&gt; &#123;</span><br><span class=\"line\">    return price.value;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  set: (value) =&gt; &#123;</span><br><span class=\"line\">    price.value = &quot;set&quot; + value;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;style&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>computed 购物车案例</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;请输入名称&quot;</span> <span class=\"attr\">v-model</span>=<span class=\"string\">&quot;keyWord&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">table</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;margin-top:10px;&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;500&quot;</span> <span class=\"attr\">cellspacing</span>=<span class=\"string\">&quot;0&quot;</span> <span class=\"attr\">cellpadding</span>=<span class=\"string\">&quot;0&quot;</span> <span class=\"attr\">border</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">thead</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>物品<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>单价<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>数量<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>总价<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>操作<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">thead</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">tbody</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">tr</span> <span class=\"attr\">v-for</span>=<span class=\"string\">&quot;(item, index) in searchData&quot;</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">align</span>=<span class=\"string\">&quot;center&quot;</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">align</span>=<span class=\"string\">&quot;center&quot;</span>&gt;</span>&#123;&#123; item.price &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">align</span>=<span class=\"string\">&quot;center&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">button</span> @<span class=\"attr\">click</span>=<span class=\"string\">&quot;item.num &gt; 1 ? item.num-- : null&quot;</span>&gt;</span>-<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">v-model</span>=<span class=\"string\">&quot;item.num&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;number&quot;</span> /&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">button</span> @<span class=\"attr\">click</span>=<span class=\"string\">&quot;item.num &lt; 99 ? item.num++ : null&quot;</span>&gt;</span>+<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">align</span>=<span class=\"string\">&quot;center&quot;</span>&gt;</span>&#123;&#123; item.price * item.num &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">align</span>=<span class=\"string\">&quot;center&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">button</span> @<span class=\"attr\">click</span>=<span class=\"string\">&quot;del(index)&quot;</span>&gt;</span>删除<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">tbody</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">tfoot</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">colspan</span>=<span class=\"string\">&quot;5&quot;</span> <span class=\"attr\">align</span>=<span class=\"string\">&quot;right&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>总价：&#123;&#123; total &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">tfoot</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">table</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">setup</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;ts&quot;</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">import</span> &#123; reactive, ref, computed &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">let</span> keyWord = ref&lt;string&gt;(<span class=\"string\">&quot;&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">  interface <span class=\"title class_\">Data</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"attr\">name</span>: string;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"attr\">price</span>: number;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"attr\">num</span>: number;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">const</span> data = reactive&lt;<span class=\"title class_\">Data</span>[]&gt;([</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"attr\">name</span>: <span class=\"string\">&quot;小满的绿帽子&quot;</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"attr\">price</span>: <span class=\"number\">100</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"attr\">num</span>: <span class=\"number\">1</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;,</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"attr\">name</span>: <span class=\"string\">&quot;小满的红衣服&quot;</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"attr\">price</span>: <span class=\"number\">200</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"attr\">num</span>: <span class=\"number\">1</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;,</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"attr\">name</span>: <span class=\"string\">&quot;小满的黑袜子&quot;</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"attr\">price</span>: <span class=\"number\">300</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"attr\">num</span>: <span class=\"number\">1</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;,</span></span><br><span class=\"line\"><span class=\"language-javascript\">  ]);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">let</span> searchData = <span class=\"title function_\">computed</span>(<span class=\"function\">() =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">return</span> data.<span class=\"title function_\">filter</span>(<span class=\"function\">(<span class=\"params\">item</span>) =&gt;</span> item.<span class=\"property\">name</span>.<span class=\"title function_\">includes</span>(keyWord.<span class=\"property\">value</span>));</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">let</span> total = <span class=\"title function_\">computed</span>(<span class=\"function\">() =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">return</span> data.<span class=\"title function_\">reduce</span>(<span class=\"function\">(<span class=\"params\">prev: number, next: Data</span>) =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">return</span> prev + next.<span class=\"property\">num</span> * next.<span class=\"property\">price</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;, <span class=\"number\">0</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">const</span> <span class=\"title function_\">del</span> = (<span class=\"params\">index: number</span>) =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    data.<span class=\"title function_\">splice</span>(index, <span class=\"number\">1</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">scoped</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;less&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"watch-侦听器\"><a class=\"markdownIt-Anchor\" href=\"#watch-侦听器\">#</a> watch 侦听器</h1>\n<p>watch 需要侦听特定的数据源，并在单独的回调函数中执行副作用<br>\n第一个参数监听源，<br>\n 第二个参数回调函数 cb（newVal,oldVal）,<br>\n 第三个参数一个 options 配置项是一个对象:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">immediate</span>: <span class=\"literal\">true</span>; <span class=\"comment\">//是否立即调用一次</span></span><br><span class=\"line\">  <span class=\"attr\">deep</span>: <span class=\"literal\">true</span>; <span class=\"comment\">//是否开启深度监听</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>监听 Ref 案例</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; ref, watch &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> message = <span class=\"title function_\">ref</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">nav</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">bar</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">name</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">watch</span>(</span><br><span class=\"line\">  message,</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">newVal, oldVal</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;新的值----&quot;</span>, newVal);</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;旧的值----&quot;</span>, oldVal);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"attr\">immediate</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"attr\">deep</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<ul>\n<li>监听多个 ref 注意变成数组啦</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; ref, watch, reactive &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> message = <span class=\"title function_\">ref</span>(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> message2 = <span class=\"title function_\">ref</span>(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">watch</span>([message, message2], <span class=\"function\">(<span class=\"params\">newVal, oldVal</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;新的值----&quot;</span>, newVal);</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;旧的值----&quot;</span>, oldVal);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<ul>\n<li>监听 Reactive<br>\n 使用 reactive 监听深层对象开启和不开启 deep 效果一样</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; ref, watch, reactive &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> message = <span class=\"title function_\">reactive</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">nav</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">bar</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">name</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">watch</span>(message, <span class=\"function\">(<span class=\"params\">newVal, oldVal</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;新的值----&quot;</span>, newVal);</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;旧的值----&quot;</span>, oldVal);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<ul>\n<li>案例 2 监听 reactive 单一值</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; ref, watch, reactive &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> message = <span class=\"title function_\">reactive</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">name2</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">watch</span>(</span><br><span class=\"line\">  <span class=\"function\">() =&gt;</span> message.<span class=\"property\">name</span>,</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">newVal, oldVal</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;新的值----&quot;</span>, newVal);</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;旧的值----&quot;</span>, oldVal);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<h1 id=\"watcheffect-高级侦听器\"><a class=\"markdownIt-Anchor\" href=\"#watcheffect-高级侦听器\">#</a> watchEffect 高级侦听器</h1>\n<p>立即执行传入的一个函数，同时响应式追踪其依赖，并在其依赖变更时重新运行该函数。</p>\n<p>如果用到 message 就只会监听 message 就是用到几个监听几个 而且是非惰性 会默认调用一次</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> message = ref &lt; string &gt; <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> message2 = ref &lt; string &gt; <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\"><span class=\"title function_\">watchEffect</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">//console.log(&#x27;message&#x27;, message.value);</span></span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;message2&quot;</span>, message2.<span class=\"property\">value</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<ul>\n<li>清除副作用<br>\n就是在触发监听之前会调用一个函数可以处理你的逻辑例如防抖</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; watchEffect, ref &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> message = ref &lt; string &gt; <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> message2 = ref &lt; string &gt; <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\"><span class=\"title function_\">watchEffect</span>(<span class=\"function\">(<span class=\"params\">oninvalidate</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">//console.log(&#x27;message&#x27;, message.value);</span></span><br><span class=\"line\">  <span class=\"title function_\">oninvalidate</span>(<span class=\"function\">() =&gt;</span> &#123;&#125;);</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;message2&quot;</span>, message2.<span class=\"property\">value</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<ul>\n<li>停止跟踪 watchEffect 返回一个函数 调用之后将停止更新</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> stop = <span class=\"title function_\">watchEffect</span>(</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">oninvalidate</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//console.log(&#x27;message&#x27;, message.value);</span></span><br><span class=\"line\">    <span class=\"title function_\">oninvalidate</span>(<span class=\"function\">() =&gt;</span> &#123;&#125;);</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;message2&quot;</span>, message2.<span class=\"property\">value</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"attr\">flush</span>: <span class=\"string\">&quot;post&quot;</span>,</span><br><span class=\"line\">    <span class=\"title function_\">onTrigger</span>(<span class=\"params\"></span>) &#123;&#125;,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"title function_\">stop</span>();</span><br></pre></td></tr></table></figure>\n<h1 id=\"vue3-定义全局函数和变量\"><a class=\"markdownIt-Anchor\" href=\"#vue3-定义全局函数和变量\">#</a> Vue3 定义全局函数和变量</h1>\n<ul>\n<li>globalProperties<br>\n 由于 Vue3 没有 Prototype 属性 使用 app.config.globalProperties 代替 然后去定义变量和函数</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 之前 (Vue 2.x)</span></span><br><span class=\"line\"><span class=\"title class_\">Vue</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">$http</span> = <span class=\"function\">() =&gt;</span> &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 之后 (Vue 3.x)</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"title function_\">createApp</span>(&#123;&#125;);</span><br><span class=\"line\">app.<span class=\"property\">config</span>.<span class=\"property\">globalProperties</span>.<span class=\"property\">$http</span> = <span class=\"function\">() =&gt;</span> &#123;&#125;;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>过滤器<br>\n在 Vue3 移除了，我们正好可以使用全局函数代替 Filters<br>\n 案例：</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">app.<span class=\"property\">config</span>.<span class=\"property\">globalProperties</span>.<span class=\"property\">$filters</span> = &#123;</span><br><span class=\"line\">  format&lt;T <span class=\"keyword\">extends</span> any&gt;(<span class=\"attr\">str</span>: T): string &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`$<span class=\"subst\">$&#123;str&#125;</span>`</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>声明文件 不然 TS 无法正确类型推导</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">type <span class=\"title class_\">Filter</span> = &#123;</span><br><span class=\"line\">    format&lt;T&gt;(<span class=\"attr\">str</span>: T): string</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 声明要扩充@vue/runtime-core包的声明.</span></span><br><span class=\"line\"><span class=\"comment\">// 这里扩充&quot;ComponentCustomProperties&quot;接口, 因为他是vue3中实例的属性的类型.</span></span><br><span class=\"line\">declare <span class=\"variable language_\">module</span> <span class=\"string\">&#x27;vue&#x27;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">export</span> interface <span class=\"title class_\">ComponentCustomProperties</span> &#123;</span><br><span class=\"line\">        <span class=\"attr\">$filters</span>: <span class=\"title class_\">Filter</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>setup 读取值:</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; getCurrentInstance, <span class=\"title class_\">ComponentInternalInstance</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; appContext &#125; = &lt;<span class=\"title class_\">ComponentInternalInstance</span>&gt;<span class=\"title function_\">getCurrentInstance</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(appContext.<span class=\"property\">config</span>.<span class=\"property\">globalProperties</span>.<span class=\"property\">$env</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">推荐第二种方式;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; ref, reactive, getCurrentInstance &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"title function_\">getCurrentInstance</span>();</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(app?.<span class=\"property\">proxy</span>?.<span class=\"property\">$filters</span>.<span class=\"title function_\">format</span>(<span class=\"string\">&quot;js&quot;</span>));</span><br></pre></td></tr></table></figure>\n<h1 id=\"vue3-生命周期\"><a class=\"markdownIt-Anchor\" href=\"#vue3-生命周期\">#</a> Vue3 生命周期</h1>\n<p>简单来说就是一个组件从创建 到 销毁的 过程 成为生命周期</p>\n<p>在我们使用 Vue3 组合式 API 是没有  <code>beforeCreate</code>  和  <code>created</code>  这两个生命周期的</p>\n<ul>\n<li><code>onBeforeMount()</code> : 在组件 DOM 实际渲染安装之前调用。在这一步中，根元素还不存在。</li>\n<li><code>onMounted()</code> : 在组件的第一次渲染后调用，该元素现在可用，允许直接 DOM 访问</li>\n<li><code>onBeforeUpdate()</code> : 数据更新时调用，发生在虚拟 DOM 打补丁之前。</li>\n<li><code>onUpdated()</code> :DOM 更新后，updated 的方法即会调用。</li>\n<li><code>onBeforeUnmount()</code> : 在卸载组件实例之前调用。在这个阶段，实例仍然是完全正常的。</li>\n<li><code>onUnmounted()</code> : 卸载组件实例后调用。调用此钩子时，组件实例的所有指令都被解除绑定，所有事件侦听器都被移除，所有子组件实例被卸载。</li>\n</ul>\n<h1 id=\"详解-scoped-和样式穿透\"><a class=\"markdownIt-Anchor\" href=\"#详解-scoped-和样式穿透\">#</a> 详解 Scoped 和样式穿透</h1>\n<p>样式穿透：主要是用于修改很多 vue 常用的组件库（element, vant, AntDesigin），虽然配好了样式但是还是需要更改其他的样式就需要用到样式穿透</p>\n<p>Scoped: 实现组件的私有化，当前 style 属性只属于当前模块。在 DOM 结构中可以发现，vue 通过在 DOM 结构以及 css 样式上加了唯一标记，达到样式私有化，不污染全局的作用<br>\n vue 中的 scoped 通过在 DOM 结构以及 css 样式上加唯一不重复的标记:data-v-hash 的方式，以保证唯一（而这个工作是由过 PostCSS 转译实现的），达到样式私有化模块化的目的。</p>\n<p>总结一下 scoped 三条渲染规则：</p>\n<ol>\n<li>给 HTML 的 DOM 节点加一个不重复 data 属性 (形如：data-v-123) 来表示他的唯一性</li>\n<li>在每句 css 选择器的末尾（编译后的生成的 css 语句）加一个当前组件的 data 属性选择器（如 [data-v-123]）来私有化样式</li>\n<li>如果组件内部包含有其他组件，只会给其他组件的最外层标签加上当前组件的 data 属性<br>\n PostCSS 会给一个组件中的所有 dom 添加了一个独一无二的动态属性 data-v-xxxx，然后，给 CSS 选择器额外添加一个对应的属性选择器来选择该组件中 dom，这种做法使得样式只作用于含有该属性的 dom—— 组件内部 dom, 从而达到了’样式模块化’的效果.</li>\n</ol>\n<ul>\n<li>案例：修改 Element ui Input 样式，发现没有生效，如果不写 Scoped 就没问题</li>\n</ul>\n<p>原因就是 Scoped 搞的鬼 他在进行 PostCss 转化的时候把元素选择器默认放在了最后<br>\n Vue 提供了样式穿透:deep () 他的作用就是用来改变 属性选择器的位置</p>\n<h3 id=\"bem-架构\"><a class=\"markdownIt-Anchor\" href=\"#bem-架构\">#</a> bem 架构</h3>\n<p>他是一种 css 架构 oocss 实现的一种 （面向对象 css） ，BEM 实际上是 block、element、modifier 的缩写，分别为块层、元素层、修饰符层，element UI 也使用的是这种架构<br>\n BEM 命名约定的模式是：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.block</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.block__element</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.block--modifier</span> &#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"列表渲染v-for\"><a class=\"markdownIt-Anchor\" href=\"#列表渲染v-for\">#</a> 列表渲染：v-for</h1>\n<p>我们可以使用 <code>v-for</code>  指令来渲染一个基于源数组的列表：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">v-for</span>=<span class=\"string\">&quot;todo in todos&quot;</span> <span class=\"attr\">:key</span>=<span class=\"string\">&quot;todo.id&quot;</span>&gt;</span>&#123;&#123; todo.text &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>这里的 todo 是一个局部变量，表示当前正在迭代的数组元素。它只能在  <code>v-for</code>  所绑定的元素上或是其内部访问，就像函数的作用域一样。</p>\n<p>更新列表有两种方式：</p>\n<ol>\n<li>在源数组上调用变更方法：</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">todos.<span class=\"property\">value</span>.<span class=\"title function_\">push</span>(newTodo);</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>使用新的数组替代原数组：</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">todos.<span class=\"property\">value</span> = todos.<span class=\"property\">value</span>.<span class=\"title function_\">filter</span>(<span class=\"comment\">/* ... */</span>);</span><br></pre></td></tr></table></figure>\n<h1 id=\"模板引用\"><a class=\"markdownIt-Anchor\" href=\"#模板引用\">#</a> 模板引用</h1>\n<p>需要手动操纵 DOM 时要用到 <code>模板引用</code>  ———— 也就是指向模板中一个 DOM 元素的 ref，通过这个 <code>ref</code> attribute 来实现模板引用:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;p&quot;</span>&gt;</span>hello<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>要访问该引用，我们需要声明一个同名的 ref。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> p = <span class=\"title function_\">ref</span>(<span class=\"literal\">null</span>);</span><br></pre></td></tr></table></figure>\n<p>注意这个 ref 使用 null 值来初始化。这是因为当  <code>&lt;script setup&gt; </code> 执行时，DOM 元素还不存在。模板引用 ref 只能在组件挂载后访问。</p>\n<p>要在挂载之后执行代码，我们可以使用  <code>onMounted()</code>  函数：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; onMounted &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">onMounted</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 此时组件已经挂载。</span></span><br><span class=\"line\">  p.<span class=\"property\">value</span>.<span class=\"property\">textContent</span> = <span class=\"string\">&quot;mounted!&quot;</span>;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h1 id=\"组件间通信\"><a class=\"markdownIt-Anchor\" href=\"#组件间通信\">#</a> 组件间通信</h1>\n<h2 id=\"父传子\"><a class=\"markdownIt-Anchor\" href=\"#父传子\">#</a> 父传子</h2>\n<p>vue3 父传子主要有两种方式： <code>props</code>  和 <code>slot</code> :<br>\n <code>props</code>  是一种单向数据流，父组件通过在  <code>HTML</code>  内容传入不同数据来控制子组件的渲染，但是这样会增加父子组件之间的耦合度，而且 <code>props</code>  只能传递静态的数据，不能传递动态的内容。</p>\n<p><code>slot</code>  是一种内容分发机制，父组件可以通过 <code>slot</code>  标签来插入任意的内容到子组件中，这样可以增加组件的灵活性和复用性，而且 <code> slot</code>  可以传递动态的内容，比如表达式和指令。 <code>slot</code>  还可以接收插槽  <code>props</code>  ，也就是子组件传递给父组件的数据，这样可以实现双向数据流。</p>\n<ul>\n<li>总之， <code>props</code>  和  <code>slot</code>  都是父传子的方式，但是  <code>props </code> 更适合传递简单的数据，而  <code>slot</code>  更适合传递复杂的内容。</li>\n</ul>\n<h3 id=\"父传子props\"><a class=\"markdownIt-Anchor\" href=\"#父传子props\">#</a> 父传子：props</h3>\n<p>子组件可以通过  <code>props</code>  从父组件接受动态数据。</p>\n<ol>\n<li>父组件传递 <code>props</code> ：</li>\n</ol>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">ChildComp</span> <span class=\"attr\">:msg</span>=<span class=\"string\">&quot;greeting&quot;</span> /&gt;</span></span></span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>子组件使用 <code>defineProps() </code> ，声明子组件所接受的  <code>props</code> ：</li>\n</ol>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//ChildComp.vue</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">setup</span>&gt;</span></span></span><br><span class=\"line\">const props = defineProps(&#123;</span><br><span class=\"line\">  msg: string,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">//然后直接使用<span class=\"code\">`msg`</span>即可</span><br></pre></td></tr></table></figure>\n<p>下面是 ts 写法：</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">setup</span> <span class=\"attr\">lang</span>=<span class=\"string\">&#x27;ts&#x27;</span>&gt;</span></span></span><br><span class=\"line\">const props = defineProps&lt;&#123;</span><br><span class=\"line\">  msg: string,</span><br><span class=\"line\">&#125;&gt;();</span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">//然后直接使用<span class=\"code\">`msg`</span>即可</span><br></pre></td></tr></table></figure>\n<h3 id=\"父传子slot-插槽\"><a class=\"markdownIt-Anchor\" href=\"#父传子slot-插槽\">#</a> 父传子：slot 插槽</h3>\n<p>匿名插槽、具名插槽、作用于插槽、动态插槽</p>\n<p>我们已经了解到组件能够接收任意类型的  <code>JavaScript </code> 值作为  <code>props</code> ，但组件要如何接收模板内容呢？在某些场景中，我们可能想要为子组件传递一些模板片段，让子组件在它们的组件中渲染这些片段。<br>\n插槽内容可以是任意合法的模板内容，不局限于文本，可以传入多个元素，甚至是组件。<br>\n通过使用插槽，子组件更加灵活和具有可复用性。现在组件可以用在不同的地方渲染各异的内容，但同时还保证都具有相同的样式。</p>\n<ol>\n<li>父组件中：在<strong>子组件标签</strong>中直接写要传递的内容：</li>\n</ol>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;ChildComp&gt;</span><br><span class=\"line\">  插槽内容</span><br><span class=\"line\">&lt;/ChildComp&gt;</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>子组件中：写一个 <code>&lt;slot&gt;</code> ，它是一个<strong>插槽出口</strong>，标示了父元素提供的<strong>插槽内容</strong>将在哪里被渲染。</li>\n</ol>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">slot</span>&gt;</span>&lt;/slot</span><br><span class=\"line\">  &gt;<span class=\"comment\">&lt;!-- 插槽出口 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>最终渲染出的 DOM 是这样：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>插槽内容<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"渲染作用域\"><a class=\"markdownIt-Anchor\" href=\"#渲染作用域\">#</a> 渲染作用域</h4>\n<p>插槽内容可以访问到父组件的数据作用域，因为插槽内容本身是在父组件模板中定义的。举例来说：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;span&gt;&#123;&#123; message &#125;&#125;&lt;/span&gt;</span><br><span class=\"line\">&lt;ChildComp&gt;&#123;&#123; message &#125;&#125;&lt;/ChildComp&gt;</span><br></pre></td></tr></table></figure>\n<p>这里的两个  <code>&#123;&#123; message &#125;&#125;</code>  插值表达式渲染的内容都是一样的。</p>\n<ul>\n<li>注意：插槽内容无法访问子组件的数据。父组件模板中的表达式只能访问父组件的作用域；子组件模板中的表达式只能访问子组件的作用域。</li>\n</ul>\n<h4 id=\"默认内容\"><a class=\"markdownIt-Anchor\" href=\"#默认内容\">#</a> 默认内容</h4>\n<p>在外部没有提供任何内容的情况下，可以为插槽指定默认内容。比如子组件中有这样一个内容：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">slot</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">slot</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>如果我们想在父组件没有提供任何插槽内容时在子组件的 <code>&lt;div&gt;</code>  内渲染一些元素，只需要将其写在  <code>&lt;slot&gt;</code>  标签之间来作为默认内容：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">slot</span>&gt;</span>默认内容<span class=\"tag\">&lt;/<span class=\"name\">slot</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>只要父组件没有向这个子组件提供任何插槽内容，“默认内容” 将会被作为默认内容渲染，但如果父组件提供了插槽内容，那么被显式提供的内容会取代默认内容。</p>\n<h4 id=\"具名插槽\"><a class=\"markdownIt-Anchor\" href=\"#具名插槽\">#</a> 具名插槽</h4>\n<p>有时会在一个组件中使用多个<strong>插槽出口</strong>，比如某个子组件中有如下模板：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">header</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 标题内容放这里 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">header</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">main</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 主要内容放这里 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">main</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">footer</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 底部内容放这里 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">footer</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>对于这种场景， <code>&lt;slot&gt;</code>  元素可以有一个特殊的 <code>name</code> ，用来给各个插槽分配唯一的 ID，以确定每一处要渲染的内容：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">header</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">slot</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;header&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">slot</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">header</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">main</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">slot</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">slot</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">main</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">footer</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">slot</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;footer&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">slot</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">footer</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>这类带  <code>name</code>  的插槽被称为<strong>具名插槽</strong> 没有提供  <code>name</code>  的  <code>&lt;slot&gt; </code> 出口会隐式地命名为 “default”。</p>\n<p>这种情况下，父组件在使用这个子组件的时候就需要使用一个含  <code>v-slot</code>  指令的  <code>&lt;template&gt;</code>  元素为具名插槽传入内容，并将目标插槽的名字传给该指令: <code>&lt;template v-slot:header&gt;</code> , 而 <code>v-slot</code>  有对应的简写  <code>#</code> ，因此  <code>&lt;template v-slot:header&gt;</code>  可以简写为  <code>&lt;template #header&gt;</code></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ChildComp</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">template</span> #<span class=\"attr\">header</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Here might be a page title<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">template</span> #<span class=\"attr\">default</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>A paragraph for the main content.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>And another one.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">template</span> #<span class=\"attr\">footer</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Here&#x27;s some contact info<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ChildComp</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>当一个组件同时接收默认插槽和具名插槽时，所有位于顶级的非  <code>&lt;template&gt;</code>  节点都被隐式地视为默认插槽的内容。所以上面也可以写成：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ChildComp</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">template</span> #<span class=\"attr\">header</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Here might be a page title<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- 隐式的默认插槽 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>A paragraph for the main content.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>And another one.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">template</span> #<span class=\"attr\">footer</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Here&#x27;s some contact info<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ChildComp</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"作用域插槽\"><a class=\"markdownIt-Anchor\" href=\"#作用域插槽\">#</a> 作用域插槽</h4>\n<p>插槽的内容无法访问到子组件的状态，然而在某些场景下插槽的内容可能想要同时使用父组件域内和子组件域内的数据。要做到这一点，我们需要一种方法来让子组件在渲染时将一部分数据提供给插槽。</p>\n<p>方法：可以像对组件传递  <code>props</code>  那样，向一个插槽的出口上传递 attributes：<br>\n————————————————————————————————————</p>\n<h3 id=\"简单使用父传子\"><a class=\"markdownIt-Anchor\" href=\"#简单使用父传子\">#</a> 简单使用<strong>父传子</strong></h3>\n<h4 id=\"props\"><a class=\"markdownIt-Anchor\" href=\"#props\">#</a>  <code>props</code></h4>\n<ul>\n<li>父组件：</li>\n</ul>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">ChildComp</span> <span class=\"attr\">:msg</span>=<span class=\"string\">&quot;greeting&quot;</span> /&gt;</span></span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>子组件：</li>\n</ul>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">setup</span>&gt;</span></span></span><br><span class=\"line\">const props = defineProps(&#123;</span><br><span class=\"line\">  msg: String,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<h4 id=\"slot-插槽\"><a class=\"markdownIt-Anchor\" href=\"#slot-插槽\">#</a>  <code>slot</code>  插槽</h4>\n<ul>\n<li>父组件：</li>\n</ul>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">ChildComp</span>&gt;</span></span></span><br><span class=\"line\">  插槽内容</span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">ChildComp</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>子组件：</li>\n</ul>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">slot</span>&gt;</span></span><span class=\"language-xml\">&lt;/slot</span></span><br><span class=\"line\"><span class=\"language-xml\">  &gt;</span>&lt;!-- 插槽出口 --&gt;</span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<h4 id=\"具名插槽-2\"><a class=\"markdownIt-Anchor\" href=\"#具名插槽-2\">#</a> 具名插槽</h4>\n<ul>\n<li>父组件:</li>\n</ul>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">ChildComp</span>&gt;</span></span></span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">template</span> #<span class=\"attr\">hello</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"code\">    &lt;h1&gt;Here might be a page title&lt;/h1&gt;</span></span><br><span class=\"line\"><span class=\"code\">  &lt;/template&gt;</span></span><br><span class=\"line\"><span class=\"code\">&lt;/ChildComp&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>子组件：</li>\n</ul>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">slot</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;hello&quot;</span>&gt;</span></span><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">slot</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<p>————————————————————————————————————</p>\n<h2 id=\"子给父之一emits\"><a class=\"markdownIt-Anchor\" href=\"#子给父之一emits\">#</a> 子给父之一：Emits</h2>\n<p>除了接收  <code>props</code> ，子组件还可以向父组件触发事件.</p>\n<ol>\n<li>子组件触发</li>\n</ol>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span></span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span> @<span class=\"attr\">click</span>=<span class=\"string\">&quot;send&quot;</span>&gt;</span></span>给父组件传值<span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">setup</span>&gt;</span></span></span><br><span class=\"line\">  // 声明触发的事件</span><br><span class=\"line\">  const emit = defineEmits([&quot;on-click&quot;]);</span><br><span class=\"line\">  // 带参数触发</span><br><span class=\"line\">const send = () =&gt; [</span><br><span class=\"line\"><span class=\"code\">    emit(&quot;on-click&quot;);</span></span><br><span class=\"line\"><span class=\"code\">]</span></span><br><span class=\"line\"><span class=\"code\">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>父组件接收</li>\n</ol>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span></span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">ChildComp</span> @<span class=\"attr\">on-click</span>=<span class=\"string\">&quot;getName&quot;</span> /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">setup</span> <span class=\"attr\">lang</span>=<span class=\"string\">&#x27;ts&#x27;</span>&gt;</span></span></span><br><span class=\"line\">import ChildComp from &#x27;./<span class=\"strong\">****</span>&#x27;</span><br><span class=\"line\"></span><br><span class=\"line\">let name = &#x27;小满&#x27;,</span><br><span class=\"line\">const getName = (name:string) =&gt; &#123;</span><br><span class=\"line\">  console.log(name,&#x27;======&gt;我是父组件&#x27;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<p><code>emit()</code>  的第一个参数是事件的名称。其他所有参数都将传递给事件监听器。<br>\n父组件可以使用 <code>v-on</code>  监听子组件触发的事件 —— 这里的处理函数接收了子组件触发事件时的额外参数并将它赋值给了本地状态：</p>\n<h2 id=\"子给父之二defineexpose\"><a class=\"markdownIt-Anchor\" href=\"#子给父之二defineexpose\">#</a> 子给父之二：defineExpose</h2>\n<p>子组件可以通过 <code>defineExpose</code>  暴露属性或方法给父组件，父组件通过子组件标签内使用 ref 来接收。element plus 表单多用这种方式暴露方法和属性</p>\n<ol>\n<li>子组件暴露</li>\n</ol>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">setup</span>&gt;</span></span></span><br><span class=\"line\">defineExpose(&#123;</span><br><span class=\"line\">  name:&#x27;小满&#x27;,</span><br><span class=\"line\">  open:() =&gt; console.log(1)</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>父组件接收</li>\n</ol>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span></span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">ChildComp</span> <span class=\"attr\">ref</span>=<span class=\"string\">&#x27;childcomp&#x27;</span> /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">setup</span> <span class=\"attr\">lang</span>=<span class=\"string\">&#x27;ts&#x27;</span>&gt;</span></span></span><br><span class=\"line\">import ChildComp from &#x27;./<span class=\"strong\">****</span>&#x27;</span><br><span class=\"line\"></span><br><span class=\"line\">const childcomp = ref<span class=\"language-xml\"><span class=\"language-javascript\">&lt;<span class=\"title class_\">InstanceType</span>&lt;<span class=\"keyword\">typeof</span> <span class=\"title class_\">ChildComp</span>&gt;</span></span>&gt;()</span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<h2 id=\"父子组件双向数据props-emits-v-model\"><a class=\"markdownIt-Anchor\" href=\"#父子组件双向数据props-emits-v-model\">#</a> 父子组件双向数据：props + emits + v-model</h2>\n<h2 id=\"兄弟组件间通信\"><a class=\"markdownIt-Anchor\" href=\"#兄弟组件间通信\">#</a> 兄弟组件间通信</h2>\n<p>方式极多</p>\n<h3 id=\"mitt-插件方式实现兄弟组件间通信\"><a class=\"markdownIt-Anchor\" href=\"#mitt-插件方式实现兄弟组件间通信\">#</a> mitt 插件方式实现兄弟组件间通信</h3>\n<ol>\n<li>安装</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add mitt -S</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li><code>src/plugins/Bus.js</code>  或 <code>src/utils/Bus.js</code> ：</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> mitt <span class=\"keyword\">from</span> <span class=\"string\">&quot;mitt&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">mitt</span>();</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>使用</li>\n</ol>\n<ul>\n<li>A 组件发送</li>\n</ul>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">setup</span>&gt;</span></span></span><br><span class=\"line\">import mitt from &#x27;../utils/Bus.js&#x27;</span><br><span class=\"line\">let str = ref(&#x27;这是A组件的数据&#x27;)</span><br><span class=\"line\"></span><br><span class=\"line\">const btn = ()=&gt; &#123;</span><br><span class=\"line\">  //emit(自定义事件名称,参数,……)</span><br><span class=\"line\">  mitt.emit(&#x27;fn&#x27;,str)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span></span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"code\">    &lt;h1&gt;A组件&lt;/h1&gt;</span></span><br><span class=\"line\"><span class=\"code\">    &lt;button @click = &quot;btn&quot;&gt;按钮&lt;/button&gt;</span></span><br><span class=\"line\"><span class=\"code\">  &lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"code\">&lt;/template&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>B 组件接收</li>\n</ul>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">setup</span>&gt;</span></span></span><br><span class=\"line\">import mitt from &#x27;../utils/Bus.js&#x27;</span><br><span class=\"line\">let s = ref(&#x27;&#x27;)</span><br><span class=\"line\"></span><br><span class=\"line\">onBeforeMount(()=&gt;&#123;</span><br><span class=\"line\">  //emit(自定义事件名称,回调函数) 如果要接收多个事件，就把<span class=\"code\">`自定义事件名称`</span>换成<span class=\"code\">`*`</span></span><br><span class=\"line\">  mitt.on(&#x27;fn&#x27;,e =&gt; &#123;</span><br><span class=\"line\"><span class=\"code\">    s.value = e.value</span></span><br><span class=\"line\"><span class=\"code\">  &#125;)</span></span><br><span class=\"line\"><span class=\"code\">&#125;)</span></span><br><span class=\"line\"><span class=\"code\">&lt;/script&gt;</span></span><br><span class=\"line\"><span class=\"code\"></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"language-handlebars\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span></span></span></span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"language-handlebars\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"code\">    &lt;h1&gt;B组件&lt;/h1&gt;</span></span><br><span class=\"line\"><span class=\"code\">    &#123;&#123;s&#125;&#125;</span></span><br><span class=\"line\"><span class=\"code\">  &lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"code\">&lt;/template&gt;</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"label-标签\"><a class=\"markdownIt-Anchor\" href=\"#label-标签\">#</a> label 标签</h1>\n<p><code>&lt;label&gt; </code> 标签为 input 元素定义标注（标记）。</p>\n<p>label 元素不会向用户呈现任何特殊效果。不过，它为鼠标用户改进了可用性。如果您在 label 元素内点击文本，就会触发此控件。就是说，当用户选择该标签时，浏览器就会自动将焦点转到和标签相关的表单控件上。</p>\n<p><code>&lt;label&gt; </code> 标签的 for 属性应当与相关元素的 id 属性相同。</p>\n<p>注释：“for” 属性可把 label 绑定到另外一个元素。请把 “for” 属性的值设置为相关元素的 id 属性的值。<br>\n就是一个文本提示标签，不过在 label 标签中加入 for 属性可以与相应的选项框进行捆绑，也就是说，在这种情况下你点击这个文本框就会活的点击选项框的效果。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;lable&gt;男&lt;/lable&gt;</span><br><span class=\"line\">&lt;input style=&quot;checkbox&quot; /&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"h-函数\"><a class=\"markdownIt-Anchor\" href=\"#h-函数\">#</a> h 函数</h1>\n<p>Vue 推荐在绝大数情况下使用模板来创建你的 HTML，然后一些特殊的场景，你真的需要 JavaScript 的完全编程的<br>\n能力，这个时候你可以使用 渲染函数 ，它比模板更接近编译器；<br>\nVue 在生成真实的 DOM 之前，会将我们的节点转换成 VNode，而 VNode 组合在一起形成一颗树结构，就是虚<br>\n拟 DOM（VDOM）；<br>\n事实上，我们之前编写的 template 中的 HTML 最终也是使用渲染函数生成对应的 VNode；<br>\n那么，如果你想充分的利用 JavaScript 的编程能力，我们可以自己来编写 createVNode 函数，生成对应的<br>\n VNode；</p>\n<ul>\n<li>h () 函数是一个用于创建 vnode 的一个函数；其实更准备的命名是 createVNode () 函数，但是为了简便在 Vue 将之简化为 h () 函数</li>\n<li>h () 函数 如何使用呢？<br>\n它接受三个参数：第一个参数【type】既可以是一个字符串 (用于原生元素) 也可以是一个 Vue 组件定义。第二个参数【props】是要传递的 prop，第三个参数【children】是子节点。<br>\n除了 type 外，其他参数都是可选的。如果没有 props，那么通常可以将 children 作为第二个参数传入；如果会产生歧义，可以将 null 作为第二个参数传入，将 children 作为第三个参数传入</li>\n<li>h 函数的基本使用<br>\n h 函数可以在两个地方使用：</li>\n</ul>\n<ol>\n<li>render 函数选项中：</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; h &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">render</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title function_\">h</span>(<span class=\"string\">&quot;div&quot;</span>, &#123; <span class=\"attr\">class</span>: <span class=\"string\">&quot;app&quot;</span> &#125;, <span class=\"string\">&quot;Hello App&quot;</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>setup 函数选项中（setup 本身需要是一个函数类型，函数再返回 h 函数创建的 VNode:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; h &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">setuo</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span> <span class=\"title function_\">h</span>(<span class=\"string\">&quot;div&quot;</span>, &#123; <span class=\"attr\">class</span>: <span class=\"string\">&quot;app&quot;</span> &#125;, <span class=\"string\">&quot;Hello App&quot;</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h1 id=\"自定义指令-2\"><a class=\"markdownIt-Anchor\" href=\"#自定义指令-2\">#</a> 自定义指令</h1>\n<p>在 Vue 的模板语法中我们学习过各种各样的指令： <code>v-show</code> 、 <code>v-for</code> 、 <code>v-model</code>  等等，除了使用这些指令之外，Vue<br>\n 也允许我们来自定义自己的指令<br>\n注意：在 Vue 中，代码的复用和抽象主要还是通过组件<br>\n通常在某些情况下，你需要对 DOM 元素进行底层操作，这个时候就会用到自定义指令</p>\n<ul>\n<li>自定义指令分为两种：</li>\n</ul>\n<ol>\n<li>自定义局部指令：组件中通过  <code>directives</code>  选项，只能在当前组件中使用</li>\n<li>自定义全局指令：app 的  <code>directive</code>  方法，可以在任意组件中被使用</li>\n</ol>\n<p>eg. 比如我们来做一个非常简单的案例：当某个元素挂载完成后可以自定获取焦点</p>\n<ul>\n<li>自定义一个  <code>v-focus</code>  的局部指令；<br>\n这个自定义指令实现非常简单，我们只需要在组件选项中使用  <code>directives</code>  即可<br>\n它是一个对象，在对象中编写我们自定义指令的名称（注意：这里不需要加 <code>v-</code> ）<br>\n自定义指令有一个生命周期，是在组件挂载后调用的  <code>mounted</code> ，我们可以在其中完成操作</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">export default &#123;</span><br><span class=\"line\">  directives: &#123;</span><br><span class=\"line\">    focus: &#123;</span><br><span class=\"line\">      mounted(el) &#123;</span><br><span class=\"line\">        el.focus();</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>自定义一个  <code>v-focus</code>  的全局指令；</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">app.<span class=\"title function_\">directives</span>(<span class=\"string\">&quot;focus&quot;</span>, &#123;</span><br><span class=\"line\">  <span class=\"title function_\">mounted</span>(<span class=\"params\">el</span>) &#123;</span><br><span class=\"line\">    el.<span class=\"title function_\">focus</span>();</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h2 id=\"指令的生命周期\"><a class=\"markdownIt-Anchor\" href=\"#指令的生命周期\">#</a> 指令的生命周期</h2>\n<p>一个指令定义的对象，Vue 提供了如下的几个钩子函数<br>\n <code>created</code> ：在绑定元素的 attribute 或事件监听器被应用之前调用<br>\n <code>beforeMount</code> ：当指令第一次绑定到元素并且在挂载父组件之前调用<br>\n <code>mounted</code> ：在绑定元素的父组件被挂载后调用<br>\n <code>beforeUpdate</code> ：在更新包含组件的 VNode 之前调用<br>\n <code>updated</code> ：在包含组件的 VNode 及其子组件的 VNode 更新后调用<br>\n <code>beforeUnmount</code> ：在卸载绑定元素的父组件之前调用<br>\n <code>unmounted</code> ：当指令与元素解除绑定且父组件已卸载时，只调用一次</p>\n<h2 id=\"自定义指令练习时间戳\"><a class=\"markdownIt-Anchor\" href=\"#自定义指令练习时间戳\">#</a> 自定义指令练习；时间戳</h2>\n<p>来实现一个可以自动对时间格式化的指令 <code>v-format-time</code> ：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> dayjs <span class=\"keyword\">from</span> <span class=\"string\">&quot;dayjs&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">function</span> (<span class=\"params\">app</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> format = <span class=\"string\">&quot;YYYY-MM-DD HH:mm:ss&quot;</span>;</span><br><span class=\"line\">  app.<span class=\"title function_\">directive</span>(<span class=\"string\">&quot;format-time&quot;</span>, &#123;</span><br><span class=\"line\">    <span class=\"title function_\">created</span>(<span class=\"params\">el, bingings</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (bingings.<span class=\"property\">value</span>) &#123;</span><br><span class=\"line\">        format = bingings.<span class=\"property\">value</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"title function_\">mounted</span>(<span class=\"params\">el</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> textContent = el.<span class=\"property\">textContent</span>;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> timestamp = <span class=\"built_in\">parseInt</span>(el.<span class=\"property\">textContent</span>);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (textContent.<span class=\"property\">length</span> === <span class=\"number\">10</span>) &#123;</span><br><span class=\"line\">        timestamp = timestamp * <span class=\"number\">1000</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(timestamp);</span><br><span class=\"line\">      el.<span class=\"property\">textContent</span> = <span class=\"title function_\">dayjs</span>(timestamp).<span class=\"title function_\">format</span>(format);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"vue-插件\"><a class=\"markdownIt-Anchor\" href=\"#vue-插件\">#</a> Vue 插件</h1>\n<p>通常我们向 Vue 全局添加一些功能时，会采用插件的模式，它有两种编写方式：</p>\n<ol>\n<li>对象类型：一个对象，但是必须包含一个 install 的函数，该函数会在安装插件时执行</li>\n<li>函数类型：一个 function，这个函数会在安装插件时自动执行<br>\n插件可以完成的功能没有限制，比如下面的几种都是可以的：</li>\n</ol>\n<ul>\n<li>添加全局方法或者  <code>property</code> ，通过把它们添加到  <code>config.globalProperties</code>  上实现；</li>\n<li>添加全局资源：指令 / 过滤器 / 过渡等；</li>\n<li>通过全局  <code>mixin</code>  来添加一些组件选项；</li>\n<li>一个库，提供自己的 API，同时提供上面提到的一个或多个功能</li>\n</ul>\n<h2 id=\"插件的编写方式\"><a class=\"markdownIt-Anchor\" href=\"#插件的编写方式\">#</a> 插件的编写方式</h2>\n<p>对象类型写法：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">&quot;why&quot;</span>,</span><br><span class=\"line\">  <span class=\"title function_\">install</span>(<span class=\"params\">app, options</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;插件被安装:&quot;</span>, app, options);</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">name</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>函数类型的写法:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">function</span> (<span class=\"params\">app, options</span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;插件被安装:&quot;</span>, app, options);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"vue3-如何注册全局组件方法替代-vue2-的-vueprototype\"><a class=\"markdownIt-Anchor\" href=\"#vue3-如何注册全局组件方法替代-vue2-的-vueprototype\">#</a> vue3 如何注册全局组件 / 方法（替代 vue2 的 Vue.prototype）</h1>\n<ol>\n<li>provide /inject （推荐）<br>\nmain.js 中：通过 provide 将组件或者方法、变量挂载在全局：封装了一个函数，在首页中我们只需要调用这个函数并且传入 app 即可</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createApp &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">App</span> <span class=\"keyword\">from</span> <span class=\"string\">&quot;./App.vue&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> router <span class=\"keyword\">from</span> <span class=\"string\">&quot;./router&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> store <span class=\"keyword\">from</span> <span class=\"string\">&quot;./store&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"title function_\">createApp</span>(<span class=\"title class_\">App</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(store);</span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(router);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 挂载全局方法</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">globalFunc</span> = (<span class=\"params\"></span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;要挂载在全局的方法&quot;</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"comment\">// 将globalFunc方法挂载在全局</span></span><br><span class=\"line\">app.<span class=\"title function_\">provide</span>(<span class=\"string\">&quot;globalFunc&quot;</span>, globalFunc);</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">mount</span>(<span class=\"string\">&quot;#app&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 把vue实例挂载在window.vm,方便使用vue的实例</span></span><br><span class=\"line\"><span class=\"variable language_\">window</span>.<span class=\"property\">vm</span> = app;</span><br></pre></td></tr></table></figure>\n<p>组件中：通过 inject 获取全局方法并调用:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>组件中通过inject获取全局方法并调用<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;ts&quot;</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">import</span> &#123; defineComponent, onMounted, inject &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">defineComponent</span>(&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"attr\">name</span>: <span class=\"string\">&quot;JobDetail&quot;</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"comment\">// 注册组件</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"attr\">components</span>: &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"title class_\">Header</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;,</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"title function_\">setup</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"title function_\">onMounted</span>(<span class=\"function\">() =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"title function_\">testFunc</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\">      &#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">const</span> testFunc = (): <span class=\"function\"><span class=\"params\">void</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">const</span> <span class=\"attr\">globalFunc</span>: any = <span class=\"title function_\">inject</span>(<span class=\"string\">&quot;globalFunc&quot;</span>); <span class=\"comment\">// 通过inject获取挂载在全局的globalFunc方法</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"title function_\">globalFunc</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\">      &#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        testFunc,</span></span><br><span class=\"line\"><span class=\"language-javascript\">      &#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;,</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>app.config.globalProperties（不推荐）</li>\n</ol>\n<p>main.js 中：通过  <code>app.config.globalProperties</code>  将组件或者方法、变量挂载在全局</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createApp &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">App</span> <span class=\"keyword\">from</span> <span class=\"string\">&quot;./App.vue&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> router <span class=\"keyword\">from</span> <span class=\"string\">&quot;./router&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> store <span class=\"keyword\">from</span> <span class=\"string\">&quot;./store&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"title function_\">createApp</span>(<span class=\"title class_\">App</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(store);</span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(router);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 挂载全局方法</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">globalFunc</span> = (<span class=\"params\"></span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;要挂载在全局的方法&quot;</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"comment\">// 将globalFunc方法挂载在全局</span></span><br><span class=\"line\">app.<span class=\"property\">config</span>.<span class=\"property\">globalProperties</span>.<span class=\"property\">globalFunc</span> = globalFunc;</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">mount</span>(<span class=\"string\">&quot;#app&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 把vue实例挂载在window.vm,方便使用vue的实例</span></span><br><span class=\"line\"><span class=\"variable language_\">window</span>.<span class=\"property\">vm</span> = app;</span><br></pre></td></tr></table></figure>\n<p>组件中：通过  <code>getCurrentInstance().appContext.config.globalProperties</code>  获取全局方法并调用</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>组件中通过inject获取全局方法并调用<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;ts&quot;</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">import</span> &#123; defineComponent, onMounted, getCurrentInstance &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">defineComponent</span>(&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"attr\">name</span>: <span class=\"string\">&quot;JobDetail&quot;</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"comment\">// 注册组件</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"attr\">components</span>: &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"title class_\">Header</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;,</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"title function_\">setup</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"title function_\">onMounted</span>(<span class=\"function\">() =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"title function_\">testFunc</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\">      &#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">const</span> testFunc = (): <span class=\"function\"><span class=\"params\">void</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">const</span> <span class=\"attr\">internalInstance</span>: any = <span class=\"title function_\">getCurrentInstance</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(internalInstance.<span class=\"property\">appContext</span>.<span class=\"property\">config</span>.<span class=\"property\">globalProperties</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">// 通过getCurrentInstance().appContext.config.globalProperties获取全局方法并调用</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        internalInstance.<span class=\"property\">appContext</span>.<span class=\"property\">config</span>.<span class=\"property\">globalProperties</span>.<span class=\"title function_\">globalFunc</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\">      &#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        testFunc,</span></span><br><span class=\"line\"><span class=\"language-javascript\">      &#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;,</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>import _ as 是什么？<br>\n如果你想一次性全部导入模块的所有变量就可以使用 _ as 代表全部</p>\n<h1 id=\"过渡动画-transition\"><a class=\"markdownIt-Anchor\" href=\"#过渡动画-transition\">#</a> 过渡动画 transition</h1>\n<p>Vue 提供了 transition 的封装组件，在下列情形中，可以给任何元素和组件添加进入 / 离开过渡:</p>\n</li>\n<li>\n<p>条件渲染 (使用 v-if)</p>\n</li>\n<li>\n<p>条件展示 (使用 v-show)</p>\n</li>\n<li>\n<p>动态组件</p>\n</li>\n<li>\n<p>组件根节点<br>\n自定义 transition 过度效果，你需要对 transition 组件的 name 属性自定义。并在 css 中写入对应的样式</p>\n</li>\n</ul>\n<ol>\n<li>过渡的类名<br>\n在进入 / 离开的过渡中，会有 6 个 class 切换。</li>\n</ol>\n<ul>\n<li><code>v-enter-from</code> ：定义进入过渡的开始状态。在元素被插入之前生效，在元素被插入之后的下一帧移除</li>\n<li><code>v-enter-active</code> ：定义进入过渡生效时的状态。在整个进入过渡的阶段中应用，在元素被插入之前生效，在过渡 / 动画完成之后移除。这个类可以被用来定义进入过渡的过程时间，延迟和曲线函数。</li>\n<li><code>v-enter-to</code> ：定义进入过渡的结束状态。在元素被插入之后下一帧生效 (与此同时 v-enter-from 被移除)，在过渡 / 动画完成之后移除。</li>\n<li><code>v-leave-from</code> ：定义离开过渡的开始状态。在离开过渡被触发时立刻生效，下一帧被移除</li>\n<li><code>v-leave-active</code> ：定义离开过渡生效时的状态。在整个离开过渡的阶段中应用，在离开过渡被触发时立刻生效，在过渡 / 动画完成之后移除。这个类可以被用来定义离开过渡的过程时间，延迟和曲线函数。</li>\n<li><code>v-leave-to</code> ：离开过渡的结束状态。在离开过渡被触发之后下一帧生效 (与此同时 v-leave-from 被删除)，在过渡 / 动画完成之后移除。</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">button</span> @<span class=\"attr\">click</span>=<span class=\"string\">&quot;flag = !flag&quot;</span>&gt;</span>切换<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">transition</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;fade&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">v-if</span>=<span class=\"string\">&quot;flag&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">transition</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//开始过度</span><br><span class=\"line\"><span class=\"selector-class\">.fade-enter-from</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: red;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">rotate</span>(<span class=\"number\">360deg</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//开始过度了</span><br><span class=\"line\"><span class=\"selector-class\">.fade-enter-active</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: all <span class=\"number\">2.5s</span> linear;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//过度完成</span><br><span class=\"line\"><span class=\"selector-class\">.fade-enter-to</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: yellow;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//离开的过度</span><br><span class=\"line\"><span class=\"selector-class\">.fade-leave-from</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">rotate</span>(<span class=\"number\">360deg</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//离开中过度</span><br><span class=\"line\"><span class=\"selector-class\">.fade-leave-active</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: all <span class=\"number\">1s</span> linear;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//离开完成</span><br><span class=\"line\"><span class=\"selector-class\">.fade-leave-to</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>自定义过渡 class 类名</li>\n</ol>\n<ul>\n<li>enter-from-class</li>\n<li>enter-active-class</li>\n<li>enter-to-class</li>\n<li>leave-from-class</li>\n<li>leave-active-class</li>\n<li>leave-to-class<br>\n 通过自定义 class 结合 css 动画库 animate css:</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;transition leave-active-class=&quot;animate__animated animate__bounceInLeft&quot; enter-active-class=&quot;animate__animated animate__bounceInRight&quot;&gt;</span><br><span class=\"line\">    &lt;div v-if=&quot;flag&quot; class=&quot;box&quot;&gt;&lt;/div&gt;</span><br><span class=\"line\">&lt;/transition&gt;</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>自定义过度时间 单位毫秒，你也可以分别指定进入和离开的持续时间：</li>\n</ol>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;transition :duration=&quot;1000&quot;&gt;...&lt;/transition&gt;</span><br><span class=\"line\">&lt;transition :duration=&quot;&#123; enter: 500, leave: 800 &#125;&quot;&gt;...&lt;/transition&gt;</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>3.transition 生命周期 8 个</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@before-enter=<span class=\"string\">&quot;beforeEnter&quot;</span> <span class=\"comment\">//对应enter-from</span></span><br><span class=\"line\">@enter=<span class=\"string\">&quot;enter&quot;</span><span class=\"comment\">//对应enter-active</span></span><br><span class=\"line\">@after-enter=<span class=\"string\">&quot;afterEnter&quot;</span><span class=\"comment\">//对应enter-to</span></span><br><span class=\"line\">@enter-cancelled=<span class=\"string\">&quot;enterCancelled&quot;</span><span class=\"comment\">//显示过度打断</span></span><br><span class=\"line\">@before-leave=<span class=\"string\">&quot;beforeLeave&quot;</span><span class=\"comment\">//对应leave-from</span></span><br><span class=\"line\">@leave=<span class=\"string\">&quot;leave&quot;</span><span class=\"comment\">//对应enter-active</span></span><br><span class=\"line\">@after-leave=<span class=\"string\">&quot;afterLeave&quot;</span><span class=\"comment\">//对应leave-to</span></span><br><span class=\"line\">@leave-cancelled=<span class=\"string\">&quot;leaveCancelled&quot;</span><span class=\"comment\">//离开过度打断</span></span><br></pre></td></tr></table></figure>\n<ol start=\"5\">\n<li>appear</li>\n</ol>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">appear-active-class=&quot;&quot;</span><br><span class=\"line\">appear-<span class=\"selector-tag\">from</span>-class=&quot;&quot;</span><br><span class=\"line\">appear-<span class=\"selector-tag\">to</span>-class=&quot;&quot;</span><br><span class=\"line\">appear</span><br></pre></td></tr></table></figure>\n<p>class 的 name 命名规则如下：</p>\n<ol>\n<li>如果我们使用的是一个没有 name 的 transition，那么所有的 class 是以 v- 作为默认前缀</li>\n<li>如果我们添加了一个 name 属性，比如 <transtion name=\"why\">，那么所有的 class 会以 why- 开头；</li>\n</ol>\n<h1 id=\"transition-group-过渡列表\"><a class=\"markdownIt-Anchor\" href=\"#transition-group-过渡列表\">#</a> transition-group 过渡列表</h1>\n<ul>\n<li>单个节点</li>\n<li>多个节点，每次只渲染一个<br>\n那么怎么同时渲染整个列表，比如使用 v-for？在这种场景下，我们会使用  <code>&lt;transition-group&gt;</code>  组件。在我们深入例子之前，先了解关于这个组件的几个特点：</li>\n</ul>\n<p>默认情况下，它不会渲染一个包裹元素，但是你可以通过  <code>tag</code>  attribute 指定渲染一个元素。<br>\n过渡模式不可用，因为我们不再相互切换特有的元素。<br>\n内部元素总是需要提供唯一的  <code>key</code>  attribute 值。<br>\nCSS 过渡的类将会应用在内部的元素中，而不是这个组 / 容器本身。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">transition-group</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;margin: 10px;&quot;</span> <span class=\"attr\">:key</span>=<span class=\"string\">&quot;item&quot;</span> <span class=\"attr\">v-for</span>=<span class=\"string\">&quot;item in list&quot;</span>&gt;</span>&#123;&#123; item &#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">transition-group</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> list = reactive&lt;number[]&gt;([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>, <span class=\"number\">7</span>, <span class=\"number\">8</span>, <span class=\"number\">9</span>])</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">Push</span> = (<span class=\"params\"></span>) =&gt; &#123;</span><br><span class=\"line\">    list.<span class=\"title function_\">push</span>(<span class=\"number\">123</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">Pop</span> = (<span class=\"params\"></span>) =&gt; &#123;</span><br><span class=\"line\">    list.<span class=\"title function_\">pop</span>()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>列表的移动过渡<br>\n <code>&lt;transition-group&gt;</code>  组件还有一个特殊之处。除了进入和离开，它还可以为定位的改变添加动画。只需了解新增的 v-move 类就可以使用这个新功能，它会应用在元素改变定位的过程中。像之前的类名一样，它的前缀可以通过 name attribute 来自定义，也可以通过 move-class attribute 手动设置</li>\n</ol>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">button</span> @<span class=\"attr\">click</span>=<span class=\"string\">&quot;shuffle&quot;</span>&gt;</span>Shuffle<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">transition-group</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wraps&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;mmm&quot;</span> <span class=\"attr\">tag</span>=<span class=\"string\">&quot;ul&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;cell&quot;</span> <span class=\"attr\">v-for</span>=<span class=\"string\">&quot;item in items&quot;</span> <span class=\"attr\">:key</span>=<span class=\"string\">&quot;item.id&quot;</span>&gt;</span>&#123;&#123; item.number &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">transition-group</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">setup</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;ts&quot;</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">import</span> _ <span class=\"keyword\">from</span> <span class=\"string\">&quot;lodash&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">import</span> &#123; ref &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">let</span> items = <span class=\"title function_\">ref</span>(</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"title class_\">Array</span>.<span class=\"title function_\">apply</span>(<span class=\"literal\">null</span>, &#123; <span class=\"attr\">length</span>: <span class=\"number\">81</span> &#125; <span class=\"keyword\">as</span> number[]).<span class=\"title function_\">map</span>(<span class=\"function\">(<span class=\"params\">_, index</span>) =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"attr\">id</span>: index,</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"attr\">number</span>: (index % <span class=\"number\">9</span>) + <span class=\"number\">1</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">      &#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;)</span></span><br><span class=\"line\"><span class=\"language-javascript\">  );</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">const</span> <span class=\"title function_\">shuffle</span> = (<span class=\"params\"></span>) =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    items.<span class=\"property\">value</span> = _.<span class=\"title function_\">shuffle</span>(items.<span class=\"property\">value</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">scoped</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;less&quot;</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.wraps</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">display</span>: flex;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">flex-wrap</span>: wrap;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">width</span>: <span class=\"built_in\">calc</span>(<span class=\"number\">25px</span> * <span class=\"number\">10</span> + <span class=\"number\">9px</span>);</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"selector-class\">.cell</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">width</span>: <span class=\"number\">25px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">height</span>: <span class=\"number\">25px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#ccc</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">list-style-type</span>: none;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">display</span>: flex;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">justify-content</span>: center;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">align-items</span>: center;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"selector-class\">.mmm-move</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"attribute\">transition</span>: transform <span class=\"number\">0.8s</span> ease;</span></span><br><span class=\"line\"><span class=\"language-css\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>状态过渡<br>\n Vue 也同样可以给数字 Svg 背景颜色等添加过度动画 今天演示数字变化</li>\n</ol>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">step</span>=<span class=\"string\">&quot;20&quot;</span> <span class=\"attr\">v-model</span>=<span class=\"string\">&quot;num.current&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;number&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>&#123;&#123; num.tweenedNumber.toFixed(0) &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">setup</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;ts&quot;</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">import</span> &#123; reactive, watch &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">import</span> gsap <span class=\"keyword\">from</span> <span class=\"string\">&quot;gsap&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">const</span> num = <span class=\"title function_\">reactive</span>(&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"attr\">tweenedNumber</span>: <span class=\"number\">0</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"attr\">current</span>: <span class=\"number\">0</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title function_\">watch</span>(</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"function\">() =&gt;</span> num.<span class=\"property\">current</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"function\">(<span class=\"params\">newVal</span>) =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      gsap.<span class=\"title function_\">to</span>(num, &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"attr\">duration</span>: <span class=\"number\">1</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"attr\">tweenedNumber</span>: newVal,</span></span><br><span class=\"line\"><span class=\"language-javascript\">      &#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  );</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"tsx\"><a class=\"markdownIt-Anchor\" href=\"#tsx\">#</a> TSX</h1>\n<p>我们之前呢是使用 Template 去写我们模板。现在可以扩展另一种风格 TSX 风格<br>\n vue2 的时候就已经支持 jsx 写法，只不过不是很友好，随着 vue3 对 typescript 的支持度，tsx 写法越来越被接受</p>\n<ol>\n<li>安装插件</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install @vitejs/plugin-vue-jsx -D</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>配置</li>\n</ol>\n<ul>\n<li>vite.config.ts 配置:</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; defineConfig &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vite&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> vue <span class=\"keyword\">from</span> <span class=\"string\">&quot;@vitejs/plugin-vue&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> vueJsx <span class=\"keyword\">from</span> <span class=\"string\">&quot;@vitejs/plugin-vue-jsx&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// https://vitejs.dev/config/</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">defineConfig</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [<span class=\"title function_\">vue</span>(), <span class=\"title function_\">vueJsx</span>()],</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<ul>\n<li>修改 tsconfig.json 配置文件</li>\n</ul>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;jsx&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;preserve&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\"><span class=\"attr\">&quot;jsxFactory&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;h&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\"><span class=\"attr\">&quot;jsxFragmentFactory&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Fragment&quot;</span><span class=\"punctuation\">,</span></span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>在目录新建一个 xxxxxx.tsx 文件，开始使用 TSX<br>\ntips：tsx 不会自动解包使用 ref 加.vlaue ! ! !</li>\n</ol>\n<ul>\n<li>tsx 支持 v-model 的使用</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; ref &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> v = ref &lt; string &gt; <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">renderDom</span> = (<span class=\"params\"></span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">v-model</span>=<span class=\"string\">&#123;v.value&#125;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>&#123;v.value&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/&gt;</span></span></span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> renderDom;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>v-show</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; ref &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> flag = <span class=\"title function_\">ref</span>(<span class=\"literal\">false</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">renderDom</span> = (<span class=\"params\"></span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">v-show</span>=<span class=\"string\">&#123;flag.value&#125;</span>&gt;</span>景天<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">v-show</span>=<span class=\"string\">&#123;!flag.value&#125;</span>&gt;</span>雪见<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/&gt;</span></span></span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> renderDom;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>v-if 是不支持的<br>\n所以需要改变风格</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; ref &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> flag = <span class=\"title function_\">ref</span>(<span class=\"literal\">false</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">renderDom</span> = (<span class=\"params\"></span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"language-xml\"><span class=\"tag\">&lt;&gt;</span>&#123;flag.value ? <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>景天<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span> : <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>雪见<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span>&#125;<span class=\"tag\">&lt;/&gt;</span></span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> renderDom;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>v-for 也是不支持的<br>\n需要使用 Map</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; ref &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">renderDom</span> = (<span class=\"params\"></span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      &#123;arr.map((v) =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"language-xml\">        return <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>$&#123;v&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span>;</span></span><br><span class=\"line\"><span class=\"language-xml\">      &#125;)&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/&gt;</span></span></span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> renderDom;</span><br></pre></td></tr></table></figure>\n<h1 id=\"vuex-的状态管理\"><a class=\"markdownIt-Anchor\" href=\"#vuex-的状态管理\">#</a> Vuex 的状态管理</h1>\n<ul>\n<li>\n<p>管理不断变化的 state 本身是非常困难的<br>\n状态之间相互会存在依赖，一个状态的变化会引起另一个状态的变化，View 页面也有可能会引起状态的变化。当应用程序复杂时，state 在什么时候，因为什么原因而发生了变化，发生了怎么样的变化，会变得非常难以控制和追踪</p>\n</li>\n<li>\n<p>因此，我们是否可以考虑将组件的内部状态抽离出来，以一个全局单例的方式来管理呢？<br>\n在这种模式下，我们的组件树构成了一个巨大的 “视图 View”, 不管在树的哪个位置，任何组件都能获取状态或者触发行为<br>\n通过定义和隔离状态管理中的各个概念，并通过强制性的规则来维护视图和状态间的独立性，我们的代码边会变得更加结构化和易于维护、跟踪；<br>\n<img src=\"https://eucli-1314359160.cos.ap-beijing.myqcloud.com/test/93Q@8VN8%60V_I72$62UDA~1A.png\" alt=\"\"></p>\n</li>\n</ul>\n<h2 id=\"store-仓库\"><a class=\"markdownIt-Anchor\" href=\"#store-仓库\">#</a> Store 仓库</h2>\n<p>每一个 Vuex 应用的核心就是 store（仓库）：store 本质上是一个 <code>容器</code> ，它包含着你的应用中大部分的状态（ <code>state</code> ）</p>\n<ul>\n<li>Vuex 和单纯的全局对象有什么区别呢？</li>\n</ul>\n<ol>\n<li>Vuex 的状态存储是响应式的：当 Vue 组件从 store 中读取状态的时候，若 store 中的状态发生变化，那么相应的组件也会被更新</li>\n<li>你不能直接改变 store 中的状态：改变 store 中的状态的唯一途径就显示提交 ( <code>commit</code> ) mutation, 这样使得我们可以方便的跟踪每一个状态的变化，从而让我们能够通过一些工具帮助我们更好的管理应用的状态</li>\n<li>使用步骤：创建 Store 对象，在 app 中通过插件安装</li>\n</ol>\n<h3 id=\"组件中使用-store\"><a class=\"markdownIt-Anchor\" href=\"#组件中使用-store\">#</a> 组件中使用 store</h3>\n<p>组件中：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div&gt;</span><br><span class=\"line\">    &lt;h2&gt;&#123;&#123; $store.state.counter &#125;&#125;&lt;/h2&gt;</span><br><span class=\"line\">    &lt;button @click=&quot;increment&quot;&gt;+1&lt;/button&gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">export default &#123;</span><br><span class=\"line\">  name: &quot;App&quot;,</span><br><span class=\"line\">  data() &#123;&#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    increment() &#123;</span><br><span class=\"line\">      this.$store.commit(&quot;increment&quot;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<p>store 中：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;createStore&#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vuex&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> store <span class=\"title function_\">createStore</span>(&#123;</span><br><span class=\"line\">  <span class=\"title function_\">state</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      <span class=\"attr\">counter</span>:<span class=\"number\">0</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">mutations</span>:&#123;</span><br><span class=\"line\">      <span class=\"title function_\">increment</span>(<span class=\"params\">state</span>) &#123;</span><br><span class=\"line\">        state.<span class=\"property\">counter</span>++</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> store</span><br></pre></td></tr></table></figure>\n<h3 id=\"单一状态树\"><a class=\"markdownIt-Anchor\" href=\"#单一状态树\">#</a> 单一状态树</h3>\n<p>Vuex 使用单一状态树，用一个对象就包含了全部的应用层级的状态，这也意味着，<strong>每个应用将仅仅包含一个 store 实例</strong><br>\n单状态树和模块化并不冲突，后面我们会讲到 module 的概念</p>\n<ul>\n<li>单一状态树的优势：<br>\n如果你的状态信息是保存到多个 Store 对象中的，那么之后的管理和维护等等都会变得特别困难，所以 Vuex 也使用了单一状态树来管理应用层级的全部状态；单一状态树能够让我们最直接的方式找到某个状态的片段，而且在之后的维护和调试过程中，也可以非常方便的管理和维护</li>\n</ul>\n<h3 id=\"组件获取状态\"><a class=\"markdownIt-Anchor\" href=\"#组件获取状态\">#</a> 组件获取状态</h3>\n<p>在前面我们已经学习过如何在组件中获取状态了 ( <code>$store.state.counter</code> ), 如果觉得那种方式有点繁琐（表达式过长），我们可以使用计算属性：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">computed</span>: &#123;</span><br><span class=\"line\">  <span class=\"title function_\">counter</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span>.<span class=\"property\">$store</span>.<span class=\"property\">state</span>.<span class=\"property\">counter</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>如果我们有很多个状态都需要获取，可以使用 <code>mapState</code>  的辅助函数:<br>\nmapState 的方式一：对象类型<br>\n mapState 的方式二：数组类型<br>\n也可以使用展开运算符和来原有的 computed 混合在一起</p>\n<h4 id=\"在-setup-中使用-mapstate\"><a class=\"markdownIt-Anchor\" href=\"#在-setup-中使用-mapstate\">#</a> 在 setup 中使用 mapState</h4>\n<p>通过 useStore 拿到 store 后去获取某个状态即可</p>\n<h4 id=\"getters-的基本使用\"><a class=\"markdownIt-Anchor\" href=\"#getters-的基本使用\">#</a> getters 的基本使用</h4>\n<p>某些属性我们可能需要经过变化后来使用，这个时候可以使用 getters：</p>\n<h3 id=\"mutation-基本使用\"><a class=\"markdownIt-Anchor\" href=\"#mutation-基本使用\">#</a> Mutation 基本使用</h3>\n<p>更改 Vuex 的 store 中的状态的唯一方法是提交 mutation：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">mutations</span>: &#123;</span><br><span class=\"line\">  <span class=\"title function_\">increment</span>(<span class=\"params\">state</span>) &#123;</span><br><span class=\"line\">    state.<span class=\"property\">counter</span>++</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>Mutation 携带数据<br>\n很多时候我们在提交 mutation 的时候，会携带一些数据，这个时候我们可以使用参数：</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">mutations</span>: &#123;</span><br><span class=\"line\">  <span class=\"title function_\">addNumber</span>(<span class=\"params\">state,payload</span>) &#123;</span><br><span class=\"line\">    state.<span class=\"property\">counter</span> += payload</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>payload 为对象类型</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">addNumber</span>(<span class=\"params\">state,payload</span>) &#123;</span><br><span class=\"line\">  state.<span class=\"property\">counter</span> += payload.<span class=\"property\">count</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>对象风格的提交方式</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$store.<span class=\"title function_\">commit</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">type</span>: <span class=\"string\">&quot;addNumber&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">count</span>: <span class=\"number\">100</span>,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"mapmutations-辅助函数\"><a class=\"markdownIt-Anchor\" href=\"#mapmutations-辅助函数\">#</a> mapMutations 辅助函数</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> mutations = <span class=\"title function_\">mapMutations</span>([<span class=\"string\">&quot;increment&quot;</span>, <span class=\"string\">&quot;decrement&quot;</span>]);</span><br><span class=\"line\"><span class=\"keyword\">const</span> mutations2 = <span class=\"title function_\">mapMutations</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">addNumber</span>: <span class=\"variable constant_\">ADD_NUMBER</span>,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>mutation 重要原则一条重要的原则就是要记住  <code>mutation</code>  必须是<strong>同步</strong>函数</p>\n<h3 id=\"actions-的基本使用\"><a class=\"markdownIt-Anchor\" href=\"#actions-的基本使用\">#</a> actions 的基本使用</h3>\n<p>Action 类似于 mutation，不同在于 Action 提交的是 mutation，而不是直接变更状态<br>\n<strong> Action 可以包含异步操作</strong></p>\n<ul>\n<li>这里有一个非常重要的参数 <code>context</code> ：<br>\n <code>context</code>  是一个和 store 实例均有相同方法和属性的 context 对象，所以我们可以从其中获取到 commit 方法来提交一个 mutation，或者通过 context.state 和 context.getters 来<br>\n获取 state 和 getters</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">mutations</span>: &#123;</span><br><span class=\"line\">  <span class=\"title function_\">increment</span>(<span class=\"params\">state</span>) &#123;</span><br><span class=\"line\">    state.<span class=\"property\">counter</span>++</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"attr\">actions</span>: &#123;</span><br><span class=\"line\">  <span class=\"title function_\">increment</span>(<span class=\"params\">context</span>) &#123;</span><br><span class=\"line\">    context.<span class=\"title function_\">commit</span>(<span class=\"string\">&quot;increment&quot;</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"actions-的分发操作\"><a class=\"markdownIt-Anchor\" href=\"#actions-的分发操作\">#</a> actions 的分发操作</h4>\n<p>如何使用 action 呢？<br>\n进行 action 的分发：分发使用的是 store 上的 <code>dispatch</code>  函数</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">add</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">$store</span>.<span class=\"title function_\">dispatch</span>(<span class=\"string\">&quot;increment&quot;</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>同样的，它也可以携带我们的参数：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">add</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">$store</span>.<span class=\"title function_\">dispatch</span>(<span class=\"string\">&quot;increment&quot;</span>,&#123;<span class=\"attr\">count</span>:<span class=\"number\">100</span>&#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>也可以以对象的形式进行分发：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">add</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">$store</span>.<span class=\"title function_\">dispatch</span>(&#123;</span><br><span class=\"line\">    <span class=\"attr\">type</span>:<span class=\"string\">&quot;increment&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">count</span>:<span class=\"number\">100</span></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"actions-的辅助函数\"><a class=\"markdownIt-Anchor\" href=\"#actions-的辅助函数\">#</a> actions 的辅助函数</h4>\n<p>action 也有对应的辅助函数：<br>\n对象类型的写法：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">mutations</span>: &#123;</span><br><span class=\"line\">  ...<span class=\"title function_\">mapActions</span>([<span class=\"string\">&quot;increment&quot;</span>,<span class=\"string\">&quot;decrement&quot;</span>]),</span><br><span class=\"line\">  ...<span class=\"title function_\">mapActions</span>(&#123;</span><br><span class=\"line\">    <span class=\"attr\">add</span>:<span class=\"string\">&quot;increment&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">sub</span>:<span class=\"string\">&quot;decrement&quot;</span></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"actions-的异步操作\"><a class=\"markdownIt-Anchor\" href=\"#actions-的异步操作\">#</a> actions 的异步操作</h4>\n<h3 id=\"module-的基本使用\"><a class=\"markdownIt-Anchor\" href=\"#module-的基本使用\">#</a> module 的基本使用</h3>\n<p>什么是 Module？<br>\n由于使用单一状态树，应用的所有状态会集中到一个比较大的对象，当应用变得非常复杂时，store 对象就有可<br>\n能变得相当臃肿<br>\n为了解决以上问题，Vuex 允许我们将 store 分割成模块（module）。每个模块拥有自己的 state、mutation、action、getter、甚至是嵌套子模块</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> moduleA = &#123;</span><br><span class=\"line\">  <span class=\"attr\">state</span>: <span class=\"function\">() =&gt;</span> (&#123;&#125;),</span><br><span class=\"line\">  <span class=\"attr\">mutations</span>: &#123;&#125;,</span><br><span class=\"line\">  <span class=\"attr\">actions</span>: &#123;&#125;,</span><br><span class=\"line\">  <span class=\"attr\">getters</span>: &#123;&#125;,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> moduleB = &#123;</span><br><span class=\"line\">  <span class=\"attr\">state</span>: <span class=\"function\">() =&gt;</span> (&#123;&#125;),</span><br><span class=\"line\">  <span class=\"attr\">mutations</span>: &#123;&#125;,</span><br><span class=\"line\">  <span class=\"attr\">actions</span>: &#123;&#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> store = <span class=\"title function_\">createStore</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">modules</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">a</span>: moduleA,</span><br><span class=\"line\">    <span class=\"attr\">b</span>: moduleB,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">store.<span class=\"property\">state</span>.<span class=\"property\">a</span>; <span class=\"comment\">// =&gt; moduleA的状态</span></span><br><span class=\"line\">store.<span class=\"property\">state</span>.<span class=\"property\">b</span>; <span class=\"comment\">// =&gt; moduleB的状态</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>module 的命名空间<br>\n默认情况下，模块内部的 action 和 mutation 仍然是注册在<strong>全局的命名空间</strong>中的。这样使得多个模块能够对同一个 action 或 mutation 作出响应，Getter 同样也默认注册在全局命名空间<br>\n如果我们希望模块具有更高的封装度和复用性，可以添加  <code>namespaced: true</code>  的方式使其成为带命名空间的模块。当模块被注册后，它的所有 getter、action 及 mutation 都会自动根据模块注册的路径调整命名</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">namespaced</span>:<span class=\"literal\">true</span>,</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">state</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">name</span>: <span class=\"string\">&quot;why&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">age</span>: <span class=\"number\">18</span>,</span><br><span class=\"line\">    <span class=\"attr\">height</span>: <span class=\"number\">1.88</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">mutations</span>: &#123;</span><br><span class=\"line\">  <span class=\"title function_\">changeName</span>(<span class=\"params\">state</span>) &#123;</span><br><span class=\"line\">    state.<span class=\"property\">name</span> = <span class=\"string\">&quot;coderwhy&quot;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">getters； &#123;</span><br><span class=\"line\">  <span class=\"title function_\">info</span>(<span class=\"params\">state,getters,rootState,rootGetters</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`name:<span class=\"subst\">$&#123;state.name&#125;</span> age:<span class=\"subst\">$&#123;state.age&#125;</span> height:<span class=\"subst\">$&#123;state.height&#125;</span>`</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"attr\">actions</span>: &#123;</span><br><span class=\"line\">  <span class=\"title function_\">changeNameAction</span>(<span class=\"params\">&#123;commit,dispatch,state,rootState,getters,rootGetters&#125;</span>) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">commit</span>(<span class=\"string\">&quot;changeName&quot;</span>,<span class=\"string\">&quot;kobe&quot;</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"nexttick\"><a class=\"markdownIt-Anchor\" href=\"#nexttick\">#</a> nextTick</h1>\n<p>(一个 api)<br>\n 官方解释：将回调推迟到下一个 DOM 更新周期之后执行。在更改了一些数据以等待 DOM 更新后立即使用它。<br>\n比如我们有下面的需求：点击一个按钮，我们会修改在 h2 中显示的 message；message 被修改后，获取 h2 的高度</p>\n<p>实现上面的案例我们有三种方式：</p>\n<ol>\n<li>在点击按钮后立即获取到 h2 的高度（错误的做法）</li>\n<li>在 updated 生命周期函数中获取 h2 的高度（但是其他数据更新，也会执行该操作）</li>\n<li>使用 nextTick 函数</li>\n</ol>\n<h1 id=\"definecomponent\"><a class=\"markdownIt-Anchor\" href=\"#definecomponent\">#</a> defineComponent</h1>\n<p>vue3 中，新增了  <code>defineComponent</code>  ，它并没有实现任何的逻辑，只是把接收的 Object 直接返回，它的存在是完全让传入的整个对象获得对应的类型，它的存在就是完全为了服务 TypeScript 而存在的。<br>\n(ps. 读到 &quot;它的存在就是完全为了服务 TypeScript 而存在的&quot; 时莫名其妙觉得好浪漫～)<br>\n 我们都知道普通的组件就是一个普通的对象，既然是一个普通的对象，那自然就不会获得自动的提示:</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; defineComponent &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> component = &#123;</span><br><span class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">&quot;Home&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">props</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">data</span>: <span class=\"title class_\">String</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  setup, <span class=\"comment\">// 没有该有的提示，这非常的不友好</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> component;</span><br></pre></td></tr></table></figure>\n<p>但是当我们加上 defineComponent（） 之后，就完全不一样了，可以获得自动提示，vue2、vue3 的自动提示都有:</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; defineComponent &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> component = &#123;</span><br><span class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">&#x27;Home&#x27;</span>,</span><br><span class=\"line\">  <span class=\"attr\">props</span>:&#123;</span><br><span class=\"line\">    <span class=\"attr\">data</span>: <span class=\"title class_\">String</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  setup（props, context）&#123;<span class=\"comment\">// setup 可接受两个参数，一个props，和 context</span></span><br><span class=\"line\">    <span class=\"comment\">// props.data</span></span><br><span class=\"line\">    <span class=\"comment\">// context.attrs    context.slots    context.emit</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> component</span><br></pre></td></tr></table></figure>\n<p>接下来看看 setup 中的两个参数  <code>props</code>  与  <code>context</code>  ,<br>\n <code>props</code>  指组件传递来的参数，并且 ts 可以推论出 <code>props</code>  的类型. <code>props</code>  也就是 vue2 中组件中的  <code>props</code> <br>\n <code>context</code>  有三个属性  <code>attrs</code>   <code>slots</code>   <code>emit</code>  分别对应 vue2 中的 <code>attrs</code>  属性、 <code>slots</code>  插槽、 <code>$emit</code>  发送事件</p>\n<ul>\n<li><code>defineComponent</code>  函数，只是对 setup 函数进行封装，返回 <code>options</code>  的对象；</li>\n<li><code>defineComponent</code>  最重要的是：在 TypeScript 下，给予了组件 正确的参数类型推断。</li>\n</ul>\n<h1 id=\"teleport-传送组件\"><a class=\"markdownIt-Anchor\" href=\"#teleport-传送组件\">#</a> Teleport 传送组件</h1>\n<p>在组件化开发中，我们封装一个组件 A，在另外一个组件 B 中使用，那么组件 A 中 template 的元素，会被挂载到组件 B 中 template 的某个位置最终我们的应用程序会形成一颗 DOM 树结构<br>\n但是某些情况下，我们希望组件不是挂载在这个组件树上的，可能是移动到 Vue app 之外的其他位置。比如移动到 body 元素上，或者我们有其他的 div#app 之外的元素上。这个时候我们就可以通过 teleport 来完成</p>\n<p>假如在父组件中引用了一个子组件，那么渲染成页面后这个子组件 HTML 也是必然被父组件 HTML 包含的。</p>\n<p>但是如果把子组件放置到了 teleport 组件中，那么我们就可以指定该子组件渲染到父组件之外的其它 DOM 节点下，比如 body 或者其它的 DOM 等等。这就有点类似与 “传送” 了.</p>\n<p>Teleport Vue 3.0 新特性之一。</p>\n<p>Teleport 是一种能够将我们的模板渲染至指定 DOM 节点，不受父级 style、v-show 等属性影响，但 data、prop 数据依旧能够共用的技术；类似于 React 的 Portal。</p>\n<p>主要解决的问题 因为 Teleport 节点挂载在其他指定的 DOM 节点下，完全不受父级 style 样式影响</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">teleport</span> <span class=\"attr\">to</span>=<span class=\"string\">&#x27;要传送的地方&#x27;</span>&gt;</span></span></span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">  …………</span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">teleport</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>注意：传送之前要先有 dom 【顺序】</li>\n<li>使用场景：假如有非常多的弹窗，那么如何管理它们的 z-index 呢，也就是同时弹窗时的层级关系，如果每个弹窗都在各自的父组件中，那么我们是没法控制的，所有有必要把它们都拧出来，放在同一个父元素下面，这样就可以方便的设置层级关系了</li>\n</ul>\n<h1 id=\"keep-alive-缓存组件\"><a class=\"markdownIt-Anchor\" href=\"#keep-alive-缓存组件\">#</a> keep-alive 缓存组件</h1>\n<p>有时候我们不希望组件被重新渲染影响使用体验；或者处于性能考虑，避免多次重复渲染降低性能。而是希望组件可以缓存下来，维持当前的状态。这时候就需要用到 <code>keep-alive</code>  组件。</p>\n<h3 id=\"开启-keep-alive-生命周期的变化\"><a class=\"markdownIt-Anchor\" href=\"#开启-keep-alive-生命周期的变化\">#</a> 开启 keep-alive 生命周期的变化</h3>\n<ul>\n<li>初次进入时： onMounted&gt; onActivated</li>\n<li>退出后触发 deactivated</li>\n<li>再次进入：只会触发 onActivated</li>\n<li>事件挂载的方法等，只执行一次的放在 onMounted 中；组件每次进去执行的方法放在 onActivated 中</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 基本 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">keep-alive</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">component</span> <span class=\"attr\">:is</span>=<span class=\"string\">&quot;view&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">component</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">keep-alive</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 多个条件判断的子组件 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">keep-alive</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">comp-a</span> <span class=\"attr\">v-if</span>=<span class=\"string\">&quot;a &gt; 1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">comp-a</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">comp-b</span> <span class=\"attr\">v-else</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">comp-b</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">keep-alive</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 和 `&lt;transition&gt;` 一起使用 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">transition</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">keep-alive</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">component</span> <span class=\"attr\">:is</span>=<span class=\"string\">&quot;view&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">component</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">keep-alive</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">transition</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"include-和-exclude\"><a class=\"markdownIt-Anchor\" href=\"#include-和-exclude\">#</a> include 和 exclude</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">keep-alive</span> <span class=\"attr\">:include</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">:exclude</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">:max</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">keep-alive</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"component-动态组件\"><a class=\"markdownIt-Anchor\" href=\"#component-动态组件\">#</a> Component 动态组件</h1>\n<p><code>component</code>  是 vue 内置组件，主要作用为动态渲染组件，进行动态组件切换</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">component</span> <span class=\"attr\">:is</span>=<span class=\"string\">&quot;要动态绑定的组件&quot;</span>&gt;</span></span><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">component</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>若是数据需要动态渲染，组件切换之后会导致之前获得的数据丢失，这个时候，若我们想要在组件切换过程中保持这些组件的状态，以避免重复渲染导致性能问题，则可以在动态组件上使用 <code>keep-alive</code>  来缓存组件中的数据:</li>\n</ul>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">keep-alive</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">component</span> <span class=\"attr\">:is</span>=<span class=\"string\">&quot;要动态绑定的组件&quot;</span>&gt;</span></span><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">component</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">keep-alive</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>使用 <code>keep-alive</code>  会增加两个生命周期： <code>onActivated</code> , <code>onDeactivated</code> <br>\n 每次切换组件的行为都会分别进行这两个生命周期</li>\n</ul>\n<h1 id=\"异步组件\"><a class=\"markdownIt-Anchor\" href=\"#异步组件\">#</a> 异步组件</h1>\n<p>在大型应用中，我们可能需要将应用分割成小一些的代码块 并且减少主包的体积</p>\n<p>这时候就可以使用异步组件</p>\n<h2 id=\"顶层-await-技术\"><a class=\"markdownIt-Anchor\" href=\"#顶层-await-技术\">#</a> 顶层 await 技术</h2>\n<p>在 setup 语法糖里面 使用方法</p>\n<p><code>&lt;script setup&gt;</code>  中可以使用顶层 await。结果代码会被编译成  <code>async setup()</code></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">setup</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">const</span> post = <span class=\"keyword\">await</span> <span class=\"title function_\">fetch</span>(<span class=\"string\">`/api/post/1`</span>).<span class=\"title function_\">then</span>(<span class=\"function\"><span class=\"params\">r</span> =&gt;</span> r.<span class=\"title function_\">json</span>())</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>父组件引用子组件 通过 defineAsyncComponent 加载异步配合 import 函数模式便可以分包:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">setup</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;ts&quot;</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">import</span> &#123; reactive, ref, markRaw, toRaw, defineAsyncComponent &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue&#x27;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">const</span> <span class=\"title class_\">Dialog</span> = <span class=\"title function_\">defineAsyncComponent</span>(<span class=\"function\">() =&gt;</span> <span class=\"keyword\">import</span>(<span class=\"string\">&#x27;../../components/Dialog/index.vue&#x27;</span>))</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"comment\">//完整写法</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">const</span> <span class=\"title class_\">AsyncComp</span> = <span class=\"title function_\">defineAsyncComponent</span>(&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"comment\">// 加载函数</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"attr\">loader</span>: <span class=\"function\">() =&gt;</span> <span class=\"keyword\">import</span>(<span class=\"string\">&#x27;./Foo.vue&#x27;</span>),</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"comment\">// 加载异步组件时使用的组件</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"attr\">loadingComponent</span>: <span class=\"title class_\">LoadingComponent</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"comment\">// 展示加载组件前的延迟时间，默认为 200ms</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"attr\">delay</span>: <span class=\"number\">200</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"comment\">// 加载失败后展示的组件</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"attr\">errorComponent</span>: <span class=\"title class_\">ErrorComponent</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"comment\">// 如果提供了一个 timeout 时间限制，并超时了</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"comment\">// 也会显示这里配置的报错组件，默认值是：Infinity</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"attr\">timeout</span>: <span class=\"number\">3000</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;)</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"suspense\"><a class=\"markdownIt-Anchor\" href=\"#suspense\">#</a> suspense</h2>\n<p><code>&lt;suspense&gt;</code>  组件有两个插槽。它们都只接收一个直接子节点。default 插槽里的节点会尽可能展示出来。如果不能，则展示 fallback 插槽里的节点。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Suspense</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">template</span> #<span class=\"attr\">default</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dialog</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">template</span> #<span class=\"attr\">default</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>我在哪儿<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dialog</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">template</span> #<span class=\"attr\">fallback</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>loading...<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">Suspense</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"场景一\"><a class=\"markdownIt-Anchor\" href=\"#场景一\">#</a> 场景一</h2>\n<p>在开发 Vue 项目时，大多数人都会用到组件。在父组件中，子组件的加载一般是按照先后顺序加载的，子组件加载后才会加载父组件<br>\n如果一个页面的子组件很多，由于会先加载子组件，那么父组件可能会出现比较长的白屏等待时间。我们想让某些子组件异步加载应该怎么办呢？Vue3 提供了一个新增的 <code>defineAsyncComponent</code>  方法来实现异步组件。</p>\n<ul>\n<li>函数方式创建</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//父组件</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script setup&gt;</span><br><span class=\"line\">  import &#123; onMounted, defineAsyncComponent &#125; from &quot;vue&quot;;</span><br><span class=\"line\">  const AsyncChild = defineAsyncComponent(() =&gt; import(&quot;./child.vue&quot;));</span><br><span class=\"line\">  onMounted(() =&gt; &#123;</span><br><span class=\"line\">    console.log(&quot;父组件先运行了&quot;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">//异步组件必须在&lt;Suspense&gt;标签内使用</span><br><span class=\"line\">  &lt;Suspense&gt;</span><br><span class=\"line\">    //展示异步组件</span><br><span class=\"line\">    &lt;template #default&gt;</span><br><span class=\"line\">      &lt;AsyncChild /&gt;</span><br><span class=\"line\">  &lt;!-- 这个&lt;AsyncChild /&gt;是自己在 &lt;script setup&gt;中定义的名字 --&gt;</span><br><span class=\"line\">    &lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    //加载过程中展示的内容</span><br><span class=\"line\">    &lt;template #fallback&gt;</span><br><span class=\"line\">    &lt;/template&gt;</span><br><span class=\"line\">  &lt;/Suspense&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>对象的方式创建</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">AsyncComp</span> = <span class=\"title function_\">defineAsyncComponent</span>(&#123;</span><br><span class=\"line\">  <span class=\"comment\">// 加载函数，需要返回一个Promise，可以使用动态import的方式，也可以自己new Promise()</span></span><br><span class=\"line\">  <span class=\"attr\">loader</span>: <span class=\"function\">() =&gt;</span> <span class=\"keyword\">import</span>(<span class=\"string\">&quot;./Foo.vue&quot;</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 加载异步组件时使用的组件，该组件会在异步组件加载时显示，如果异步组件加载很快，可能不会出现loading组件</span></span><br><span class=\"line\">  <span class=\"attr\">loadingComponent</span>: <span class=\"title class_\">LoadingComponent</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 展示加载组件前的延迟时间，默认为 200ms</span></span><br><span class=\"line\">  <span class=\"attr\">delay</span>: <span class=\"number\">200</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 加载失败后展示的组件，可以通过Promise的reject来测试</span></span><br><span class=\"line\">  <span class=\"attr\">errorComponent</span>: <span class=\"title class_\">ErrorComponent</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 如果提供了一个 timeout 时间限制，并超时了</span></span><br><span class=\"line\">  <span class=\"comment\">// 也会显示这里配置的报错组件，默认值是：Infinity</span></span><br><span class=\"line\">  <span class=\"attr\">timeout</span>: <span class=\"number\">3000</span>,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h2 id=\"场景二\"><a class=\"markdownIt-Anchor\" href=\"#场景二\">#</a> 场景二</h2>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Suspense</span> #<span class=\"attr\">default</span>&gt;</span></span></span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span></span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">A</span>&gt;</span></span><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">A</span>&gt;</span></span></span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span></span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">template</span> #<span class=\"attr\">fallback</span>&gt;</span></span></span><br><span class=\"line\">  加载中...</span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">Suspense</span>&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">setup</span>&gt;</span></span></span><br><span class=\"line\">const A = defineAsyncComponent(()=&gt;</span><br><span class=\"line\">import(../components/A.vue))</span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<p>打包的时候分包，会将异步组件单独打包</p>\n<h1 id=\"mixin-混入\"><a class=\"markdownIt-Anchor\" href=\"#mixin-混入\">#</a> Mixin 混入</h1>\n<ul>\n<li>解释：将组件的公共逻辑或者配置提取出来，哪个组件需要用到时，直接将提取的这部分混入到组件内部即可。</li>\n<li>注意：提取的是逻辑或配置，而不是 HTML 代码和 CSS 代码。其实大家也可以换一种想法，mixin 就是组件中的组件，Vue 组件化让我们的代码复用性更高，那么组件与组件之间还有重复部分，我们使用 Mixin 在抽离一遍。</li>\n</ul>\n<h2 id=\"mixin-和-vuex-的区别\"><a class=\"markdownIt-Anchor\" href=\"#mixin-和-vuex-的区别\">#</a> Mixin 和 Vuex 的区别？</h2>\n<p>上面一点说 Mixin 就是一个抽离公共部分的作用。在 Vue 中，Vuex 状态管理似乎也是做的这一件事，它也是将组件之间可能共享的数据抽离出来。两者看似一样，实则还是有细微的区别，区别如下：</p>\n<ol>\n<li>Vuex 公共状态管理，如果在一个组件中更改了 Vuex 中的某个数据，那么其它所有引用了 Vuex 中该数据的组件也会跟着变化。</li>\n<li>Mixin 中的数据和方法都是独立的，组件之间使用后是互相不影响的。</li>\n</ol>\n<h2 id=\"优缺点\"><a class=\"markdownIt-Anchor\" href=\"#优缺点\">#</a> 优缺点</h2>\n<h3 id=\"优点\"><a class=\"markdownIt-Anchor\" href=\"#优点\">#</a> 优点</h3>\n<ol>\n<li>提高代码复用性</li>\n<li>无需传递状态</li>\n<li>维护方便，只需要修改一个地方即可</li>\n</ol>\n<h3 id=\"缺点\"><a class=\"markdownIt-Anchor\" href=\"#缺点\">#</a> 缺点</h3>\n<ol>\n<li>命名冲突</li>\n<li>滥用的话后期很难维护</li>\n<li>不好追溯源，排查问题稍显麻烦</li>\n<li>不能轻易的重复代码</li>\n</ol>\n<h2 id=\"使用\"><a class=\"markdownIt-Anchor\" href=\"#使用\">#</a> 使用</h2>\n<ol>\n<li><code>src/mixin/index.js</code></li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; ref &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">//抽取的公共逻辑或配置</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> num = <span class=\"title function_\">ref</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> <span class=\"title function_\">Btn</span> = (<span class=\"params\"></span>) =&gt; &#123;</span><br><span class=\"line\">    num.<span class=\"property\">value</span> += <span class=\"number\">1</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  retuen &#123;</span><br><span class=\"line\">    num,</span><br><span class=\"line\">    fBtn</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>在组件中使用：</li>\n</ol>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span></span><br><span class=\"line\">&#123;&#123;num&#125;&#125;</span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span> @<span class=\"attr\">click</span> = <span class=\"string\">&quot;Btn&quot;</span>&gt;</span></span>点击<span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">setup</span>&gt;</span></span></span><br><span class=\"line\">import mixin from &#x27;地址&#x27;</span><br><span class=\"line\">//可以把mixin中的东西解构出来,解构出来就能直接用了</span><br><span class=\"line\">let &#123;num,Btn&#125; = mixin()</span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<h1 id=\"provide-和-inject-依赖注入\"><a class=\"markdownIt-Anchor\" href=\"#provide-和-inject-依赖注入\">#</a> Provide 和 Inject 依赖注入</h1>\n<p>父组件和孙子辈间进行组件通信<br>\n<img src=\"https://eucli-1314359160.cos.ap-beijing.myqcloud.com/test/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5.jpg\" alt=\"依赖注入\"></p>\n<ul>\n<li>父组件</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script setup&gt;</span><br><span class=\"line\">import &#123; provide &#125; from &quot;vue&quot;;</span><br><span class=\"line\">import Child from &quot;url&quot;;</span><br><span class=\"line\">let num = ref(100);</span><br><span class=\"line\">provide(&quot;changeNum&quot;, num);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>后代组件</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script setup&gt;</span><br><span class=\"line\">import &#123; inject &#125; from &quot;vue&quot;;</span><br><span class=\"line\">const aNum = inject(&quot;changeNum&quot;);</span><br><span class=\"line\">console.log(aNum);</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<h1 id=\"vuex\"><a class=\"markdownIt-Anchor\" href=\"#vuex\">#</a> vuex</h1>\n<p><code>state</code>  值要用 <code>computed()</code>  去接： <code>let num = computed( ()=&gt; store.state.num )</code>  不然不是响应的数据<br>\n <code>mutations</code>  里面的方法用 <code>commit()</code>  调用<br>\n <code>actions</code>  里面的方法用 <code>dispatch()</code>  调用</p>\n<ul>\n<li>注意：vuex 修改数据只能用 <code>mutations</code>  提交来修改</li>\n</ul>\n<h2 id=\"vuex-持久化存储插件实现\"><a class=\"markdownIt-Anchor\" href=\"#vuex-持久化存储插件实现\">#</a> vuex 持久化存储【插件实现】</h2>\n<p>可以用 localStorage，也可以用插件： <code>vuex-persistedstate</code></p>\n<ol>\n<li>安装</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add vuex-persistedstate -S</span><br></pre></td></tr></table></figure>\n<p>2. <code> src/store/index.js</code>  中使用</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;createStore&#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vuex&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> persistedState <span class=\"keyword\">from</span> <span class=\"string\">`vuex-persistedstate `</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">createStore</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>:[<span class=\"title function_\">persistedState</span>(&#123;</span><br><span class=\"line\">    <span class=\"attr\">key</span>:<span class=\"string\">&#x27;&#x27;</span>,<span class=\"comment\">//浏览器中的名字</span></span><br><span class=\"line\">    <span class=\"attr\">path</span>:[], <span class=\"comment\">//需要存储起来的参数模块</span></span><br><span class=\"line\">  &#125;)]</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h1 id=\"pinia\"><a class=\"markdownIt-Anchor\" href=\"#pinia\">#</a> Pinia</h1>\n<h2 id=\"pinia-和-vuex-的区别\"><a class=\"markdownIt-Anchor\" href=\"#pinia-和-vuex-的区别\">#</a> pinia 和 vuex 的区别：</h2>\n<ol>\n<li>pinia 没有 mutations，只有：state、getters、actions</li>\n<li>pinia 分模块不需要 modules（vuex 需要）</li>\n<li>ts 支持更好</li>\n<li>自动化代码拆分</li>\n<li>pinia 体积更小（性能更好）</li>\n<li>可以直接修改 state 数据（vuex 只能通过 mutations 提交来修改），但是不能直接解构，应该要用换种解构方式 storeToRefs</li>\n</ol>\n<h2 id=\"pinia-使用\"><a class=\"markdownIt-Anchor\" href=\"#pinia-使用\">#</a> pinia 使用</h2>\n<ol>\n<li>安装</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add pinia</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li><code>src/main.js</code> : 创建一个 pinia（根存储）并将其传递给应用程序：</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createPinia &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;pinia&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(<span class=\"title function_\">createPinia</span>());</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li><code>src/store/index.js</code>  中使用</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; defineStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;pinia&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 1. 定义容器并导出</span></span><br><span class=\"line\"><span class=\"comment\"> * 参数一: 容器ID, 唯一, 将来 Pinia 会把所有的容器挂载到根容器</span></span><br><span class=\"line\"><span class=\"comment\"> * 参数二: 选项对象</span></span><br><span class=\"line\"><span class=\"comment\"> * 返回值: 函数, 调用的时候要空参调用, 返回容器实例</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> useStore = <span class=\"title function_\">defineStore</span>(<span class=\"string\">&quot;storeId&quot;</span>, &#123;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * 类似组件的 data, 用于存储全局的的状态</span></span><br><span class=\"line\"><span class=\"comment\">   * 注意:</span></span><br><span class=\"line\"><span class=\"comment\">   *    1.必须是函数, 为了在服务端渲染的时候避免交叉请求导致的数据交叉污染</span></span><br><span class=\"line\"><span class=\"comment\">   *    2.必须是箭头函数, 为了更好的 TS 类型推导</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"attr\">state</span>: <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      <span class=\"attr\">num</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">      <span class=\"attr\">name</span>: <span class=\"string\">&quot;张三&quot;</span>,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * 类似组件的 computed, 用来封装计算属性, 具有缓存特性</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"attr\">getters</span>: &#123;&#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * 类似组件的 methods, 封装业务逻辑, 修改state</span></span><br><span class=\"line\"><span class=\"comment\">   * 注意: 里面的函数不能定义成箭头函数(函数体中会用到this)</span></span><br><span class=\"line\"><span class=\"comment\">   * actions 可以是异步的，您可以在其中await 任何 API 调用甚至其他操作！</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"attr\">actions</span>: &#123;&#125;,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>在组件中使用：</li>\n</ol>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">setup</span>&gt;</span></span></span><br><span class=\"line\">import &#123;useStore&#125; from &#x27;../store&#x27;</span><br><span class=\"line\">const store = useStore()</span><br><span class=\"line\"></span><br><span class=\"line\">let &#123;name,num&#125; = store</span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span></span><br><span class=\"line\">&#123;&#123;num&#125;&#125;</span><br><span class=\"line\">&#123;&#123;name&#125;&#125;</span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<h2 id=\"组件修改-pinia-的-state-数据storetorefs\"><a class=\"markdownIt-Anchor\" href=\"#组件修改-pinia-的-state-数据storetorefs\">#</a> 组件修改 pinia 的 state 数据: <code>storeToRefs</code></h2>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">setup</span>&gt;</span></span></span><br><span class=\"line\">import &#123;useStore&#125; from &#x27;../store&#x27;</span><br><span class=\"line\">import &#123;storeToRefs&#125; from &#x27;pinia&#x27;</span><br><span class=\"line\">const store = useStore()</span><br><span class=\"line\"></span><br><span class=\"line\">let &#123;name,num&#125; = storeToRefs(store)</span><br><span class=\"line\">const btn = () =&gt; &#123;</span><br><span class=\"line\">  name.value = &#x27;李四&#x27;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"language-handlebars\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span></span></span></span><br><span class=\"line\">  &#123;&#123;name&#125;&#125;</span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"language-handlebars\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span> @<span class=\"attr\">click</span>=<span class=\"string\">&quot;btn&quot;</span>&gt;</span></span></span></span>修改名称<span class=\"language-xml\"><span class=\"language-handlebars\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"language-handlebars\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span></span></span></span><br></pre></td></tr></table></figure>\n<h2 id=\"批量修改\"><a class=\"markdownIt-Anchor\" href=\"#批量修改\">#</a> 批量修改</h2>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">setup</span>&gt;</span></span></span><br><span class=\"line\">.....</span><br><span class=\"line\">store.$patch(state =&gt; &#123;</span><br><span class=\"line\">  state.num++,</span><br><span class=\"line\">  state.name = &#x27;王五&#x27;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">.....</span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<h2 id=\"pinia-分模块\"><a class=\"markdownIt-Anchor\" href=\"#pinia-分模块\">#</a> pinia 分模块</h2>\n<h2 id=\"pinia-持久化存储插件实现\"><a class=\"markdownIt-Anchor\" href=\"#pinia-持久化存储插件实现\">#</a> pinia 持久化存储 [插件实现]</h2>\n<p>可以用 localStorage，也可以用插件： <code>pinia-plugin-persist</code></p>\n<ol>\n<li>安装</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add pinia-plugin-persist --save</span><br></pre></td></tr></table></figure>\n<p>2. <code>src/store/index.js</code>  中使用:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; defineStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;pinia&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">//引入pinia持久化存储插件</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> piniaPluginPersist <span class=\"keyword\">from</span> <span class=\"string\">`pinia-plugin-persist`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> useStore = <span class=\"title function_\">defineStore</span>(<span class=\"string\">&quot;storeId&quot;</span>, &#123;</span><br><span class=\"line\">  <span class=\"attr\">state</span>: <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      <span class=\"attr\">num</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">      <span class=\"attr\">name</span>: <span class=\"string\">&quot;张三&quot;</span>,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">getters</span>: &#123;&#125;,</span><br><span class=\"line\">  <span class=\"attr\">actions</span>: &#123;&#125;,</span><br><span class=\"line\">  <span class=\"comment\">//开启数据缓存</span></span><br><span class=\"line\">  <span class=\"attr\">persist</span>:&#123;</span><br><span class=\"line\">    <span class=\"attr\">enable</span>:<span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"attr\">strategies</span>:[</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">key</span>:<span class=\"string\">&#x27;my_user&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">storage</span>:<span class=\"variable language_\">localStorage</span>,<span class=\"comment\">//默认是sessionStorage：刷新页面会缓存，但关掉页面就会清理掉缓存</span></span><br><span class=\"line\">        <span class=\"attr\">path</span>:[<span class=\"string\">&#x27;name&#x27;</span>,<span class=\"string\">&#x27;age&#x27;</span>],<span class=\"comment\">//来决定state中的哪些数据需要持久化存储</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//使用插件</span></span><br><span class=\"line\">useStore.<span class=\"title function_\">use</span>(piniaPluginPersist)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> useStore</span><br></pre></td></tr></table></figure>\n<h1 id=\"图片懒加载\"><a class=\"markdownIt-Anchor\" href=\"#图片懒加载\">#</a> 图片懒加载</h1>\n<p>引入所有图片：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** glob是懒加载模式</span></span><br><span class=\"line\"><span class=\"comment\"> * globEager 静态加载</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> imgList = <span class=\"keyword\">import</span>.<span class=\"property\">meta</span>.<span class=\"title function_\">globEager</span>(<span class=\"string\">&quot;./assets/images/*.*&quot;</span>);</span><br></pre></td></tr></table></figure>\n<h1 id=\"event-loop-和-nexttick\"><a class=\"markdownIt-Anchor\" href=\"#event-loop-和-nexttick\">#</a> event loop 和 nextTick</h1>\n<ul>\n<li>JS 执行机制<br>\n在我们学 js 的时候都知道 js 是单线程的，如果是多线程的话会引发一个问题 —— 在同一时间同时操作 DOM 一个增加一个删除 JS 就不知道到底要干嘛了。但是随着 HTML5 到来 js 也支持了多线程 webWorker ，但是也是不允许操作 DOM</li>\n</ul>\n<p>单线程就意味着所有的任务都需要排队，后面的任务需要等前面的任务执行完才能执行，如果前面的任务耗时过长，后面的任务就需要一直等，一些从用户角度上不需要等待的任务就会一直等待，这个从体验角度上来讲是不可接受的，所以 JS 中就出现了异步的概念。</p>\n<ul>\n<li>同步任务：同步任务</li>\n<li>异步任务</li>\n</ul>\n<ol>\n<li>宏任务<br>\n script (整体代码)、setTimeout、setInterval、UI 交互事件、postMessage、Ajax</li>\n<li>微任务<br>\n Promise.then catch finally、MutaionObserver、process.nextTick (Node.js 环境)</li>\n</ol>\n<ul>\n<li>运行机制</li>\n</ul>\n<p>所有的同步任务都是在主进程执行的形成一个执行栈，主线程之外，还存在一个 &quot;任务队列&quot;，异步任务执行队列中先执行宏任务，然后清空当次宏任务中的所有微任务，然后进行下一个 tick 如此形成循环。</p>\n<p>nextTick 就是创建一个异步任务，那么它自然要等到同步任务执行完成后才执行。</p>\n<h1 id=\"docker-碰撞-vue3\"><a class=\"markdownIt-Anchor\" href=\"#docker-碰撞-vue3\">#</a> docker 碰撞 vue3</h1>\n<p>领导要求你维护四个项目，每个项目 node 版本不同，框架不同，是不是非常头疼？docker 可以帮你解决这个问题<br>\n<a href=\"https://xiaoman.blog.csdn.net/article/details/126375948\"> https://xiaoman.blog.csdn.net/article/details/126375948</a></p>\n<h1 id=\"环境变量\"><a class=\"markdownIt-Anchor\" href=\"#环境变量\">#</a> 环境变量</h1>\n<p><a href=\"https://xiaoman.blog.csdn.net/article/details/126375974\">https://xiaoman.blog.csdn.net/article/details/126375974</a><br>\n 环境变量：他的主要作用就是让开发者区分不同的运行环境，来实现 兼容开发和生产<br>\n例如 npm run dev 就是开发环境  npm run build 就是生产环境等等<br>\n Vite 在一个特殊的 import.meta.env 对象上暴露环境变量。这里有一些在所有情况下都可以使用的内建变量</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">&quot;BASE_URL&quot;</span><span class=\"punctuation\">:</span><span class=\"string\">&quot;/&quot;</span><span class=\"punctuation\">,</span> <span class=\"comment\">//部署时的URL前缀</span></span><br><span class=\"line\"><span class=\"attr\">&quot;MODE&quot;</span><span class=\"punctuation\">:</span><span class=\"string\">&quot;development&quot;</span><span class=\"punctuation\">,</span> <span class=\"comment\">//运行模式</span></span><br><span class=\"line\"><span class=\"attr\">&quot;DEV&quot;</span><span class=\"punctuation\">:</span><span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span><span class=\"string\">&quot;  //是否在dev环境</span></span><br><span class=\"line\"><span class=\"string\">PROD&quot;</span><span class=\"punctuation\">:</span><span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span> <span class=\"comment\">//是否是build 环境</span></span><br><span class=\"line\"><span class=\"attr\">&quot;SSR&quot;</span><span class=\"punctuation\">:</span><span class=\"literal\"><span class=\"keyword\">false</span></span> <span class=\"comment\">//是否是SSR 服务端渲染模式</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>需要注意的一点就是这个环境变量不能使用动态赋值 import.meta.env [key] 应为这些环境变量在打包的时候是会被硬编码的通过 JSON.stringify 注入浏览器的</p>\n<ul>\n<li>配置额外的环境变量<br>\n在根目录新建 env 文件 <a href=\"http://xn--env-i68dk7a64ltvdqwozjn.xxx\">可以创建多个 env.xxx</a></li>\n</ul>\n<h1 id=\"vue3-性能优化\"><a class=\"markdownIt-Anchor\" href=\"#vue3-性能优化\">#</a> Vue3 性能优化</h1>\n<p><a href=\"https://xiaoman.blog.csdn.net/article/details/126811832\">https://xiaoman.blog.csdn.net/article/details/126811832</a></p>\n<h1 id=\"跨域\"><a class=\"markdownIt-Anchor\" href=\"#跨域\">#</a> 跨域</h1>\n<ol>\n<li>首先我们先了解一下什么是跨域<br>\n主要是出于浏览器的同源策略限制，它是浏览器最核心也最基本的安全功能。</li>\n</ol>\n<p>当一个请求 url 的 协议、域名、端口 三者之间任意一个与当前页面 url 不同即为跨域。</p>\n<p>例如 <a href=\"http://xxxx.com\">xxxx.com</a> -&gt; <a href=\"http://xxxx.com\">xxxx.com</a> 存在跨域 协议不同</p>\n<p>例如 127.x.x.x:8001 -&gt; 127.x.x.x:8002 存在跨域 端口不同</p>\n<p>例如 <a href=\"http://www.xxxx.com\">www.xxxx.com</a> -&gt; <a href=\"http://www.yyyy.com\">www.yyyy.com</a> 存在跨域 域名不同</p>\n<ol start=\"2\">\n<li>如何解决跨域<br>\n vite.config.js/ts ：</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">defineConfig</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [<span class=\"title function_\">vue</span>()],</span><br><span class=\"line\">  <span class=\"attr\">server</span>:&#123;</span><br><span class=\"line\">     <span class=\"attr\">proxy</span>:&#123;</span><br><span class=\"line\">        <span class=\"string\">&#x27;/api&#x27;</span>:&#123;</span><br><span class=\"line\">            <span class=\"attr\">target</span>:<span class=\"string\">&quot;http://localhost:9001/&quot;</span>, <span class=\"comment\">//跨域地址</span></span><br><span class=\"line\">            <span class=\"attr\">changeOrigin</span>:<span class=\"literal\">true</span>, <span class=\"comment\">//支持跨域</span></span><br><span class=\"line\">            <span class=\"attr\">rewrite</span>:<span class=\"function\">(<span class=\"params\">path</span>) =&gt;</span> path.<span class=\"title function_\">replace</span>(<span class=\"regexp\">/^\\/api/</span>, <span class=\"string\">&quot;&quot;</span>)<span class=\"comment\">//重写路径,替换/api</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>fetch 替换 /api 他会截取 /api 替换成 target 地址</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;ts&quot;</span> <span class=\"attr\">setup</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">import</span> &#123;ref,reactive &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue&#x27;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"title function_\">fetch</span>(<span class=\"string\">&#x27;/api/xm&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"import-xxx-from和import-xxx-from-的区别\"><a class=\"markdownIt-Anchor\" href=\"#import-xxx-from和import-xxx-from-的区别\">#</a> import {xxx} from 和 import xxx from 的区别</h1>\n<p>通过 export 方式导出，在导入时要加 <code>&#123;&#125;</code> :</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//utils.js文件中 导出</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">function</span> <span class=\"title function_\">phoneReg</span>(<span class=\"params\">str</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"regexp\">/^1[3|4|5|6|7|8|9][0-9]&#123;9&#125;$/</span>.<span class=\"title function_\">test</span>(str);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">//导入</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;pwdReg&#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../utils/utils.js&quot;</span></span><br></pre></td></tr></table></figure>\n<p>export default 则不需要:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//utils.js文件中 导出</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">function</span> <span class=\"title function_\">phoneReg</span>(<span class=\"params\">str</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"regexp\">/^1[3|4|5|6|7|8|9][0-9]&#123;9&#125;$/</span>.<span class=\"title function_\">test</span>(str);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">//导入</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> pwdReg <span class=\"keyword\">from</span> <span class=\"string\">&quot;../utils/utils.js&quot;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>在一个文件或模块中，export  、import 可以有多个，export default 仅有一个</li>\n<li>export 能直接导出变量表达式，export default 不行</li>\n<li>export default 向外暴露的成员，可以使用任意变量来接收，但 export 向外暴露的成员，只能使用 {} 形式接收，这种形式叫按需导出。</li>\n<li>在一个模块中，export default 只允许向外暴露一次，但 export 允许向外暴露多次</li>\n</ul>\n<h3 id=\"import-as-api-from-文件路径\"><a class=\"markdownIt-Anchor\" href=\"#import-as-api-from-文件路径\">#</a> import * as API from ‘@/ 文件路径’</h3>\n<p>这种写法是把所有的输出包裹到 API 对象里</p>\n",
            "tags": [
                "vue3"
            ]
        },
        {
            "id": "https://eucli.top/2023/03/10/%E6%8B%9B%E7%94%9F%E6%8F%90%E6%8A%A5%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE/",
            "url": "https://eucli.top/2023/03/10/%E6%8B%9B%E7%94%9F%E6%8F%90%E6%8A%A5%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE/",
            "title": "招生提报系统",
            "date_published": "2023-03-10T10:45:34.000Z",
            "content_html": "<p>在开发组混了那么久，本菜狗终于要参与项目了吗，虽然只是蹭项目，虽然这次的技术栈我一个也不熟悉，但是扑街就是蜜汁自信嗷 ┗|｀ O′|┛ ~~<br>\n 希望能在这次的项目开发中学到些东西吧，毕竟都大二下学期了，天天被卷的焦虑，再不好好学就真的要去搬砖廖～</p>\n<h1 id=\"day1\"><a class=\"markdownIt-Anchor\" href=\"#day1\">#</a> Day1</h1>\n<p>跟着大佬学习才知道在进行一个项目的开发前还需要写产品文档和技术文档，感觉有必要记录一下：</p>\n<h2 id=\"开发文档\"><a class=\"markdownIt-Anchor\" href=\"#开发文档\">#</a> 开发文档</h2>\n<ol>\n<li>需求背景 先把要做的事情铺垫下背景，上下文交代清楚，谁来看都明白要给谁做</li>\n<li>现状、预期目标和收益 把做之前和做之后做个对比</li>\n<li>产品调研（就是相关产品都是咋做的，实在没有可以不写）</li>\n<li>产品整体功能设计 这里就可以拆大概的功能模块了<br>\n ps. 技术栈和稍微偏技术一些的分析就不用单独拉个模块了，可以穿插在文档里，甚至直接不写。整体设计里面如果想拆的更细一点也可以把详细设计都加上，每个模块每个页面给个原型图和大概的交互逻辑，然后有异常处理之类的</li>\n</ol>\n<h2 id=\"技术文档\"><a class=\"markdownIt-Anchor\" href=\"#技术文档\">#</a> 技术文档</h2>\n<p>技术文档首先是需求反讲，然后是详细模块方案，接口方案，兼容性与异常兜底方案等等，然后是方案初筛检查，备选方案列表，功能开关，自测用例表，性能测试表，排期</p>\n<ul>\n<li>还有就是飞书原来那么强大，功能特别丰富，能画流程图、甘特图，还能在文档里导入各种东西，实在是太方便辣！之前一直只是听说过，看来真的有必要重视起来嗷。还用到了 sourcetree、apifox，基本都是第一次听说过，之前更是用都没用过，我平时只是看 b 站的视频来学习，缺少实战，有很多问题都解决不了。</li>\n</ul>\n<p>因为讨论出来大体流程后已经挺晚的了，加上这次项目只有三个人（两个前端一个后端），还有一个学后端的大三学长提供场外支援，项目要的不是很急，要到八月份，所以理论上事件还是很充足的，不过考虑到两个前端中有我这个菜狗在拖后腿，究竟能多块也不好说。</p>\n<p>我现在的任务是做招生提报系统的登录页面，直接 CV 了之前橙果官网的登录页，但因为橙果用的是 vue2，新项目全特喵是新技术（Vue3、TypeScript、Element Plus、Pinia 和 Vite ），当然一个登录页用不到这么多东西，但是对于本菜狗来说搬运起来还是很痛苦的.</p>\n<h1 id=\"day2\"><a class=\"markdownIt-Anchor\" href=\"#day2\">#</a> Day2</h1>\n<p>耗费了整整一天，而且基本还是在大佬的帮助下才堪堪完成了登录页面，在 sourcetree 上提交分支并合并，过程可谓是折磨，因为自己不会的太多而别人会的太多而焦虑自我损耗，老玻璃心了嗷。全称基本不是在 CV 就是在面向搜索引擎，气死偶咧！<br>\n但好歹是把登录页面给弄出来了，还是记录一下吧 ┭┮﹏┭┮……</p>\n<ol>\n<li><code>App.vue</code>  中 <code>&lt;template&gt;&lt;/template&gt;</code>  里写：</li>\n</ol>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;router-view v-slot=&quot;&#123; Component &#125;&quot;&gt;</span><br><span class=\"line\">    &lt;transition&gt;</span><br><span class=\"line\">      &lt;component :is=&quot;Component&quot; /&gt;</span><br><span class=\"line\">    &lt;/transition&gt;</span><br><span class=\"line\">  &lt;/router-view&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>在 pages 文件夹下创建 <code>Login.vue</code> ，cv 过来的，就个表单，用的是 element-plus，很方便，别人封装好的就是好看又好用！<br>\nelement-plus 有专门的 Form 表单组件，而且自定义性非常的高，可以设置行内表单（一行内显示），对齐方式。<br>\n而且还能够进行表单校验，来验证用户输入是否符合规范，只需要为 <code>rules</code>  属性传入约定的验证规则，并将 <code>form-Item</code>  的 <code>prop</code>  属性设置为需要验证的特殊值就好了！就比如 <code>&lt;el-form&gt;</code>  中有 <code>&lt;el-form ref=&quot;ruleFormRef&quot; :model=&quot;ruleForm&quot; :model=&quot;ruleForm&quot;&gt;</code> ，该标签包含:</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;el-form-item label=<span class=\"string\">&quot;Activity name&quot;</span> prop=<span class=\"string\">&quot;name&quot;</span>&gt;</span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">el-input</span> <span class=\"attr\">v-model</span>=<span class=\"string\">&quot;ruleForm.name&quot;</span> /&gt;</span></span></span><br><span class=\"line\">&lt;/el-form-item&gt;</span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">el-form-item</span> <span class=\"attr\">label</span>=<span class=\"string\">&quot;Activity zone&quot;</span> <span class=\"attr\">prop</span>=<span class=\"string\">&quot;region&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">  <span class=\"tag\">&lt;<span class=\"name\">el-select</span> <span class=\"attr\">v-model</span>=<span class=\"string\">&quot;ruleForm.region&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;Activity zone&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;<span class=\"name\">el-option</span> <span class=\"attr\">label</span>=<span class=\"string\">&quot;Zone one&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;shanghai&quot;</span> /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;<span class=\"name\">el-option</span> <span class=\"attr\">label</span>=<span class=\"string\">&quot;Zone two&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;beijing&quot;</span> /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">  <span class=\"tag\">&lt;/<span class=\"name\">el-select</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">el-form-item</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<p>其中 <code>name</code>  和 <code>region</code>  作为 <code>prop</code>  是 <code>:model</code>  的键名，写验证的时候就可以:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> ruleFormRef = ref&lt;<span class=\"title class_\">FormInstance</span>&gt;()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> ruleForm = <span class=\"title function_\">reactive</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">  <span class=\"attr\">region</span>: <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> rules = reactive&lt;<span class=\"title class_\">FormRules</span>&gt;(&#123;</span><br><span class=\"line\">  <span class=\"attr\">name</span>: [</span><br><span class=\"line\">    &#123; <span class=\"attr\">required</span>: <span class=\"literal\">true</span>, <span class=\"attr\">message</span>: <span class=\"string\">&#x27;Please input Activity name&#x27;</span>, <span class=\"attr\">trigger</span>: <span class=\"string\">&#x27;blur&#x27;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">min</span>: <span class=\"number\">3</span>, <span class=\"attr\">max</span>: <span class=\"number\">5</span>, <span class=\"attr\">message</span>: <span class=\"string\">&#x27;Length should be 3 to 5&#x27;</span>, <span class=\"attr\">trigger</span>: <span class=\"string\">&#x27;blur&#x27;</span> &#125;,</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"attr\">region</span>: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">required</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      <span class=\"attr\">message</span>: <span class=\"string\">&#x27;Please select Activity zone&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">trigger</span>: <span class=\"string\">&#x27;change&#x27;</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>还可以对表单进行尺寸控制，设置 <code>size</code>  属性。</p>\n<h3 id=\"form-attributes\"><a class=\"markdownIt-Anchor\" href=\"#form-attributes\">#</a> Form Attributes：</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">属性名</th>\n<th style=\"text-align:left\">说明</th>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:left\">默认值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">model</td>\n<td style=\"text-align:left\">表单数据对象</td>\n<td style=\"text-align:left\"><code>object</code></td>\n<td style=\"text-align:left\">—</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">rules</td>\n<td style=\"text-align:left\">表单验证规则</td>\n<td style=\"text-align:left\"><code>object</code></td>\n<td style=\"text-align:left\">—</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">inline</td>\n<td style=\"text-align:left\">行内表单模式</td>\n<td style=\"text-align:left\"><code>boolean</code></td>\n<td style=\"text-align:left\">false</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">label-position</td>\n<td style=\"text-align:left\">表单域标签的位置， 当设置为  <code>left</code>  或  <code>right</code>  时，则也需要设置  <code>label-width</code>  属性</td>\n<td style=\"text-align:left\"><code>enum</code></td>\n<td style=\"text-align:left\">right</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">label-width</td>\n<td style=\"text-align:left\">标签的长度，例如  <code>'50px'</code> 。 作为 Form 直接子元素的 form-item 会继承该值。 可以使用  <code>auto</code> 。</td>\n<td style=\"text-align:left\"><code>string</code>  /  <code>number</code></td>\n<td style=\"text-align:left\">—</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">label-suffix</td>\n<td style=\"text-align:left\">表单域标签的后缀</td>\n<td style=\"text-align:left\"><code>string</code></td>\n<td style=\"text-align:left\">—</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">hide-required-asterisk</td>\n<td style=\"text-align:left\">是否隐藏必填字段标签旁边的红色星号。</td>\n<td style=\"text-align:left\"><code>boolean</code></td>\n<td style=\"text-align:left\">false</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">require-asterisk-position</td>\n<td style=\"text-align:left\">星号的位置。</td>\n<td style=\"text-align:left\"><code>enum</code></td>\n<td style=\"text-align:left\">left</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">show-message</td>\n<td style=\"text-align:left\">是否显示校验错误信息</td>\n<td style=\"text-align:left\"><code>boolean</code></td>\n<td style=\"text-align:left\">true</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">inline-message</td>\n<td style=\"text-align:left\">是否以行内形式展示校验信息</td>\n<td style=\"text-align:left\"><code>boolean</code></td>\n<td style=\"text-align:left\">false</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">status-icon</td>\n<td style=\"text-align:left\">是否在输入框中显示校验结果反馈图标</td>\n<td style=\"text-align:left\"><code>boolean</code></td>\n<td style=\"text-align:left\">false</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">validate-on-rule-change</td>\n<td style=\"text-align:left\">是否在  <code>rules</code>  属性改变后立即触发一次验证</td>\n<td style=\"text-align:left\"><code>boolean</code></td>\n<td style=\"text-align:left\">true</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">size</td>\n<td style=\"text-align:left\">用于控制该表单内组件的尺寸</td>\n<td style=\"text-align:left\"><code>enum</code></td>\n<td style=\"text-align:left\">—</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">disabled</td>\n<td style=\"text-align:left\">是否禁用该表单内的所有组件。 如果设置为  <code>true</code> , 它将覆盖内部组件的  <code>disabled</code>  属性</td>\n<td style=\"text-align:left\"><code>boolean</code></td>\n<td style=\"text-align:left\">false</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">scroll-to-error</td>\n<td style=\"text-align:left\">当校验失败时，滚动到第一个错误表单项</td>\n<td style=\"text-align:left\"><code>boolean</code></td>\n<td style=\"text-align:left\">false</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"form-methods\"><a class=\"markdownIt-Anchor\" href=\"#form-methods\">#</a> Form Methods：</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">方法名</th>\n<th style=\"text-align:left\">说明</th>\n<th style=\"text-align:left\">类型</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><code>validate</code></td>\n<td style=\"text-align:left\">对整个表单的内容进行验证。 接收一个回调函数，或返回  <code>Promise</code> 。</td>\n<td style=\"text-align:left\"><code>(callback?: (isValid: boolean, invalidFields?: ValidateFieldsError) =&gt; void) =&gt; Promise&lt;boolean&gt;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>validateField</code></td>\n<td style=\"text-align:left\">验证具体的某个字段。</td>\n<td style=\"text-align:left\"><code>(props?: Arrayable&lt;FormItemProp&gt;, callback?: (isValid: boolean, invalidFields?: ValidateFieldsError) =&gt; void) =&gt; Promise&lt;void&gt;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>resetFields</code></td>\n<td style=\"text-align:left\">重置该表单项，将其值重置为初始值，并移除校验结果</td>\n<td style=\"text-align:left\"><code>(props?: Arrayable&lt;FormItemProp&gt;) =&gt; void</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>scrollToField</code></td>\n<td style=\"text-align:left\">滚动到指定的字段</td>\n<td style=\"text-align:left\"><code>(prop: FormItemProp) =&gt; void</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>clearValidate</code></td>\n<td style=\"text-align:left\">清理某个字段的表单验证信息。</td>\n<td style=\"text-align:left\"><code>(props?: Arrayable&lt;FormItemProp&gt;) =&gt; void</code></td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"form-methods-2\"><a class=\"markdownIt-Anchor\" href=\"#form-methods-2\">#</a> Form Methods：</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">事件名</th>\n<th style=\"text-align:left\">说明</th>\n<th style=\"text-align:left\">类型</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">validate</td>\n<td style=\"text-align:left\">任一表单项被校验后触发</td>\n<td style=\"text-align:left\"><code>Function</code></td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"form-methods-3\"><a class=\"markdownIt-Anchor\" href=\"#form-methods-3\">#</a> Form Methods：</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">说明</th>\n<th style=\"text-align:left\">类型</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">validate</td>\n<td style=\"text-align:left\">对整个表单的内容进行验证。 接收一个回调函数，或返回  <code>Promise</code> 。</td>\n<td style=\"text-align:left\"><code>Function</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">validateField</td>\n<td style=\"text-align:left\">验证具体的某个字段。</td>\n<td style=\"text-align:left\"><code>Function</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">resetFields</td>\n<td style=\"text-align:left\">重置该表单项，将其值重置为初始值，并移除校验结果</td>\n<td style=\"text-align:left\"><code>Function</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">scrollToField</td>\n<td style=\"text-align:left\">滚动到指定的字段</td>\n<td style=\"text-align:left\"><code>Function</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">clearValidate</td>\n<td style=\"text-align:left\">清理某个字段的表单验证信息。</td>\n<td style=\"text-align:left\"><code>Function</code></td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"formitem-attributes\"><a class=\"markdownIt-Anchor\" href=\"#formitem-attributes\">#</a> FormItem Attributes：</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">说明</th>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:left\">默认值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">prop</td>\n<td style=\"text-align:left\"><code>model</code>  的键名。 它可以是一个路径数组 (例如  <code>['a', 'b', 0]</code> )。 在定义了  <code>validate</code> 、 <code>resetFields</code>  的方法时，该属性是必填的</td>\n<td style=\"text-align:left\"><code>string</code>  /  <code>string[]</code></td>\n<td style=\"text-align:left\">—</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">label</td>\n<td style=\"text-align:left\">标签文本</td>\n<td style=\"text-align:left\"><code>string</code></td>\n<td style=\"text-align:left\">—</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">label-width</td>\n<td style=\"text-align:left\">标签宽度，例如  <code>'50px'</code> 。 可以使用  <code>auto</code> 。</td>\n<td style=\"text-align:left\"><code>string</code>  /  <code>number</code></td>\n<td style=\"text-align:left\">—</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">required</td>\n<td style=\"text-align:left\">是否为必填项，如不设置，则会根据校验规则确认</td>\n<td style=\"text-align:left\"><code>boolean</code></td>\n<td style=\"text-align:left\">false</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">rules</td>\n<td style=\"text-align:left\">表单验证规则，具体配置见<a href=\"https://element-plus.gitee.io/zh-CN/component/form.html#formitemrule\">下表</a>，更多内容可以参考<a href=\"https://github.com/yiminghe/async-validator\"> async-validator</a></td>\n<td style=\"text-align:left\"><code>object</code></td>\n<td style=\"text-align:left\">—</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">error</td>\n<td style=\"text-align:left\">表单域验证错误时的提示信息。设置该值会导致表单验证状态变为 error，并显示该错误信息。</td>\n<td style=\"text-align:left\"><code>string</code></td>\n<td style=\"text-align:left\">—</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">show-message</td>\n<td style=\"text-align:left\">是否显示校验错误信息</td>\n<td style=\"text-align:left\"><code>boolean</code></td>\n<td style=\"text-align:left\">true</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">inline-message</td>\n<td style=\"text-align:left\">是否在行内显示校验信息</td>\n<td style=\"text-align:left\"><code>boolean</code></td>\n<td style=\"text-align:left\">false</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">size</td>\n<td style=\"text-align:left\">用于控制该表单域下组件的默认尺寸</td>\n<td style=\"text-align:left\"><code>enum</code></td>\n<td style=\"text-align:left\">default</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">for</td>\n<td style=\"text-align:left\">和原生标签相同能力</td>\n<td style=\"text-align:left\"><code>string</code></td>\n<td style=\"text-align:left\">—</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">validate-status</td>\n<td style=\"text-align:left\">formitem 校验的状态</td>\n<td style=\"text-align:left\"><code>enum</code></td>\n<td style=\"text-align:left\">—</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"formitemrule\"><a class=\"markdownIt-Anchor\" href=\"#formitemrule\">#</a> FormItemRule：</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">插槽名</th>\n<th style=\"text-align:left\">说明</th>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:left\">默认</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">trigger</td>\n<td style=\"text-align:left\">验证逻辑的触发方式</td>\n<td style=\"text-align:left\"><code>enum</code></td>\n<td style=\"text-align:left\">—</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"formitem-slots\"><a class=\"markdownIt-Anchor\" href=\"#formitem-slots\">#</a> FormItem Slots：</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">说明</th>\n<th style=\"text-align:left\">类型</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">default</td>\n<td style=\"text-align:left\">表单的内容。</td>\n<td style=\"text-align:left\">—</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">label</td>\n<td style=\"text-align:left\">标签位置显示的内容</td>\n<td style=\"text-align:left\"><code>object</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">error</td>\n<td style=\"text-align:left\">验证错误信息的显示内容</td>\n<td style=\"text-align:left\"><code>object</code></td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"formitem-exposes\"><a class=\"markdownIt-Anchor\" href=\"#formitem-exposes\">#</a> FormItem Exposes：</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">描述</th>\n<th style=\"text-align:left\">类型</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">size</td>\n<td style=\"text-align:left\">表单项大小</td>\n<td style=\"text-align:left\"><code>object</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">validateMessage</td>\n<td style=\"text-align:left\">校验消息</td>\n<td style=\"text-align:left\"><code>object</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">validateState</td>\n<td style=\"text-align:left\">校验状态</td>\n<td style=\"text-align:left\"><code>object</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">validate</td>\n<td style=\"text-align:left\">验证表单项</td>\n<td style=\"text-align:left\"><code>Function</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">resetField</td>\n<td style=\"text-align:left\">对该表单项进行重置，将其值重置为初始值并移除校验结果</td>\n<td style=\"text-align:left\"><code>Function</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">clearValidate</td>\n<td style=\"text-align:left\">移除该表单项的校验结果</td>\n<td style=\"text-align:left\"><code>Function</code></td>\n</tr>\n</tbody>\n</table>\n<ol start=\"3\">\n<li>因为登录页用到了 element plus，所以要在 main.ts 中导入：</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createApp &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">ElementPlus</span> <span class=\"keyword\">from</span> <span class=\"string\">&quot;element-plus&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;element-plus/dist/index.css&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">App</span> <span class=\"keyword\">from</span> <span class=\"string\">&quot;./App.vue&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"title function_\">createApp</span>(<span class=\"title class_\">App</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(<span class=\"title class_\">ElementPlus</span>);</span><br><span class=\"line\">app.<span class=\"title function_\">mount</span>(<span class=\"string\">&quot;#app&quot;</span>);</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>因为登录页点了 “登录” 之后要想服务器发请求，所以要从 api 文件夹中引入，我看大佬是把 axios 的二次封装写成 <code>requset.js</code>  放在 utils 文件夹下，然后 api 文件夹中的文件再引入 <code>requset.js</code> 。<br>\naxios 封装如下：</li>\n</ol>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios, &#123; <span class=\"title class_\">AxiosRequestConfig</span>, <span class=\"title class_\">AxiosResponse</span>, <span class=\"title class_\">AxiosInstance</span>, <span class=\"title class_\">AxiosError</span>, <span class=\"title class_\">InternalAxiosRequestConfig</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;axios&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">ElLoadingService</span>, <span class=\"title class_\">ElMessage</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;element-plus&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 定义请求响应参数，不含data</span></span><br><span class=\"line\"><span class=\"keyword\">interface</span> <span class=\"title class_\">Result</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">code</span>: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  <span class=\"attr\">msg</span>: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 请求响应参数，包含data</span></span><br><span class=\"line\"><span class=\"keyword\">interface</span> <span class=\"title class_\">ResultData</span>&lt;T = <span class=\"built_in\">any</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title class_\">Result</span> &#123;</span><br><span class=\"line\">  data?: T;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> config = &#123;</span><br><span class=\"line\">  <span class=\"attr\">baseURL</span>: <span class=\"keyword\">import</span>.<span class=\"property\">meta</span>.<span class=\"property\">env</span>.<span class=\"property\">VITE_BASE_URL</span>,</span><br><span class=\"line\">  <span class=\"attr\">timeout</span>: (<span class=\"number\">10</span> * <span class=\"number\">1000</span>) <span class=\"keyword\">as</span> <span class=\"built_in\">number</span>, <span class=\"comment\">// 请求超时时间</span></span><br><span class=\"line\">  <span class=\"attr\">withCredentials</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 跨域时候允许携带凭证</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"attr\">loading</span>: <span class=\"literal\">null</span> | <span class=\"title class_\">ReturnType</span>&lt;<span class=\"keyword\">typeof</span> <span class=\"title class_\">ElLoadingService</span>&gt; = <span class=\"literal\">null</span>;</span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">RequestHttp</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">service</span>: <span class=\"title class_\">AxiosInstance</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">constructor</span>(<span class=\"params\">config: AxiosRequestConfig</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">service</span> = axios.<span class=\"title function_\">create</span>(config);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// request拦截器</span></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">service</span>.<span class=\"property\">interceptors</span>.<span class=\"property\">request</span>.<span class=\"title function_\">use</span>(</span><br><span class=\"line\">      <span class=\"function\">(<span class=\"params\">config: InternalAxiosRequestConfig</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!config.<span class=\"property\">headers</span>) <span class=\"keyword\">return</span> config;</span><br><span class=\"line\">        config.<span class=\"property\">headers</span>.<span class=\"property\">Authorization</span> = <span class=\"string\">`Bearer <span class=\"subst\">$&#123;sessionStorage.getItem(<span class=\"string\">&quot;token&quot;</span>)&#125;</span>`</span>;</span><br><span class=\"line\">        config.<span class=\"property\">headers</span>[<span class=\"string\">&quot;Content-Type&quot;</span>] = <span class=\"string\">&quot;application/json;charset=utf-8&quot;</span>;</span><br><span class=\"line\">        loading = <span class=\"title class_\">ElLoadingService</span>(&#123;</span><br><span class=\"line\">          <span class=\"attr\">lock</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">          <span class=\"attr\">text</span>: <span class=\"string\">&quot;加载中&quot;</span>,</span><br><span class=\"line\">          <span class=\"attr\">background</span>: <span class=\"string\">&quot;rgba(0, 0, 0, 0.7)&quot;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> config;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"function\">(<span class=\"params\">error: AxiosError</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">error</span>(error);</span><br><span class=\"line\">        <span class=\"title class_\">Promise</span>.<span class=\"title function_\">reject</span>(error);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    );</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// response 拦截器</span></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">service</span>.<span class=\"property\">interceptors</span>.<span class=\"property\">response</span>.<span class=\"title function_\">use</span>(</span><br><span class=\"line\">      <span class=\"function\">(<span class=\"params\">response: AxiosResponse</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> res = response.<span class=\"property\">data</span>;</span><br><span class=\"line\">        loading?.<span class=\"title function_\">close</span>();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"function\">(<span class=\"params\">error: AxiosError</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">error</span>(<span class=\"string\">&quot;err&quot;</span> + error);</span><br><span class=\"line\">        loading?.<span class=\"title function_\">close</span>();</span><br><span class=\"line\">        <span class=\"title class_\">ElMessage</span>(&#123;</span><br><span class=\"line\">          <span class=\"attr\">message</span>: <span class=\"string\">`网络超时，没有请求到数据`</span>,</span><br><span class=\"line\">          <span class=\"attr\">type</span>: <span class=\"string\">&quot;error&quot;</span>,</span><br><span class=\"line\">          <span class=\"attr\">duration</span>: <span class=\"number\">3</span> * <span class=\"number\">1000</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title class_\">Promise</span>.<span class=\"title function_\">reject</span>(error);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 常用方法封装</span></span><br><span class=\"line\">  get&lt;T&gt;(<span class=\"attr\">url</span>: <span class=\"built_in\">string</span>, params?: <span class=\"built_in\">object</span>): <span class=\"title class_\">Promise</span>&lt;<span class=\"title class_\">ResultData</span>&lt;T&gt;&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span>.<span class=\"property\">service</span>.<span class=\"title function_\">get</span>(url, &#123; params &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  post&lt;T&gt;(<span class=\"attr\">url</span>: <span class=\"built_in\">string</span>, params?: <span class=\"built_in\">object</span>): <span class=\"title class_\">Promise</span>&lt;<span class=\"title class_\">ResultData</span>&lt;T&gt;&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span>.<span class=\"property\">service</span>.<span class=\"title function_\">post</span>(url, params);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  put&lt;T&gt;(<span class=\"attr\">url</span>: <span class=\"built_in\">string</span>, params?: <span class=\"built_in\">object</span>): <span class=\"title class_\">Promise</span>&lt;<span class=\"title class_\">ResultData</span>&lt;T&gt;&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span>.<span class=\"property\">service</span>.<span class=\"title function_\">put</span>(url, params);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">delete</span>&lt;T&gt;(<span class=\"attr\">url</span>: <span class=\"built_in\">string</span>, params?: <span class=\"built_in\">object</span>): <span class=\"title class_\">Promise</span>&lt;<span class=\"title class_\">ResultData</span>&lt;T&gt;&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span>.<span class=\"property\">service</span>.<span class=\"title function_\">delete</span>(url, &#123; params &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">new</span> <span class=\"title class_\">RequestHttp</span>(config);</span><br></pre></td></tr></table></figure>\n<ol start=\"5\">\n<li>api 文件夹下 <code>user.ts</code>  代码如下：</li>\n</ol>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> request <span class=\"keyword\">from</span> <span class=\"string\">&quot;@/utils/request&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> <span class=\"title function_\">login</span> = (<span class=\"params\">data: <span class=\"built_in\">any</span></span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> request.<span class=\"title function_\">post</span>(<span class=\"string\">&quot;/&quot;</span>, data);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>用这个暴露方式是因为大佬已经在 <code>request.ts</code>  中封装好了形式，这么用就可以</p>\n<ol start=\"6\">\n<li>sourecetree 的问题<br>\n xs，根本不会用好吧</li>\n</ol>\n<p>晚上回去前突然发现写的代码消失了，离谱！</p>\n<h1 id=\"day3\"><a class=\"markdownIt-Anchor\" href=\"#day3\">#</a> Day3</h1>\n<p>早上来用 vscode 自带的时间线挨个把代码恢复了，后来听同学说好像是提交合并分支的时候的问题，sourcetree 不会用，准确来说我对 git 的命令就不太会嗷。</p>\n<p>今天有点摆烂，没做什么活，和同学（大佬）分析了下提报系统后台管理页面的涉及，飞书真的强大啊，太帅了！<br>\n<img src=\"https://eucli-1314359160.cos.ap-beijing.myqcloud.com/test/whiteboard_exported_image.png\" alt=\"\"></p>\n<h1 id=\"day4\"><a class=\"markdownIt-Anchor\" href=\"#day4\">#</a> Day4</h1>\n<p>整体的草图基本上已经画完了，开工项目，拉了个 <code>feature/navbar</code>  的分支，是主页（home）的子组件（侧边栏），cv 了极橙大后台的侧边栏，不过那是用 vue2 写的，在试着用 vue3 改。</p>\n<h1 id=\"day5\"><a class=\"markdownIt-Anchor\" href=\"#day5\">#</a> Day5</h1>\n<p>今日摆烂</p>\n<h1 id=\"day6\"><a class=\"markdownIt-Anchor\" href=\"#day6\">#</a> Day6</h1>\n<p>今天算是搞懂了 ref () 和 reactive () 了，我真棒。</p>\n<ul>\n<li>reactive () 只适用于对象或数组，一般用于表单</li>\n<li>ref () 可以接受任何类型，但需要.value，用于插值语法中不用（会自动解包）</li>\n</ul>\n<p>晚上的时候同学把 <code>home</code>  分支推了上来，合并到了我这边。<br>\n开发过程中遇到了几个问题和收获，这里记录下：</p>\n<ol>\n<li>vue 报错： <router-view> can no longer be used directly inside <transition> or <keep-alive></li>\n</ol>\n<ul>\n<li>解决：之前是<transition>包裹 <router-view>，改成 <router-view>包裹<transition></li>\n</ul>\n<ol start=\"2\">\n<li><el-submenu>报错，因为 element plus 变了，改成<el-sub-menu></li>\n<li>vue3 里面 <code>this</code>  基本上不用了，而是 <code>ref()</code>  绑定响应式之后用 <code>.value</code> ，<br>\n如： <code>this.menu</code>  改成 <code>menu.value</code> , <code>this.isCollapse</code>  改成 <code>isCollapse.value</code></li>\n<li>vue3 没有 <code>computed</code>  生命周期，但有 <code>computed</code>  函数，不过使用前不要忘了引入 <code>import &#123; computed &#125; from &quot;vue&quot;;</code></li>\n<li>vue3 使用子组件不需要再注册，import 引入了就能用。</li>\n<li>路由配置必须要有一个 <code>/</code>  路径，一般对应 <code>home</code>  组件，如果有子组件写在 <code>children()&#123;&#125;</code>  中：</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">path</span>: <span class=\"string\">&quot;/&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">&quot;home&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">meta</span>: &#123; <span class=\"attr\">auth</span>: <span class=\"string\">&quot;universal&quot;</span> &#125;,</span><br><span class=\"line\">  <span class=\"attr\">component</span>: <span class=\"function\">() =&gt;</span> <span class=\"keyword\">import</span>(<span class=\"string\">&quot;@/pages/home.vue&quot;</span>),</span><br><span class=\"line\">  <span class=\"comment\">//children: &#123;&#125;,</span></span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<h1 id=\"day7\"><a class=\"markdownIt-Anchor\" href=\"#day7\">#</a> Day7</h1>\n<p>今日摆烂<br>\n哦，把橙果的 logo 换成学校的了，当时脑子抽了竟然直接用了橙果的 logo</p>\n<h1 id=\"day8\"><a class=\"markdownIt-Anchor\" href=\"#day8\">#</a> Day8</h1>\n<p>摆烂，但和老师们开了几个会，算是说明了需求，突然发现原来开发不仅仅是写好代码，弄好文档能和甲方解释清楚也是非常的重要</p>\n<h1 id=\"day9\"><a class=\"markdownIt-Anchor\" href=\"#day9\">#</a> Day9</h1>\n<p>接着摆</p>\n<h1 id=\"day10\"><a class=\"markdownIt-Anchor\" href=\"#day10\">#</a> Day10</h1>\n<p>emmm，太罪恶了。。</p>\n<h1 id=\"day11\"><a class=\"markdownIt-Anchor\" href=\"#day11\">#</a> Day11</h1>\n<p><code>navbar</code>  组件修改：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">onMounted</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">getNavBar</span>().<span class=\"title function_\">then</span>(</span><br><span class=\"line\">    <span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      menu = res.<span class=\"property\">data</span>;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      $store.<span class=\"title function_\">commit</span>(<span class=\"string\">&quot;msgAlert&quot;</span>, &#123;</span><br><span class=\"line\">        <span class=\"attr\">message</span>: <span class=\"string\">&quot;服务器繁忙, 请求失败&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">type</span>: <span class=\"string\">&quot;error&quot;</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(err.<span class=\"property\">message</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p><code>api/index.js</code>  修改：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> request <span class=\"keyword\">from</span> <span class=\"string\">&quot;@/utils/request&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">getNavBar</span> = (<span class=\"params\"></span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> request.<span class=\"title function_\">get</span>(<span class=\"string\">&quot;/getNavBar&quot;</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; getNavBar &#125;;</span><br></pre></td></tr></table></figure>\n<h1 id=\"day12\"><a class=\"markdownIt-Anchor\" href=\"#day12\">#</a> Day12</h1>\n<p>分到两个服务器，一个测试用一个上线了用，同学在配服务器，正在部署？<br>\n <code>navbar.vue</code>  的语言一改成 ts 之后好多地方都报错了：</p>\n<ol>\n<li>变量后面报错，因为没写类型，暂时都改成了 <code>any</code>  类型</li>\n<li><code>$store</code>  和 <code>$router</code>  报错 <code> $store is not defined</code> 。因为 vue2 和 vue3 写法不一样了。<br>\n解决：import 引入， <code>import router from '@/routes'</code>  和 <code>import mainStore from '@/store'</code> , 并将 <code>$store</code> ， <code>$router</code>  分别替换成 <code>store</code> ， <code>mainStore</code></li>\n<li><code>&lt;template&gt;</code>  标签中链式调用报错，提示 <code>类型“never”上不存在属性“key”</code> , 好像 <code>.</code>  前面要加 <code>?</code> ，即 <code>?.</code> ，但不能直接加，好像要引入 <code>interface</code></li>\n</ol>\n<h1 id=\"day13\"><a class=\"markdownIt-Anchor\" href=\"#day13\">#</a> Day13</h1>\n<ol>\n<li>导入时如果那个导入的文件时默认导出的（ <code>export default</code> ），就不用加大括号，如果不是默认导出，就要用一个大括号括起来。如： <code>import &#123; mainStore &#125; from &quot;@/store&quot;;</code></li>\n<li>store 仓库使用 pinia，即 vuex5，没有了 mutations, 这意味着可以直接更新状态，不用再注册 Commit。语法上更加贴近 Composition Api.</li>\n<li>因为用了 pinia，所以 commit 不能用了，navbar 中 <code>store.commit(&quot;msgAlert&quot;, &#123;&#125;</code>  需要换一种写法<br>\n解决：直接 <code>.</code> , 函数调用， <code>store.msgAlert(&quot;服务器繁忙, 请求失败&quot;,&quot;error&quot;)</code> , <code>()</code>  里面直接传参数值，不是写参数名。其中 store 文件夹下:</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">actions</span>: &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 顶部居中消息弹窗</span></span><br><span class=\"line\">  <span class=\"title function_\">msgAlert</span>(<span class=\"params\">message: string, type: <span class=\"string\">&quot;info&quot;</span> | <span class=\"string\">&quot;success&quot;</span> | <span class=\"string\">&quot;warning&quot;</span> | <span class=\"string\">&quot;error&quot;</span></span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * message: 必须 string</span></span><br><span class=\"line\"><span class=\"comment\">     * type: info | success | warning | error</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"title class_\">ElMessage</span>(&#123;</span><br><span class=\"line\">      <span class=\"attr\">message</span>: message,</span><br><span class=\"line\">      <span class=\"attr\">type</span>: type,</span><br><span class=\"line\">      <span class=\"attr\">center</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"attr\">duration</span>: <span class=\"number\">1500</span>, <span class=\"comment\">// 持续时长(毫秒)</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<h1 id=\"day14\"><a class=\"markdownIt-Anchor\" href=\"#day14\">#</a> Day14</h1>\n<h3 id=\"sourecetree\"><a class=\"markdownIt-Anchor\" href=\"#sourecetree\">#</a> soureceTree</h3>\n<p>git 有一个远端仓库，有一个本地仓库，【提交】和【获取】、【拉取】都是由本地仓库针对远端仓库进行的</p>\n<ul>\n<li>提交：<br>\n【提交】</li>\n</ul>\n<ol>\n<li>提交 - 暂存所有 - “feature/fix” - 提交</li>\n<li>推送</li>\n</ol>\n<ul>\n<li>拉:<br>\n【获取】：“没有” 变 “有”。（没有这个分支，所以要获取分支）</li>\n</ul>\n<ol>\n<li>获取</li>\n<li>远程 - 检出</li>\n</ol>\n<p>【拉取】：“有” 变 “新”。（有这个分支，但与远端仓库相比落后了版本，所以要更新）<br>\n拉取不成功是因为有不一样的代码</p>\n<h1 id=\"day15\"><a class=\"markdownIt-Anchor\" href=\"#day15\">#</a> Day15</h1>\n<p>周六摆烂 ing…</p>\n<h1 id=\"day16\"><a class=\"markdownIt-Anchor\" href=\"#day16\">#</a> Day16</h1>\n<p>摆烂，打八方旅人</p>\n<h1 id=\"day17\"><a class=\"markdownIt-Anchor\" href=\"#day17\">#</a> Day17</h1>\n<p>无事可干</p>\n<h1 id=\"day18\"><a class=\"markdownIt-Anchor\" href=\"#day18\">#</a> Day18</h1>\n<p>摆</p>\n<h1 id=\"day19\"><a class=\"markdownIt-Anchor\" href=\"#day19\">#</a> Day19</h1>\n<p>。</p>\n<h1 id=\"day20\"><a class=\"markdownIt-Anchor\" href=\"#day20\">#</a> Day20</h1>\n<p>这个项目好像已经不需要我了。。。</p>\n<h1 id=\"day21\"><a class=\"markdownIt-Anchor\" href=\"#day21\">#</a> Day21</h1>\n<p>无事</p>\n<h1 id=\"day22\"><a class=\"markdownIt-Anchor\" href=\"#day22\">#</a> Day22</h1>\n<p>周六摆，打弹丸论破</p>\n<h1 id=\"day23\"><a class=\"markdownIt-Anchor\" href=\"#day23\">#</a> Day23</h1>\n<p>周日摆</p>\n<h1 id=\"day24\"><a class=\"markdownIt-Anchor\" href=\"#day24\">#</a> Day24</h1>\n<p>在疯狂的学 ts……</p>\n<h1 id=\"day25\"><a class=\"markdownIt-Anchor\" href=\"#day25\">#</a> Day25</h1>\n<p>开始做项目的 <code>发起年度考核</code> 页面</p>\n<h1 id=\"day26\"><a class=\"markdownIt-Anchor\" href=\"#day26\">#</a> Day26</h1>\n<p>有个问题，用 <code>el-upload</code>  组件，想把自动上传换成手动上传，可是一取消自动 <code>:auto-upload=&quot;false&quot;</code> ，那么之前设置的那些有关文件类型、大小的验证全都不管用了，甚至 <code>console.log</code>  打印个东西都不行；而且手动上传调用了后也没有反应，头大。</p>\n<h1 id=\"day27\"><a class=\"markdownIt-Anchor\" href=\"#day27\">#</a> Day27</h1>\n<p>去超算参观，并不像印象里的国企那样保守，反而感觉很有活力，而且正在做好多东西， 老师还知道 chatgpt (doge</p>\n<h1 id=\"day28\"><a class=\"markdownIt-Anchor\" href=\"#day28\">#</a> Day28</h1>\n<p><code>el-upload</code>  手动提交出的问题还是没有解决，愁人</p>\n<h1 id=\"day29\"><a class=\"markdownIt-Anchor\" href=\"#day29\">#</a> Day29</h1>\n<p>四月八号了，不知不觉已经干了一个月了，还是学到了很多东西的。<br>\n今天，周六，想把博客从 hexo 迁移到 vuepress2 上，但是这玩意太难用了，明明是按文档来的为啥不显示？头疼中……</p>\n<h1 id=\"day30\"><a class=\"markdownIt-Anchor\" href=\"#day30\">#</a> Day30</h1>\n<p>放弃 vuepress 了，真难用啊，还是 hexo 舒服，顺便换了个主题，不过又出了问题，这玩意在本地能显示图片，一上传到 github 再打开就寄了，离谱</p>\n<h1 id=\"day31\"><a class=\"markdownIt-Anchor\" href=\"#day31\">#</a> Day31</h1>\n<ul>\n<li><code>el-upload</code>  手动提交不成功的问题终于解决了，把 <code>:file-list=&quot;fileList&quot;</code>  去掉就好了，用  <code>ref=&quot;uploadRef&quot;</code>  即可，两个都有就会不生效。</li>\n<li>另外 get 到了一个小知识，在定义 <code>const uploadRef = ref&lt;UploadInstance&gt;()</code>  时会报错说找不到 <code>UploadInstance</code> ，这时候把鼠标移上去点一下快捷修复就好了。</li>\n<li>Alt + 箭头上下可以整体移动选中的代码，丝糕诶！</li>\n</ul>\n<h1 id=\"day32\"><a class=\"markdownIt-Anchor\" href=\"#day32\">#</a> Day32</h1>\n<p>发起考核模块搞完了，明天开组会，后天找老师再开会。好诶！</p>\n<h1 id=\"day33\"><a class=\"markdownIt-Anchor\" href=\"#day33\">#</a> Day33</h1>\n<p>过</p>\n<h1 id=\"day34\"><a class=\"markdownIt-Anchor\" href=\"#day34\">#</a> Day34</h1>\n<p>写 style 的时候别忘了写 scope，不然会样式污染！</p>\n<h1 id=\"day35\"><a class=\"markdownIt-Anchor\" href=\"#day35\">#</a> Day35</h1>\n<p>第一阶段初步告终</p>\n<h1 id=\"4-月-18-日\"><a class=\"markdownIt-Anchor\" href=\"#4-月-18-日\">#</a> 4 月 18 日</h1>\n<p>搞了下把后端传过来的 excel 文件转成 json 格式，封装 axios 时是  <code>responseType: 'blob'</code> , 不能取消，取消会影响正常下载，刚开始只能解析出来乱码，并报错说是非法的 json，后来研究了一会儿才发现还要安装 xlsx 的依赖，总算解决了，贴一下代码：</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">setup</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;ts&quot;</span>&gt;</span></span></span><br><span class=\"line\">import &#123; mainStore &#125; from &quot;@/store/index&quot;;</span><br><span class=\"line\">import &#123; read, utils &#125; from &quot;xlsx&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">import &#123; getAssessmentModel &#125; from &quot;@/api/user&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">let &#123; assessment &#125; = mainStore();</span><br><span class=\"line\"></span><br><span class=\"line\">const btn = () =&gt; &#123;</span><br><span class=\"line\">  getAssessmentModel().then((res: any) =&gt; &#123;</span><br><span class=\"line\"><span class=\"code\">    const reader: any = new FileReader();</span></span><br><span class=\"line\"><span class=\"code\">    reader.readAsArrayBuffer(res);</span></span><br><span class=\"line\"><span class=\"code\">    reader.onload = () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"code\">      const data = new Uint8Array(reader.result);</span></span><br><span class=\"line\"><span class=\"code\">      const workbook = read(data, &#123; type: &quot;array&quot; &#125;);</span></span><br><span class=\"line\"><span class=\"code\">      const sheetName = workbook.SheetNames[0];</span></span><br><span class=\"line\"><span class=\"code\">      const sheet = workbook.Sheets[sheetName];</span></span><br><span class=\"line\"><span class=\"code\">      const json = utils.sheet_to_json(sheet);</span></span><br><span class=\"line\"><span class=\"code\">      assessment = json;</span></span><br><span class=\"line\"><span class=\"code\">      console.log(assessment);</span></span><br><span class=\"line\"><span class=\"code\">    &#125;;</span></span><br><span class=\"line\"><span class=\"code\">  &#125;);</span></span><br><span class=\"line\"><span class=\"code\">&#125;;</span></span><br><span class=\"line\"><span class=\"code\">&lt;/script&gt;</span></span><br><span class=\"line\"><span class=\"code\"></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"language-handlebars\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span></span></span></span><br><span class=\"line\">  test页面 <span class=\"language-xml\"><span class=\"language-handlebars\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">br</span> /&gt;</span></span></span></span></span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"language-handlebars\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span> @<span class=\"attr\">click</span>=<span class=\"string\">&quot;btn&quot;</span>&gt;</span></span></span></span>点我发送请求<span class=\"language-xml\"><span class=\"language-handlebars\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span></span><span class=\"language-xml\"><span class=\"language-handlebars\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">br</span> /&gt;</span></span></span></span></span><br><span class=\"line\">  &#123;&#123; assessment &#125;&#125;<span class=\"language-xml\"><span class=\"language-handlebars\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">br</span> /&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"language-handlebars\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span></span></span></span><br></pre></td></tr></table></figure>\n<p>不过还有个问题，就是想要将数据存储到 pinia 仓库的话还要引入 <code>import &#123;storeToRefs&#125; from 'pinia'</code> ，把要存储的数据用 <code>storeToRefs()</code>  包裹起来，但是因为是用 ts 写的，这样做会报错，目前不知道该怎么解决</p>\n<h1 id=\"4-月-22-日\"><a class=\"markdownIt-Anchor\" href=\"#4-月-22-日\">#</a> 4 月 22 日</h1>\n<p>因为项目中有多处需要用到文件上传功能，所以将其被封装成了公共组件，并提供了许多配置，可根据不同需求修改配置。</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;ts&quot;</span> <span class=\"attr\">setup</span>&gt;</span></span></span><br><span class=\"line\">import &#123; UploadFilled &#125; from &#x27;@element-plus/icons-vue&#x27;</span><br><span class=\"line\">import &#123; ref &#125; from &#x27;vue&#x27;;</span><br><span class=\"line\">import &#123; ElMessageBox, UploadInstance &#125; from &#x27;element-plus&#x27;</span><br><span class=\"line\">import &#123; getToken &#125; from &quot;@/utils/token&quot;</span><br><span class=\"line\">import type &#123; UploadProps, UploadUserFile &#125; from &#x27;element-plus&#x27;</span><br><span class=\"line\">import &#123; mainStore &#125; from &quot;@/store&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">const baseUrl = import.meta.env.VITE<span class=\"emphasis\">_BASE_</span>URL + &quot;/api&quot;;</span><br><span class=\"line\">const headers = &#123; Authorization: getToken() &#125;</span><br><span class=\"line\">let fileList = ref<span class=\"language-xml\">&lt;UploadUserFile[]&gt;</span>([])</span><br><span class=\"line\"></span><br><span class=\"line\">const props = defineProps([&quot;limitation&quot;, &quot;uploadFilesUrl&quot;, &quot;type&quot;])</span><br><span class=\"line\">const uploadFilesUrl = props.uploadFilesUrl;</span><br><span class=\"line\">const limitation = props.limitation;</span><br><span class=\"line\">const type = props.type;</span><br><span class=\"line\"></span><br><span class=\"line\">let flag = &quot;remove&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">const beforeRemove: UploadProps[&#x27;beforeRemove&#x27;] = async (uploadFile, uploadFiles) =&gt; &#123;</span><br><span class=\"line\">  if (flag === &quot;remove&quot;) &#123;</span><br><span class=\"line\"><span class=\"code\">    return ElMessageBox.confirm(</span></span><br><span class=\"line\"><span class=\"code\">      `是否删除此文件 $&#123;uploadFile.name&#125; ?`, &#123;</span></span><br><span class=\"line\"><span class=\"code\">      confirmButtonText: &quot;确定&quot;,</span></span><br><span class=\"line\"><span class=\"code\">      cancelButtonText: &quot;取消&quot;</span></span><br><span class=\"line\"><span class=\"code\">    &#125;).then(() =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"code\">      mainStore().msgAlert(&quot;删除成功&quot;, &quot;success&quot;);</span></span><br><span class=\"line\"><span class=\"code\">      return true;</span></span><br><span class=\"line\"><span class=\"code\">    &#125;).catch(() =&gt; false);</span></span><br><span class=\"line\"><span class=\"code\">  &#125; else &#123;</span></span><br><span class=\"line\"><span class=\"code\">    return true;</span></span><br><span class=\"line\"><span class=\"code\">  &#125;</span></span><br><span class=\"line\"><span class=\"code\">&#125;</span></span><br><span class=\"line\"><span class=\"code\"></span></span><br><span class=\"line\">const handlePreview: UploadProps[&#x27;onPreview&#x27;] = (uploadFile) =&gt; &#123;</span><br><span class=\"line\">  console.log(uploadFile)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">const onSuccess: UploadProps[&#x27;onSuccess&#x27;] = (res, uploadFile, uploadFiles) =&gt; &#123;</span><br><span class=\"line\">  fileList.value = [];</span><br><span class=\"line\">  mainStore().msgAlert(&quot;上传成功&quot;, &quot;success&quot;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">const onError: UploadProps[&#x27;onError&#x27;] = (res, uploadFile, uploadFiles) =&gt; &#123;</span><br><span class=\"line\">  mainStore().msgAlert(&quot;上传失败&quot;, &quot;error&quot;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">const beforeUpload: UploadProps[&#x27;beforeUpload&#x27;] = (rawFile) =&gt; &#123;</span><br><span class=\"line\">  if (type.includes(rawFile.type)) return true;</span><br><span class=\"line\">  else &#123;</span><br><span class=\"line\"><span class=\"code\">    mainStore().msgAlert(&quot;请上传指定类型的文件&quot;, &quot;error&quot;);</span></span><br><span class=\"line\"><span class=\"code\">    flag = &quot;&quot;;</span></span><br><span class=\"line\"><span class=\"code\">    return false;</span></span><br><span class=\"line\"><span class=\"code\">  &#125;</span></span><br><span class=\"line\"><span class=\"code\">&#125;</span></span><br><span class=\"line\"><span class=\"code\">// 手动上传</span></span><br><span class=\"line\"><span class=\"code\">const uploadRef = ref&lt;UploadInstance&gt;()</span></span><br><span class=\"line\"><span class=\"code\">const submitUpload = () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"code\">  uploadRef.value!.submit()</span></span><br><span class=\"line\"><span class=\"code\">&#125;</span></span><br><span class=\"line\"><span class=\"code\"></span></span><br><span class=\"line\">// 暴露方法</span><br><span class=\"line\">defineExpose(&#123;</span><br><span class=\"line\">  submitUpload</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span></span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"code\">    &lt;el-upload :file-list=&quot;fileList&quot; ref=&quot;uploadRef&quot; class=&quot;upload-demo&quot; name=&quot;file&quot; method=&quot;post&quot; drag</span></span><br><span class=\"line\"><span class=\"code\">      :action=&quot;baseUrl + uploadFilesUrl&quot; show-file-list :headers=&quot;headers&quot; :auto-upload=&quot;false&quot;</span></span><br><span class=\"line\"><span class=\"code\">      :on-preview=&quot;handlePreview&quot; :before-remove=&quot;beforeRemove&quot; :on-success=&quot;onSuccess&quot; :on-error=&quot;onError&quot;</span></span><br><span class=\"line\"><span class=\"code\">      :before-upload=&quot;beforeUpload&quot;&gt;</span></span><br><span class=\"line\"><span class=\"code\">      &lt;el-icon class=&quot;el-icon--upload&quot;&gt;&lt;upload-filled /&gt;&lt;/el-icon&gt;</span></span><br><span class=\"line\"><span class=\"code\">      &lt;div class=&quot;el-upload__text&quot;&gt;</span></span><br><span class=\"line\"><span class=\"code\">        拖动文件到此处或 &lt;em&gt;点击我上传&lt;/em&gt;</span></span><br><span class=\"line\"><span class=\"code\">      &lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"code\">      &lt;template #tip&gt;</span></span><br><span class=\"line\"><span class=\"code\">        &lt;div class=&quot;el-upload__tip&quot;&gt;</span></span><br><span class=\"line\"><span class=\"code\">          &#123;&#123; props.limitation ? props.limitation : &quot;&quot; &#125;&#125;</span></span><br><span class=\"line\"><span class=\"code\">        &lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"code\">      &lt;/template&gt;</span></span><br><span class=\"line\"><span class=\"code\">    &lt;/el-upload&gt;</span></span><br><span class=\"line\"><span class=\"code\">  &lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"code\">&lt;/template&gt;</span></span><br><span class=\"line\"><span class=\"code\"></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">scoped</span>&gt;</span></span><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<h1 id=\"5-月-9-日\"><a class=\"markdownIt-Anchor\" href=\"#5-月-9-日\">#</a> 5 月 9 日</h1>\n<p>element 的属性可以前面加 <code>:</code>  绑定函数调用，而自带的方法前面要用 <code>@</code></p>\n<h1 id=\"5月16日\"><a class=\"markdownIt-Anchor\" href=\"#5月16日\">#</a> 5 月 16 日</h1>\n<p>前端部分好像大体搞完了……</p>\n<h1 id=\"6月27日\"><a class=\"markdownIt-Anchor\" href=\"#6月27日\">#</a> 6 月 27 日</h1>\n<p>历史考核查看页面完成。</p>\n<ul>\n<li>【本地代码上传远程仓库】命令<br>\n git status<br>\ngit add .<br>\ngit commit -m “名称”<br>\ngit push</li>\n</ul>\n",
            "tags": [
                "TypeScript",
                "Element Plus",
                "vue3",
                "pinia",
                "vite"
            ]
        }
    ]
}