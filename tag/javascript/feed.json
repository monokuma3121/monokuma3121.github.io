{
    "version": "https://jsonfeed.org/version/1",
    "title": "Eucli • All posts by \"javascript\" tag",
    "description": null,
    "home_page_url": "https://eucli.top",
    "items": [
        {
            "id": "https://eucli.top/2023/04/16/20%E4%B8%AAJavaScript%E7%BB%8F%E5%85%B8%E6%A1%88%E4%BE%8B/",
            "url": "https://eucli.top/2023/04/16/20%E4%B8%AAJavaScript%E7%BB%8F%E5%85%B8%E6%A1%88%E4%BE%8B/",
            "title": "20个JavaScript经典案例",
            "date_published": "2023-04-16T13:44:34.000Z",
            "content_html": "",
            "tags": [
                "JavaScript"
            ]
        },
        {
            "id": "https://eucli.top/2023/04/04/%E4%BC%98%E9%9B%85%E7%9A%84%E5%8D%95%E8%A1%8C%E4%BB%A3%E7%A0%81/",
            "url": "https://eucli.top/2023/04/04/%E4%BC%98%E9%9B%85%E7%9A%84%E5%8D%95%E8%A1%8C%E4%BB%A3%E7%A0%81/",
            "title": "优雅的单行代码",
            "date_published": "2023-04-04T04:20:34.000Z",
            "content_html": "<h2 id=\"数组去重\"><a class=\"markdownIt-Anchor\" href=\"#数组去重\">#</a> <strong>数组去重</strong></h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">uniqueArr</span> = (<span class=\"params\">arr</span>) =&gt; [...<span class=\"keyword\">new</span> <span class=\"title class_\">Set</span>(arr)];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">uniqueArr</span>([<span class=\"string\">&quot;前端&quot;</span>, <span class=\"string\">&quot;js&quot;</span>, <span class=\"string\">&quot;html&quot;</span>, <span class=\"string\">&quot;js&quot;</span>, <span class=\"string\">&quot;css&quot;</span>, <span class=\"string\">&quot;html&quot;</span>]));</span><br><span class=\"line\"><span class=\"comment\">//[&#x27;前端&#x27;,&#x27;js&#x27;,&#x27;html&#x27;,&#x27;css&#x27;]</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"从-url-获取参数并转为对象\"><a class=\"markdownIt-Anchor\" href=\"#从-url-获取参数并转为对象\">#</a> <strong>从 url 获取参数并转为对象</strong></h2>\n<p>网页路径经常是： <code>www.baidu.com?search=js&amp;xxx=kkk</code>  这种形式的，我们是经常需要取参数的，可以使用第三方的 qs 包实现，如果你只是要实现去参数，这一句代码就可以实现，不用再引入 qs 了。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">getParameters</span> = (<span class=\"params\">URL</span>) =&gt; <span class=\"title class_\">JSON</span>.<span class=\"title function_\">parse</span>(<span class=\"string\">`&#123;&quot;<span class=\"subst\">$&#123;decodeURL(URL.split(<span class=\"string\">&quot;?&quot;</span>)[<span class=\"number\">1</span>]).replace(/<span class=\"string\">&quot;/g, &#x27;\\\\&quot;</span><span class=\"string\">&#x27;).replace(/&amp;/g, &#x27;</span><span class=\"string\">&quot;,&quot;</span><span class=\"string\">&#x27;).replace(/=/g, &#x27;</span><span class=\"string\">&quot;:&quot;</span><span class=\"string\">&#x27;)&#125;&quot;&#125;`);</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"string\"></span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"string\">getParameters(&quot;https://www.google.com.hk/search?q=js+md&amp;newwinodw=1&quot;);</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"string\">// &#123;q: &#x27;</span>js+md<span class=\"string\">&#x27;, newwinodw: &#x27;</span><span class=\"number\">1</span><span class=\"string\">&#x27;&#125;</span></span></span></span><br></pre></td></tr></table></figure>\n<h2 id=\"检查对象是否为空\"><a class=\"markdownIt-Anchor\" href=\"#检查对象是否为空\">#</a> <strong>检查对象是否为空</strong></h2>\n<p>检查对象是否为空，实际上并不那么简单，即使对象为空，每次检查对象是否等于 {} 也会返回 false。<br>\n幸运的是，下面的单行代码正是我们想要的。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">isEmpty</span> = (<span class=\"params\">obj</span>) =&gt; <span class=\"title class_\">Reflect</span>.<span class=\"title function_\">ownKeys</span>(obj).<span class=\"property\">length</span> === <span class=\"number\">0</span> &amp;&amp; obj.<span class=\"property\">constructor</span> === <span class=\"title class_\">Object</span>;</span><br><span class=\"line\"><span class=\"title function_\">isEmpty</span>(&#123;&#125;); <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"title function_\">isEmpty</span>(&#123; <span class=\"attr\">a</span>: <span class=\"string\">&quot;not empty&quot;</span> &#125;); <span class=\"comment\">//false</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"反转字符串\"><a class=\"markdownIt-Anchor\" href=\"#反转字符串\">#</a> <strong>反转字符串</strong></h2>\n<p>反转字符串可以使用 <code>split</code>  结合 <code>reverse</code>  和 <code>join</code>  方法轻松实现。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">reverse</span> = (<span class=\"params\">str</span>) =&gt; str.<span class=\"title function_\">split</span>(<span class=\"string\">&quot;&quot;</span>).<span class=\"title function_\">reverse</span>().<span class=\"title function_\">join</span>(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\"><span class=\"title function_\">reverse</span>(<span class=\"string\">&quot;this is reverse&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// esrever si siht</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"生成随机十六进制\"><a class=\"markdownIt-Anchor\" href=\"#生成随机十六进制\">#</a> <strong>生成随机十六进制</strong></h2>\n<p>生成随机数相信你能信手拈来，那随机生成十六进制，例如生成十六进制颜色值。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">randomHexColor</span> = (<span class=\"params\"></span>) =&gt;</span><br><span class=\"line\">  <span class=\"string\">`#<span class=\"subst\">$&#123;<span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">0xffffff</span>)</span></span></span><br><span class=\"line\"><span class=\"subst\"><span class=\"string\">    .toString(<span class=\"number\">16</span>)</span></span></span><br><span class=\"line\"><span class=\"subst\"><span class=\"string\">    .padEnd(<span class=\"number\">6</span>, <span class=\"string\">&quot;0&quot;</span>)&#125;</span>`</span>;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">randomHexColor</span>());</span><br><span class=\"line\"><span class=\"comment\">// #a2ce5b</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"检查当前选项卡是否在后台\"><a class=\"markdownIt-Anchor\" href=\"#检查当前选项卡是否在后台\">#</a> <strong>检查当前选项卡是否在后台</strong></h2>\n<p>浏览器使用选项卡式浏览，任何网页都有可能在后台，此时对用户来说是没有在浏览的，知道怎么快速检测到，你的网页对用户是隐藏还是可见吗？</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">isTabActive</span> = (<span class=\"params\"></span>) =&gt; !<span class=\"variable language_\">document</span>.<span class=\"property\">hidden</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">isTabActive</span>();</span><br><span class=\"line\"><span class=\"comment\">// true|false</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"检测元素是否处于焦点\"><a class=\"markdownIt-Anchor\" href=\"#检测元素是否处于焦点\">#</a> <strong>检测元素是否处于焦点</strong></h2>\n<p><code>activeElement</code>  属性返回文档中当前获得焦点的元素</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">elementIsInFocus</span> = (<span class=\"params\">el</span>) =&gt; el === <span class=\"variable language_\">document</span>.<span class=\"property\">activeElement</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">elementIsInFocus</span>(anyElement);</span><br><span class=\"line\"><span class=\"comment\">// 元素处于焦点返回true，反之返回false</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"检查设备类型\"><a class=\"markdownIt-Anchor\" href=\"#检查设备类型\">#</a> <strong>检查设备类型</strong></h2>\n<p>使用 <code>navigator.userAgent</code>  判断是移动设备还是电脑设备：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">judgeDeviceType</span> = (<span class=\"params\"></span>) =&gt; (<span class=\"regexp\">/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|OperaMini/i</span>.<span class=\"title function_\">test</span>(navigator.<span class=\"property\">userAgent</span>) ? <span class=\"string\">&quot;Mobile&quot;</span> : <span class=\"string\">&quot;PC&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">judgeDeviceType</span>(); <span class=\"comment\">// PC | Mobile</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"文字复制到剪贴板\"><a class=\"markdownIt-Anchor\" href=\"#文字复制到剪贴板\">#</a> <strong>文字复制到剪贴板</strong></h2>\n<p><code>Clipboard API </code> 它的所有操作都是异步的，返回  <code>Promise </code> 对象，不会造成页面卡顿。而且，它可以将任意内容（比如图片）放入剪贴板。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">copyText</span> = <span class=\"keyword\">async</span> (<span class=\"params\">text</span>) =&gt; <span class=\"keyword\">await</span> navigator.<span class=\"property\">clipboard</span>.<span class=\"title function_\">writeText</span>(text);</span><br><span class=\"line\"><span class=\"title function_\">copyText</span>(<span class=\"string\">&quot;单行代码 前端世界&quot;</span>);</span><br></pre></td></tr></table></figure>\n<h2 id=\"获取选定的文本\"><a class=\"markdownIt-Anchor\" href=\"#获取选定的文本\">#</a> <strong>获取选定的文本</strong></h2>\n<p>使用内置的  <code>getSelection </code> 获取用户选择的文本:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">getSelectedText</span> = (<span class=\"params\"></span>) =&gt; <span class=\"variable language_\">window</span>.<span class=\"title function_\">getSelection</span>().<span class=\"title function_\">toString</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">getSelectedText</span>();</span><br><span class=\"line\"><span class=\"comment\">// 返回选中的内容</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"查询某天是否为工作日\"><a class=\"markdownIt-Anchor\" href=\"#查询某天是否为工作日\">#</a> <strong>查询某天是否为工作日</strong></h2>\n<p>我们自己写日历组件时经常会用到，判断某个日期是否为工作日；周一至周五为工作日:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">isWeekday</span> = (<span class=\"params\">date</span>) =&gt; date.<span class=\"title function_\">getDay</span>() % <span class=\"number\">6</span> !== <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">isWeekday</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>(<span class=\"number\">2022</span>, <span class=\"number\">03</span>, <span class=\"number\">11</span>));</span><br><span class=\"line\"><span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"转换华氏摄氏\"><a class=\"markdownIt-Anchor\" href=\"#转换华氏摄氏\">#</a> <strong>转换华氏 / 摄氏</strong></h2>\n<p>处理温度有时会晕头转向。这两个函数则能帮助大家将华氏温度转换为摄氏温度，以及将摄氏温度转换为华氏温度。</p>\n<ul>\n<li>将华氏温度转换为摄氏温度</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">fahrenheitToCelsius</span> = (<span class=\"params\">fahrenheit</span>) =&gt; ((fahrenheit - <span class=\"number\">32</span>) * <span class=\"number\">5</span>) / <span class=\"number\">9</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">fahrenheitToCelsius</span>(<span class=\"number\">50</span>);</span><br><span class=\"line\"><span class=\"comment\">// 10</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>将摄氏温度转华氏温度</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">celsiusToFahrenheit</span> = (<span class=\"params\">celsius</span>) =&gt; (celsius * <span class=\"number\">9</span>) / <span class=\"number\">5</span> + <span class=\"number\">32</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">celsiusToFahrenheit</span>(<span class=\"number\">100</span>);</span><br><span class=\"line\"><span class=\"comment\">// 212</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"两日期之间相差的天数\"><a class=\"markdownIt-Anchor\" href=\"#两日期之间相差的天数\">#</a> <strong>两日期之间相差的天数</strong></h2>\n<p>日常开发中经常遇到需要显示剩余天数， 一般我们就需要计算两日期之间相差天数：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">dayDiff</span> = (<span class=\"params\">date1, date2</span>) =&gt; <span class=\"title class_\">Math</span>.<span class=\"title function_\">ceil</span>(<span class=\"title class_\">Math</span>.<span class=\"title function_\">abs</span>(date1.<span class=\"title function_\">getTime</span>() - date2.<span class=\"title function_\">getTime</span>()) / <span class=\"number\">86400000</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">dayDiff</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>(<span class=\"string\">&quot;2021-10-21&quot;</span>), <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>(<span class=\"string\">&quot;2022-02-12&quot;</span>));</span><br><span class=\"line\"><span class=\"comment\">// Result: 114</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><strong>将 RGB 转换为十六进制</strong></li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">rgbToHex</span> = (<span class=\"params\">r, g, b</span>) =&gt; <span class=\"string\">&quot;#&quot;</span> + ((<span class=\"number\">1</span> &lt;&lt; <span class=\"number\">24</span>) + (r &lt;&lt; <span class=\"number\">16</span>) + (g &lt;&lt; <span class=\"number\">8</span>) + b).<span class=\"title function_\">toString</span>(<span class=\"number\">16</span>).<span class=\"title function_\">slice</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">rgbToHex</span>(<span class=\"number\">255</span>, <span class=\"number\">255</span>, <span class=\"number\">255</span>);</span><br><span class=\"line\"><span class=\"comment\">//  #ffffff</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"计算数组平均值\"><a class=\"markdownIt-Anchor\" href=\"#计算数组平均值\">#</a> <strong>计算数组平均值</strong></h2>\n<p>计算平均值的方式很多，计算的逻辑都是一样的， 但是实现方式各不相同，一行代码简单实现：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">average</span> = (<span class=\"params\">arr</span>) =&gt; arr.<span class=\"title function_\">reduce</span>(<span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> a + b) / arr.<span class=\"property\">length</span>;</span><br><span class=\"line\"><span class=\"title function_\">average</span>([<span class=\"number\">1</span>, <span class=\"number\">9</span>, <span class=\"number\">18</span>, <span class=\"number\">36</span>]); <span class=\"comment\">//16</span></span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "JavaScript"
            ]
        }
    ]
}