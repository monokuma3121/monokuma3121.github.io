<!-- build time:Mon May 29 2023 11:06:31 GMT+0800 (é¦™æ¸¯æ ‡å‡†æ—¶é—´) --><!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Vue3è§‚å¯Ÿç¬”è®° | Eucli ã®å°çª</title><meta name="keywords" content="vue3"><meta name="author" content="è°å·äº†æˆ‘çš„ç”µé¥­é”…"><meta name="copyright" content="è°å·äº†æˆ‘çš„ç”µé¥­é”…"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="Vue3è§‚å¯Ÿç¬”è®°"><meta name="application-name" content="Vue3è§‚å¯Ÿç¬”è®°"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="default"><link rel="bookmark" href="/img/siteicon/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" sizes="180x180" href="/img/siteicon/apple-touch-icon.png"><link rel="apple-touch-icon" sizes="192x192" href="/img/siteicon/apple-touch-icon.png"><link rel="apple-touch-icon" sizes="512x512" href="/img/siteicon/apple-touch-icon.png"><link rel="apple-touch-startup-image" media="screen and (device-width:320px) and (device-height:568px) and (-webkit-device-pixel-ratio:2) and (orientation:landscape)" href="/img/siteicon/splashIcons/icon_1136x640.png"><link rel="apple-touch-startup-image" media="screen and (device-width:320px) and (device-height:568px) and (-webkit-device-pixel-ratio:2) and (orientation:portrait)" href="/img/siteicon/splashIcons/icon_640x1136.png"><link rel="apple-touch-startup-image" media="screen and (device-width:414px) and (device-height:896px) and (-webkit-device-pixel-ratio:3) and (orientation:landscape)" href="/img/siteicon/splashIcons/icon_2688x1242.png"><link rel="apple-touch-startup-image" media="screen and (device-width:414px) and (device-height:896px) and (-webkit-device-pixel-ratio:2) and (orientation:landscape)" href="/img/siteicon/splashIcons/icon_1792x828.png"><link rel="apple-touch-startup-image" media="screen and (device-width:375px) and (device-height:812px) and (-webkit-device-pixel-ratio:3) and (orientation:portrait)" href="/img/siteicon/splashIcons/icon_1125x2436.png"><link rel="apple-touch-startup-image" media="screen and (device-width:414px) and (device-height:896px) and (-webkit-device-pixel-ratio:2) and (orientation:portrait)" href="/img/siteicon/splashIcons/icon_828x1792.png"><link rel="apple-touch-startup-image" media="screen and (device-width:375px) and (device-height:812px) and (-webkit-device-pixel-ratio:3) and (orientation:landscape)" href="/img/siteicon/splashIcons/icon_2436x1125.png"><link rel="apple-touch-startup-image" media="screen and (device-width:414px) and (device-height:736px) and (-webkit-device-pixel-ratio:3) and (orientation:portrait)" href="/img/siteicon/splashIcons/icon_1242x2208.png"><link rel="apple-touch-startup-image" media="screen and (device-width:414px) and (device-height:736px) and (-webkit-device-pixel-ratio:3) and (orientation:landscape)" href="/img/siteicon/splashIcons/icon_2208x1242.png"><link rel="apple-touch-startup-image" media="screen and (device-width:375px) and (device-height:667px) and (-webkit-device-pixel-ratio:2) and (orientation:landscape)" href="/img/siteicon/splashIcons/icon_1334x750.png"><link rel="apple-touch-startup-image" media="screen and (device-width:375px) and (device-height:667px) and (-webkit-device-pixel-ratio:2) and (orientation:portrait)" href="/img/siteicon/splashIcons/icon_750x1334.png"><link rel="apple-touch-startup-image" media="screen and (device-width:1024px) and (device-height:1366px) and (-webkit-device-pixel-ratio:2) and (orientation:landscape)" href="/img/siteicon/splashIcons/icon_2732x2048.png"><meta name="description" content="Vueï¼Vueï¼Vueï¼"><meta property="og:type" content="article"><meta property="og:title" content="Vue3è§‚å¯Ÿç¬”è®°"><meta property="og:url" content="https://eucli.top/2023/03/15/Vue3%E8%A7%82%E5%AF%9F%E7%AC%94%E8%AE%B0/index.html"><meta property="og:site_name" content="Eucli ã®å°çª"><meta property="og:description" content="Vueï¼Vueï¼Vueï¼"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://eucli.top/image/cover/19.png"><meta property="article:published_time" content="2023-03-15T10:20:34.000Z"><meta property="article:modified_time" content="2023-05-28T10:37:56.295Z"><meta property="article:author" content="è°å·äº†æˆ‘çš„ç”µé¥­é”…"><meta property="article:tag" content="vue3"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://eucli.top/image/cover/19.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://eucli.top/2023/03/15/Vue3%E8%A7%82%E5%AF%9F%E7%AC%94%E8%AE%B0/"><link rel="preconnect" href="//cdn.jsdelivr.net"><meta name="google-site-verification" content="xxx"><meta name="baidu-site-verification" content="code-xxx"><meta name="msvalidate.01" content="xxx"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://npm.elemecdn.com/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/@fancyapps/ui@4.0.31/dist/fancybox.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",navMusic:!1,algolia:{appId:"4JVMX7OSQF",apiKey:"04e2f381969eb630527eff899c3f04fc",indexName:"myblog",hits:{per_page:6},languages:{input_placeholder:"é”®å…¥åæŒ‰ä¸‹å›è½¦æœç´¢ï¼",hits_empty:"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}",hits_stats:"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼Œç”¨æ—¶ ${time} æ¯«ç§’"}},localSearch:void 0,translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"ç¹",msgToSimplifiedChinese:"ç®€"},noticeOutdate:{limitDay:365,position:"top",messagePrev:"It has been",messageNext:"days since the last update, the content of the article may be outdated."},highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:330},copy:{success:"å¤åˆ¶æˆåŠŸ",error:"å¤åˆ¶é”™è¯¯",noSupport:"æµè§ˆå™¨ä¸æ”¯æŒ"},relativeDate:{homepage:!1,post:!1},runtime:"å¤©",date_suffix:{just:"åˆšåˆš",min:"åˆ†é’Ÿå‰",hour:"å°æ—¶å‰",day:"å¤©å‰",month:"ä¸ªæœˆå‰"},copyright:void 0,lightbox:"fancybox",Snackbar:{chs_to_cht:"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“",cht_to_chs:"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“",day_to_night:"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼",night_to_day:"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼",bgLight:"#3b70fc",bgDark:"#1f1f1f",position:"top-center"},source:{justifiedGallery:{js:"https://npm.elemecdn.com/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js",css:"https://npm.elemecdn.com/flickr-justified-gallery@2.1.2/dist/fjGallery.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"Vue3è§‚å¯Ÿç¬”è®°",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2023-05-28 18:37:56"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/"><div class="title">Eucli ã®å°çª</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><center id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></center></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span>æ–‡ç« </span></a><ul class="menus_item_child" style="left:-79px"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i><span> æ—¶é—´è½´</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i><span> æ ‡ç­¾</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/link/"><span>å‹äººå¸</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span>æˆ‘çš„</span></a><ul class="menus_item_child" style="left:-79px"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i><span> å…³äºæœ¬äºº</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i><span> ç›¸å†Œé›†</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size:.9em"></i><span> é—²è¨€ç¢è¯­</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="éšæœºå‰å¾€ä¸€ä¸ªæ–‡ç« " href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="æœç´¢ğŸ”"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> æœç´¢</span></a></div><div class="nav-button" id="darkmode_navswitch"><a class="darkmode_switchbutton" type="button" href="javascript:void(0);" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢" onclick="rm.switchDarkMode()"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke" style="font-size:1.3rem"></i></a></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">Vue3è§‚å¯Ÿç¬”è®°</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2023-03-15T10:20:34.000Z" title="å‘è¡¨äº 2023-03-15 18:20:34">2023-03-15</time><span class="post-meta-separator">|</span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2023-05-28T10:37:56.295Z" title="æ›´æ–°äº 2023-05-28 18:37:56">2023-05-28</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">å‰ç«¯å¼€å‘</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">18.7k</span><span class="post-meta-separator">|</span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>75åˆ†é’Ÿ</span></span></div></div></div><article class="post-content" id="article-container"><h1 id="ä»‹ç»-vue"><a class="markdownIt-Anchor" href="#ä»‹ç»-vue">#</a> ä»‹ç» vue</h1><p>Vue æ˜¯ä¸€å¥—ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼æ¡†æ¶ã€‚ä¸å…¶å®ƒå¤§å‹æ¡†æ¶ä¸åŒçš„æ˜¯ï¼ŒVue è¢«è®¾è®¡ä¸ºå¯ä»¥è‡ªåº•å‘ä¸Šé€å±‚åº”ç”¨ã€‚Vue çš„æ ¸å¿ƒåº“åªå…³æ³¨è§†å›¾å±‚ï¼Œä¸ä»…æ˜“äºä¸Šæ‰‹ï¼Œè¿˜ä¾¿äºä¸ç¬¬ä¸‰æ–¹åº“æˆ–æ—¢æœ‰é¡¹ç›®æ•´åˆã€‚å¦ä¸€æ–¹é¢ï¼Œå½“ä¸ç°ä»£åŒ–çš„å·¥å…·é“¾ä»¥åŠå„ç§æ”¯æŒç±»åº“ç»“åˆä½¿ç”¨æ—¶ï¼ŒVue ä¹Ÿå®Œå…¨èƒ½å¤Ÿä¸ºå¤æ‚çš„å•é¡µåº”ç”¨æä¾›é©±åŠ¨ã€‚</p><ul><li>MVVMï¼ˆModel-View-ViewModelï¼‰æ¶æ„</li></ul><ol><li>Viewï¼šè§†å›¾å±‚ï¼ˆUI ç”¨æˆ·ç•Œé¢ï¼‰</li><li>ViewModelï¼šä¸šåŠ¡é€»è¾‘å±‚ï¼ˆä¸€åˆ‡ js å¯è§†ä¸ºä¸šåŠ¡é€»è¾‘ï¼‰</li><li>Modelï¼šæ•°æ®å±‚ï¼ˆå­˜å‚¨æ•°æ®åŠå¯¹æ•°æ®çš„å¤„ç†å¦‚å¢åˆ æ”¹æŸ¥ï¼‰</li></ol><h1 id="vue3-æ–°ç‰¹æ€§ä»‹ç»"><a class="markdownIt-Anchor" href="#vue3-æ–°ç‰¹æ€§ä»‹ç»">#</a> Vue3 æ–°ç‰¹æ€§ä»‹ç»</h1><h2 id="ä¸€-é‡å†™åŒå‘ç»‘å®š"><a class="markdownIt-Anchor" href="#ä¸€-é‡å†™åŒå‘ç»‘å®š">#</a> ä¸€ã€é‡å†™åŒå‘ç»‘å®š</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">vue2</span><br><span class="line">åŸºäº<span class="title class_">Object</span>.<span class="title function_">defineProperty</span>()å®ç°</span><br><span class="line"></span><br><span class="line">vue3 åŸºäº<span class="title class_">Proxy</span></span><br><span class="line">proxyä¸<span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, prop, desc)æ–¹å¼ç›¸æ¯”æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸¢æ‰éº»çƒ¦çš„å¤‡ä»½æ•°æ®</span></span><br><span class="line"><span class="comment">//çœå»for in å¾ªç¯</span></span><br><span class="line"><span class="comment">//å¯ä»¥ç›‘å¬æ•°ç»„å˜åŒ–</span></span><br><span class="line"><span class="comment">//ä»£ç æ›´ç®€åŒ–</span></span><br><span class="line"><span class="comment">//å¯ä»¥ç›‘å¬åŠ¨æ€æ–°å¢çš„å±æ€§ï¼›</span></span><br><span class="line"><span class="comment">//å¯ä»¥ç›‘å¬åˆ é™¤çš„å±æ€§ ï¼›</span></span><br><span class="line"><span class="comment">//å¯ä»¥ç›‘å¬æ•°ç»„çš„ç´¢å¼•å’Œ length å±æ€§ï¼›</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> proxyObj = <span class="keyword">new</span> <span class="title class_">Proxy</span>(obj,&#123;</span><br><span class="line">        get : <span class="keyword">function</span> (<span class="params">target,prop</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> prop <span class="keyword">in</span> target ? target[prop] : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        set : <span class="keyword">function</span> (<span class="params">target,prop,value</span>) &#123;</span><br><span class="line">            target[prop] = <span class="number">888</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><h2 id="äºŒ-vue3-ä¼˜åŒ–-vdom"><a class="markdownIt-Anchor" href="#äºŒ-vue3-ä¼˜åŒ–-vdom">#</a> äºŒã€Vue3 ä¼˜åŒ– Vdom</h2><p>åœ¨ Vue2 ä¸­ï¼Œæ¯æ¬¡æ›´æ–° diff, éƒ½æ˜¯å…¨é‡å¯¹æ¯”ï¼ŒVue3 åˆ™åªå¯¹æ¯”å¸¦æœ‰æ ‡è®°çš„ï¼Œè¿™æ ·å¤§å¤§å‡å°‘äº†éåŠ¨æ€å†…å®¹çš„å¯¹æ¯”æ¶ˆè€—</p><h3 id="patch-flag-ä¼˜åŒ–é™æ€æ ‘"><a class="markdownIt-Anchor" href="#patch-flag-ä¼˜åŒ–é™æ€æ ‘">#</a> patch flag ä¼˜åŒ–é™æ€æ ‘</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Hello world!<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Hello world!<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Hello world!<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Hello world!<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Hello world!<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Hello world! <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Vue3 ç¼–è¯‘åçš„ Vdom æ˜¯è¿™ä¸ªæ ·å­çš„:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">render</span>(<span class="params">_ctxï¼Œ_cacheï¼Œ$propsï¼Œ$setupï¼Œ$dataï¼Œ$options</span>)&#123;<span class="keyword">return</span> (<span class="title function_">_openBlock</span>(),<span class="title function_">_createBlock</span>(_Fragment,<span class="literal">null</span>ï¼Œ[</span><br><span class="line"><span class="title function_">_createvNode</span>( <span class="string">&quot;span&quot;</span>, <span class="literal">null</span>,<span class="string">&quot;Hello world ! &quot;</span>),</span><br><span class="line"><span class="title function_">_createvNode</span>( <span class="string">&quot;span&quot;</span>,<span class="literal">null</span>ï¼Œ<span class="string">&quot;Hello world! &quot;</span>),</span><br><span class="line"><span class="title function_">_createvNode</span>( <span class="string">&quot;span&quot;</span>ï¼Œ<span class="literal">null</span>ï¼Œ<span class="string">&quot;Hello world! &quot;</span>),</span><br><span class="line"><span class="title function_">_createvNode</span>( <span class="string">&quot;span&quot;</span>, <span class="literal">null</span>ï¼Œ<span class="string">&quot;Hello world! &quot;</span>),</span><br><span class="line"><span class="title function_">_createVNode</span>(<span class="string">&quot;span&quot;</span>, <span class="literal">null</span>ï¼Œ<span class="title function_">_toDisplaystring</span>(_ctx.<span class="property">msg</span>)ï¼Œ<span class="number">1</span><span class="comment">/* TEXT */</span>)ï¼Œ</span><br><span class="line"><span class="title function_">_createvNode</span>( <span class="string">&quot;span&quot;</span>, <span class="literal">null</span>ï¼Œ<span class="string">&quot;Hello world! &quot;</span>),</span><br><span class="line"><span class="title function_">_createvNode</span>( <span class="string">&quot;span&quot;</span>, <span class="literal">null</span>ï¼Œ<span class="string">&quot;Hello world! &quot;</span>)]ï¼Œ<span class="number">64</span><span class="comment">/*STABLE_FRAGMENT */</span>))</span><br></pre></td></tr></table></figure><p>æ–°å¢äº† patch flag æ ‡è®°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">TEXT</span> = <span class="number">1</span> <span class="comment">// åŠ¨æ€æ–‡æœ¬èŠ‚ç‚¹</span></span><br><span class="line"><span class="variable constant_">CLASS</span>=<span class="number">1</span>&lt;&lt;<span class="number">1</span>,<span class="number">1</span> <span class="comment">// 2//åŠ¨æ€class</span></span><br><span class="line"><span class="variable constant_">STYLE</span>=<span class="number">1</span>&lt;&lt;<span class="number">2</span>ï¼Œ<span class="comment">// 4 //åŠ¨æ€style</span></span><br><span class="line"><span class="variable constant_">PROPS</span>=<span class="number">1</span>&lt;&lt;<span class="number">3</span>,<span class="comment">// 8 //åŠ¨æ€å±æ€§ï¼Œä½†ä¸åŒ…å«ç±»åå’Œæ ·å¼</span></span><br><span class="line"><span class="title class_">FULLPR0PS</span>=<span class="number">1</span>&lt;&lt;<span class="number">4</span>,<span class="comment">// 16 //å…·æœ‰åŠ¨æ€keyå±æ€§ï¼Œå½“keyæ”¹å˜æ—¶ï¼Œéœ€è¦è¿›è¡Œå®Œæ•´çš„diffæ¯”è¾ƒã€‚</span></span><br><span class="line"><span class="variable constant_">HYDRATE_</span> <span class="variable constant_">EVENTS</span> = <span class="number">1</span> &lt;&lt; <span class="number">5</span>ï¼Œ<span class="comment">// 32 //å¸¦æœ‰ç›‘å¬äº‹ä»¶çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="variable constant_">STABLE</span> <span class="variable constant_">FRAGMENT</span> = <span class="number">1</span> &lt;&lt; <span class="number">6</span>, <span class="comment">// 64 //ä¸€ä¸ªä¸ä¼šæ”¹å˜å­èŠ‚ç‚¹é¡ºåºçš„fragment</span></span><br><span class="line"><span class="variable constant_">KEYED_</span> <span class="variable constant_">FRAGMENT</span> = <span class="number">1</span> &lt;&lt; <span class="number">7</span>, <span class="comment">// 128 //å¸¦æœ‰keyå±æ€§çš„fragment æˆ–éƒ¨åˆ†å­å­—èŠ‚æœ‰key</span></span><br><span class="line"><span class="variable constant_">UNKEYED</span> <span class="variable constant_">FRAGMENT</span> = <span class="number">1</span>&lt;&lt; <span class="number">8</span>, <span class="comment">// 256 //å­èŠ‚ç‚¹æ²¡æœ‰key çš„fragment</span></span><br><span class="line"><span class="variable constant_">NEED</span> <span class="variable constant_">PATCH</span> = <span class="number">1</span> &lt;&lt; <span class="number">9</span>, <span class="comment">// 512 //ä¸€ä¸ªèŠ‚ç‚¹åªä¼šè¿›è¡Œépropsæ¯”è¾ƒ</span></span><br><span class="line"><span class="variable constant_">DYNAMIC_SLOTS</span> = <span class="number">1</span> &lt;&lt; <span class="number">10</span> <span class="comment">// 1024 // åŠ¨æ€slot</span></span><br><span class="line"><span class="variable constant_">HOISTED</span> = -<span class="number">1</span> <span class="comment">// é™æ€èŠ‚ç‚¹</span></span><br><span class="line"><span class="variable constant_">BALL</span> = -<span class="number">2</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å‘ç°åˆ›å»ºåŠ¨æ€ dom å…ƒç´ çš„æ—¶å€™ï¼ŒVdom é™¤äº†æ¨¡æ‹Ÿå‡ºæ¥äº†å®ƒçš„åŸºæœ¬ä¿¡æ¯ä¹‹å¤–ï¼Œè¿˜ç»™å®ƒåŠ äº†ä¸€ä¸ªæ ‡è®°ï¼š 1 /_ TEXT _/</p><p>è¿™ä¸ªæ ‡è®°å°±å«åš patch flagï¼ˆè¡¥ä¸æ ‡è®°ï¼‰</p><p>patch flag çš„å¼ºå¤§ä¹‹å¤„åœ¨äºï¼Œå½“ä½ çš„ diff ç®—æ³•èµ°åˆ° _createBlock å‡½æ•°çš„æ—¶å€™ï¼Œä¼šå¿½ç•¥æ‰€æœ‰çš„é™æ€èŠ‚ç‚¹ï¼Œåªå¯¹æœ‰æ ‡è®°çš„åŠ¨æ€èŠ‚ç‚¹è¿›è¡Œå¯¹æ¯”ï¼Œè€Œä¸”åœ¨å¤šå±‚çš„åµŒå¥—ä¸‹ä¾ç„¶æœ‰æ•ˆã€‚</p><p>å°½ç®¡ JavaScript åš Vdom çš„å¯¹æ¯”å·²ç»éå¸¸çš„å¿«ï¼Œä½†æ˜¯ patch flag çš„å‡ºç°è¿˜æ˜¯è®© Vue3 çš„ Vdom çš„æ€§èƒ½å¾—åˆ°äº†å¾ˆå¤§çš„æå‡ï¼Œå°¤å…¶æ˜¯åœ¨é’ˆå¯¹å¤§ç»„ä»¶çš„æ—¶å€™ã€‚</p><h2 id="ä¸‰-vue3-fragment"><a class="markdownIt-Anchor" href="#ä¸‰-vue3-fragment">#</a> ä¸‰ã€Vue3 Fragment</h2><p>vue3 å…è®¸æˆ‘ä»¬æ”¯æŒå¤šä¸ªæ ¹èŠ‚ç‚¹:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;12&lt;/div&gt;</span><br><span class="line">  &lt;div&gt;23&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>åŒæ—¶æ”¯æŒ render JSX å†™æ³•:</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;this.visable ? (</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.obj.name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                ) : (</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.obj.price&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                )&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&#123;this.val&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;[1, 2, 3].map((v) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">                   return <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;v&#125;-----<span class="tag">&lt;/<span class="name">div</span>&gt;</span>;</span></span><br><span class="line"><span class="language-xml">                &#125;)&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åŒæ—¶æ–°å¢äº† Suspense teleport å’Œ å¤š v-model ç”¨æ³•</p><h2 id="å››-vue3-tree-shaking"><a class="markdownIt-Anchor" href="#å››-vue3-tree-shaking">#</a> å››ã€Vue3 Tree shaking</h2><p>ç®€å•æ¥è®²ï¼Œå°±æ˜¯åœ¨ä¿æŒä»£ç è¿è¡Œç»“æœä¸å˜çš„å‰æä¸‹ï¼Œå»é™¤æ— ç”¨çš„ä»£ç </p><p>åœ¨ Vue2 ä¸­ï¼Œæ— è®ºæˆ‘ä»¬ä½¿ç”¨ä»€ä¹ˆåŠŸèƒ½ï¼Œå®ƒä»¬æœ€ç»ˆéƒ½ä¼šå‡ºç°åœ¨ç”Ÿäº§ä»£ç ä¸­ã€‚ä¸»è¦åŸå› æ˜¯ Vue å®ä¾‹åœ¨é¡¹ç›®ä¸­æ˜¯å•ä¾‹çš„ï¼Œæ†ç»‘ç¨‹åºæ— æ³•æ£€æµ‹åˆ°è¯¥å¯¹è±¡çš„å“ªäº›å±æ€§åœ¨ä»£ç ä¸­è¢«ä½¿ç”¨åˆ°</p><p>è€Œ Vue3 æºç å¼•å…¥ tree shaking ç‰¹æ€§ï¼Œå°†å…¨å±€ API è¿›è¡Œåˆ†å—ã€‚å¦‚æœä½ ä¸ä½¿ç”¨å…¶æŸäº›åŠŸèƒ½ï¼Œå®ƒä»¬å°†ä¸ä¼šåŒ…å«åœ¨ä½ çš„åŸºç¡€åŒ…ä¸­</p><p>å°±æ˜¯æ¯”å¦‚ä½ è¦ç”¨ watch å°±æ˜¯ import {watch} from â€˜vueâ€™ å…¶ä»–çš„ computed æ²¡ç”¨åˆ°å°±ä¸ä¼šç»™ä½ æ‰“åŒ…å‡å°‘ä½“ç§¯</p><h2 id="äº”-vue-3-composition-api"><a class="markdownIt-Anchor" href="#äº”-vue-3-composition-api">#</a> äº”ã€Vue 3 Composition Api</h2><h1 id="vite-ç›®å½•-vue-å•æ–‡ä»¶ç»„ä»¶-npm-run-dev-è¯¦è§£"><a class="markdownIt-Anchor" href="#vite-ç›®å½•-vue-å•æ–‡ä»¶ç»„ä»¶-npm-run-dev-è¯¦è§£">#</a> Vite ç›®å½• &amp; Vue å•æ–‡ä»¶ç»„ä»¶ &amp; npm run dev è¯¦è§£</h1><h2 id="vite-ç›®å½•"><a class="markdownIt-Anchor" href="#vite-ç›®å½•">#</a> Vite ç›®å½•</h2><ul><li><p>publicL: ä¸‹é¢çš„ä¸ä¼šè¢«ç¼–è¯‘ å¯ä»¥å­˜æ”¾é™æ€èµ„æº</p></li><li><p>assets: ä¸‹é¢å¯ä»¥å­˜æ”¾å¯ç¼–è¯‘çš„é™æ€èµ„æº</p></li><li><p>components: ä¸‹é¢ç”¨æ¥å­˜æ”¾æˆ‘ä»¬çš„ç»„ä»¶</p></li><li><p>App.vue: æ˜¯å…¨å±€ç»„ä»¶</p></li><li><p>main.ts: å…¨å±€çš„ ts æ–‡ä»¶</p></li><li><p>index.html: éå¸¸é‡è¦çš„å…¥å£æ–‡ä»¶ ï¼ˆwebpackï¼Œrollup ä»–ä»¬çš„å…¥å£æ–‡ä»¶éƒ½æ˜¯ enrty input æ˜¯ä¸€ä¸ª js æ–‡ä»¶ è€Œ Vite çš„å…¥å£æ–‡ä»¶æ˜¯ä¸€ä¸ª html æ–‡ä»¶ï¼Œä»–åˆšå¼€å§‹ä¸ä¼šç¼–è¯‘è¿™äº› js æ–‡ä»¶ åªæœ‰å½“ä½ ç”¨åˆ°çš„æ—¶å€™ å¦‚ script src=â€œxxxxx.jsâ€ ä¼šå‘èµ·ä¸€ä¸ªè¯·æ±‚è¢« vite æ‹¦æˆªè¿™æ—¶å€™æ‰ä¼šè§£æ js æ–‡ä»¶ï¼‰</p></li><li><p>vite.config.ts: è¿™æ˜¯ vite çš„é…ç½®æ–‡ä»¶å…·ä½“é…ç½®é¡¹</p></li></ul><h2 id="sfc-è¯­æ³•è§„èŒƒ"><a class="markdownIt-Anchor" href="#sfc-è¯­æ³•è§„èŒƒ">#</a> SFC è¯­æ³•è§„èŒƒ</h2><p><code>*.vue</code> ä»¶éƒ½ç”±ä¸‰ç§ç±»å‹çš„é¡¶å±‚è¯­æ³•å—æ‰€ç»„æˆï¼š <code>&lt;template&gt;</code> ã€ <code>&lt;script&gt;</code> ã€ <code>&lt;style&gt;</code></p><p><code>&lt;template&gt;</code> :</p><ul><li>æ¯ä¸ª <code>*.vue</code> æ–‡ä»¶æœ€å¤šå¯åŒæ—¶åŒ…å«ä¸€ä¸ªé¡¶å±‚ <code>&lt;template&gt;</code> å—ã€‚</li><li>å…¶ä¸­çš„å†…å®¹ä¼šè¢«æå–å‡ºæ¥å¹¶ä¼ é€’ç»™ @vue/compiler-domï¼Œé¢„ç¼–è¯‘ä¸º JavaScript çš„æ¸²æŸ“å‡½æ•°ï¼Œå¹¶é™„å±åˆ°å¯¼å‡ºçš„ç»„ä»¶ä¸Šä½œä¸ºå…¶ render é€‰é¡¹ã€‚</li></ul><p><code>&lt;script&gt;</code> :</p><ul><li><p>æ¯ä¸€ä¸ª <code>*.vue</code> æ–‡ä»¶å¯ä»¥æœ‰å¤šä¸ª <code>&lt;script&gt;</code> å— (ä¸åŒ…æ‹¬ <code>&lt;script setup&gt;</code> )ã€‚</p></li><li><p>è¯¥è„šæœ¬å°†ä½œä¸º ES Module æ¥æ‰§è¡Œã€‚</p></li><li><p>å…¶é»˜è®¤å¯¼å‡ºçš„å†…å®¹åº”è¯¥æ˜¯ Vue ç»„ä»¶é€‰é¡¹å¯¹è±¡ï¼Œå®ƒè¦ä¹ˆæ˜¯ä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼Œè¦ä¹ˆæ˜¯ defineComponent çš„è¿”å›å€¼ã€‚</p></li></ul><p><code>&lt;script setup&gt;</code> :</p><ul><li><p>æ¯ä¸ª <code>*.vue</code> æ–‡ä»¶æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ª <code>&lt;script setup&gt;</code> å— (ä¸åŒ…æ‹¬å¸¸è§„çš„ <code>&lt;script&gt;</code> )</p></li><li><p>è¯¥è„šæœ¬ä¼šè¢«é¢„å¤„ç†å¹¶ä½œä¸ºç»„ä»¶çš„ <code>setup()</code> å‡½æ•°ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä¼šåœ¨æ¯ä¸ªç»„ä»¶å®ä¾‹ä¸­æ‰§è¡Œã€‚ <code>&lt;script setup&gt;</code> çš„é¡¶å±‚ç»‘å®šä¼šè‡ªåŠ¨æš´éœ²ç»™æ¨¡æ¿ã€‚</p></li></ul><p><code>&lt;style&gt;</code> :<br>ä¸€ä¸ª <code>*.vue</code> æ–‡ä»¶å¯ä»¥åŒ…å«å¤šä¸ª <code>&lt;style&gt;</code> æ ‡ç­¾ã€‚</p><p><code>&lt;style&gt;</code> æ ‡ç­¾å¯ä»¥é€šè¿‡ scoped æˆ– module attribute (æ›´å¤šè¯¦æƒ…è¯·æŸ¥çœ‹ SFC æ ·å¼ç‰¹æ€§) å°†æ ·å¼å°è£…åœ¨å½“å‰ç»„ä»¶å†…ã€‚</p><h2 id="npm-run-dev-è¯¦è§£"><a class="markdownIt-Anchor" href="#npm-run-dev-è¯¦è§£">#</a> npm run dev è¯¦è§£</h2><p>åœ¨æˆ‘ä»¬æ‰§è¡Œè¿™ä¸ªå‘½ä»¤çš„æ—¶å€™ä¼šå»æ‰¾ package.json çš„ scripts ç„¶åæ‰§è¡Œå¯¹åº”çš„ dev å‘½ä»¤</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite &quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;serve&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite --mode production&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vue-tsc &amp;&amp; vite build&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;preview&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite preview&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><p>é‚£ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸ç›´æ¥æ‰§è¡Œ vite å‘½ä»¤ä¸æ˜¯æ›´æ–¹ä¾¿å—ï¼Ÿå› ä¸ºåœ¨æˆ‘ä»¬çš„ç”µè„‘ä¸Šé¢å¹¶æ²¡æœ‰é…ç½®è¿‡ç›¸å…³å‘½ä»¤ æ‰€ä»¥æ— æ³•ç›´æ¥æ‰§è¡Œ</p><p>å…¶å®åœ¨æˆ‘ä»¬æ‰§è¡Œ npm install çš„æ—¶å€™ï¼ˆåŒ…å« viteï¼‰ ä¼šåœ¨ node_modules/.bin/ åˆ›å»ºå¥½å¯æ‰§è¡Œæ–‡ä»¶ã€‚ <code>.bin</code> ç›®å½•ï¼Œè¿™ä¸ªç›®å½•ä¸æ˜¯ä»»ä½•ä¸€ä¸ª npm åŒ…ã€‚ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªä¸ªè½¯é“¾æ¥ï¼Œæ‰“å¼€æ–‡ä»¶å¯ä»¥çœ‹åˆ°æ–‡ä»¶é¡¶éƒ¨å†™ç€ #!/bin/sh ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªè„šæœ¬</p><p>åœ¨æˆ‘ä»¬æ‰§è¡Œ npm run xxx npm ä¼šé€šè¿‡è½¯è¿æ¥ æŸ¥æ‰¾è¿™ä¸ªè½¯è¿æ¥å­˜åœ¨äºæºç ç›®å½• node_modules/vite</p><p>æ‰€ä»¥ npm run xxx çš„æ—¶å€™ï¼Œå°±ä¼šåˆ° node_modules/bin ä¸­æ‰¾å¯¹åº”çš„æ˜ å°„æ–‡ä»¶ï¼Œç„¶åå†æ‰¾åˆ°ç›¸åº”çš„ js æ–‡ä»¶æ¥æ‰§è¡Œ</p><ol><li><p>æŸ¥æ‰¾è§„åˆ™æ˜¯å…ˆä»å½“å‰é¡¹ç›®çš„ node_modlue /bin å»æ‰¾ï¼Œ</p></li><li><p>æ‰¾ä¸åˆ°å»å…¨å±€çš„ node_module/bin å»æ‰¾</p></li><li><p>å†æ‰¾ä¸åˆ° å»ç¯å¢ƒå˜é‡å»æ‰¾</p></li></ol><h1 id="vue-æ ¸å¿ƒè™šæ‹Ÿ-dom-å’Œ-diff-ç®—æ³•"><a class="markdownIt-Anchor" href="#vue-æ ¸å¿ƒè™šæ‹Ÿ-dom-å’Œ-diff-ç®—æ³•">#</a> Vue æ ¸å¿ƒè™šæ‹Ÿ Dom å’Œ diff ç®—æ³•</h1><p><a target="_blank" rel="noopener" href="https://xiaoman.blog.csdn.net/article/details/122778560">https://xiaoman.blog.csdn.net/article/details/122778560</a></p><h1 id="vue3-æ–°è¯­æ³•ç³–setup-script"><a class="markdownIt-Anchor" href="#vue3-æ–°è¯­æ³•ç³–setup-script">#</a> vue3 æ–°è¯­æ³•ç³– â€”â€”setup script</h1><ol><li><p>è‡ªåŠ¨æ³¨å†Œå­ç»„ä»¶<br>åœ¨å¼•å…¥å­ç»„ä»¶åï¼Œä¸éœ€è¦å†åœ¨ components ä¸­æ³¨å†Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨</p></li><li><p>å±æ€§å’Œæ–¹æ³•æ— éœ€è¿”å›<br>ä¸ç”¨å†™ <code>return</code> äº†ï¼Œå¥½è€¶ï¼</p></li><li><p>æ”¯æŒ propsã€emit å’Œ contextã€‚setup script è¯­æ³•ç³–æä¾›äº†ä¸‰ä¸ªæ–°çš„ API æ¥ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼šdefinePropsã€defineEmit å’Œ useContextã€‚</p></li></ol><h1 id="refå’Œ-reactive"><a class="markdownIt-Anchor" href="#refå’Œ-reactive">#</a> ref () å’Œ reactive ()</h1><ul><li>reactive () åªé€‚ç”¨äºå¯¹è±¡æˆ–æ•°ç»„ï¼Œä¸€èˆ¬ç”¨äºè¡¨å•</li><li>ref () å¯ä»¥æ¥å—ä»»ä½•ç±»å‹ï¼Œref ä¼šè¿”å›ä¸€ä¸ªåŒ…è£¹å¯¹è±¡ï¼Œå¹¶åœ¨ <code>.value</code> å±æ€§ä¸‹æš´éœ²å†…éƒ¨å€¼ã€‚åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨æ—¶ä¸éœ€è¦ä½¿ç”¨ <code>.value</code> ï¼šå®ƒä¼šè¢«è‡ªåŠ¨è§£åŒ…</li></ul><h1 id="v-model"><a class="markdownIt-Anchor" href="#v-model">#</a> v-model</h1><p>ä½¿ç”¨èŒƒå›´ï¼šinputã€selectã€è¡¨å•å…ƒç´ ã€è‡ªå®šä¹‰ç»„ä»¶<br>v-model å…¶å®æ˜¯ä¸€ä¸ªè¯­æ³•ç³– é€šè¿‡ props å’Œ emit ç»„åˆè€Œæˆçš„</p><h1 id="è‡ªå®šä¹‰æŒ‡ä»¤"><a class="markdownIt-Anchor" href="#è‡ªå®šä¹‰æŒ‡ä»¤">#</a> è‡ªå®šä¹‰æŒ‡ä»¤</h1><h1 id="è‡ªå®šä¹‰-hooks"><a class="markdownIt-Anchor" href="#è‡ªå®šä¹‰-hooks">#</a> è‡ªå®šä¹‰ Hooks</h1><p>ä¸»è¦ç”¨æ¥å¤„ç†å¤ç”¨ä»£ç é€»è¾‘çš„ä¸€äº›å°è£…<br>è¿™ä¸ªåœ¨ vue2 å°±å·²ç»æœ‰ä¸€ä¸ªä¸œè¥¿æ˜¯ Mixinsï¼Œmixins å°±æ˜¯å°†è¿™äº›å¤šä¸ªç›¸åŒçš„é€»è¾‘æŠ½ç¦»å‡ºæ¥ï¼Œå„ä¸ªç»„ä»¶åªéœ€è¦å¼•å…¥ mixinsï¼Œå°±èƒ½å®ç°ä¸€æ¬¡å†™ä»£ç ï¼Œå¤šç»„ä»¶å—ç›Šçš„æ•ˆæœã€‚å¼Šç«¯å°±æ˜¯ä¼šæ¶‰åŠåˆ°è¦†ç›–çš„é—®é¢˜ã€‚ç¬¬äºŒç‚¹å°±æ˜¯ å˜é‡æ¥æºä¸æ˜ç¡®ï¼ˆéšå¼ä¼ å…¥ï¼‰ï¼Œä¸åˆ©äºé˜…è¯»ï¼Œä½¿ä»£ç å˜å¾—éš¾ä»¥ç»´æŠ¤ã€‚<br>Vue3 çš„è‡ªå®šä¹‰çš„ hookï¼š</p><ul><li>Vue3 çš„ hook å‡½æ•° ç›¸å½“äº vue2 çš„ mixin, ä¸åŒåœ¨ä¸ hooks æ˜¯å‡½æ•°</li><li>Vue3 çš„ hook å‡½æ•° å¯ä»¥å¸®åŠ©æˆ‘ä»¬æé«˜ä»£ç çš„å¤ç”¨æ€§ï¼Œè®©æˆ‘ä»¬èƒ½åœ¨ä¸åŒçš„ç»„ä»¶ä¸­éƒ½åˆ©ç”¨ hooks å‡½æ•°</li></ul><p>æ¡ˆä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line">type <span class="title class_">Options</span> = &#123;</span><br><span class="line">  <span class="attr">el</span>: string;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">type <span class="title class_">Return</span> = &#123;</span><br><span class="line">  <span class="title class_">Baseurl</span>: string | <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params">option: Options</span>): <span class="title class_">Promise</span>&lt;<span class="title class_">Return</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> <span class="attr">file</span>: <span class="title class_">HTMLImageElement</span> = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(option.<span class="property">el</span>) <span class="keyword">as</span> <span class="title class_">HTMLImageElement</span>;</span><br><span class="line">      file.<span class="property">onload</span> = (): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(&#123;</span><br><span class="line">          <span class="title class_">Baseurl</span>: <span class="title function_">toBase64</span>(file),</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> toBase64 = (<span class="attr">el</span>: <span class="title class_">HTMLImageElement</span>): <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> <span class="attr">canvas</span>: <span class="title class_">HTMLCanvasElement</span> = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;canvas&quot;</span>);</span><br><span class="line">      <span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>) <span class="keyword">as</span> <span class="title class_">CanvasRenderingContext2D</span>;</span><br><span class="line">      canvas.<span class="property">width</span> = el.<span class="property">width</span>;</span><br><span class="line">      canvas.<span class="property">height</span> = el.<span class="property">height</span>;</span><br><span class="line">      ctx.<span class="title function_">drawImage</span>(el, <span class="number">0</span>, <span class="number">0</span>, canvas.<span class="property">width</span>, canvas.<span class="property">height</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(el.<span class="property">width</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> canvas.<span class="title function_">toDataURL</span>(<span class="string">&quot;image/png&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¡ˆä¾‹äºŒï¼šè‡ªå®šä¹‰æŒ‡ä»¤ + hooks åŒç®¡é½ä¸‹<br>å®ç°ä¸€ä¸ªç›‘å¬å…ƒç´ å˜åŒ–çš„ hook<br>ä¸»è¦ä¼šç”¨åˆ°ä¸€ä¸ªæ–°çš„ API resizeObserver å…¼å®¹æ€§ä¸€èˆ¬ å¯ä»¥åš polyfill<br>ä½†æ˜¯ä»–å¯ä»¥ç›‘å¬å…ƒç´ çš„å˜åŒ– æ‰§è¡Œå›è°ƒå‡½æ•° è¿”å› contentRect é‡Œé¢æœ‰å˜åŒ–ä¹‹åçš„å®½é«˜ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">App</span>, defineComponent, onMounted &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useResize</span>(<span class="params">el: HTMLElement, callback: (cr: DOMRectReadOnly, resize: ResizeObserver) =&gt; <span class="keyword">void</span></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> <span class="attr">resize</span>: <span class="title class_">ResizeObserver</span>;</span><br><span class="line">  resize = <span class="keyword">new</span> <span class="title class_">ResizeObserver</span>(<span class="function">(<span class="params">entries</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> entry <span class="keyword">of</span> entries) &#123;</span><br><span class="line">      <span class="keyword">const</span> cr = entry.<span class="property">contentRect</span>;</span><br><span class="line">      <span class="title function_">callback</span>(cr, resize);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  resize.<span class="title function_">observe</span>(el);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">install</span> = (<span class="params">app: App</span>) =&gt; &#123;</span><br><span class="line">  app.<span class="title function_">directive</span>(<span class="string">&quot;resize&quot;</span>, &#123;</span><br><span class="line">    <span class="title function_">mounted</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">      <span class="title function_">useResize</span>(el, binding.<span class="property">value</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">useResize.<span class="property">install</span> = install;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useResize;</span><br></pre></td></tr></table></figure><h1 id="ç¼–å†™-vue3-æ’ä»¶"><a class="markdownIt-Anchor" href="#ç¼–å†™-vue3-æ’ä»¶">#</a> ç¼–å†™ Vue3 æ’ä»¶</h1><p>æ’ä»¶æ˜¯è‡ªåŒ…å«çš„ä»£ç ï¼Œé€šå¸¸å‘ Vue æ·»åŠ å…¨å±€çº§åŠŸèƒ½ã€‚ä½ å¦‚æœæ˜¯ä¸€ä¸ªå¯¹è±¡éœ€è¦æœ‰ install æ–¹æ³• Vue ä¼šå¸®ä½ è‡ªåŠ¨æ³¨å…¥åˆ° install æ–¹æ³• ä½ å¦‚æœæ˜¯ function å°±ç›´æ¥å½“ install æ–¹æ³•å»ä½¿ç”¨</p><p>ä½¿ç”¨æ’ä»¶ï¼šåœ¨ä½¿ç”¨ createApp () åˆå§‹åŒ– Vue åº”ç”¨ç¨‹åºåï¼Œä½ å¯ä»¥é€šè¿‡è°ƒç”¨ use () æ–¹æ³•å°†æ’ä»¶æ·»åŠ åˆ°ä½ çš„åº”ç”¨ç¨‹åºä¸­ã€‚</p><ul><li>æ¡ˆä¾‹ï¼šå®ç°ä¸€ä¸ª Loading<br>Loading.Vue</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div v-if=&quot;isShow&quot; class=&quot;loading&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;loading-content&quot;&gt;Loading...&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">const isShow = ref(false); //å®šä½loading çš„å¼€å…³</span><br><span class="line"></span><br><span class="line">const show = () =&gt; &#123;</span><br><span class="line">  isShow.value = true;</span><br><span class="line">&#125;;</span><br><span class="line">const hide = () =&gt; &#123;</span><br><span class="line">  isShow.value = false;</span><br><span class="line">&#125;;</span><br><span class="line">//å¯¹å¤–æš´éœ² å½“å‰ç»„ä»¶çš„å±æ€§å’Œæ–¹æ³•</span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  isShow,</span><br><span class="line">  show,</span><br><span class="line">  hide,</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;less&quot;&gt;</span><br><span class="line">.loading &#123;</span><br><span class="line">  position: fixed;</span><br><span class="line">  inset: 0;</span><br><span class="line">  background: rgba(0, 0, 0, 0.8);</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">  &amp;-content &#123;</span><br><span class="line">    font-size: 30px;</span><br><span class="line">    color: #fff;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>Loading.ts</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createVNode, render, <span class="title class_">VNode</span>, <span class="title class_">App</span> &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Loading</span> <span class="keyword">from</span> <span class="string">&quot;./index.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">install</span>(<span class="params">app: App</span>) &#123;</span><br><span class="line">    <span class="comment">//createVNode vueæä¾›çš„åº•å±‚æ–¹æ³• å¯ä»¥ç»™æˆ‘ä»¬ç»„ä»¶åˆ›å»ºä¸€ä¸ªè™šæ‹ŸDOM ä¹Ÿå°±æ˜¯Vnode</span></span><br><span class="line">    <span class="keyword">const</span> <span class="attr">vnode</span>: <span class="title class_">VNode</span> = <span class="title function_">createVNode</span>(<span class="title class_">Loading</span>);</span><br><span class="line">    <span class="comment">//render æŠŠæˆ‘ä»¬çš„Vnode ç”ŸæˆçœŸå®DOM å¹¶ä¸”æŒ‚è½½åˆ°æŒ‡å®šèŠ‚ç‚¹</span></span><br><span class="line">    <span class="title function_">render</span>(vnode, <span class="variable language_">document</span>.<span class="property">body</span>);</span><br><span class="line">    <span class="comment">// Vue æä¾›çš„å…¨å±€é…ç½® å¯ä»¥è‡ªå®šä¹‰</span></span><br><span class="line">    app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$loading</span> = &#123;</span><br><span class="line">      <span class="attr">show</span>: <span class="function">() =&gt;</span> vnode.<span class="property">component</span>?.<span class="property">exposed</span>?.<span class="title function_">show</span>(),</span><br><span class="line">      <span class="attr">hide</span>: <span class="function">() =&gt;</span> vnode.<span class="property">component</span>?.<span class="property">exposed</span>?.<span class="title function_">hide</span>(),</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>main.ts</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Loading</span> <span class="keyword">from</span> <span class="string">&#x27;./components/loading&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title class_">Loading</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">type <span class="title class_">Lod</span> = &#123;</span><br><span class="line">    <span class="attr">show</span>: <span class="function">() =&gt;</span> <span class="keyword">void</span>,</span><br><span class="line">    <span class="attr">hide</span>: <span class="function">() =&gt;</span> <span class="keyword">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç¼–å†™ts loading å£°æ˜æ–‡ä»¶æ”¾ç½®æŠ¥é”™ å’Œ æ™ºèƒ½æç¤º</span></span><br><span class="line">declare <span class="variable language_">module</span> <span class="string">&#x27;@vue/runtime-core&#x27;</span> &#123;</span><br><span class="line">    <span class="keyword">export</span> interface <span class="title class_">ComponentCustomProperties</span> &#123;</span><br><span class="line">        <span class="attr">$loading</span>: <span class="title class_">Lod</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, reactive, getCurrentInstance &#125; from &quot;vue&quot;;</span><br><span class="line">const instance = getCurrentInstance();</span><br><span class="line">instance?.proxy?.$Loading.show();</span><br><span class="line">setTimeout(() =&gt; &#123;</span><br><span class="line">  instance?.proxy?.$Loading.hide();</span><br><span class="line">&#125;, 5000);</span><br><span class="line"></span><br><span class="line">// console.log(instance)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">* &#123;</span><br><span class="line">  padding: 0;</span><br><span class="line">  margin: 0;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h1 id="computed-è®¡ç®—å±æ€§"><a class="markdownIt-Anchor" href="#computed-è®¡ç®—å±æ€§">#</a> computed è®¡ç®—å±æ€§</h1><p>è®¡ç®—å±æ€§å°±æ˜¯å½“ä¾èµ–çš„å±æ€§çš„å€¼å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæ‰ä¼šè§¦å‘ä»–çš„æ›´æ”¹ï¼Œå¦‚æœä¾èµ–çš„å€¼ï¼Œä¸å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ˜¯ç¼“å­˜ä¸­çš„å±æ€§å€¼ã€‚<br>è®¡ç®—å±æ€§ä¼šè‡ªåŠ¨è·Ÿè¸ªå…¶è®¡ç®—ä¸­æ‰€ä½¿ç”¨çš„åˆ°çš„å…¶ä»–å“åº”å¼çŠ¶æ€ï¼Œå¹¶å°†å®ƒä»¬æ”¶é›†ä¸ºè‡ªå·±çš„ä¾èµ–ã€‚è®¡ç®—ç»“æœä¼šè¢«ç¼“å­˜ï¼Œå¹¶åªæœ‰åœ¨å…¶ä¾èµ–å‘ç”Ÿæ”¹å˜æ—¶æ‰ä¼šè¢«è‡ªåŠ¨æ›´æ–°ã€‚</p><ol><li>å‡½æ•°å½¢å¼</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; computed, reactive, ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> price = <span class="title function_">ref</span>(<span class="number">0</span>); <span class="comment">//$0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> m =</span><br><span class="line">  computed &lt;</span><br><span class="line">  string &gt;</span><br><span class="line">  (<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`$`</span> + price.<span class="property">value</span>;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">price.<span class="property">value</span> = <span class="number">500</span>;</span><br></pre></td></tr></table></figure><ol start="2"><li>å¯¹è±¡å½¢å¼</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;&#123;&#123; mul &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;div @click=&quot;mul = 100&quot;&gt;click&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; computed, ref &#125; from &quot;vue&quot;;</span><br><span class="line">let price = ref&lt;number | string&gt;(1); //$0</span><br><span class="line">let mul = computed(&#123;</span><br><span class="line">  get: () =&gt; &#123;</span><br><span class="line">    return price.value;</span><br><span class="line">  &#125;,</span><br><span class="line">  set: (value) =&gt; &#123;</span><br><span class="line">    price.value = &quot;set&quot; + value;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure><ul><li>computed è´­ç‰©è½¦æ¡ˆä¾‹</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥åç§°&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;keyWord&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">style</span>=<span class="string">&quot;margin-top:10px;&quot;</span> <span class="attr">width</span>=<span class="string">&quot;500&quot;</span> <span class="attr">cellspacing</span>=<span class="string">&quot;0&quot;</span> <span class="attr">cellpadding</span>=<span class="string">&quot;0&quot;</span> <span class="attr">border</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">th</span>&gt;</span>ç‰©å“<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">th</span>&gt;</span>å•ä»·<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">th</span>&gt;</span>æ•°é‡<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">th</span>&gt;</span>æ€»ä»·<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">th</span>&gt;</span>æ“ä½œ<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in searchData&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span>&#123;&#123; item.price &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;item.num &gt; 1 ? item.num-- : null&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;item.num&quot;</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;item.num &lt; 99 ? item.num++ : null&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span>&#123;&#123; item.price * item.num &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;del(index)&quot;</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tfoot</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">&quot;5&quot;</span> <span class="attr">align</span>=<span class="string">&quot;right&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>æ€»ä»·ï¼š&#123;&#123; total &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tfoot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; reactive, ref, computed &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> keyWord = ref&lt;string&gt;(<span class="string">&quot;&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  interface <span class="title class_">Data</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: string;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">price</span>: number;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">num</span>: number;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> data = reactive&lt;<span class="title class_">Data</span>[]&gt;([</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">name</span>: <span class="string">&quot;å°æ»¡çš„ç»¿å¸½å­&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">price</span>: <span class="number">100</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">num</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">name</span>: <span class="string">&quot;å°æ»¡çš„çº¢è¡£æœ&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">price</span>: <span class="number">200</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">num</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">name</span>: <span class="string">&quot;å°æ»¡çš„é»‘è¢œå­&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">price</span>: <span class="number">300</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">num</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  ]);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> searchData = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> data.<span class="title function_">filter</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">name</span>.<span class="title function_">includes</span>(keyWord.<span class="property">value</span>));</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> total = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> data.<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev: number, next: Data</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> prev + next.<span class="property">num</span> * next.<span class="property">price</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;, <span class="number">0</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> <span class="title function_">del</span> = (<span class="params">index: number</span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">    data.<span class="title function_">splice</span>(index, <span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">&quot;less&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="watch-ä¾¦å¬å™¨"><a class="markdownIt-Anchor" href="#watch-ä¾¦å¬å™¨">#</a> watch ä¾¦å¬å™¨</h1><p>watch éœ€è¦ä¾¦å¬ç‰¹å®šçš„æ•°æ®æºï¼Œå¹¶åœ¨å•ç‹¬çš„å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œå‰¯ä½œç”¨<br>ç¬¬ä¸€ä¸ªå‚æ•°ç›‘å¬æºï¼Œ<br>ç¬¬äºŒä¸ªå‚æ•°å›è°ƒå‡½æ•° cbï¼ˆnewVal,oldValï¼‰,<br>ç¬¬ä¸‰ä¸ªå‚æ•°ä¸€ä¸ª options é…ç½®é¡¹æ˜¯ä¸€ä¸ªå¯¹è±¡:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">immediate</span>: <span class="literal">true</span>; <span class="comment">//æ˜¯å¦ç«‹å³è°ƒç”¨ä¸€æ¬¡</span></span><br><span class="line">  <span class="attr">deep</span>: <span class="literal">true</span>; <span class="comment">//æ˜¯å¦å¼€å¯æ·±åº¦ç›‘å¬</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç›‘å¬ Ref æ¡ˆä¾‹</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, watch &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> message = <span class="title function_">ref</span>(&#123;</span><br><span class="line">  <span class="attr">nav</span>: &#123;</span><br><span class="line">    <span class="attr">bar</span>: &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title function_">watch</span>(</span><br><span class="line">  message,</span><br><span class="line">  <span class="function">(<span class="params">newVal, oldVal</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ–°çš„å€¼----&quot;</span>, newVal);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ—§çš„å€¼----&quot;</span>, oldVal);</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">immediate</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">deep</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><ul><li>ç›‘å¬å¤šä¸ª ref æ³¨æ„å˜æˆæ•°ç»„å•¦</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, watch, reactive &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> message = <span class="title function_">ref</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> message2 = <span class="title function_">ref</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">watch</span>([message, message2], <span class="function">(<span class="params">newVal, oldVal</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ–°çš„å€¼----&quot;</span>, newVal);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ—§çš„å€¼----&quot;</span>, oldVal);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>ç›‘å¬ Reactive<br>ä½¿ç”¨ reactive ç›‘å¬æ·±å±‚å¯¹è±¡å¼€å¯å’Œä¸å¼€å¯ deep æ•ˆæœä¸€æ ·</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, watch, reactive &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> message = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">nav</span>: &#123;</span><br><span class="line">    <span class="attr">bar</span>: &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title function_">watch</span>(message, <span class="function">(<span class="params">newVal, oldVal</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ–°çš„å€¼----&quot;</span>, newVal);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ—§çš„å€¼----&quot;</span>, oldVal);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹ 2 ç›‘å¬ reactive å•ä¸€å€¼</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, watch, reactive &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> message = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">name2</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title function_">watch</span>(</span><br><span class="line">  <span class="function">() =&gt;</span> message.<span class="property">name</span>,</span><br><span class="line">  <span class="function">(<span class="params">newVal, oldVal</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ–°çš„å€¼----&quot;</span>, newVal);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ—§çš„å€¼----&quot;</span>, oldVal);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h1 id="watcheffect-é«˜çº§ä¾¦å¬å™¨"><a class="markdownIt-Anchor" href="#watcheffect-é«˜çº§ä¾¦å¬å™¨">#</a> watchEffect é«˜çº§ä¾¦å¬å™¨</h1><p>ç«‹å³æ‰§è¡Œä¼ å…¥çš„ä¸€ä¸ªå‡½æ•°ï¼ŒåŒæ—¶å“åº”å¼è¿½è¸ªå…¶ä¾èµ–ï¼Œå¹¶åœ¨å…¶ä¾èµ–å˜æ›´æ—¶é‡æ–°è¿è¡Œè¯¥å‡½æ•°ã€‚</p><p>å¦‚æœç”¨åˆ° message å°±åªä¼šç›‘å¬ message å°±æ˜¯ç”¨åˆ°å‡ ä¸ªç›‘å¬å‡ ä¸ª è€Œä¸”æ˜¯éæƒ°æ€§ ä¼šé»˜è®¤è°ƒç”¨ä¸€æ¬¡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> message = ref &lt; string &gt; <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> message2 = ref &lt; string &gt; <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="title function_">watchEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//console.log(&#x27;message&#x27;, message.value);</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;message2&quot;</span>, message2.<span class="property">value</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>æ¸…é™¤å‰¯ä½œç”¨<br>å°±æ˜¯åœ¨è§¦å‘ç›‘å¬ä¹‹å‰ä¼šè°ƒç”¨ä¸€ä¸ªå‡½æ•°å¯ä»¥å¤„ç†ä½ çš„é€»è¾‘ä¾‹å¦‚é˜²æŠ–</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; watchEffect, ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> message = ref &lt; string &gt; <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> message2 = ref &lt; string &gt; <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="title function_">watchEffect</span>(<span class="function">(<span class="params">oninvalidate</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//console.log(&#x27;message&#x27;, message.value);</span></span><br><span class="line">  <span class="title function_">oninvalidate</span>(<span class="function">() =&gt;</span> &#123;&#125;);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;message2&quot;</span>, message2.<span class="property">value</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>åœæ­¢è·Ÿè¸ª watchEffect è¿”å›ä¸€ä¸ªå‡½æ•° è°ƒç”¨ä¹‹åå°†åœæ­¢æ›´æ–°</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> stop = <span class="title function_">watchEffect</span>(</span><br><span class="line">  <span class="function">(<span class="params">oninvalidate</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//console.log(&#x27;message&#x27;, message.value);</span></span><br><span class="line">    <span class="title function_">oninvalidate</span>(<span class="function">() =&gt;</span> &#123;&#125;);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;message2&quot;</span>, message2.<span class="property">value</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">flush</span>: <span class="string">&quot;post&quot;</span>,</span><br><span class="line">    <span class="title function_">onTrigger</span>(<span class="params"></span>) &#123;&#125;,</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"><span class="title function_">stop</span>();</span><br></pre></td></tr></table></figure><h1 id="vue3-å®šä¹‰å…¨å±€å‡½æ•°å’Œå˜é‡"><a class="markdownIt-Anchor" href="#vue3-å®šä¹‰å…¨å±€å‡½æ•°å’Œå˜é‡">#</a> Vue3 å®šä¹‰å…¨å±€å‡½æ•°å’Œå˜é‡</h1><ul><li>globalProperties<br>ç”±äº Vue3 æ²¡æœ‰ Prototype å±æ€§ ä½¿ç”¨ app.config.globalProperties ä»£æ›¿ ç„¶åå»å®šä¹‰å˜é‡å’Œå‡½æ•°</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¹‹å‰ (Vue 2.x)</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$http</span> = <span class="function">() =&gt;</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹‹å (Vue 3.x)</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;&#125;);</span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$http</span> = <span class="function">() =&gt;</span> &#123;&#125;;</span><br></pre></td></tr></table></figure><ul><li>è¿‡æ»¤å™¨<br>åœ¨ Vue3 ç§»é™¤äº†ï¼Œæˆ‘ä»¬æ­£å¥½å¯ä»¥ä½¿ç”¨å…¨å±€å‡½æ•°ä»£æ›¿ Filters<br>æ¡ˆä¾‹ï¼š</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$filters</span> = &#123;</span><br><span class="line">  format&lt;T <span class="keyword">extends</span> any&gt;(<span class="attr">str</span>: T): string &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`$<span class="subst">$&#123;str&#125;</span>`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å£°æ˜æ–‡ä»¶ ä¸ç„¶ TS æ— æ³•æ­£ç¡®ç±»å‹æ¨å¯¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Filter</span> = &#123;</span><br><span class="line">    format&lt;T&gt;(<span class="attr">str</span>: T): string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜è¦æ‰©å……@vue/runtime-coreåŒ…çš„å£°æ˜.</span></span><br><span class="line"><span class="comment">// è¿™é‡Œæ‰©å……&quot;ComponentCustomProperties&quot;æ¥å£, å› ä¸ºä»–æ˜¯vue3ä¸­å®ä¾‹çš„å±æ€§çš„ç±»å‹.</span></span><br><span class="line">declare <span class="variable language_">module</span> <span class="string">&#x27;vue&#x27;</span> &#123;</span><br><span class="line">    <span class="keyword">export</span> interface <span class="title class_">ComponentCustomProperties</span> &#123;</span><br><span class="line">        <span class="attr">$filters</span>: <span class="title class_">Filter</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>setup è¯»å–å€¼:</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getCurrentInstance, <span class="title class_">ComponentInternalInstance</span> &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; appContext &#125; = &lt;<span class="title class_">ComponentInternalInstance</span>&gt;<span class="title function_">getCurrentInstance</span>();</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(appContext.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$env</span>);</span><br><span class="line"></span><br><span class="line">æ¨èç¬¬äºŒç§æ–¹å¼;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; ref, reactive, getCurrentInstance &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">getCurrentInstance</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(app?.<span class="property">proxy</span>?.<span class="property">$filters</span>.<span class="title function_">format</span>(<span class="string">&quot;js&quot;</span>));</span><br></pre></td></tr></table></figure><h1 id="vue3-ç”Ÿå‘½å‘¨æœŸ"><a class="markdownIt-Anchor" href="#vue3-ç”Ÿå‘½å‘¨æœŸ">#</a> Vue3 ç”Ÿå‘½å‘¨æœŸ</h1><p>ç®€å•æ¥è¯´å°±æ˜¯ä¸€ä¸ªç»„ä»¶ä»åˆ›å»º åˆ° é”€æ¯çš„ è¿‡ç¨‹ æˆä¸ºç”Ÿå‘½å‘¨æœŸ</p><p>åœ¨æˆ‘ä»¬ä½¿ç”¨ Vue3 ç»„åˆå¼ API æ˜¯æ²¡æœ‰ <code>beforeCreate</code> å’Œ <code>created</code> è¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸçš„</p><ul><li><code>onBeforeMount()</code> : åœ¨ç»„ä»¶ DOM å®é™…æ¸²æŸ“å®‰è£…ä¹‹å‰è°ƒç”¨ã€‚åœ¨è¿™ä¸€æ­¥ä¸­ï¼Œæ ¹å…ƒç´ è¿˜ä¸å­˜åœ¨ã€‚</li><li><code>onMounted()</code> : åœ¨ç»„ä»¶çš„ç¬¬ä¸€æ¬¡æ¸²æŸ“åè°ƒç”¨ï¼Œè¯¥å…ƒç´ ç°åœ¨å¯ç”¨ï¼Œå…è®¸ç›´æ¥ DOM è®¿é—®</li><li><code>onBeforeUpdate()</code> : æ•°æ®æ›´æ–°æ—¶è°ƒç”¨ï¼Œå‘ç”Ÿåœ¨è™šæ‹Ÿ DOM æ‰“è¡¥ä¸ä¹‹å‰ã€‚</li><li><code>onUpdated()</code> :DOM æ›´æ–°åï¼Œupdated çš„æ–¹æ³•å³ä¼šè°ƒç”¨ã€‚</li><li><code>onBeforeUnmount()</code> : åœ¨å¸è½½ç»„ä»¶å®ä¾‹ä¹‹å‰è°ƒç”¨ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼Œå®ä¾‹ä»ç„¶æ˜¯å®Œå…¨æ­£å¸¸çš„ã€‚</li><li><code>onUnmounted()</code> : å¸è½½ç»„ä»¶å®ä¾‹åè°ƒç”¨ã€‚è°ƒç”¨æ­¤é’©å­æ—¶ï¼Œç»„ä»¶å®ä¾‹çš„æ‰€æœ‰æŒ‡ä»¤éƒ½è¢«è§£é™¤ç»‘å®šï¼Œæ‰€æœ‰äº‹ä»¶ä¾¦å¬å™¨éƒ½è¢«ç§»é™¤ï¼Œæ‰€æœ‰å­ç»„ä»¶å®ä¾‹è¢«å¸è½½ã€‚</li></ul><h1 id="è¯¦è§£-scoped-å’Œæ ·å¼ç©¿é€"><a class="markdownIt-Anchor" href="#è¯¦è§£-scoped-å’Œæ ·å¼ç©¿é€">#</a> è¯¦è§£ Scoped å’Œæ ·å¼ç©¿é€</h1><p>æ ·å¼ç©¿é€ï¼šä¸»è¦æ˜¯ç”¨äºä¿®æ”¹å¾ˆå¤š vue å¸¸ç”¨çš„ç»„ä»¶åº“ï¼ˆelement, vant, AntDesiginï¼‰ï¼Œè™½ç„¶é…å¥½äº†æ ·å¼ä½†æ˜¯è¿˜æ˜¯éœ€è¦æ›´æ”¹å…¶ä»–çš„æ ·å¼å°±éœ€è¦ç”¨åˆ°æ ·å¼ç©¿é€</p><p>Scoped: å®ç°ç»„ä»¶çš„ç§æœ‰åŒ–ï¼Œå½“å‰ style å±æ€§åªå±äºå½“å‰æ¨¡å—ã€‚åœ¨ DOM ç»“æ„ä¸­å¯ä»¥å‘ç°ï¼Œvue é€šè¿‡åœ¨ DOM ç»“æ„ä»¥åŠ css æ ·å¼ä¸ŠåŠ äº†å”¯ä¸€æ ‡è®°ï¼Œè¾¾åˆ°æ ·å¼ç§æœ‰åŒ–ï¼Œä¸æ±¡æŸ“å…¨å±€çš„ä½œç”¨<br>vue ä¸­çš„ scoped é€šè¿‡åœ¨ DOM ç»“æ„ä»¥åŠ css æ ·å¼ä¸ŠåŠ å”¯ä¸€ä¸é‡å¤çš„æ ‡è®°:data-v-hash çš„æ–¹å¼ï¼Œä»¥ä¿è¯å”¯ä¸€ï¼ˆè€Œè¿™ä¸ªå·¥ä½œæ˜¯ç”±è¿‡ PostCSS è½¬è¯‘å®ç°çš„ï¼‰ï¼Œè¾¾åˆ°æ ·å¼ç§æœ‰åŒ–æ¨¡å—åŒ–çš„ç›®çš„ã€‚</p><p>æ€»ç»“ä¸€ä¸‹ scoped ä¸‰æ¡æ¸²æŸ“è§„åˆ™ï¼š</p><ol><li>ç»™ HTML çš„ DOM èŠ‚ç‚¹åŠ ä¸€ä¸ªä¸é‡å¤ data å±æ€§ (å½¢å¦‚ï¼šdata-v-123) æ¥è¡¨ç¤ºä»–çš„å”¯ä¸€æ€§</li><li>åœ¨æ¯å¥ css é€‰æ‹©å™¨çš„æœ«å°¾ï¼ˆç¼–è¯‘åçš„ç”Ÿæˆçš„ css è¯­å¥ï¼‰åŠ ä¸€ä¸ªå½“å‰ç»„ä»¶çš„ data å±æ€§é€‰æ‹©å™¨ï¼ˆå¦‚ [data-v-123]ï¼‰æ¥ç§æœ‰åŒ–æ ·å¼</li><li>å¦‚æœç»„ä»¶å†…éƒ¨åŒ…å«æœ‰å…¶ä»–ç»„ä»¶ï¼Œåªä¼šç»™å…¶ä»–ç»„ä»¶çš„æœ€å¤–å±‚æ ‡ç­¾åŠ ä¸Šå½“å‰ç»„ä»¶çš„ data å±æ€§<br>PostCSS ä¼šç»™ä¸€ä¸ªç»„ä»¶ä¸­çš„æ‰€æœ‰ dom æ·»åŠ äº†ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„åŠ¨æ€å±æ€§ data-v-xxxxï¼Œç„¶åï¼Œç»™ CSS é€‰æ‹©å™¨é¢å¤–æ·»åŠ ä¸€ä¸ªå¯¹åº”çš„å±æ€§é€‰æ‹©å™¨æ¥é€‰æ‹©è¯¥ç»„ä»¶ä¸­ domï¼Œè¿™ç§åšæ³•ä½¿å¾—æ ·å¼åªä½œç”¨äºå«æœ‰è¯¥å±æ€§çš„ domâ€”â€” ç»„ä»¶å†…éƒ¨ dom, ä»è€Œè¾¾åˆ°äº†â€™æ ·å¼æ¨¡å—åŒ–â€™çš„æ•ˆæœ.</li></ol><ul><li>æ¡ˆä¾‹ï¼šä¿®æ”¹ Element ui Input æ ·å¼ï¼Œå‘ç°æ²¡æœ‰ç”Ÿæ•ˆï¼Œå¦‚æœä¸å†™ Scoped å°±æ²¡é—®é¢˜</li></ul><p>åŸå› å°±æ˜¯ Scoped æçš„é¬¼ ä»–åœ¨è¿›è¡Œ PostCss è½¬åŒ–çš„æ—¶å€™æŠŠå…ƒç´ é€‰æ‹©å™¨é»˜è®¤æ”¾åœ¨äº†æœ€å<br>Vue æä¾›äº†æ ·å¼ç©¿é€:deep () ä»–çš„ä½œç”¨å°±æ˜¯ç”¨æ¥æ”¹å˜ å±æ€§é€‰æ‹©å™¨çš„ä½ç½®</p><h3 id="bem-æ¶æ„"><a class="markdownIt-Anchor" href="#bem-æ¶æ„">#</a> bem æ¶æ„</h3><p>ä»–æ˜¯ä¸€ç§ css æ¶æ„ oocss å®ç°çš„ä¸€ç§ ï¼ˆé¢å‘å¯¹è±¡ cssï¼‰ ï¼ŒBEM å®é™…ä¸Šæ˜¯ blockã€elementã€modifier çš„ç¼©å†™ï¼Œåˆ†åˆ«ä¸ºå—å±‚ã€å…ƒç´ å±‚ã€ä¿®é¥°ç¬¦å±‚ï¼Œelement UI ä¹Ÿä½¿ç”¨çš„æ˜¯è¿™ç§æ¶æ„<br>BEM å‘½åçº¦å®šçš„æ¨¡å¼æ˜¯ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.block</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.block__element</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.block--modifier</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åˆ—è¡¨æ¸²æŸ“v-for"><a class="markdownIt-Anchor" href="#åˆ—è¡¨æ¸²æŸ“v-for">#</a> åˆ—è¡¨æ¸²æŸ“ï¼šv-for</h1><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>v-for</code> æŒ‡ä»¤æ¥æ¸²æŸ“ä¸€ä¸ªåŸºäºæºæ•°ç»„çš„åˆ—è¡¨ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;todo in todos&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;todo.id&quot;</span>&gt;</span>&#123;&#123; todo.text &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„ todo æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œè¡¨ç¤ºå½“å‰æ­£åœ¨è¿­ä»£çš„æ•°ç»„å…ƒç´ ã€‚å®ƒåªèƒ½åœ¨ <code>v-for</code> æ‰€ç»‘å®šçš„å…ƒç´ ä¸Šæˆ–æ˜¯å…¶å†…éƒ¨è®¿é—®ï¼Œå°±åƒå‡½æ•°çš„ä½œç”¨åŸŸä¸€æ ·ã€‚</p><p>æ›´æ–°åˆ—è¡¨æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ol><li>åœ¨æºæ•°ç»„ä¸Šè°ƒç”¨å˜æ›´æ–¹æ³•ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">todos.<span class="property">value</span>.<span class="title function_">push</span>(newTodo);</span><br></pre></td></tr></table></figure><ol start="2"><li>ä½¿ç”¨æ–°çš„æ•°ç»„æ›¿ä»£åŸæ•°ç»„ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">todos.<span class="property">value</span> = todos.<span class="property">value</span>.<span class="title function_">filter</span>(<span class="comment">/* ... */</span>);</span><br></pre></td></tr></table></figure><h1 id="æ¨¡æ¿å¼•ç”¨"><a class="markdownIt-Anchor" href="#æ¨¡æ¿å¼•ç”¨">#</a> æ¨¡æ¿å¼•ç”¨</h1><p>éœ€è¦æ‰‹åŠ¨æ“çºµ DOM æ—¶è¦ç”¨åˆ° <code>æ¨¡æ¿å¼•ç”¨</code> â€”â€”â€”â€” ä¹Ÿå°±æ˜¯æŒ‡å‘æ¨¡æ¿ä¸­ä¸€ä¸ª DOM å…ƒç´ çš„ refï¼Œé€šè¿‡è¿™ä¸ª <code>ref</code> attribute æ¥å®ç°æ¨¡æ¿å¼•ç”¨:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">ref</span>=<span class="string">&quot;p&quot;</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¦è®¿é—®è¯¥å¼•ç”¨ï¼Œæˆ‘ä»¬éœ€è¦å£°æ˜ä¸€ä¸ªåŒåçš„ refã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="title function_">ref</span>(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™ä¸ª ref ä½¿ç”¨ null å€¼æ¥åˆå§‹åŒ–ã€‚è¿™æ˜¯å› ä¸ºå½“ <code>&lt;script setup&gt;</code> æ‰§è¡Œæ—¶ï¼ŒDOM å…ƒç´ è¿˜ä¸å­˜åœ¨ã€‚æ¨¡æ¿å¼•ç”¨ ref åªèƒ½åœ¨ç»„ä»¶æŒ‚è½½åè®¿é—®ã€‚</p><p>è¦åœ¨æŒ‚è½½ä¹‹åæ‰§è¡Œä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>onMounted()</code> å‡½æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ­¤æ—¶ç»„ä»¶å·²ç»æŒ‚è½½ã€‚</span></span><br><span class="line">  p.<span class="property">value</span>.<span class="property">textContent</span> = <span class="string">&quot;mounted!&quot;</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="ç»„ä»¶é—´é€šä¿¡"><a class="markdownIt-Anchor" href="#ç»„ä»¶é—´é€šä¿¡">#</a> ç»„ä»¶é—´é€šä¿¡</h1><h2 id="çˆ¶ä¼ å­"><a class="markdownIt-Anchor" href="#çˆ¶ä¼ å­">#</a> çˆ¶ä¼ å­</h2><p>vue3 çˆ¶ä¼ å­ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š <code>props</code> å’Œ <code>slot</code> :<br><code>props</code> æ˜¯ä¸€ç§å•å‘æ•°æ®æµï¼Œçˆ¶ç»„ä»¶é€šè¿‡åœ¨ <code>HTML</code> å†…å®¹ä¼ å…¥ä¸åŒæ•°æ®æ¥æ§åˆ¶å­ç»„ä»¶çš„æ¸²æŸ“ï¼Œä½†æ˜¯è¿™æ ·ä¼šå¢åŠ çˆ¶å­ç»„ä»¶ä¹‹é—´çš„è€¦åˆåº¦ï¼Œè€Œä¸” <code>props</code> åªèƒ½ä¼ é€’é™æ€çš„æ•°æ®ï¼Œä¸èƒ½ä¼ é€’åŠ¨æ€çš„å†…å®¹ã€‚</p><p><code>slot</code> æ˜¯ä¸€ç§å†…å®¹åˆ†å‘æœºåˆ¶ï¼Œçˆ¶ç»„ä»¶å¯ä»¥é€šè¿‡ <code>slot</code> æ ‡ç­¾æ¥æ’å…¥ä»»æ„çš„å†…å®¹åˆ°å­ç»„ä»¶ä¸­ï¼Œè¿™æ ·å¯ä»¥å¢åŠ ç»„ä»¶çš„çµæ´»æ€§å’Œå¤ç”¨æ€§ï¼Œè€Œä¸” <code>slot</code> å¯ä»¥ä¼ é€’åŠ¨æ€çš„å†…å®¹ï¼Œæ¯”å¦‚è¡¨è¾¾å¼å’ŒæŒ‡ä»¤ã€‚ <code>slot</code> è¿˜å¯ä»¥æ¥æ”¶æ’æ§½ <code>props</code> ï¼Œä¹Ÿå°±æ˜¯å­ç»„ä»¶ä¼ é€’ç»™çˆ¶ç»„ä»¶çš„æ•°æ®ï¼Œè¿™æ ·å¯ä»¥å®ç°åŒå‘æ•°æ®æµã€‚</p><ul><li>æ€»ä¹‹ï¼Œ <code>props</code> å’Œ <code>slot</code> éƒ½æ˜¯çˆ¶ä¼ å­çš„æ–¹å¼ï¼Œä½†æ˜¯ <code>props</code> æ›´é€‚åˆä¼ é€’ç®€å•çš„æ•°æ®ï¼Œè€Œ <code>slot</code> æ›´é€‚åˆä¼ é€’å¤æ‚çš„å†…å®¹ã€‚</li></ul><h3 id="çˆ¶ä¼ å­props"><a class="markdownIt-Anchor" href="#çˆ¶ä¼ å­props">#</a> çˆ¶ä¼ å­ï¼šprops</h3><p>å­ç»„ä»¶å¯ä»¥é€šè¿‡ <code>props</code> ä»çˆ¶ç»„ä»¶æ¥å—åŠ¨æ€æ•°æ®ã€‚</p><ol><li>çˆ¶ç»„ä»¶ä¼ é€’ <code>props</code> ï¼š</li></ol><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ChildComp</span> <span class="attr">:msg</span>=<span class="string">&quot;greeting&quot;</span> /&gt;</span></span></span><br></pre></td></tr></table></figure><ol start="2"><li>å­ç»„ä»¶ä½¿ç”¨ <code>defineProps()</code> ï¼Œå£°æ˜å­ç»„ä»¶æ‰€æ¥å—çš„ <code>props</code> ï¼š</li></ol><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//ChildComp.vue</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span></span></span><br><span class="line">const props = defineProps(&#123;</span><br><span class="line">  msg: string,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">//ç„¶åç›´æ¥ä½¿ç”¨<span class="code">`msg`</span>å³å¯</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ ts å†™æ³•ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&#x27;ts&#x27;</span>&gt;</span></span></span><br><span class="line">const props = defineProps&lt;&#123;</span><br><span class="line">  msg: string,</span><br><span class="line">&#125;&gt;();</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">//ç„¶åç›´æ¥ä½¿ç”¨<span class="code">`msg`</span>å³å¯</span><br></pre></td></tr></table></figure><h3 id="çˆ¶ä¼ å­slot-æ’æ§½"><a class="markdownIt-Anchor" href="#çˆ¶ä¼ å­slot-æ’æ§½">#</a> çˆ¶ä¼ å­ï¼šslot æ’æ§½</h3><p>åŒ¿åæ’æ§½ã€å…·åæ’æ§½ã€ä½œç”¨äºæ’æ§½ã€åŠ¨æ€æ’æ§½</p><p>æˆ‘ä»¬å·²ç»äº†è§£åˆ°ç»„ä»¶èƒ½å¤Ÿæ¥æ”¶ä»»æ„ç±»å‹çš„ <code>JavaScript</code> å€¼ä½œä¸º <code>props</code> ï¼Œä½†ç»„ä»¶è¦å¦‚ä½•æ¥æ”¶æ¨¡æ¿å†…å®¹å‘¢ï¼Ÿåœ¨æŸäº›åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½æƒ³è¦ä¸ºå­ç»„ä»¶ä¼ é€’ä¸€äº›æ¨¡æ¿ç‰‡æ®µï¼Œè®©å­ç»„ä»¶åœ¨å®ƒä»¬çš„ç»„ä»¶ä¸­æ¸²æŸ“è¿™äº›ç‰‡æ®µã€‚<br>æ’æ§½å†…å®¹å¯ä»¥æ˜¯ä»»æ„åˆæ³•çš„æ¨¡æ¿å†…å®¹ï¼Œä¸å±€é™äºæ–‡æœ¬ï¼Œå¯ä»¥ä¼ å…¥å¤šä¸ªå…ƒç´ ï¼Œç”šè‡³æ˜¯ç»„ä»¶ã€‚<br>é€šè¿‡ä½¿ç”¨æ’æ§½ï¼Œå­ç»„ä»¶æ›´åŠ çµæ´»å’Œå…·æœ‰å¯å¤ç”¨æ€§ã€‚ç°åœ¨ç»„ä»¶å¯ä»¥ç”¨åœ¨ä¸åŒçš„åœ°æ–¹æ¸²æŸ“å„å¼‚çš„å†…å®¹ï¼Œä½†åŒæ—¶è¿˜ä¿è¯éƒ½å…·æœ‰ç›¸åŒçš„æ ·å¼ã€‚</p><ol><li>çˆ¶ç»„ä»¶ä¸­ï¼šåœ¨<strong>å­ç»„ä»¶æ ‡ç­¾</strong>ä¸­ç›´æ¥å†™è¦ä¼ é€’çš„å†…å®¹ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;ChildComp&gt;</span><br><span class="line">  æ’æ§½å†…å®¹</span><br><span class="line">&lt;/ChildComp&gt;</span><br></pre></td></tr></table></figure><ol start="2"><li>å­ç»„ä»¶ä¸­ï¼šå†™ä¸€ä¸ª <code>&lt;slot&gt;</code> ï¼Œå®ƒæ˜¯ä¸€ä¸ª<strong>æ’æ§½å‡ºå£</strong>ï¼Œæ ‡ç¤ºäº†çˆ¶å…ƒç´ æä¾›çš„<strong>æ’æ§½å†…å®¹</strong>å°†åœ¨å“ªé‡Œè¢«æ¸²æŸ“ã€‚</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">slot</span>&gt;</span>&lt;/slot</span><br><span class="line">  &gt;<span class="comment">&lt;!-- æ’æ§½å‡ºå£ --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æœ€ç»ˆæ¸²æŸ“å‡ºçš„ DOM æ˜¯è¿™æ ·ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>æ’æ§½å†…å®¹<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ¸²æŸ“ä½œç”¨åŸŸ"><a class="markdownIt-Anchor" href="#æ¸²æŸ“ä½œç”¨åŸŸ">#</a> æ¸²æŸ“ä½œç”¨åŸŸ</h4><p>æ’æ§½å†…å®¹å¯ä»¥è®¿é—®åˆ°çˆ¶ç»„ä»¶çš„æ•°æ®ä½œç”¨åŸŸï¼Œå› ä¸ºæ’æ§½å†…å®¹æœ¬èº«æ˜¯åœ¨çˆ¶ç»„ä»¶æ¨¡æ¿ä¸­å®šä¹‰çš„ã€‚ä¸¾ä¾‹æ¥è¯´ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;span&gt;&#123;&#123; message &#125;&#125;&lt;/span&gt;</span><br><span class="line">&lt;ChildComp&gt;&#123;&#123; message &#125;&#125;&lt;/ChildComp&gt;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„ä¸¤ä¸ª <code>&#123;&#123; message &#125;&#125;</code> æ’å€¼è¡¨è¾¾å¼æ¸²æŸ“çš„å†…å®¹éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><ul><li>æ³¨æ„ï¼šæ’æ§½å†…å®¹æ— æ³•è®¿é—®å­ç»„ä»¶çš„æ•°æ®ã€‚çˆ¶ç»„ä»¶æ¨¡æ¿ä¸­çš„è¡¨è¾¾å¼åªèƒ½è®¿é—®çˆ¶ç»„ä»¶çš„ä½œç”¨åŸŸï¼›å­ç»„ä»¶æ¨¡æ¿ä¸­çš„è¡¨è¾¾å¼åªèƒ½è®¿é—®å­ç»„ä»¶çš„ä½œç”¨åŸŸã€‚</li></ul><h4 id="é»˜è®¤å†…å®¹"><a class="markdownIt-Anchor" href="#é»˜è®¤å†…å®¹">#</a> é»˜è®¤å†…å®¹</h4><p>åœ¨å¤–éƒ¨æ²¡æœ‰æä¾›ä»»ä½•å†…å®¹çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä¸ºæ’æ§½æŒ‡å®šé»˜è®¤å†…å®¹ã€‚æ¯”å¦‚å­ç»„ä»¶ä¸­æœ‰è¿™æ ·ä¸€ä¸ªå†…å®¹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬æƒ³åœ¨çˆ¶ç»„ä»¶æ²¡æœ‰æä¾›ä»»ä½•æ’æ§½å†…å®¹æ—¶åœ¨å­ç»„ä»¶çš„ <code>&lt;div&gt;</code> å†…æ¸²æŸ“ä¸€äº›å…ƒç´ ï¼Œåªéœ€è¦å°†å…¶å†™åœ¨ <code>&lt;slot&gt;</code> æ ‡ç­¾ä¹‹é—´æ¥ä½œä¸ºé»˜è®¤å†…å®¹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">slot</span>&gt;</span>é»˜è®¤å†…å®¹<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åªè¦çˆ¶ç»„ä»¶æ²¡æœ‰å‘è¿™ä¸ªå­ç»„ä»¶æä¾›ä»»ä½•æ’æ§½å†…å®¹ï¼Œâ€œé»˜è®¤å†…å®¹â€ å°†ä¼šè¢«ä½œä¸ºé»˜è®¤å†…å®¹æ¸²æŸ“ï¼Œä½†å¦‚æœçˆ¶ç»„ä»¶æä¾›äº†æ’æ§½å†…å®¹ï¼Œé‚£ä¹ˆè¢«æ˜¾å¼æä¾›çš„å†…å®¹ä¼šå–ä»£é»˜è®¤å†…å®¹ã€‚</p><h4 id="å…·åæ’æ§½"><a class="markdownIt-Anchor" href="#å…·åæ’æ§½">#</a> å…·åæ’æ§½</h4><p>æœ‰æ—¶ä¼šåœ¨ä¸€ä¸ªç»„ä»¶ä¸­ä½¿ç”¨å¤šä¸ª<strong>æ’æ§½å‡ºå£</strong>ï¼Œæ¯”å¦‚æŸä¸ªå­ç»„ä»¶ä¸­æœ‰å¦‚ä¸‹æ¨¡æ¿ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ ‡é¢˜å†…å®¹æ”¾è¿™é‡Œ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¸»è¦å†…å®¹æ”¾è¿™é‡Œ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åº•éƒ¨å†…å®¹æ”¾è¿™é‡Œ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯¹äºè¿™ç§åœºæ™¯ï¼Œ <code>&lt;slot&gt;</code> å…ƒç´ å¯ä»¥æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ <code>name</code> ï¼Œç”¨æ¥ç»™å„ä¸ªæ’æ§½åˆ†é…å”¯ä¸€çš„ IDï¼Œä»¥ç¡®å®šæ¯ä¸€å¤„è¦æ¸²æŸ“çš„å†…å®¹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;header&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;footer&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ç±»å¸¦ <code>name</code> çš„æ’æ§½è¢«ç§°ä¸º<strong>å…·åæ’æ§½</strong> æ²¡æœ‰æä¾› <code>name</code> çš„ <code>&lt;slot&gt;</code> å‡ºå£ä¼šéšå¼åœ°å‘½åä¸º â€œdefaultâ€ã€‚</p><p>è¿™ç§æƒ…å†µä¸‹ï¼Œçˆ¶ç»„ä»¶åœ¨ä½¿ç”¨è¿™ä¸ªå­ç»„ä»¶çš„æ—¶å€™å°±éœ€è¦ä½¿ç”¨ä¸€ä¸ªå« <code>v-slot</code> æŒ‡ä»¤çš„ <code>&lt;template&gt;</code> å…ƒç´ ä¸ºå…·åæ’æ§½ä¼ å…¥å†…å®¹ï¼Œå¹¶å°†ç›®æ ‡æ’æ§½çš„åå­—ä¼ ç»™è¯¥æŒ‡ä»¤: <code>&lt;template v-slot:header&gt;</code> , è€Œ <code>v-slot</code> æœ‰å¯¹åº”çš„ç®€å†™ <code>#</code> ï¼Œå› æ­¤ <code>&lt;template v-slot:header&gt;</code> å¯ä»¥ç®€å†™ä¸º <code>&lt;template #header&gt;</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ChildComp</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Here might be a page title<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>A paragraph for the main content.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>And another one.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Here&#x27;s some contact info<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ChildComp</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å½“ä¸€ä¸ªç»„ä»¶åŒæ—¶æ¥æ”¶é»˜è®¤æ’æ§½å’Œå…·åæ’æ§½æ—¶ï¼Œæ‰€æœ‰ä½äºé¡¶çº§çš„é <code>&lt;template&gt;</code> èŠ‚ç‚¹éƒ½è¢«éšå¼åœ°è§†ä¸ºé»˜è®¤æ’æ§½çš„å†…å®¹ã€‚æ‰€ä»¥ä¸Šé¢ä¹Ÿå¯ä»¥å†™æˆï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ChildComp</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Here might be a page title<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- éšå¼çš„é»˜è®¤æ’æ§½ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>A paragraph for the main content.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>And another one.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Here&#x27;s some contact info<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ChildComp</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="ä½œç”¨åŸŸæ’æ§½"><a class="markdownIt-Anchor" href="#ä½œç”¨åŸŸæ’æ§½">#</a> ä½œç”¨åŸŸæ’æ§½</h4><p>æ’æ§½çš„å†…å®¹æ— æ³•è®¿é—®åˆ°å­ç»„ä»¶çš„çŠ¶æ€ï¼Œç„¶è€Œåœ¨æŸäº›åœºæ™¯ä¸‹æ’æ§½çš„å†…å®¹å¯èƒ½æƒ³è¦åŒæ—¶ä½¿ç”¨çˆ¶ç»„ä»¶åŸŸå†…å’Œå­ç»„ä»¶åŸŸå†…çš„æ•°æ®ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•æ¥è®©å­ç»„ä»¶åœ¨æ¸²æŸ“æ—¶å°†ä¸€éƒ¨åˆ†æ•°æ®æä¾›ç»™æ’æ§½ã€‚</p><p>æ–¹æ³•ï¼šå¯ä»¥åƒå¯¹ç»„ä»¶ä¼ é€’ <code>props</code> é‚£æ ·ï¼Œå‘ä¸€ä¸ªæ’æ§½çš„å‡ºå£ä¸Šä¼ é€’ attributesï¼š<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p><h3 id="ç®€å•ä½¿ç”¨çˆ¶ä¼ å­"><a class="markdownIt-Anchor" href="#ç®€å•ä½¿ç”¨çˆ¶ä¼ å­">#</a> ç®€å•ä½¿ç”¨<strong>çˆ¶ä¼ å­</strong></h3><h4 id="props"><a class="markdownIt-Anchor" href="#props">#</a> <code>props</code></h4><ul><li>çˆ¶ç»„ä»¶ï¼š</li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ChildComp</span> <span class="attr">:msg</span>=<span class="string">&quot;greeting&quot;</span> /&gt;</span></span></span><br></pre></td></tr></table></figure><ul><li>å­ç»„ä»¶ï¼š</li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span></span></span><br><span class="line">const props = defineProps(&#123;</span><br><span class="line">  msg: String,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h4 id="slot-æ’æ§½"><a class="markdownIt-Anchor" href="#slot-æ’æ§½">#</a> <code>slot</code> æ’æ§½</h4><ul><li>çˆ¶ç»„ä»¶ï¼š</li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ChildComp</span>&gt;</span></span></span><br><span class="line">  æ’æ§½å†…å®¹</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ChildComp</span>&gt;</span></span></span><br></pre></td></tr></table></figure><ul><li>å­ç»„ä»¶ï¼š</li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">slot</span>&gt;</span></span><span class="language-xml">&lt;/slot</span></span><br><span class="line"><span class="language-xml">  &gt;</span>&lt;!-- æ’æ§½å‡ºå£ --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h4 id="å…·åæ’æ§½-2"><a class="markdownIt-Anchor" href="#å…·åæ’æ§½-2">#</a> å…·åæ’æ§½</h4><ul><li>çˆ¶ç»„ä»¶:</li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ChildComp</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">hello</span>&gt;</span></span></span><br><span class="line"><span class="code">    &lt;h1&gt;Here might be a page title&lt;/h1&gt;</span></span><br><span class="line"><span class="code">  &lt;/template&gt;</span></span><br><span class="line"><span class="code">&lt;/ChildComp&gt;</span></span><br></pre></td></tr></table></figure><ul><li>å­ç»„ä»¶ï¼š</li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;hello&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p><h2 id="å­ç»™çˆ¶ä¹‹ä¸€emits"><a class="markdownIt-Anchor" href="#å­ç»™çˆ¶ä¹‹ä¸€emits">#</a> å­ç»™çˆ¶ä¹‹ä¸€ï¼šEmits</h2><p>é™¤äº†æ¥æ”¶ <code>props</code> ï¼Œå­ç»„ä»¶è¿˜å¯ä»¥å‘çˆ¶ç»„ä»¶è§¦å‘äº‹ä»¶.</p><ol><li>å­ç»„ä»¶è§¦å‘</li></ol><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;send&quot;</span>&gt;</span></span>ç»™çˆ¶ç»„ä»¶ä¼ å€¼<span class="language-xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span></span></span><br><span class="line">  // å£°æ˜è§¦å‘çš„äº‹ä»¶</span><br><span class="line">  const emit = defineEmits([&quot;on-click&quot;]);</span><br><span class="line">  // å¸¦å‚æ•°è§¦å‘</span><br><span class="line">const send = () =&gt; [</span><br><span class="line"><span class="code">    emit(&quot;on-click&quot;);</span></span><br><span class="line"><span class="code">]</span></span><br><span class="line"><span class="code">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>çˆ¶ç»„ä»¶æ¥æ”¶</li></ol><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">ChildComp</span> @<span class="attr">on-click</span>=<span class="string">&quot;getName&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&#x27;ts&#x27;</span>&gt;</span></span></span><br><span class="line">import ChildComp from &#x27;./<span class="strong">****</span>&#x27;</span><br><span class="line"></span><br><span class="line">let name = &#x27;å°æ»¡&#x27;,</span><br><span class="line">const getName = (name:string) =&gt; &#123;</span><br><span class="line">  console.log(name,&#x27;======&gt;æˆ‘æ˜¯çˆ¶ç»„ä»¶&#x27;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p><code>emit()</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯äº‹ä»¶çš„åç§°ã€‚å…¶ä»–æ‰€æœ‰å‚æ•°éƒ½å°†ä¼ é€’ç»™äº‹ä»¶ç›‘å¬å™¨ã€‚<br>çˆ¶ç»„ä»¶å¯ä»¥ä½¿ç”¨ <code>v-on</code> ç›‘å¬å­ç»„ä»¶è§¦å‘çš„äº‹ä»¶ â€”â€” è¿™é‡Œçš„å¤„ç†å‡½æ•°æ¥æ”¶äº†å­ç»„ä»¶è§¦å‘äº‹ä»¶æ—¶çš„é¢å¤–å‚æ•°å¹¶å°†å®ƒèµ‹å€¼ç»™äº†æœ¬åœ°çŠ¶æ€ï¼š</p><h2 id="å­ç»™çˆ¶ä¹‹äºŒdefineexpose"><a class="markdownIt-Anchor" href="#å­ç»™çˆ¶ä¹‹äºŒdefineexpose">#</a> å­ç»™çˆ¶ä¹‹äºŒï¼šdefineExpose</h2><p>å­ç»„ä»¶å¯ä»¥é€šè¿‡ <code>defineExpose</code> æš´éœ²å±æ€§æˆ–æ–¹æ³•ç»™çˆ¶ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶é€šè¿‡å­ç»„ä»¶æ ‡ç­¾å†…ä½¿ç”¨ ref æ¥æ¥æ”¶ã€‚element plus è¡¨å•å¤šç”¨è¿™ç§æ–¹å¼æš´éœ²æ–¹æ³•å’Œå±æ€§</p><ol><li>å­ç»„ä»¶æš´éœ²</li></ol><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span></span></span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  name:&#x27;å°æ»¡&#x27;,</span><br><span class="line">  open:() =&gt; console.log(1)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><ol start="2"><li>çˆ¶ç»„ä»¶æ¥æ”¶</li></ol><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">ChildComp</span> <span class="attr">ref</span>=<span class="string">&#x27;childcomp&#x27;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&#x27;ts&#x27;</span>&gt;</span></span></span><br><span class="line">import ChildComp from &#x27;./<span class="strong">****</span>&#x27;</span><br><span class="line"></span><br><span class="line">const childcomp = ref<span class="language-xml"><span class="language-javascript">&lt;<span class="title class_">InstanceType</span>&lt;<span class="keyword">typeof</span> <span class="title class_">ChildComp</span>&gt;</span></span>&gt;()</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="çˆ¶å­ç»„ä»¶åŒå‘æ•°æ®props-emits-v-model"><a class="markdownIt-Anchor" href="#çˆ¶å­ç»„ä»¶åŒå‘æ•°æ®props-emits-v-model">#</a> çˆ¶å­ç»„ä»¶åŒå‘æ•°æ®ï¼šprops + emits + v-model</h2><h2 id="å…„å¼Ÿç»„ä»¶é—´é€šä¿¡"><a class="markdownIt-Anchor" href="#å…„å¼Ÿç»„ä»¶é—´é€šä¿¡">#</a> å…„å¼Ÿç»„ä»¶é—´é€šä¿¡</h2><p>æ–¹å¼æå¤š</p><h3 id="mitt-æ’ä»¶æ–¹å¼å®ç°å…„å¼Ÿç»„ä»¶é—´é€šä¿¡"><a class="markdownIt-Anchor" href="#mitt-æ’ä»¶æ–¹å¼å®ç°å…„å¼Ÿç»„ä»¶é—´é€šä¿¡">#</a> mitt æ’ä»¶æ–¹å¼å®ç°å…„å¼Ÿç»„ä»¶é—´é€šä¿¡</h3><ol><li>å®‰è£…</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add mitt -S</span><br></pre></td></tr></table></figure><ol start="2"><li><code>src/plugins/Bus.js</code> æˆ– <code>src/utils/Bus.js</code> ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&quot;mitt&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">mitt</span>();</span><br></pre></td></tr></table></figure><ol start="3"><li>ä½¿ç”¨</li></ol><ul><li>A ç»„ä»¶å‘é€</li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span></span></span><br><span class="line">import mitt from &#x27;../utils/Bus.js&#x27;</span><br><span class="line">let str = ref(&#x27;è¿™æ˜¯Aç»„ä»¶çš„æ•°æ®&#x27;)</span><br><span class="line"></span><br><span class="line">const btn = ()=&gt; &#123;</span><br><span class="line">  //emit(è‡ªå®šä¹‰äº‹ä»¶åç§°,å‚æ•°,â€¦â€¦)</span><br><span class="line">  mitt.emit(&#x27;fn&#x27;,str)</span><br><span class="line">&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="code">    &lt;h1&gt;Aç»„ä»¶&lt;/h1&gt;</span></span><br><span class="line"><span class="code">    &lt;button @click = &quot;btn&quot;&gt;æŒ‰é’®&lt;/button&gt;</span></span><br><span class="line"><span class="code">  &lt;/div&gt;</span></span><br><span class="line"><span class="code">&lt;/template&gt;</span></span><br></pre></td></tr></table></figure><ul><li>B ç»„ä»¶æ¥æ”¶</li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span></span></span><br><span class="line">import mitt from &#x27;../utils/Bus.js&#x27;</span><br><span class="line">let s = ref(&#x27;&#x27;)</span><br><span class="line"></span><br><span class="line">onBeforeMount(()=&gt;&#123;</span><br><span class="line">  //emit(è‡ªå®šä¹‰äº‹ä»¶åç§°,å›è°ƒå‡½æ•°) å¦‚æœè¦æ¥æ”¶å¤šä¸ªäº‹ä»¶ï¼Œå°±æŠŠ<span class="code">`è‡ªå®šä¹‰äº‹ä»¶åç§°`</span>æ¢æˆ<span class="code">`*`</span></span><br><span class="line">  mitt.on(&#x27;fn&#x27;,e =&gt; &#123;</span><br><span class="line"><span class="code">    s.value = e.value</span></span><br><span class="line"><span class="code">  &#125;)</span></span><br><span class="line"><span class="code">&#125;)</span></span><br><span class="line"><span class="code">&lt;/script&gt;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span></span></span><br><span class="line">  <span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span></span><br><span class="line"><span class="code">    &lt;h1&gt;Bç»„ä»¶&lt;/h1&gt;</span></span><br><span class="line"><span class="code">    &#123;&#123;s&#125;&#125;</span></span><br><span class="line"><span class="code">  &lt;/div&gt;</span></span><br><span class="line"><span class="code">&lt;/template&gt;</span></span><br></pre></td></tr></table></figure><h1 id="label-æ ‡ç­¾"><a class="markdownIt-Anchor" href="#label-æ ‡ç­¾">#</a> label æ ‡ç­¾</h1><p><code>&lt;label&gt;</code> æ ‡ç­¾ä¸º input å…ƒç´ å®šä¹‰æ ‡æ³¨ï¼ˆæ ‡è®°ï¼‰ã€‚</p><p>label å…ƒç´ ä¸ä¼šå‘ç”¨æˆ·å‘ˆç°ä»»ä½•ç‰¹æ®Šæ•ˆæœã€‚ä¸è¿‡ï¼Œå®ƒä¸ºé¼ æ ‡ç”¨æˆ·æ”¹è¿›äº†å¯ç”¨æ€§ã€‚å¦‚æœæ‚¨åœ¨ label å…ƒç´ å†…ç‚¹å‡»æ–‡æœ¬ï¼Œå°±ä¼šè§¦å‘æ­¤æ§ä»¶ã€‚å°±æ˜¯è¯´ï¼Œå½“ç”¨æˆ·é€‰æ‹©è¯¥æ ‡ç­¾æ—¶ï¼Œæµè§ˆå™¨å°±ä¼šè‡ªåŠ¨å°†ç„¦ç‚¹è½¬åˆ°å’Œæ ‡ç­¾ç›¸å…³çš„è¡¨å•æ§ä»¶ä¸Šã€‚</p><p><code>&lt;label&gt;</code> æ ‡ç­¾çš„ for å±æ€§åº”å½“ä¸ç›¸å…³å…ƒç´ çš„ id å±æ€§ç›¸åŒã€‚</p><p>æ³¨é‡Šï¼šâ€œforâ€ å±æ€§å¯æŠŠ label ç»‘å®šåˆ°å¦å¤–ä¸€ä¸ªå…ƒç´ ã€‚è¯·æŠŠ â€œforâ€ å±æ€§çš„å€¼è®¾ç½®ä¸ºç›¸å…³å…ƒç´ çš„ id å±æ€§çš„å€¼ã€‚<br>å°±æ˜¯ä¸€ä¸ªæ–‡æœ¬æç¤ºæ ‡ç­¾ï¼Œä¸è¿‡åœ¨ label æ ‡ç­¾ä¸­åŠ å…¥ for å±æ€§å¯ä»¥ä¸ç›¸åº”çš„é€‰é¡¹æ¡†è¿›è¡Œæ†ç»‘ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ä½ ç‚¹å‡»è¿™ä¸ªæ–‡æœ¬æ¡†å°±ä¼šæ´»çš„ç‚¹å‡»é€‰é¡¹æ¡†çš„æ•ˆæœã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;lable&gt;ç”·&lt;/lable&gt;</span><br><span class="line">&lt;input style=&quot;checkbox&quot; /&gt;</span><br></pre></td></tr></table></figure><h1 id="h-å‡½æ•°"><a class="markdownIt-Anchor" href="#h-å‡½æ•°">#</a> h å‡½æ•°</h1><p>Vue æ¨èåœ¨ç»å¤§æ•°æƒ…å†µä¸‹ä½¿ç”¨æ¨¡æ¿æ¥åˆ›å»ºä½ çš„ HTMLï¼Œç„¶åä¸€äº›ç‰¹æ®Šçš„åœºæ™¯ï¼Œä½ çœŸçš„éœ€è¦ JavaScript çš„å®Œå…¨ç¼–ç¨‹çš„<br>èƒ½åŠ›ï¼Œè¿™ä¸ªæ—¶å€™ä½ å¯ä»¥ä½¿ç”¨ æ¸²æŸ“å‡½æ•° ï¼Œå®ƒæ¯”æ¨¡æ¿æ›´æ¥è¿‘ç¼–è¯‘å™¨ï¼›<br>Vue åœ¨ç”ŸæˆçœŸå®çš„ DOM ä¹‹å‰ï¼Œä¼šå°†æˆ‘ä»¬çš„èŠ‚ç‚¹è½¬æ¢æˆ VNodeï¼Œè€Œ VNode ç»„åˆåœ¨ä¸€èµ·å½¢æˆä¸€é¢—æ ‘ç»“æ„ï¼Œå°±æ˜¯è™š<br>æ‹Ÿ DOMï¼ˆVDOMï¼‰ï¼›<br>äº‹å®ä¸Šï¼Œæˆ‘ä»¬ä¹‹å‰ç¼–å†™çš„ template ä¸­çš„ HTML æœ€ç»ˆä¹Ÿæ˜¯ä½¿ç”¨æ¸²æŸ“å‡½æ•°ç”Ÿæˆå¯¹åº”çš„ VNodeï¼›<br>é‚£ä¹ˆï¼Œå¦‚æœä½ æƒ³å……åˆ†çš„åˆ©ç”¨ JavaScript çš„ç¼–ç¨‹èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±æ¥ç¼–å†™ createVNode å‡½æ•°ï¼Œç”Ÿæˆå¯¹åº”çš„<br>VNodeï¼›</p><ul><li>h () å‡½æ•°æ˜¯ä¸€ä¸ªç”¨äºåˆ›å»º vnode çš„ä¸€ä¸ªå‡½æ•°ï¼›å…¶å®æ›´å‡†å¤‡çš„å‘½åæ˜¯ createVNode () å‡½æ•°ï¼Œä½†æ˜¯ä¸ºäº†ç®€ä¾¿åœ¨ Vue å°†ä¹‹ç®€åŒ–ä¸º h () å‡½æ•°</li><li>h () å‡½æ•° å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ<br>å®ƒæ¥å—ä¸‰ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•°ã€typeã€‘æ—¢å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² (ç”¨äºåŸç”Ÿå…ƒç´ ) ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª Vue ç»„ä»¶å®šä¹‰ã€‚ç¬¬äºŒä¸ªå‚æ•°ã€propsã€‘æ˜¯è¦ä¼ é€’çš„ propï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ã€childrenã€‘æ˜¯å­èŠ‚ç‚¹ã€‚<br>é™¤äº† type å¤–ï¼Œå…¶ä»–å‚æ•°éƒ½æ˜¯å¯é€‰çš„ã€‚å¦‚æœæ²¡æœ‰ propsï¼Œé‚£ä¹ˆé€šå¸¸å¯ä»¥å°† children ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ï¼›å¦‚æœä¼šäº§ç”Ÿæ­§ä¹‰ï¼Œå¯ä»¥å°† null ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ï¼Œå°† children ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥</li><li>h å‡½æ•°çš„åŸºæœ¬ä½¿ç”¨<br>h å‡½æ•°å¯ä»¥åœ¨ä¸¤ä¸ªåœ°æ–¹ä½¿ç”¨ï¼š</li></ul><ol><li>render å‡½æ•°é€‰é¡¹ä¸­ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; h &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">h</span>(<span class="string">&quot;div&quot;</span>, &#123; <span class="attr">class</span>: <span class="string">&quot;app&quot;</span> &#125;, <span class="string">&quot;Hello App&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>setup å‡½æ•°é€‰é¡¹ä¸­ï¼ˆsetup æœ¬èº«éœ€è¦æ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹ï¼Œå‡½æ•°å†è¿”å› h å‡½æ•°åˆ›å»ºçš„ VNode:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; h &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">setuo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="title function_">h</span>(<span class="string">&quot;div&quot;</span>, &#123; <span class="attr">class</span>: <span class="string">&quot;app&quot;</span> &#125;, <span class="string">&quot;Hello App&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="è‡ªå®šä¹‰æŒ‡ä»¤-2"><a class="markdownIt-Anchor" href="#è‡ªå®šä¹‰æŒ‡ä»¤-2">#</a> è‡ªå®šä¹‰æŒ‡ä»¤</h1><p>åœ¨ Vue çš„æ¨¡æ¿è¯­æ³•ä¸­æˆ‘ä»¬å­¦ä¹ è¿‡å„ç§å„æ ·çš„æŒ‡ä»¤ï¼š <code>v-show</code> ã€ <code>v-for</code> ã€ <code>v-model</code> ç­‰ç­‰ï¼Œé™¤äº†ä½¿ç”¨è¿™äº›æŒ‡ä»¤ä¹‹å¤–ï¼ŒVue<br>ä¹Ÿå…è®¸æˆ‘ä»¬æ¥è‡ªå®šä¹‰è‡ªå·±çš„æŒ‡ä»¤<br>æ³¨æ„ï¼šåœ¨ Vue ä¸­ï¼Œä»£ç çš„å¤ç”¨å’ŒæŠ½è±¡ä¸»è¦è¿˜æ˜¯é€šè¿‡ç»„ä»¶<br>é€šå¸¸åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ éœ€è¦å¯¹ DOM å…ƒç´ è¿›è¡Œåº•å±‚æ“ä½œï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šç”¨åˆ°è‡ªå®šä¹‰æŒ‡ä»¤</p><ul><li>è‡ªå®šä¹‰æŒ‡ä»¤åˆ†ä¸ºä¸¤ç§ï¼š</li></ul><ol><li>è‡ªå®šä¹‰å±€éƒ¨æŒ‡ä»¤ï¼šç»„ä»¶ä¸­é€šè¿‡ <code>directives</code> é€‰é¡¹ï¼Œåªèƒ½åœ¨å½“å‰ç»„ä»¶ä¸­ä½¿ç”¨</li><li>è‡ªå®šä¹‰å…¨å±€æŒ‡ä»¤ï¼šapp çš„ <code>directive</code> æ–¹æ³•ï¼Œå¯ä»¥åœ¨ä»»æ„ç»„ä»¶ä¸­è¢«ä½¿ç”¨</li></ol><p>eg. æ¯”å¦‚æˆ‘ä»¬æ¥åšä¸€ä¸ªéå¸¸ç®€å•çš„æ¡ˆä¾‹ï¼šå½“æŸä¸ªå…ƒç´ æŒ‚è½½å®Œæˆåå¯ä»¥è‡ªå®šè·å–ç„¦ç‚¹</p><ul><li>è‡ªå®šä¹‰ä¸€ä¸ª <code>v-focus</code> çš„å±€éƒ¨æŒ‡ä»¤ï¼›<br>è¿™ä¸ªè‡ªå®šä¹‰æŒ‡ä»¤å®ç°éå¸¸ç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ç»„ä»¶é€‰é¡¹ä¸­ä½¿ç”¨ <code>directives</code> å³å¯<br>å®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨å¯¹è±¡ä¸­ç¼–å†™æˆ‘ä»¬è‡ªå®šä¹‰æŒ‡ä»¤çš„åç§°ï¼ˆæ³¨æ„ï¼šè¿™é‡Œä¸éœ€è¦åŠ  <code>v-</code> ï¼‰<br>è‡ªå®šä¹‰æŒ‡ä»¤æœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œæ˜¯åœ¨ç»„ä»¶æŒ‚è½½åè°ƒç”¨çš„ <code>mounted</code> ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­å®Œæˆæ“ä½œ</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  directives: &#123;</span><br><span class="line">    focus: &#123;</span><br><span class="line">      mounted(el) &#123;</span><br><span class="line">        el.focus();</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>è‡ªå®šä¹‰ä¸€ä¸ª <code>v-focus</code> çš„å…¨å±€æŒ‡ä»¤ï¼›</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">directives</span>(<span class="string">&quot;focus&quot;</span>, &#123;</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params">el</span>) &#123;</span><br><span class="line">    el.<span class="title function_">focus</span>();</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="æŒ‡ä»¤çš„ç”Ÿå‘½å‘¨æœŸ"><a class="markdownIt-Anchor" href="#æŒ‡ä»¤çš„ç”Ÿå‘½å‘¨æœŸ">#</a> æŒ‡ä»¤çš„ç”Ÿå‘½å‘¨æœŸ</h2><p>ä¸€ä¸ªæŒ‡ä»¤å®šä¹‰çš„å¯¹è±¡ï¼ŒVue æä¾›äº†å¦‚ä¸‹çš„å‡ ä¸ªé’©å­å‡½æ•°<br><code>created</code> ï¼šåœ¨ç»‘å®šå…ƒç´ çš„ attribute æˆ–äº‹ä»¶ç›‘å¬å™¨è¢«åº”ç”¨ä¹‹å‰è°ƒç”¨<br><code>beforeMount</code> ï¼šå½“æŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ å¹¶ä¸”åœ¨æŒ‚è½½çˆ¶ç»„ä»¶ä¹‹å‰è°ƒç”¨<br><code>mounted</code> ï¼šåœ¨ç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶è¢«æŒ‚è½½åè°ƒç”¨<br><code>beforeUpdate</code> ï¼šåœ¨æ›´æ–°åŒ…å«ç»„ä»¶çš„ VNode ä¹‹å‰è°ƒç”¨<br><code>updated</code> ï¼šåœ¨åŒ…å«ç»„ä»¶çš„ VNode åŠå…¶å­ç»„ä»¶çš„ VNode æ›´æ–°åè°ƒç”¨<br><code>beforeUnmount</code> ï¼šåœ¨å¸è½½ç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶ä¹‹å‰è°ƒç”¨<br><code>unmounted</code> ï¼šå½“æŒ‡ä»¤ä¸å…ƒç´ è§£é™¤ç»‘å®šä¸”çˆ¶ç»„ä»¶å·²å¸è½½æ—¶ï¼Œåªè°ƒç”¨ä¸€æ¬¡</p><h2 id="è‡ªå®šä¹‰æŒ‡ä»¤ç»ƒä¹ æ—¶é—´æˆ³"><a class="markdownIt-Anchor" href="#è‡ªå®šä¹‰æŒ‡ä»¤ç»ƒä¹ æ—¶é—´æˆ³">#</a> è‡ªå®šä¹‰æŒ‡ä»¤ç»ƒä¹ ï¼›æ—¶é—´æˆ³</h2><p>æ¥å®ç°ä¸€ä¸ªå¯ä»¥è‡ªåŠ¨å¯¹æ—¶é—´æ ¼å¼åŒ–çš„æŒ‡ä»¤ <code>v-format-time</code> ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> dayjs <span class="keyword">from</span> <span class="string">&quot;dayjs&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params">app</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> format = <span class="string">&quot;YYYY-MM-DD HH:mm:ss&quot;</span>;</span><br><span class="line">  app.<span class="title function_">directive</span>(<span class="string">&quot;format-time&quot;</span>, &#123;</span><br><span class="line">    <span class="title function_">created</span>(<span class="params">el, bingings</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (bingings.<span class="property">value</span>) &#123;</span><br><span class="line">        format = bingings.<span class="property">value</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">mounted</span>(<span class="params">el</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> textContent = el.<span class="property">textContent</span>;</span><br><span class="line">      <span class="keyword">let</span> timestamp = <span class="built_in">parseInt</span>(el.<span class="property">textContent</span>);</span><br><span class="line">      <span class="keyword">if</span> (textContent.<span class="property">length</span> === <span class="number">10</span>) &#123;</span><br><span class="line">        timestamp = timestamp * <span class="number">1000</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(timestamp);</span><br><span class="line">      el.<span class="property">textContent</span> = <span class="title function_">dayjs</span>(timestamp).<span class="title function_">format</span>(format);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="vue-æ’ä»¶"><a class="markdownIt-Anchor" href="#vue-æ’ä»¶">#</a> Vue æ’ä»¶</h1><p>é€šå¸¸æˆ‘ä»¬å‘ Vue å…¨å±€æ·»åŠ ä¸€äº›åŠŸèƒ½æ—¶ï¼Œä¼šé‡‡ç”¨æ’ä»¶çš„æ¨¡å¼ï¼Œå®ƒæœ‰ä¸¤ç§ç¼–å†™æ–¹å¼ï¼š</p><ol><li>å¯¹è±¡ç±»å‹ï¼šä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯å¿…é¡»åŒ…å«ä¸€ä¸ª install çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šåœ¨å®‰è£…æ’ä»¶æ—¶æ‰§è¡Œ</li><li>å‡½æ•°ç±»å‹ï¼šä¸€ä¸ª functionï¼Œè¿™ä¸ªå‡½æ•°ä¼šåœ¨å®‰è£…æ’ä»¶æ—¶è‡ªåŠ¨æ‰§è¡Œ<br>æ’ä»¶å¯ä»¥å®Œæˆçš„åŠŸèƒ½æ²¡æœ‰é™åˆ¶ï¼Œæ¯”å¦‚ä¸‹é¢çš„å‡ ç§éƒ½æ˜¯å¯ä»¥çš„ï¼š</li></ol><ul><li>æ·»åŠ å…¨å±€æ–¹æ³•æˆ–è€… <code>property</code> ï¼Œé€šè¿‡æŠŠå®ƒä»¬æ·»åŠ åˆ° <code>config.globalProperties</code> ä¸Šå®ç°ï¼›</li><li>æ·»åŠ å…¨å±€èµ„æºï¼šæŒ‡ä»¤ / è¿‡æ»¤å™¨ / è¿‡æ¸¡ç­‰ï¼›</li><li>é€šè¿‡å…¨å±€ <code>mixin</code> æ¥æ·»åŠ ä¸€äº›ç»„ä»¶é€‰é¡¹ï¼›</li><li>ä¸€ä¸ªåº“ï¼Œæä¾›è‡ªå·±çš„ APIï¼ŒåŒæ—¶æä¾›ä¸Šé¢æåˆ°çš„ä¸€ä¸ªæˆ–å¤šä¸ªåŠŸèƒ½</li></ul><h2 id="æ’ä»¶çš„ç¼–å†™æ–¹å¼"><a class="markdownIt-Anchor" href="#æ’ä»¶çš„ç¼–å†™æ–¹å¼">#</a> æ’ä»¶çš„ç¼–å†™æ–¹å¼</h2><p>å¯¹è±¡ç±»å‹å†™æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;why&quot;</span>,</span><br><span class="line">  <span class="title function_">install</span>(<span class="params">app, options</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ’ä»¶è¢«å®‰è£…:&quot;</span>, app, options);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å‡½æ•°ç±»å‹çš„å†™æ³•:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params">app, options</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ’ä»¶è¢«å®‰è£…:&quot;</span>, app, options);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="vue3-å¦‚ä½•æ³¨å†Œå…¨å±€ç»„ä»¶æ–¹æ³•æ›¿ä»£-vue2-çš„-vueprototype"><a class="markdownIt-Anchor" href="#vue3-å¦‚ä½•æ³¨å†Œå…¨å±€ç»„ä»¶æ–¹æ³•æ›¿ä»£-vue2-çš„-vueprototype">#</a> vue3 å¦‚ä½•æ³¨å†Œå…¨å±€ç»„ä»¶ / æ–¹æ³•ï¼ˆæ›¿ä»£ vue2 çš„ Vue.prototypeï¼‰</h1><ol><li>provide /inject ï¼ˆæ¨èï¼‰<br>main.js ä¸­ï¼šé€šè¿‡ provide å°†ç»„ä»¶æˆ–è€…æ–¹æ³•ã€å˜é‡æŒ‚è½½åœ¨å…¨å±€ï¼šå°è£…äº†ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨é¦–é¡µä¸­æˆ‘ä»¬åªéœ€è¦è°ƒç”¨è¿™ä¸ªå‡½æ•°å¹¶ä¸”ä¼ å…¥ app å³å¯</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;./router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;./store&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(store);</span><br><span class="line">app.<span class="title function_">use</span>(router);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‚è½½å…¨å±€æ–¹æ³•</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">globalFunc</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è¦æŒ‚è½½åœ¨å…¨å±€çš„æ–¹æ³•&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// å°†globalFuncæ–¹æ³•æŒ‚è½½åœ¨å…¨å±€</span></span><br><span class="line">app.<span class="title function_">provide</span>(<span class="string">&quot;globalFunc&quot;</span>, globalFunc);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠŠvueå®ä¾‹æŒ‚è½½åœ¨window.vm,æ–¹ä¾¿ä½¿ç”¨vueçš„å®ä¾‹</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">vm</span> = app;</span><br></pre></td></tr></table></figure><p>ç»„ä»¶ä¸­ï¼šé€šè¿‡ inject è·å–å…¨å±€æ–¹æ³•å¹¶è°ƒç”¨:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>ç»„ä»¶ä¸­é€šè¿‡injectè·å–å…¨å±€æ–¹æ³•å¹¶è°ƒç”¨<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; defineComponent, onMounted, inject &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineComponent</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&quot;JobDetail&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// æ³¨å†Œç»„ä»¶</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title class_">Header</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">testFunc</span>();</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> testFunc = (): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> <span class="attr">globalFunc</span>: any = <span class="title function_">inject</span>(<span class="string">&quot;globalFunc&quot;</span>); <span class="comment">// é€šè¿‡injectè·å–æŒ‚è½½åœ¨å…¨å±€çš„globalFuncæ–¹æ³•</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">globalFunc</span>();</span></span><br><span class="line"><span class="language-javascript">      &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        testFunc,</span></span><br><span class="line"><span class="language-javascript">      &#125;;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>app.config.globalPropertiesï¼ˆä¸æ¨èï¼‰</li></ol><p>main.js ä¸­ï¼šé€šè¿‡ <code>app.config.globalProperties</code> å°†ç»„ä»¶æˆ–è€…æ–¹æ³•ã€å˜é‡æŒ‚è½½åœ¨å…¨å±€</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;./router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;./store&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(store);</span><br><span class="line">app.<span class="title function_">use</span>(router);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‚è½½å…¨å±€æ–¹æ³•</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">globalFunc</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è¦æŒ‚è½½åœ¨å…¨å±€çš„æ–¹æ³•&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// å°†globalFuncæ–¹æ³•æŒ‚è½½åœ¨å…¨å±€</span></span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">globalFunc</span> = globalFunc;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠŠvueå®ä¾‹æŒ‚è½½åœ¨window.vm,æ–¹ä¾¿ä½¿ç”¨vueçš„å®ä¾‹</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">vm</span> = app;</span><br></pre></td></tr></table></figure><p>ç»„ä»¶ä¸­ï¼šé€šè¿‡ <code>getCurrentInstance().appContext.config.globalProperties</code> è·å–å…¨å±€æ–¹æ³•å¹¶è°ƒç”¨</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>ç»„ä»¶ä¸­é€šè¿‡injectè·å–å…¨å±€æ–¹æ³•å¹¶è°ƒç”¨<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; defineComponent, onMounted, getCurrentInstance &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineComponent</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&quot;JobDetail&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// æ³¨å†Œç»„ä»¶</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title class_">Header</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">testFunc</span>();</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> testFunc = (): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> <span class="attr">internalInstance</span>: any = <span class="title function_">getCurrentInstance</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(internalInstance.<span class="property">appContext</span>.<span class="property">config</span>.<span class="property">globalProperties</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// é€šè¿‡getCurrentInstance().appContext.config.globalPropertiesè·å–å…¨å±€æ–¹æ³•å¹¶è°ƒç”¨</span></span></span><br><span class="line"><span class="language-javascript">        internalInstance.<span class="property">appContext</span>.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="title function_">globalFunc</span>();</span></span><br><span class="line"><span class="language-javascript">      &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        testFunc,</span></span><br><span class="line"><span class="language-javascript">      &#125;;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p>import _ as æ˜¯ä»€ä¹ˆï¼Ÿ<br>å¦‚æœä½ æƒ³ä¸€æ¬¡æ€§å…¨éƒ¨å¯¼å…¥æ¨¡å—çš„æ‰€æœ‰å˜é‡å°±å¯ä»¥ä½¿ç”¨ _ as ä»£è¡¨å…¨éƒ¨</p><h1 id="è¿‡æ¸¡åŠ¨ç”»-transition"><a class="markdownIt-Anchor" href="#è¿‡æ¸¡åŠ¨ç”»-transition">#</a> è¿‡æ¸¡åŠ¨ç”» transition</h1><p>Vue æä¾›äº† transition çš„å°è£…ç»„ä»¶ï¼Œåœ¨ä¸‹åˆ—æƒ…å½¢ä¸­ï¼Œå¯ä»¥ç»™ä»»ä½•å…ƒç´ å’Œç»„ä»¶æ·»åŠ è¿›å…¥ / ç¦»å¼€è¿‡æ¸¡:</p></li><li><p>æ¡ä»¶æ¸²æŸ“ (ä½¿ç”¨ v-if)</p></li><li><p>æ¡ä»¶å±•ç¤º (ä½¿ç”¨ v-show)</p></li><li><p>åŠ¨æ€ç»„ä»¶</p></li><li><p>ç»„ä»¶æ ¹èŠ‚ç‚¹<br>è‡ªå®šä¹‰ transition è¿‡åº¦æ•ˆæœï¼Œä½ éœ€è¦å¯¹ transition ç»„ä»¶çš„ name å±æ€§è‡ªå®šä¹‰ã€‚å¹¶åœ¨ css ä¸­å†™å…¥å¯¹åº”çš„æ ·å¼</p></li></ul><ol><li>è¿‡æ¸¡çš„ç±»å<br>åœ¨è¿›å…¥ / ç¦»å¼€çš„è¿‡æ¸¡ä¸­ï¼Œä¼šæœ‰ 6 ä¸ª class åˆ‡æ¢ã€‚</li></ol><ul><li><code>v-enter-from</code> ï¼šå®šä¹‰è¿›å…¥è¿‡æ¸¡çš„å¼€å§‹çŠ¶æ€ã€‚åœ¨å…ƒç´ è¢«æ’å…¥ä¹‹å‰ç”Ÿæ•ˆï¼Œåœ¨å…ƒç´ è¢«æ’å…¥ä¹‹åçš„ä¸‹ä¸€å¸§ç§»é™¤</li><li><code>v-enter-active</code> ï¼šå®šä¹‰è¿›å…¥è¿‡æ¸¡ç”Ÿæ•ˆæ—¶çš„çŠ¶æ€ã€‚åœ¨æ•´ä¸ªè¿›å…¥è¿‡æ¸¡çš„é˜¶æ®µä¸­åº”ç”¨ï¼Œåœ¨å…ƒç´ è¢«æ’å…¥ä¹‹å‰ç”Ÿæ•ˆï¼Œåœ¨è¿‡æ¸¡ / åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚è¿™ä¸ªç±»å¯ä»¥è¢«ç”¨æ¥å®šä¹‰è¿›å…¥è¿‡æ¸¡çš„è¿‡ç¨‹æ—¶é—´ï¼Œå»¶è¿Ÿå’Œæ›²çº¿å‡½æ•°ã€‚</li><li><code>v-enter-to</code> ï¼šå®šä¹‰è¿›å…¥è¿‡æ¸¡çš„ç»“æŸçŠ¶æ€ã€‚åœ¨å…ƒç´ è¢«æ’å…¥ä¹‹åä¸‹ä¸€å¸§ç”Ÿæ•ˆ (ä¸æ­¤åŒæ—¶ v-enter-from è¢«ç§»é™¤)ï¼Œåœ¨è¿‡æ¸¡ / åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚</li><li><code>v-leave-from</code> ï¼šå®šä¹‰ç¦»å¼€è¿‡æ¸¡çš„å¼€å§‹çŠ¶æ€ã€‚åœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘æ—¶ç«‹åˆ»ç”Ÿæ•ˆï¼Œä¸‹ä¸€å¸§è¢«ç§»é™¤</li><li><code>v-leave-active</code> ï¼šå®šä¹‰ç¦»å¼€è¿‡æ¸¡ç”Ÿæ•ˆæ—¶çš„çŠ¶æ€ã€‚åœ¨æ•´ä¸ªç¦»å¼€è¿‡æ¸¡çš„é˜¶æ®µä¸­åº”ç”¨ï¼Œåœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘æ—¶ç«‹åˆ»ç”Ÿæ•ˆï¼Œåœ¨è¿‡æ¸¡ / åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚è¿™ä¸ªç±»å¯ä»¥è¢«ç”¨æ¥å®šä¹‰ç¦»å¼€è¿‡æ¸¡çš„è¿‡ç¨‹æ—¶é—´ï¼Œå»¶è¿Ÿå’Œæ›²çº¿å‡½æ•°ã€‚</li><li><code>v-leave-to</code> ï¼šç¦»å¼€è¿‡æ¸¡çš„ç»“æŸçŠ¶æ€ã€‚åœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘ä¹‹åä¸‹ä¸€å¸§ç”Ÿæ•ˆ (ä¸æ­¤åŒæ—¶ v-leave-from è¢«åˆ é™¤)ï¼Œåœ¨è¿‡æ¸¡ / åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;flag = !flag&quot;</span>&gt;</span>åˆ‡æ¢<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">&quot;fade&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;flag&quot;</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">//å¼€å§‹è¿‡åº¦</span><br><span class="line"><span class="selector-class">.fade-enter-from</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: red;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">&#125;</span><br><span class="line">//å¼€å§‹è¿‡åº¦äº†</span><br><span class="line"><span class="selector-class">.fade-enter-active</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">2.5s</span> linear;</span><br><span class="line">&#125;</span><br><span class="line">//è¿‡åº¦å®Œæˆ</span><br><span class="line"><span class="selector-class">.fade-enter-to</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: yellow;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line">//ç¦»å¼€çš„è¿‡åº¦</span><br><span class="line"><span class="selector-class">.fade-leave-from</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">&#125;</span><br><span class="line">//ç¦»å¼€ä¸­è¿‡åº¦</span><br><span class="line"><span class="selector-class">.fade-leave-active</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">1s</span> linear;</span><br><span class="line">&#125;</span><br><span class="line">//ç¦»å¼€å®Œæˆ</span><br><span class="line"><span class="selector-class">.fade-leave-to</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>è‡ªå®šä¹‰è¿‡æ¸¡ class ç±»å</li></ol><ul><li>enter-from-class</li><li>enter-active-class</li><li>enter-to-class</li><li>leave-from-class</li><li>leave-active-class</li><li>leave-to-class<br>é€šè¿‡è‡ªå®šä¹‰ class ç»“åˆ css åŠ¨ç”»åº“ animate css:</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition leave-active-class=&quot;animate__animated animate__bounceInLeft&quot; enter-active-class=&quot;animate__animated animate__bounceInRight&quot;&gt;</span><br><span class="line">    &lt;div v-if=&quot;flag&quot; class=&quot;box&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure><ol start="3"><li>è‡ªå®šä¹‰è¿‡åº¦æ—¶é—´ å•ä½æ¯«ç§’ï¼Œä½ ä¹Ÿå¯ä»¥åˆ†åˆ«æŒ‡å®šè¿›å…¥å’Œç¦»å¼€çš„æŒç»­æ—¶é—´ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition :duration=&quot;1000&quot;&gt;...&lt;/transition&gt;</span><br><span class="line">&lt;transition :duration=&quot;&#123; enter: 500, leave: 800 &#125;&quot;&gt;...&lt;/transition&gt;</span><br></pre></td></tr></table></figure><ol start="4"><li>3.transition ç”Ÿå‘½å‘¨æœŸ 8 ä¸ª</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@before-enter=<span class="string">&quot;beforeEnter&quot;</span> <span class="comment">//å¯¹åº”enter-from</span></span><br><span class="line">@enter=<span class="string">&quot;enter&quot;</span><span class="comment">//å¯¹åº”enter-active</span></span><br><span class="line">@after-enter=<span class="string">&quot;afterEnter&quot;</span><span class="comment">//å¯¹åº”enter-to</span></span><br><span class="line">@enter-cancelled=<span class="string">&quot;enterCancelled&quot;</span><span class="comment">//æ˜¾ç¤ºè¿‡åº¦æ‰“æ–­</span></span><br><span class="line">@before-leave=<span class="string">&quot;beforeLeave&quot;</span><span class="comment">//å¯¹åº”leave-from</span></span><br><span class="line">@leave=<span class="string">&quot;leave&quot;</span><span class="comment">//å¯¹åº”enter-active</span></span><br><span class="line">@after-leave=<span class="string">&quot;afterLeave&quot;</span><span class="comment">//å¯¹åº”leave-to</span></span><br><span class="line">@leave-cancelled=<span class="string">&quot;leaveCancelled&quot;</span><span class="comment">//ç¦»å¼€è¿‡åº¦æ‰“æ–­</span></span><br></pre></td></tr></table></figure><ol start="5"><li>appear</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">appear-active-class=&quot;&quot;</span><br><span class="line">appear-<span class="selector-tag">from</span>-class=&quot;&quot;</span><br><span class="line">appear-<span class="selector-tag">to</span>-class=&quot;&quot;</span><br><span class="line">appear</span><br></pre></td></tr></table></figure><p>class çš„ name å‘½åè§„åˆ™å¦‚ä¸‹ï¼š</p><ol><li>å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªæ²¡æœ‰ name çš„ transitionï¼Œé‚£ä¹ˆæ‰€æœ‰çš„ class æ˜¯ä»¥ v- ä½œä¸ºé»˜è®¤å‰ç¼€</li><li>å¦‚æœæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ª name å±æ€§ï¼Œæ¯”å¦‚<transtion name="why">ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„ class ä¼šä»¥ why- å¼€å¤´ï¼›</transtion></li></ol><h1 id="transition-group-è¿‡æ¸¡åˆ—è¡¨"><a class="markdownIt-Anchor" href="#transition-group-è¿‡æ¸¡åˆ—è¡¨">#</a> transition-group è¿‡æ¸¡åˆ—è¡¨</h1><ul><li>å•ä¸ªèŠ‚ç‚¹</li><li>å¤šä¸ªèŠ‚ç‚¹ï¼Œæ¯æ¬¡åªæ¸²æŸ“ä¸€ä¸ª<br>é‚£ä¹ˆæ€ä¹ˆåŒæ—¶æ¸²æŸ“æ•´ä¸ªåˆ—è¡¨ï¼Œæ¯”å¦‚ä½¿ç”¨ v-forï¼Ÿåœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ <code>&lt;transition-group&gt;</code> ç»„ä»¶ã€‚åœ¨æˆ‘ä»¬æ·±å…¥ä¾‹å­ä¹‹å‰ï¼Œå…ˆäº†è§£å…³äºè¿™ä¸ªç»„ä»¶çš„å‡ ä¸ªç‰¹ç‚¹ï¼š</li></ul><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¸ä¼šæ¸²æŸ“ä¸€ä¸ªåŒ…è£¹å…ƒç´ ï¼Œä½†æ˜¯ä½ å¯ä»¥é€šè¿‡ <code>tag</code> attribute æŒ‡å®šæ¸²æŸ“ä¸€ä¸ªå…ƒç´ ã€‚<br>è¿‡æ¸¡æ¨¡å¼ä¸å¯ç”¨ï¼Œå› ä¸ºæˆ‘ä»¬ä¸å†ç›¸äº’åˆ‡æ¢ç‰¹æœ‰çš„å…ƒç´ ã€‚<br>å†…éƒ¨å…ƒç´ æ€»æ˜¯éœ€è¦æä¾›å”¯ä¸€çš„ <code>key</code> attribute å€¼ã€‚<br>CSS è¿‡æ¸¡çš„ç±»å°†ä¼šåº”ç”¨åœ¨å†…éƒ¨çš„å…ƒç´ ä¸­ï¼Œè€Œä¸æ˜¯è¿™ä¸ªç»„ / å®¹å™¨æœ¬èº«ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition-group</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 10px;&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;item in list&quot;</span>&gt;</span>&#123;&#123; item &#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition-group</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = reactive&lt;number[]&gt;([<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Push</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    list.<span class="title function_">push</span>(<span class="number">123</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Pop</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    list.<span class="title function_">pop</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>åˆ—è¡¨çš„ç§»åŠ¨è¿‡æ¸¡<br><code>&lt;transition-group&gt;</code> ç»„ä»¶è¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šä¹‹å¤„ã€‚é™¤äº†è¿›å…¥å’Œç¦»å¼€ï¼Œå®ƒè¿˜å¯ä»¥ä¸ºå®šä½çš„æ”¹å˜æ·»åŠ åŠ¨ç”»ã€‚åªéœ€äº†è§£æ–°å¢çš„ v-move ç±»å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–°åŠŸèƒ½ï¼Œå®ƒä¼šåº”ç”¨åœ¨å…ƒç´ æ”¹å˜å®šä½çš„è¿‡ç¨‹ä¸­ã€‚åƒä¹‹å‰çš„ç±»åä¸€æ ·ï¼Œå®ƒçš„å‰ç¼€å¯ä»¥é€šè¿‡ name attribute æ¥è‡ªå®šä¹‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ move-class attribute æ‰‹åŠ¨è®¾ç½®</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;shuffle&quot;</span>&gt;</span>Shuffle<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">transition-group</span> <span class="attr">class</span>=<span class="string">&quot;wraps&quot;</span> <span class="attr">name</span>=<span class="string">&quot;mmm&quot;</span> <span class="attr">tag</span>=<span class="string">&quot;ul&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;cell&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;item in items&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span>&#123;&#123; item.number &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">transition-group</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&quot;lodash&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> items = <span class="title function_">ref</span>(</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Array</span>.<span class="title function_">apply</span>(<span class="literal">null</span>, &#123; <span class="attr">length</span>: <span class="number">81</span> &#125; <span class="keyword">as</span> number[]).<span class="title function_">map</span>(<span class="function">(<span class="params">_, index</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: index,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">number</span>: (index % <span class="number">9</span>) + <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">  );</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> <span class="title function_">shuffle</span> = (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">    items.<span class="property">value</span> = _.<span class="title function_">shuffle</span>(items.<span class="property">value</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">&quot;less&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.wraps</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">flex-wrap</span>: wrap;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">25px</span> * <span class="number">10</span> + <span class="number">9px</span>);</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.cell</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">list-style-type</span>: none;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.mmm-move</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">transition</span>: transform <span class="number">0.8s</span> ease;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>çŠ¶æ€è¿‡æ¸¡<br>Vue ä¹ŸåŒæ ·å¯ä»¥ç»™æ•°å­— Svg èƒŒæ™¯é¢œè‰²ç­‰æ·»åŠ è¿‡åº¦åŠ¨ç”» ä»Šå¤©æ¼”ç¤ºæ•°å­—å˜åŒ–</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">step</span>=<span class="string">&quot;20&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;num.current&quot;</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123; num.tweenedNumber.toFixed(0) &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; reactive, watch &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> gsap <span class="keyword">from</span> <span class="string">&quot;gsap&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> num = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">tweenedNumber</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">current</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">watch</span>(</span></span><br><span class="line"><span class="language-javascript">    <span class="function">() =&gt;</span> num.<span class="property">current</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="function">(<span class="params">newVal</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      gsap.<span class="title function_">to</span>(num, &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">duration</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">tweenedNumber</span>: newVal,</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  );</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="tsx"><a class="markdownIt-Anchor" href="#tsx">#</a> TSX</h1><p>æˆ‘ä»¬ä¹‹å‰å‘¢æ˜¯ä½¿ç”¨ Template å»å†™æˆ‘ä»¬æ¨¡æ¿ã€‚ç°åœ¨å¯ä»¥æ‰©å±•å¦ä¸€ç§é£æ ¼ TSX é£æ ¼<br>vue2 çš„æ—¶å€™å°±å·²ç»æ”¯æŒ jsx å†™æ³•ï¼Œåªä¸è¿‡ä¸æ˜¯å¾ˆå‹å¥½ï¼Œéšç€ vue3 å¯¹ typescript çš„æ”¯æŒåº¦ï¼Œtsx å†™æ³•è¶Šæ¥è¶Šè¢«æ¥å—</p><ol><li>å®‰è£…æ’ä»¶</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @vitejs/plugin-vue-jsx -D</span><br></pre></td></tr></table></figure><ol start="2"><li>é…ç½®</li></ol><ul><li>vite.config.ts é…ç½®:</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&quot;vite&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&quot;@vitejs/plugin-vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> vueJsx <span class="keyword">from</span> <span class="string">&quot;@vitejs/plugin-vue-jsx&quot;</span>;</span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>(), <span class="title function_">vueJsx</span>()],</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹ tsconfig.json é…ç½®æ–‡ä»¶</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;jsx&quot;</span><span class="punctuation">:</span> <span class="string">&quot;preserve&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;jsxFactory&quot;</span><span class="punctuation">:</span> <span class="string">&quot;h&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;jsxFragmentFactory&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Fragment&quot;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><ol start="3"><li>åœ¨ç›®å½•æ–°å»ºä¸€ä¸ª xxxxxx.tsx æ–‡ä»¶ï¼Œå¼€å§‹ä½¿ç”¨ TSX<br>tipsï¼štsx ä¸ä¼šè‡ªåŠ¨è§£åŒ…ä½¿ç”¨ ref åŠ .vlaue ! ! !</li></ol><ul><li>tsx æ”¯æŒ v-model çš„ä½¿ç”¨</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> v = ref &lt; string &gt; <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">renderDom</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&#123;v.value&#125;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;v.value&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> renderDom;</span><br></pre></td></tr></table></figure><ul><li>v-show</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> flag = <span class="title function_">ref</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">renderDom</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-show</span>=<span class="string">&#123;flag.value&#125;</span>&gt;</span>æ™¯å¤©<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-show</span>=<span class="string">&#123;!flag.value&#125;</span>&gt;</span>é›ªè§<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> renderDom;</span><br></pre></td></tr></table></figure><ul><li>v-if æ˜¯ä¸æ”¯æŒçš„<br>æ‰€ä»¥éœ€è¦æ”¹å˜é£æ ¼</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> flag = <span class="title function_">ref</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">renderDom</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;&gt;</span>&#123;flag.value ? <span class="tag">&lt;<span class="name">div</span>&gt;</span>æ™¯å¤©<span class="tag">&lt;/<span class="name">div</span>&gt;</span> : <span class="tag">&lt;<span class="name">div</span>&gt;</span>é›ªè§<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;<span class="tag">&lt;/&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> renderDom;</span><br></pre></td></tr></table></figure><ul><li>v-for ä¹Ÿæ˜¯ä¸æ”¯æŒçš„<br>éœ€è¦ä½¿ç”¨ Map</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">renderDom</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;arr.map((v) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">        return <span class="tag">&lt;<span class="name">div</span>&gt;</span>$&#123;v&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span>;</span></span><br><span class="line"><span class="language-xml">      &#125;)&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> renderDom;</span><br></pre></td></tr></table></figure><h1 id="vuex-çš„çŠ¶æ€ç®¡ç†"><a class="markdownIt-Anchor" href="#vuex-çš„çŠ¶æ€ç®¡ç†">#</a> Vuex çš„çŠ¶æ€ç®¡ç†</h1><ul><li><p>ç®¡ç†ä¸æ–­å˜åŒ–çš„ state æœ¬èº«æ˜¯éå¸¸å›°éš¾çš„<br>çŠ¶æ€ä¹‹é—´ç›¸äº’ä¼šå­˜åœ¨ä¾èµ–ï¼Œä¸€ä¸ªçŠ¶æ€çš„å˜åŒ–ä¼šå¼•èµ·å¦ä¸€ä¸ªçŠ¶æ€çš„å˜åŒ–ï¼ŒView é¡µé¢ä¹Ÿæœ‰å¯èƒ½ä¼šå¼•èµ·çŠ¶æ€çš„å˜åŒ–ã€‚å½“åº”ç”¨ç¨‹åºå¤æ‚æ—¶ï¼Œstate åœ¨ä»€ä¹ˆæ—¶å€™ï¼Œå› ä¸ºä»€ä¹ˆåŸå› è€Œå‘ç”Ÿäº†å˜åŒ–ï¼Œå‘ç”Ÿäº†æ€ä¹ˆæ ·çš„å˜åŒ–ï¼Œä¼šå˜å¾—éå¸¸éš¾ä»¥æ§åˆ¶å’Œè¿½è¸ª</p></li><li><p>å› æ­¤ï¼Œæˆ‘ä»¬æ˜¯å¦å¯ä»¥è€ƒè™‘å°†ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€æŠ½ç¦»å‡ºæ¥ï¼Œä»¥ä¸€ä¸ªå…¨å±€å•ä¾‹çš„æ–¹å¼æ¥ç®¡ç†å‘¢ï¼Ÿ<br>åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬çš„ç»„ä»¶æ ‘æ„æˆäº†ä¸€ä¸ªå·¨å¤§çš„ â€œè§†å›¾ Viewâ€, ä¸ç®¡åœ¨æ ‘çš„å“ªä¸ªä½ç½®ï¼Œä»»ä½•ç»„ä»¶éƒ½èƒ½è·å–çŠ¶æ€æˆ–è€…è§¦å‘è¡Œä¸º<br>é€šè¿‡å®šä¹‰å’Œéš”ç¦»çŠ¶æ€ç®¡ç†ä¸­çš„å„ä¸ªæ¦‚å¿µï¼Œå¹¶é€šè¿‡å¼ºåˆ¶æ€§çš„è§„åˆ™æ¥ç»´æŠ¤è§†å›¾å’ŒçŠ¶æ€é—´çš„ç‹¬ç«‹æ€§ï¼Œæˆ‘ä»¬çš„ä»£ç è¾¹ä¼šå˜å¾—æ›´åŠ ç»“æ„åŒ–å’Œæ˜“äºç»´æŠ¤ã€è·Ÿè¸ªï¼›<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://eucli-1314359160.cos.ap-beijing.myqcloud.com/test/93Q@8VN8%60V_I72$62UDA~1A.png" alt=""></p></li></ul><h2 id="store-ä»“åº“"><a class="markdownIt-Anchor" href="#store-ä»“åº“">#</a> Store ä»“åº“</h2><p>æ¯ä¸€ä¸ª Vuex åº”ç”¨çš„æ ¸å¿ƒå°±æ˜¯ storeï¼ˆä»“åº“ï¼‰ï¼šstore æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª <code>å®¹å™¨</code> ï¼Œå®ƒåŒ…å«ç€ä½ çš„åº”ç”¨ä¸­å¤§éƒ¨åˆ†çš„çŠ¶æ€ï¼ˆ <code>state</code> ï¼‰</p><ul><li>Vuex å’Œå•çº¯çš„å…¨å±€å¯¹è±¡æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</li></ul><ol><li>Vuex çš„çŠ¶æ€å­˜å‚¨æ˜¯å“åº”å¼çš„ï¼šå½“ Vue ç»„ä»¶ä» store ä¸­è¯»å–çŠ¶æ€çš„æ—¶å€™ï¼Œè‹¥ store ä¸­çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆç›¸åº”çš„ç»„ä»¶ä¹Ÿä¼šè¢«æ›´æ–°</li><li>ä½ ä¸èƒ½ç›´æ¥æ”¹å˜ store ä¸­çš„çŠ¶æ€ï¼šæ”¹å˜ store ä¸­çš„çŠ¶æ€çš„å”¯ä¸€é€”å¾„å°±æ˜¾ç¤ºæäº¤ ( <code>commit</code> ) mutation, è¿™æ ·ä½¿å¾—æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿çš„è·Ÿè¸ªæ¯ä¸€ä¸ªçŠ¶æ€çš„å˜åŒ–ï¼Œä»è€Œè®©æˆ‘ä»¬èƒ½å¤Ÿé€šè¿‡ä¸€äº›å·¥å…·å¸®åŠ©æˆ‘ä»¬æ›´å¥½çš„ç®¡ç†åº”ç”¨çš„çŠ¶æ€</li><li>ä½¿ç”¨æ­¥éª¤ï¼šåˆ›å»º Store å¯¹è±¡ï¼Œåœ¨ app ä¸­é€šè¿‡æ’ä»¶å®‰è£…</li></ol><h3 id="ç»„ä»¶ä¸­ä½¿ç”¨-store"><a class="markdownIt-Anchor" href="#ç»„ä»¶ä¸­ä½¿ç”¨-store">#</a> ç»„ä»¶ä¸­ä½¿ç”¨ store</h3><p>ç»„ä»¶ä¸­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; $store.state.counter &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;increment&quot;&gt;+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;App&quot;,</span><br><span class="line">  data() &#123;&#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    increment() &#123;</span><br><span class="line">      this.$store.commit(&quot;increment&quot;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>store ä¸­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createStore&#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">counter</span>:<span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mutations</span>:&#123;</span><br><span class="line">      <span class="title function_">increment</span>(<span class="params">state</span>) &#123;</span><br><span class="line">        state.<span class="property">counter</span>++</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure><h3 id="å•ä¸€çŠ¶æ€æ ‘"><a class="markdownIt-Anchor" href="#å•ä¸€çŠ¶æ€æ ‘">#</a> å•ä¸€çŠ¶æ€æ ‘</h3><p>Vuex ä½¿ç”¨å•ä¸€çŠ¶æ€æ ‘ï¼Œç”¨ä¸€ä¸ªå¯¹è±¡å°±åŒ…å«äº†å…¨éƒ¨çš„åº”ç”¨å±‚çº§çš„çŠ¶æ€ï¼Œè¿™ä¹Ÿæ„å‘³ç€ï¼Œ<strong>æ¯ä¸ªåº”ç”¨å°†ä»…ä»…åŒ…å«ä¸€ä¸ª store å®ä¾‹</strong><br>å•çŠ¶æ€æ ‘å’Œæ¨¡å—åŒ–å¹¶ä¸å†²çªï¼Œåé¢æˆ‘ä»¬ä¼šè®²åˆ° module çš„æ¦‚å¿µ</p><ul><li>å•ä¸€çŠ¶æ€æ ‘çš„ä¼˜åŠ¿ï¼š<br>å¦‚æœä½ çš„çŠ¶æ€ä¿¡æ¯æ˜¯ä¿å­˜åˆ°å¤šä¸ª Store å¯¹è±¡ä¸­çš„ï¼Œé‚£ä¹ˆä¹‹åçš„ç®¡ç†å’Œç»´æŠ¤ç­‰ç­‰éƒ½ä¼šå˜å¾—ç‰¹åˆ«å›°éš¾ï¼Œæ‰€ä»¥ Vuex ä¹Ÿä½¿ç”¨äº†å•ä¸€çŠ¶æ€æ ‘æ¥ç®¡ç†åº”ç”¨å±‚çº§çš„å…¨éƒ¨çŠ¶æ€ï¼›å•ä¸€çŠ¶æ€æ ‘èƒ½å¤Ÿè®©æˆ‘ä»¬æœ€ç›´æ¥çš„æ–¹å¼æ‰¾åˆ°æŸä¸ªçŠ¶æ€çš„ç‰‡æ®µï¼Œè€Œä¸”åœ¨ä¹‹åçš„ç»´æŠ¤å’Œè°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œä¹Ÿå¯ä»¥éå¸¸æ–¹ä¾¿çš„ç®¡ç†å’Œç»´æŠ¤</li></ul><h3 id="ç»„ä»¶è·å–çŠ¶æ€"><a class="markdownIt-Anchor" href="#ç»„ä»¶è·å–çŠ¶æ€">#</a> ç»„ä»¶è·å–çŠ¶æ€</h3><p>åœ¨å‰é¢æˆ‘ä»¬å·²ç»å­¦ä¹ è¿‡å¦‚ä½•åœ¨ç»„ä»¶ä¸­è·å–çŠ¶æ€äº† ( <code>$store.state.counter</code> ), å¦‚æœè§‰å¾—é‚£ç§æ–¹å¼æœ‰ç‚¹ç¹çï¼ˆè¡¨è¾¾å¼è¿‡é•¿ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è®¡ç®—å±æ€§ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  <span class="title function_">counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">counter</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬æœ‰å¾ˆå¤šä¸ªçŠ¶æ€éƒ½éœ€è¦è·å–ï¼Œå¯ä»¥ä½¿ç”¨ <code>mapState</code> çš„è¾…åŠ©å‡½æ•°:<br>mapState çš„æ–¹å¼ä¸€ï¼šå¯¹è±¡ç±»å‹<br>mapState çš„æ–¹å¼äºŒï¼šæ•°ç»„ç±»å‹<br>ä¹Ÿå¯ä»¥ä½¿ç”¨å±•å¼€è¿ç®—ç¬¦å’Œæ¥åŸæœ‰çš„ computed æ··åˆåœ¨ä¸€èµ·</p><h4 id="åœ¨-setup-ä¸­ä½¿ç”¨-mapstate"><a class="markdownIt-Anchor" href="#åœ¨-setup-ä¸­ä½¿ç”¨-mapstate">#</a> åœ¨ setup ä¸­ä½¿ç”¨ mapState</h4><p>é€šè¿‡ useStore æ‹¿åˆ° store åå»è·å–æŸä¸ªçŠ¶æ€å³å¯</p><h4 id="getters-çš„åŸºæœ¬ä½¿ç”¨"><a class="markdownIt-Anchor" href="#getters-çš„åŸºæœ¬ä½¿ç”¨">#</a> getters çš„åŸºæœ¬ä½¿ç”¨</h4><p>æŸäº›å±æ€§æˆ‘ä»¬å¯èƒ½éœ€è¦ç»è¿‡å˜åŒ–åæ¥ä½¿ç”¨ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥ä½¿ç”¨ gettersï¼š</p><h3 id="mutation-åŸºæœ¬ä½¿ç”¨"><a class="markdownIt-Anchor" href="#mutation-åŸºæœ¬ä½¿ç”¨">#</a> Mutation åŸºæœ¬ä½¿ç”¨</h3><p>æ›´æ”¹ Vuex çš„ store ä¸­çš„çŠ¶æ€çš„å”¯ä¸€æ–¹æ³•æ˜¯æäº¤ mutationï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mutations</span>: &#123;</span><br><span class="line">  <span class="title function_">increment</span>(<span class="params">state</span>) &#123;</span><br><span class="line">    state.<span class="property">counter</span>++</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Mutation æºå¸¦æ•°æ®<br>å¾ˆå¤šæ—¶å€™æˆ‘ä»¬åœ¨æäº¤ mutation çš„æ—¶å€™ï¼Œä¼šæºå¸¦ä¸€äº›æ•°æ®ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‚æ•°ï¼š</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mutations</span>: &#123;</span><br><span class="line">  <span class="title function_">addNumber</span>(<span class="params">state,payload</span>) &#123;</span><br><span class="line">    state.<span class="property">counter</span> += payload</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>payload ä¸ºå¯¹è±¡ç±»å‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">addNumber</span>(<span class="params">state,payload</span>) &#123;</span><br><span class="line">  state.<span class="property">counter</span> += payload.<span class="property">count</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹è±¡é£æ ¼çš„æäº¤æ–¹å¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$store.<span class="title function_">commit</span>(&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&quot;addNumber&quot;</span>,</span><br><span class="line">  <span class="attr">count</span>: <span class="number">100</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="mapmutations-è¾…åŠ©å‡½æ•°"><a class="markdownIt-Anchor" href="#mapmutations-è¾…åŠ©å‡½æ•°">#</a> mapMutations è¾…åŠ©å‡½æ•°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mutations = <span class="title function_">mapMutations</span>([<span class="string">&quot;increment&quot;</span>, <span class="string">&quot;decrement&quot;</span>]);</span><br><span class="line"><span class="keyword">const</span> mutations2 = <span class="title function_">mapMutations</span>(&#123;</span><br><span class="line">  <span class="attr">addNumber</span>: <span class="variable constant_">ADD_NUMBER</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>mutation é‡è¦åŸåˆ™ä¸€æ¡é‡è¦çš„åŸåˆ™å°±æ˜¯è¦è®°ä½ <code>mutation</code> å¿…é¡»æ˜¯<strong>åŒæ­¥</strong>å‡½æ•°</p><h3 id="actions-çš„åŸºæœ¬ä½¿ç”¨"><a class="markdownIt-Anchor" href="#actions-çš„åŸºæœ¬ä½¿ç”¨">#</a> actions çš„åŸºæœ¬ä½¿ç”¨</h3><p>Action ç±»ä¼¼äº mutationï¼Œä¸åŒåœ¨äº Action æäº¤çš„æ˜¯ mutationï¼Œè€Œä¸æ˜¯ç›´æ¥å˜æ›´çŠ¶æ€<br><strong>Action å¯ä»¥åŒ…å«å¼‚æ­¥æ“ä½œ</strong></p><ul><li>è¿™é‡Œæœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„å‚æ•° <code>context</code> ï¼š<br><code>context</code> æ˜¯ä¸€ä¸ªå’Œ store å®ä¾‹å‡æœ‰ç›¸åŒæ–¹æ³•å’Œå±æ€§çš„ context å¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä»å…¶ä¸­è·å–åˆ° commit æ–¹æ³•æ¥æäº¤ä¸€ä¸ª mutationï¼Œæˆ–è€…é€šè¿‡ context.state å’Œ context.getters æ¥<br>è·å– state å’Œ getters</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mutations</span>: &#123;</span><br><span class="line">  <span class="title function_">increment</span>(<span class="params">state</span>) &#123;</span><br><span class="line">    state.<span class="property">counter</span>++</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">actions</span>: &#123;</span><br><span class="line">  <span class="title function_">increment</span>(<span class="params">context</span>) &#123;</span><br><span class="line">    context.<span class="title function_">commit</span>(<span class="string">&quot;increment&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="actions-çš„åˆ†å‘æ“ä½œ"><a class="markdownIt-Anchor" href="#actions-çš„åˆ†å‘æ“ä½œ">#</a> actions çš„åˆ†å‘æ“ä½œ</h4><p>å¦‚ä½•ä½¿ç”¨ action å‘¢ï¼Ÿ<br>è¿›è¡Œ action çš„åˆ†å‘ï¼šåˆ†å‘ä½¿ç”¨çš„æ˜¯ store ä¸Šçš„ <code>dispatch</code> å‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">add</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&quot;increment&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒæ ·çš„ï¼Œå®ƒä¹Ÿå¯ä»¥æºå¸¦æˆ‘ä»¬çš„å‚æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">add</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&quot;increment&quot;</span>,&#123;<span class="attr">count</span>:<span class="number">100</span>&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä»¥å¯¹è±¡çš„å½¢å¼è¿›è¡Œåˆ†å‘ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">add</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(&#123;</span><br><span class="line">    <span class="attr">type</span>:<span class="string">&quot;increment&quot;</span>,</span><br><span class="line">    <span class="attr">count</span>:<span class="number">100</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="actions-çš„è¾…åŠ©å‡½æ•°"><a class="markdownIt-Anchor" href="#actions-çš„è¾…åŠ©å‡½æ•°">#</a> actions çš„è¾…åŠ©å‡½æ•°</h4><p>action ä¹Ÿæœ‰å¯¹åº”çš„è¾…åŠ©å‡½æ•°ï¼š<br>å¯¹è±¡ç±»å‹çš„å†™æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mutations</span>: &#123;</span><br><span class="line">  ...<span class="title function_">mapActions</span>([<span class="string">&quot;increment&quot;</span>,<span class="string">&quot;decrement&quot;</span>]),</span><br><span class="line">  ...<span class="title function_">mapActions</span>(&#123;</span><br><span class="line">    <span class="attr">add</span>:<span class="string">&quot;increment&quot;</span>,</span><br><span class="line">    <span class="attr">sub</span>:<span class="string">&quot;decrement&quot;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="actions-çš„å¼‚æ­¥æ“ä½œ"><a class="markdownIt-Anchor" href="#actions-çš„å¼‚æ­¥æ“ä½œ">#</a> actions çš„å¼‚æ­¥æ“ä½œ</h4><h3 id="module-çš„åŸºæœ¬ä½¿ç”¨"><a class="markdownIt-Anchor" href="#module-çš„åŸºæœ¬ä½¿ç”¨">#</a> module çš„åŸºæœ¬ä½¿ç”¨</h3><p>ä»€ä¹ˆæ˜¯ Moduleï¼Ÿ<br>ç”±äºä½¿ç”¨å•ä¸€çŠ¶æ€æ ‘ï¼Œåº”ç”¨çš„æ‰€æœ‰çŠ¶æ€ä¼šé›†ä¸­åˆ°ä¸€ä¸ªæ¯”è¾ƒå¤§çš„å¯¹è±¡ï¼Œå½“åº”ç”¨å˜å¾—éå¸¸å¤æ‚æ—¶ï¼Œstore å¯¹è±¡å°±æœ‰å¯<br>èƒ½å˜å¾—ç›¸å½“è‡ƒè‚¿<br>ä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜ï¼ŒVuex å…è®¸æˆ‘ä»¬å°† store åˆ†å‰²æˆæ¨¡å—ï¼ˆmoduleï¼‰ã€‚æ¯ä¸ªæ¨¡å—æ‹¥æœ‰è‡ªå·±çš„ stateã€mutationã€actionã€getterã€ç”šè‡³æ˜¯åµŒå¥—å­æ¨¡å—</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> moduleA = &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;&#125;),</span><br><span class="line">  <span class="attr">mutations</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;&#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> moduleB = &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;&#125;),</span><br><span class="line">  <span class="attr">mutations</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    <span class="attr">a</span>: moduleA,</span><br><span class="line">    <span class="attr">b</span>: moduleB,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">store.<span class="property">state</span>.<span class="property">a</span>; <span class="comment">// =&gt; moduleAçš„çŠ¶æ€</span></span><br><span class="line">store.<span class="property">state</span>.<span class="property">b</span>; <span class="comment">// =&gt; moduleBçš„çŠ¶æ€</span></span><br></pre></td></tr></table></figure><ul><li>module çš„å‘½åç©ºé—´<br>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¨¡å—å†…éƒ¨çš„ action å’Œ mutation ä»ç„¶æ˜¯æ³¨å†Œåœ¨<strong>å…¨å±€çš„å‘½åç©ºé—´</strong>ä¸­çš„ã€‚è¿™æ ·ä½¿å¾—å¤šä¸ªæ¨¡å—èƒ½å¤Ÿå¯¹åŒä¸€ä¸ª action æˆ– mutation ä½œå‡ºå“åº”ï¼ŒGetter åŒæ ·ä¹Ÿé»˜è®¤æ³¨å†Œåœ¨å…¨å±€å‘½åç©ºé—´<br>å¦‚æœæˆ‘ä»¬å¸Œæœ›æ¨¡å—å…·æœ‰æ›´é«˜çš„å°è£…åº¦å’Œå¤ç”¨æ€§ï¼Œå¯ä»¥æ·»åŠ  <code>namespaced: true</code> çš„æ–¹å¼ä½¿å…¶æˆä¸ºå¸¦å‘½åç©ºé—´çš„æ¨¡å—ã€‚å½“æ¨¡å—è¢«æ³¨å†Œåï¼Œå®ƒçš„æ‰€æœ‰ getterã€action åŠ mutation éƒ½ä¼šè‡ªåŠ¨æ ¹æ®æ¨¡å—æ³¨å†Œçš„è·¯å¾„è°ƒæ•´å‘½å</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">namespaced</span>:<span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line"><span class="title function_">state</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;why&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="number">1.88</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="attr">mutations</span>: &#123;</span><br><span class="line">  <span class="title function_">changeName</span>(<span class="params">state</span>) &#123;</span><br><span class="line">    state.<span class="property">name</span> = <span class="string">&quot;coderwhy&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">gettersï¼› &#123;</span><br><span class="line">  <span class="title function_">info</span>(<span class="params">state,getters,rootState,rootGetters</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`name:<span class="subst">$&#123;state.name&#125;</span> age:<span class="subst">$&#123;state.age&#125;</span> height:<span class="subst">$&#123;state.height&#125;</span>`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">actions</span>: &#123;</span><br><span class="line">  <span class="title function_">changeNameAction</span>(<span class="params">&#123;commit,dispatch,state,rootState,getters,rootGetters&#125;</span>) &#123;</span><br><span class="line">    <span class="title function_">commit</span>(<span class="string">&quot;changeName&quot;</span>,<span class="string">&quot;kobe&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="nexttick"><a class="markdownIt-Anchor" href="#nexttick">#</a> nextTick</h1><p>(ä¸€ä¸ª api)<br>å®˜æ–¹è§£é‡Šï¼šå°†å›è°ƒæ¨è¿Ÿåˆ°ä¸‹ä¸€ä¸ª DOM æ›´æ–°å‘¨æœŸä¹‹åæ‰§è¡Œã€‚åœ¨æ›´æ”¹äº†ä¸€äº›æ•°æ®ä»¥ç­‰å¾… DOM æ›´æ–°åç«‹å³ä½¿ç”¨å®ƒã€‚<br>æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸‹é¢çš„éœ€æ±‚ï¼šç‚¹å‡»ä¸€ä¸ªæŒ‰é’®ï¼Œæˆ‘ä»¬ä¼šä¿®æ”¹åœ¨ h2 ä¸­æ˜¾ç¤ºçš„ messageï¼›message è¢«ä¿®æ”¹åï¼Œè·å– h2 çš„é«˜åº¦</p><p>å®ç°ä¸Šé¢çš„æ¡ˆä¾‹æˆ‘ä»¬æœ‰ä¸‰ç§æ–¹å¼ï¼š</p><ol><li>åœ¨ç‚¹å‡»æŒ‰é’®åç«‹å³è·å–åˆ° h2 çš„é«˜åº¦ï¼ˆé”™è¯¯çš„åšæ³•ï¼‰</li><li>åœ¨ updated ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­è·å– h2 çš„é«˜åº¦ï¼ˆä½†æ˜¯å…¶ä»–æ•°æ®æ›´æ–°ï¼Œä¹Ÿä¼šæ‰§è¡Œè¯¥æ“ä½œï¼‰</li><li>ä½¿ç”¨ nextTick å‡½æ•°</li></ol><h1 id="definecomponent"><a class="markdownIt-Anchor" href="#definecomponent">#</a> defineComponent</h1><p>vue3 ä¸­ï¼Œæ–°å¢äº† <code>defineComponent</code> ï¼Œå®ƒå¹¶æ²¡æœ‰å®ç°ä»»ä½•çš„é€»è¾‘ï¼Œåªæ˜¯æŠŠæ¥æ”¶çš„ Object ç›´æ¥è¿”å›ï¼Œå®ƒçš„å­˜åœ¨æ˜¯å®Œå…¨è®©ä¼ å…¥çš„æ•´ä¸ªå¯¹è±¡è·å¾—å¯¹åº”çš„ç±»å‹ï¼Œå®ƒçš„å­˜åœ¨å°±æ˜¯å®Œå…¨ä¸ºäº†æœåŠ¡ TypeScript è€Œå­˜åœ¨çš„ã€‚<br>(ps. è¯»åˆ° &quot;å®ƒçš„å­˜åœ¨å°±æ˜¯å®Œå…¨ä¸ºäº†æœåŠ¡ TypeScript è€Œå­˜åœ¨çš„&quot; æ—¶è«åå…¶å¦™è§‰å¾—å¥½æµªæ¼«ï½)<br>æˆ‘ä»¬éƒ½çŸ¥é“æ™®é€šçš„ç»„ä»¶å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼Œæ—¢ç„¶æ˜¯ä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼Œé‚£è‡ªç„¶å°±ä¸ä¼šè·å¾—è‡ªåŠ¨çš„æç¤º:</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineComponent &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> component = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Home&quot;</span>,</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">data</span>: <span class="title class_">String</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  setup, <span class="comment">// æ²¡æœ‰è¯¥æœ‰çš„æç¤ºï¼Œè¿™éå¸¸çš„ä¸å‹å¥½</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> component;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯å½“æˆ‘ä»¬åŠ ä¸Š defineComponentï¼ˆï¼‰ ä¹‹åï¼Œå°±å®Œå…¨ä¸ä¸€æ ·äº†ï¼Œå¯ä»¥è·å¾—è‡ªåŠ¨æç¤ºï¼Œvue2ã€vue3 çš„è‡ªåŠ¨æç¤ºéƒ½æœ‰:</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> component = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Home&#x27;</span>,</span><br><span class="line">  <span class="attr">props</span>:&#123;</span><br><span class="line">    <span class="attr">data</span>: <span class="title class_">String</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  setupï¼ˆprops, contextï¼‰&#123;<span class="comment">// setup å¯æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªpropsï¼Œå’Œ context</span></span><br><span class="line">    <span class="comment">// props.data</span></span><br><span class="line">    <span class="comment">// context.attrs    context.slots    context.emit</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> component</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥çœ‹çœ‹ setup ä¸­çš„ä¸¤ä¸ªå‚æ•° <code>props</code> ä¸ <code>context</code> ,<br><code>props</code> æŒ‡ç»„ä»¶ä¼ é€’æ¥çš„å‚æ•°ï¼Œå¹¶ä¸” ts å¯ä»¥æ¨è®ºå‡º <code>props</code> çš„ç±»å‹. <code>props</code> ä¹Ÿå°±æ˜¯ vue2 ä¸­ç»„ä»¶ä¸­çš„ <code>props</code><br><code>context</code> æœ‰ä¸‰ä¸ªå±æ€§ <code>attrs</code> <code>slots</code> <code>emit</code> åˆ†åˆ«å¯¹åº” vue2 ä¸­çš„ <code>attrs</code> å±æ€§ã€ <code>slots</code> æ’æ§½ã€ <code>$emit</code> å‘é€äº‹ä»¶</p><ul><li><code>defineComponent</code> å‡½æ•°ï¼Œåªæ˜¯å¯¹ setup å‡½æ•°è¿›è¡Œå°è£…ï¼Œè¿”å› <code>options</code> çš„å¯¹è±¡ï¼›</li><li><code>defineComponent</code> æœ€é‡è¦çš„æ˜¯ï¼šåœ¨ TypeScript ä¸‹ï¼Œç»™äºˆäº†ç»„ä»¶ æ­£ç¡®çš„å‚æ•°ç±»å‹æ¨æ–­ã€‚</li></ul><h1 id="teleport-ä¼ é€ç»„ä»¶"><a class="markdownIt-Anchor" href="#teleport-ä¼ é€ç»„ä»¶">#</a> Teleport ä¼ é€ç»„ä»¶</h1><p>åœ¨ç»„ä»¶åŒ–å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å°è£…ä¸€ä¸ªç»„ä»¶ Aï¼Œåœ¨å¦å¤–ä¸€ä¸ªç»„ä»¶ B ä¸­ä½¿ç”¨ï¼Œé‚£ä¹ˆç»„ä»¶ A ä¸­ template çš„å…ƒç´ ï¼Œä¼šè¢«æŒ‚è½½åˆ°ç»„ä»¶ B ä¸­ template çš„æŸä¸ªä½ç½®æœ€ç»ˆæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¼šå½¢æˆä¸€é¢— DOM æ ‘ç»“æ„<br>ä½†æ˜¯æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›ç»„ä»¶ä¸æ˜¯æŒ‚è½½åœ¨è¿™ä¸ªç»„ä»¶æ ‘ä¸Šçš„ï¼Œå¯èƒ½æ˜¯ç§»åŠ¨åˆ° Vue app ä¹‹å¤–çš„å…¶ä»–ä½ç½®ã€‚æ¯”å¦‚ç§»åŠ¨åˆ° body å…ƒç´ ä¸Šï¼Œæˆ–è€…æˆ‘ä»¬æœ‰å…¶ä»–çš„ div#app ä¹‹å¤–çš„å…ƒç´ ä¸Šã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ teleport æ¥å®Œæˆ</p><p>å‡å¦‚åœ¨çˆ¶ç»„ä»¶ä¸­å¼•ç”¨äº†ä¸€ä¸ªå­ç»„ä»¶ï¼Œé‚£ä¹ˆæ¸²æŸ“æˆé¡µé¢åè¿™ä¸ªå­ç»„ä»¶ HTML ä¹Ÿæ˜¯å¿…ç„¶è¢«çˆ¶ç»„ä»¶ HTML åŒ…å«çš„ã€‚</p><p>ä½†æ˜¯å¦‚æœæŠŠå­ç»„ä»¶æ”¾ç½®åˆ°äº† teleport ç»„ä»¶ä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æŒ‡å®šè¯¥å­ç»„ä»¶æ¸²æŸ“åˆ°çˆ¶ç»„ä»¶ä¹‹å¤–çš„å…¶å®ƒ DOM èŠ‚ç‚¹ä¸‹ï¼Œæ¯”å¦‚ body æˆ–è€…å…¶å®ƒçš„ DOM ç­‰ç­‰ã€‚è¿™å°±æœ‰ç‚¹ç±»ä¼¼ä¸ â€œä¼ é€â€ äº†.</p><p>Teleport Vue 3.0 æ–°ç‰¹æ€§ä¹‹ä¸€ã€‚</p><p>Teleport æ˜¯ä¸€ç§èƒ½å¤Ÿå°†æˆ‘ä»¬çš„æ¨¡æ¿æ¸²æŸ“è‡³æŒ‡å®š DOM èŠ‚ç‚¹ï¼Œä¸å—çˆ¶çº§ styleã€v-show ç­‰å±æ€§å½±å“ï¼Œä½† dataã€prop æ•°æ®ä¾æ—§èƒ½å¤Ÿå…±ç”¨çš„æŠ€æœ¯ï¼›ç±»ä¼¼äº React çš„ Portalã€‚</p><p>ä¸»è¦è§£å†³çš„é—®é¢˜ å› ä¸º Teleport èŠ‚ç‚¹æŒ‚è½½åœ¨å…¶ä»–æŒ‡å®šçš„ DOM èŠ‚ç‚¹ä¸‹ï¼Œå®Œå…¨ä¸å—çˆ¶çº§ style æ ·å¼å½±å“</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">teleport</span> <span class="attr">to</span>=<span class="string">&#x27;è¦ä¼ é€çš„åœ°æ–¹&#x27;</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  â€¦â€¦â€¦â€¦</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">teleport</span>&gt;</span></span></span><br></pre></td></tr></table></figure><ul><li>æ³¨æ„ï¼šä¼ é€ä¹‹å‰è¦å…ˆæœ‰ dom ã€é¡ºåºã€‘</li><li>ä½¿ç”¨åœºæ™¯ï¼šå‡å¦‚æœ‰éå¸¸å¤šçš„å¼¹çª—ï¼Œé‚£ä¹ˆå¦‚ä½•ç®¡ç†å®ƒä»¬çš„ z-index å‘¢ï¼Œä¹Ÿå°±æ˜¯åŒæ—¶å¼¹çª—æ—¶çš„å±‚çº§å…³ç³»ï¼Œå¦‚æœæ¯ä¸ªå¼¹çª—éƒ½åœ¨å„è‡ªçš„çˆ¶ç»„ä»¶ä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯æ²¡æ³•æ§åˆ¶çš„ï¼Œæ‰€æœ‰æœ‰å¿…è¦æŠŠå®ƒä»¬éƒ½æ‹§å‡ºæ¥ï¼Œæ”¾åœ¨åŒä¸€ä¸ªçˆ¶å…ƒç´ ä¸‹é¢ï¼Œè¿™æ ·å°±å¯ä»¥æ–¹ä¾¿çš„è®¾ç½®å±‚çº§å…³ç³»äº†</li></ul><h1 id="keep-alive-ç¼“å­˜ç»„ä»¶"><a class="markdownIt-Anchor" href="#keep-alive-ç¼“å­˜ç»„ä»¶">#</a> keep-alive ç¼“å­˜ç»„ä»¶</h1><p>æœ‰æ—¶å€™æˆ‘ä»¬ä¸å¸Œæœ›ç»„ä»¶è¢«é‡æ–°æ¸²æŸ“å½±å“ä½¿ç”¨ä½“éªŒï¼›æˆ–è€…å¤„äºæ€§èƒ½è€ƒè™‘ï¼Œé¿å…å¤šæ¬¡é‡å¤æ¸²æŸ“é™ä½æ€§èƒ½ã€‚è€Œæ˜¯å¸Œæœ›ç»„ä»¶å¯ä»¥ç¼“å­˜ä¸‹æ¥ï¼Œç»´æŒå½“å‰çš„çŠ¶æ€ã€‚è¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ° <code>keep-alive</code> ç»„ä»¶ã€‚</p><h3 id="å¼€å¯-keep-alive-ç”Ÿå‘½å‘¨æœŸçš„å˜åŒ–"><a class="markdownIt-Anchor" href="#å¼€å¯-keep-alive-ç”Ÿå‘½å‘¨æœŸçš„å˜åŒ–">#</a> å¼€å¯ keep-alive ç”Ÿå‘½å‘¨æœŸçš„å˜åŒ–</h3><ul><li>åˆæ¬¡è¿›å…¥æ—¶ï¼š onMounted&gt; onActivated</li><li>é€€å‡ºåè§¦å‘ deactivated</li><li>å†æ¬¡è¿›å…¥ï¼šåªä¼šè§¦å‘ onActivated</li><li>äº‹ä»¶æŒ‚è½½çš„æ–¹æ³•ç­‰ï¼Œåªæ‰§è¡Œä¸€æ¬¡çš„æ”¾åœ¨ onMounted ä¸­ï¼›ç»„ä»¶æ¯æ¬¡è¿›å»æ‰§è¡Œçš„æ–¹æ³•æ”¾åœ¨ onActivated ä¸­</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åŸºæœ¬ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;view&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¤šä¸ªæ¡ä»¶åˆ¤æ–­çš„å­ç»„ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">comp-a</span> <span class="attr">v-if</span>=<span class="string">&quot;a &gt; 1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">comp-a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">comp-b</span> <span class="attr">v-else</span>&gt;</span><span class="tag">&lt;/<span class="name">comp-b</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å’Œ `&lt;transition&gt;` ä¸€èµ·ä½¿ç”¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">transition</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;view&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="include-å’Œ-exclude"><a class="markdownIt-Anchor" href="#include-å’Œ-exclude">#</a> include å’Œ exclude</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">keep-alive</span> <span class="attr">:include</span>=<span class="string">&quot;&quot;</span> <span class="attr">:exclude</span>=<span class="string">&quot;&quot;</span> <span class="attr">:max</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="component-åŠ¨æ€ç»„ä»¶"><a class="markdownIt-Anchor" href="#component-åŠ¨æ€ç»„ä»¶">#</a> Component åŠ¨æ€ç»„ä»¶</h1><p><code>component</code> æ˜¯ vue å†…ç½®ç»„ä»¶ï¼Œä¸»è¦ä½œç”¨ä¸ºåŠ¨æ€æ¸²æŸ“ç»„ä»¶ï¼Œè¿›è¡ŒåŠ¨æ€ç»„ä»¶åˆ‡æ¢</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;è¦åŠ¨æ€ç»‘å®šçš„ç»„ä»¶&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span></span><br></pre></td></tr></table></figure><ul><li>è‹¥æ˜¯æ•°æ®éœ€è¦åŠ¨æ€æ¸²æŸ“ï¼Œç»„ä»¶åˆ‡æ¢ä¹‹åä¼šå¯¼è‡´ä¹‹å‰è·å¾—çš„æ•°æ®ä¸¢å¤±ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œè‹¥æˆ‘ä»¬æƒ³è¦åœ¨ç»„ä»¶åˆ‡æ¢è¿‡ç¨‹ä¸­ä¿æŒè¿™äº›ç»„ä»¶çš„çŠ¶æ€ï¼Œä»¥é¿å…é‡å¤æ¸²æŸ“å¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œåˆ™å¯ä»¥åœ¨åŠ¨æ€ç»„ä»¶ä¸Šä½¿ç”¨ <code>keep-alive</code> æ¥ç¼“å­˜ç»„ä»¶ä¸­çš„æ•°æ®:</li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;è¦åŠ¨æ€ç»‘å®šçš„ç»„ä»¶&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span></span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ <code>keep-alive</code> ä¼šå¢åŠ ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸï¼š <code>onActivated</code> , <code>onDeactivated</code><br>æ¯æ¬¡åˆ‡æ¢ç»„ä»¶çš„è¡Œä¸ºéƒ½ä¼šåˆ†åˆ«è¿›è¡Œè¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸ</li></ul><h1 id="å¼‚æ­¥ç»„ä»¶"><a class="markdownIt-Anchor" href="#å¼‚æ­¥ç»„ä»¶">#</a> å¼‚æ­¥ç»„ä»¶</h1><p>åœ¨å¤§å‹åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å°†åº”ç”¨åˆ†å‰²æˆå°ä¸€äº›çš„ä»£ç å— å¹¶ä¸”å‡å°‘ä¸»åŒ…çš„ä½“ç§¯</p><p>è¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨å¼‚æ­¥ç»„ä»¶</p><h2 id="é¡¶å±‚-await-æŠ€æœ¯"><a class="markdownIt-Anchor" href="#é¡¶å±‚-await-æŠ€æœ¯">#</a> é¡¶å±‚ await æŠ€æœ¯</h2><p>åœ¨ setup è¯­æ³•ç³–é‡Œé¢ ä½¿ç”¨æ–¹æ³•</p><p><code>&lt;script setup&gt;</code> ä¸­å¯ä»¥ä½¿ç”¨é¡¶å±‚ awaitã€‚ç»“æœä»£ç ä¼šè¢«ç¼–è¯‘æˆ <code>async setup()</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> post = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`/api/post/1`</span>).<span class="title function_">then</span>(<span class="function"><span class="params">r</span> =&gt;</span> r.<span class="title function_">json</span>())</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>çˆ¶ç»„ä»¶å¼•ç”¨å­ç»„ä»¶ é€šè¿‡ defineAsyncComponent åŠ è½½å¼‚æ­¥é…åˆ import å‡½æ•°æ¨¡å¼ä¾¿å¯ä»¥åˆ†åŒ…:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; reactive, ref, markRaw, toRaw, defineAsyncComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> <span class="title class_">Dialog</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../../components/Dialog/index.vue&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//å®Œæ•´å†™æ³•</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> <span class="title class_">AsyncComp</span> = <span class="title function_">defineAsyncComponent</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// åŠ è½½å‡½æ•°</span></span></span><br><span class="line"><span class="language-javascript">  <span class="attr">loader</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./Foo.vue&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// åŠ è½½å¼‚æ­¥ç»„ä»¶æ—¶ä½¿ç”¨çš„ç»„ä»¶</span></span></span><br><span class="line"><span class="language-javascript">  <span class="attr">loadingComponent</span>: <span class="title class_">LoadingComponent</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// å±•ç¤ºåŠ è½½ç»„ä»¶å‰çš„å»¶è¿Ÿæ—¶é—´ï¼Œé»˜è®¤ä¸º 200ms</span></span></span><br><span class="line"><span class="language-javascript">  <span class="attr">delay</span>: <span class="number">200</span>,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// åŠ è½½å¤±è´¥åå±•ç¤ºçš„ç»„ä»¶</span></span></span><br><span class="line"><span class="language-javascript">  <span class="attr">errorComponent</span>: <span class="title class_">ErrorComponent</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// å¦‚æœæä¾›äº†ä¸€ä¸ª timeout æ—¶é—´é™åˆ¶ï¼Œå¹¶è¶…æ—¶äº†</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// ä¹Ÿä¼šæ˜¾ç¤ºè¿™é‡Œé…ç½®çš„æŠ¥é”™ç»„ä»¶ï¼Œé»˜è®¤å€¼æ˜¯ï¼šInfinity</span></span></span><br><span class="line"><span class="language-javascript">  <span class="attr">timeout</span>: <span class="number">3000</span></span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br></pre></td></tr></table></figure><h2 id="suspense"><a class="markdownIt-Anchor" href="#suspense">#</a> suspense</h2><p><code>&lt;suspense&gt;</code> ç»„ä»¶æœ‰ä¸¤ä¸ªæ’æ§½ã€‚å®ƒä»¬éƒ½åªæ¥æ”¶ä¸€ä¸ªç›´æ¥å­èŠ‚ç‚¹ã€‚default æ’æ§½é‡Œçš„èŠ‚ç‚¹ä¼šå°½å¯èƒ½å±•ç¤ºå‡ºæ¥ã€‚å¦‚æœä¸èƒ½ï¼Œåˆ™å±•ç¤º fallback æ’æ§½é‡Œçš„èŠ‚ç‚¹ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Suspense</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dialog</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>æˆ‘åœ¨å“ªå„¿<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dialog</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">fallback</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>loading...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="åœºæ™¯ä¸€"><a class="markdownIt-Anchor" href="#åœºæ™¯ä¸€">#</a> åœºæ™¯ä¸€</h2><p>åœ¨å¼€å‘ Vue é¡¹ç›®æ—¶ï¼Œå¤§å¤šæ•°äººéƒ½ä¼šç”¨åˆ°ç»„ä»¶ã€‚åœ¨çˆ¶ç»„ä»¶ä¸­ï¼Œå­ç»„ä»¶çš„åŠ è½½ä¸€èˆ¬æ˜¯æŒ‰ç…§å…ˆåé¡ºåºåŠ è½½çš„ï¼Œå­ç»„ä»¶åŠ è½½åæ‰ä¼šåŠ è½½çˆ¶ç»„ä»¶<br>å¦‚æœä¸€ä¸ªé¡µé¢çš„å­ç»„ä»¶å¾ˆå¤šï¼Œç”±äºä¼šå…ˆåŠ è½½å­ç»„ä»¶ï¼Œé‚£ä¹ˆçˆ¶ç»„ä»¶å¯èƒ½ä¼šå‡ºç°æ¯”è¾ƒé•¿çš„ç™½å±ç­‰å¾…æ—¶é—´ã€‚æˆ‘ä»¬æƒ³è®©æŸäº›å­ç»„ä»¶å¼‚æ­¥åŠ è½½åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼ŸVue3 æä¾›äº†ä¸€ä¸ªæ–°å¢çš„ <code>defineAsyncComponent</code> æ–¹æ³•æ¥å®ç°å¼‚æ­¥ç»„ä»¶ã€‚</p><ul><li>å‡½æ•°æ–¹å¼åˆ›å»º</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//çˆ¶ç»„ä»¶</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">  import &#123; onMounted, defineAsyncComponent &#125; from &quot;vue&quot;;</span><br><span class="line">  const AsyncChild = defineAsyncComponent(() =&gt; import(&quot;./child.vue&quot;));</span><br><span class="line">  onMounted(() =&gt; &#123;</span><br><span class="line">    console.log(&quot;çˆ¶ç»„ä»¶å…ˆè¿è¡Œäº†&quot;);</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">//å¼‚æ­¥ç»„ä»¶å¿…é¡»åœ¨&lt;Suspense&gt;æ ‡ç­¾å†…ä½¿ç”¨</span><br><span class="line">  &lt;Suspense&gt;</span><br><span class="line">    //å±•ç¤ºå¼‚æ­¥ç»„ä»¶</span><br><span class="line">    &lt;template #default&gt;</span><br><span class="line">      &lt;AsyncChild /&gt;</span><br><span class="line">  &lt;!-- è¿™ä¸ª&lt;AsyncChild /&gt;æ˜¯è‡ªå·±åœ¨ &lt;script setup&gt;ä¸­å®šä¹‰çš„åå­— --&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">    //åŠ è½½è¿‡ç¨‹ä¸­å±•ç¤ºçš„å†…å®¹</span><br><span class="line">    &lt;template #fallback&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/Suspense&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><ul><li>å¯¹è±¡çš„æ–¹å¼åˆ›å»º</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">AsyncComp</span> = <span class="title function_">defineAsyncComponent</span>(&#123;</span><br><span class="line">  <span class="comment">// åŠ è½½å‡½æ•°ï¼Œéœ€è¦è¿”å›ä¸€ä¸ªPromiseï¼Œå¯ä»¥ä½¿ç”¨åŠ¨æ€importçš„æ–¹å¼ï¼Œä¹Ÿå¯ä»¥è‡ªå·±new Promise()</span></span><br><span class="line">  <span class="attr">loader</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;./Foo.vue&quot;</span>),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åŠ è½½å¼‚æ­¥ç»„ä»¶æ—¶ä½¿ç”¨çš„ç»„ä»¶ï¼Œè¯¥ç»„ä»¶ä¼šåœ¨å¼‚æ­¥ç»„ä»¶åŠ è½½æ—¶æ˜¾ç¤ºï¼Œå¦‚æœå¼‚æ­¥ç»„ä»¶åŠ è½½å¾ˆå¿«ï¼Œå¯èƒ½ä¸ä¼šå‡ºç°loadingç»„ä»¶</span></span><br><span class="line">  <span class="attr">loadingComponent</span>: <span class="title class_">LoadingComponent</span>,</span><br><span class="line">  <span class="comment">// å±•ç¤ºåŠ è½½ç»„ä»¶å‰çš„å»¶è¿Ÿæ—¶é—´ï¼Œé»˜è®¤ä¸º 200ms</span></span><br><span class="line">  <span class="attr">delay</span>: <span class="number">200</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åŠ è½½å¤±è´¥åå±•ç¤ºçš„ç»„ä»¶ï¼Œå¯ä»¥é€šè¿‡Promiseçš„rejectæ¥æµ‹è¯•</span></span><br><span class="line">  <span class="attr">errorComponent</span>: <span class="title class_">ErrorComponent</span>,</span><br><span class="line">  <span class="comment">// å¦‚æœæä¾›äº†ä¸€ä¸ª timeout æ—¶é—´é™åˆ¶ï¼Œå¹¶è¶…æ—¶äº†</span></span><br><span class="line">  <span class="comment">// ä¹Ÿä¼šæ˜¾ç¤ºè¿™é‡Œé…ç½®çš„æŠ¥é”™ç»„ä»¶ï¼Œé»˜è®¤å€¼æ˜¯ï¼šInfinity</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">3000</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="åœºæ™¯äºŒ"><a class="markdownIt-Anchor" href="#åœºæ™¯äºŒ">#</a> åœºæ™¯äºŒ</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Suspense</span> #<span class="attr">default</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">A</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">A</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">fallback</span>&gt;</span></span></span><br><span class="line">  åŠ è½½ä¸­...</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span></span></span><br><span class="line">const A = defineAsyncComponent(()=&gt;</span><br><span class="line">import(../components/A.vue))</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>æ‰“åŒ…çš„æ—¶å€™åˆ†åŒ…ï¼Œä¼šå°†å¼‚æ­¥ç»„ä»¶å•ç‹¬æ‰“åŒ…</p><h1 id="mixin-æ··å…¥"><a class="markdownIt-Anchor" href="#mixin-æ··å…¥">#</a> Mixin æ··å…¥</h1><ul><li>è§£é‡Šï¼šå°†ç»„ä»¶çš„å…¬å…±é€»è¾‘æˆ–è€…é…ç½®æå–å‡ºæ¥ï¼Œå“ªä¸ªç»„ä»¶éœ€è¦ç”¨åˆ°æ—¶ï¼Œç›´æ¥å°†æå–çš„è¿™éƒ¨åˆ†æ··å…¥åˆ°ç»„ä»¶å†…éƒ¨å³å¯ã€‚</li><li>æ³¨æ„ï¼šæå–çš„æ˜¯é€»è¾‘æˆ–é…ç½®ï¼Œè€Œä¸æ˜¯ HTML ä»£ç å’Œ CSS ä»£ç ã€‚å…¶å®å¤§å®¶ä¹Ÿå¯ä»¥æ¢ä¸€ç§æƒ³æ³•ï¼Œmixin å°±æ˜¯ç»„ä»¶ä¸­çš„ç»„ä»¶ï¼ŒVue ç»„ä»¶åŒ–è®©æˆ‘ä»¬çš„ä»£ç å¤ç”¨æ€§æ›´é«˜ï¼Œé‚£ä¹ˆç»„ä»¶ä¸ç»„ä»¶ä¹‹é—´è¿˜æœ‰é‡å¤éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä½¿ç”¨ Mixin åœ¨æŠ½ç¦»ä¸€éã€‚</li></ul><h2 id="mixin-å’Œ-vuex-çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#mixin-å’Œ-vuex-çš„åŒºåˆ«">#</a> Mixin å’Œ Vuex çš„åŒºåˆ«ï¼Ÿ</h2><p>ä¸Šé¢ä¸€ç‚¹è¯´ Mixin å°±æ˜¯ä¸€ä¸ªæŠ½ç¦»å…¬å…±éƒ¨åˆ†çš„ä½œç”¨ã€‚åœ¨ Vue ä¸­ï¼ŒVuex çŠ¶æ€ç®¡ç†ä¼¼ä¹ä¹Ÿæ˜¯åšçš„è¿™ä¸€ä»¶äº‹ï¼Œå®ƒä¹Ÿæ˜¯å°†ç»„ä»¶ä¹‹é—´å¯èƒ½å…±äº«çš„æ•°æ®æŠ½ç¦»å‡ºæ¥ã€‚ä¸¤è€…çœ‹ä¼¼ä¸€æ ·ï¼Œå®åˆ™è¿˜æ˜¯æœ‰ç»†å¾®çš„åŒºåˆ«ï¼ŒåŒºåˆ«å¦‚ä¸‹ï¼š</p><ol><li>Vuex å…¬å…±çŠ¶æ€ç®¡ç†ï¼Œå¦‚æœåœ¨ä¸€ä¸ªç»„ä»¶ä¸­æ›´æ”¹äº† Vuex ä¸­çš„æŸä¸ªæ•°æ®ï¼Œé‚£ä¹ˆå…¶å®ƒæ‰€æœ‰å¼•ç”¨äº† Vuex ä¸­è¯¥æ•°æ®çš„ç»„ä»¶ä¹Ÿä¼šè·Ÿç€å˜åŒ–ã€‚</li><li>Mixin ä¸­çš„æ•°æ®å’Œæ–¹æ³•éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œç»„ä»¶ä¹‹é—´ä½¿ç”¨åæ˜¯äº’ç›¸ä¸å½±å“çš„ã€‚</li></ol><h2 id="ä¼˜ç¼ºç‚¹"><a class="markdownIt-Anchor" href="#ä¼˜ç¼ºç‚¹">#</a> ä¼˜ç¼ºç‚¹</h2><h3 id="ä¼˜ç‚¹"><a class="markdownIt-Anchor" href="#ä¼˜ç‚¹">#</a> ä¼˜ç‚¹</h3><ol><li>æé«˜ä»£ç å¤ç”¨æ€§</li><li>æ— éœ€ä¼ é€’çŠ¶æ€</li><li>ç»´æŠ¤æ–¹ä¾¿ï¼Œåªéœ€è¦ä¿®æ”¹ä¸€ä¸ªåœ°æ–¹å³å¯</li></ol><h3 id="ç¼ºç‚¹"><a class="markdownIt-Anchor" href="#ç¼ºç‚¹">#</a> ç¼ºç‚¹</h3><ol><li>å‘½åå†²çª</li><li>æ»¥ç”¨çš„è¯åæœŸå¾ˆéš¾ç»´æŠ¤</li><li>ä¸å¥½è¿½æº¯æºï¼Œæ’æŸ¥é—®é¢˜ç¨æ˜¾éº»çƒ¦</li><li>ä¸èƒ½è½»æ˜“çš„é‡å¤ä»£ç </li></ol><h2 id="ä½¿ç”¨"><a class="markdownIt-Anchor" href="#ä½¿ç”¨">#</a> ä½¿ç”¨</h2><ol><li><code>src/mixin/index.js</code></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">//æŠ½å–çš„å…¬å…±é€»è¾‘æˆ–é…ç½®</span></span><br><span class="line">  <span class="keyword">let</span> num = <span class="title function_">ref</span>(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> <span class="title function_">Btn</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    num.<span class="property">value</span> += <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  retuen &#123;</span><br><span class="line">    num,</span><br><span class="line">    fBtn</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼š</li></ol><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line">&#123;&#123;num&#125;&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span> = <span class="string">&quot;Btn&quot;</span>&gt;</span></span>ç‚¹å‡»<span class="language-xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span></span></span><br><span class="line">import mixin from &#x27;åœ°å€&#x27;</span><br><span class="line">//å¯ä»¥æŠŠmixinä¸­çš„ä¸œè¥¿è§£æ„å‡ºæ¥,è§£æ„å‡ºæ¥å°±èƒ½ç›´æ¥ç”¨äº†</span><br><span class="line">let &#123;num,Btn&#125; = mixin()</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h1 id="provide-å’Œ-inject-ä¾èµ–æ³¨å…¥"><a class="markdownIt-Anchor" href="#provide-å’Œ-inject-ä¾èµ–æ³¨å…¥">#</a> Provide å’Œ Inject ä¾èµ–æ³¨å…¥</h1><p>çˆ¶ç»„ä»¶å’Œå­™å­è¾ˆé—´è¿›è¡Œç»„ä»¶é€šä¿¡<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://eucli-1314359160.cos.ap-beijing.myqcloud.com/test/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5.jpg" alt="ä¾èµ–æ³¨å…¥"></p><ul><li>çˆ¶ç»„ä»¶</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; provide &#125; from &quot;vue&quot;;</span><br><span class="line">import Child from &quot;url&quot;;</span><br><span class="line">let num = ref(100);</span><br><span class="line">provide(&quot;changeNum&quot;, num);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>åä»£ç»„ä»¶</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; inject &#125; from &quot;vue&quot;;</span><br><span class="line">const aNum = inject(&quot;changeNum&quot;);</span><br><span class="line">console.log(aNum);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h1 id="vuex"><a class="markdownIt-Anchor" href="#vuex">#</a> vuex</h1><p><code>state</code> å€¼è¦ç”¨ <code>computed()</code> å»æ¥ï¼š <code>let num = computed( ()=&gt; store.state.num )</code> ä¸ç„¶ä¸æ˜¯å“åº”çš„æ•°æ®<br><code>mutations</code> é‡Œé¢çš„æ–¹æ³•ç”¨ <code>commit()</code> è°ƒç”¨<br><code>actions</code> é‡Œé¢çš„æ–¹æ³•ç”¨ <code>dispatch()</code> è°ƒç”¨</p><ul><li>æ³¨æ„ï¼švuex ä¿®æ”¹æ•°æ®åªèƒ½ç”¨ <code>mutations</code> æäº¤æ¥ä¿®æ”¹</li></ul><h2 id="vuex-æŒä¹…åŒ–å­˜å‚¨æ’ä»¶å®ç°"><a class="markdownIt-Anchor" href="#vuex-æŒä¹…åŒ–å­˜å‚¨æ’ä»¶å®ç°">#</a> vuex æŒä¹…åŒ–å­˜å‚¨ã€æ’ä»¶å®ç°ã€‘</h2><p>å¯ä»¥ç”¨ localStorageï¼Œä¹Ÿå¯ä»¥ç”¨æ’ä»¶ï¼š <code>vuex-persistedstate</code></p><ol><li>å®‰è£…</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add vuex-persistedstate -S</span><br></pre></td></tr></table></figure><p>2. <code>src/store/index.js</code> ä¸­ä½¿ç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createStore&#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> persistedState <span class="keyword">from</span> <span class="string">`vuex-persistedstate `</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>:[<span class="title function_">persistedState</span>(&#123;</span><br><span class="line">    <span class="attr">key</span>:<span class="string">&#x27;&#x27;</span>,<span class="comment">//æµè§ˆå™¨ä¸­çš„åå­—</span></span><br><span class="line">    <span class="attr">path</span>:[], <span class="comment">//éœ€è¦å­˜å‚¨èµ·æ¥çš„å‚æ•°æ¨¡å—</span></span><br><span class="line">  &#125;)]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="pinia"><a class="markdownIt-Anchor" href="#pinia">#</a> Pinia</h1><h2 id="pinia-å’Œ-vuex-çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#pinia-å’Œ-vuex-çš„åŒºåˆ«">#</a> pinia å’Œ vuex çš„åŒºåˆ«ï¼š</h2><ol><li>pinia æ²¡æœ‰ mutationsï¼Œåªæœ‰ï¼šstateã€gettersã€actions</li><li>pinia åˆ†æ¨¡å—ä¸éœ€è¦ modulesï¼ˆvuex éœ€è¦ï¼‰</li><li>ts æ”¯æŒæ›´å¥½</li><li>è‡ªåŠ¨åŒ–ä»£ç æ‹†åˆ†</li><li>pinia ä½“ç§¯æ›´å°ï¼ˆæ€§èƒ½æ›´å¥½ï¼‰</li><li>å¯ä»¥ç›´æ¥ä¿®æ”¹ state æ•°æ®ï¼ˆvuex åªèƒ½é€šè¿‡ mutations æäº¤æ¥ä¿®æ”¹ï¼‰ï¼Œä½†æ˜¯ä¸èƒ½ç›´æ¥è§£æ„ï¼Œåº”è¯¥è¦ç”¨æ¢ç§è§£æ„æ–¹å¼ storeToRefs</li></ol><h2 id="pinia-ä½¿ç”¨"><a class="markdownIt-Anchor" href="#pinia-ä½¿ç”¨">#</a> pinia ä½¿ç”¨</h2><ol><li>å®‰è£…</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add pinia</span><br></pre></td></tr></table></figure><ol start="2"><li><code>src/main.js</code> : åˆ›å»ºä¸€ä¸ª piniaï¼ˆæ ¹å­˜å‚¨ï¼‰å¹¶å°†å…¶ä¼ é€’ç»™åº”ç”¨ç¨‹åºï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">createPinia</span>());</span><br></pre></td></tr></table></figure><ol start="3"><li><code>src/store/index.js</code> ä¸­ä½¿ç”¨</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1. å®šä¹‰å®¹å™¨å¹¶å¯¼å‡º</span></span><br><span class="line"><span class="comment"> * å‚æ•°ä¸€: å®¹å™¨ID, å”¯ä¸€, å°†æ¥ Pinia ä¼šæŠŠæ‰€æœ‰çš„å®¹å™¨æŒ‚è½½åˆ°æ ¹å®¹å™¨</span></span><br><span class="line"><span class="comment"> * å‚æ•°äºŒ: é€‰é¡¹å¯¹è±¡</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼: å‡½æ•°, è°ƒç”¨çš„æ—¶å€™è¦ç©ºå‚è°ƒç”¨, è¿”å›å®¹å™¨å®ä¾‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useStore = <span class="title function_">defineStore</span>(<span class="string">&quot;storeId&quot;</span>, &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç±»ä¼¼ç»„ä»¶çš„ data, ç”¨äºå­˜å‚¨å…¨å±€çš„çš„çŠ¶æ€</span></span><br><span class="line"><span class="comment">   * æ³¨æ„:</span></span><br><span class="line"><span class="comment">   *    1.å¿…é¡»æ˜¯å‡½æ•°, ä¸ºäº†åœ¨æœåŠ¡ç«¯æ¸²æŸ“çš„æ—¶å€™é¿å…äº¤å‰è¯·æ±‚å¯¼è‡´çš„æ•°æ®äº¤å‰æ±¡æŸ“</span></span><br><span class="line"><span class="comment">   *    2.å¿…é¡»æ˜¯ç®­å¤´å‡½æ•°, ä¸ºäº†æ›´å¥½çš„ TS ç±»å‹æ¨å¯¼</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">num</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;å¼ ä¸‰&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç±»ä¼¼ç»„ä»¶çš„ computed, ç”¨æ¥å°è£…è®¡ç®—å±æ€§, å…·æœ‰ç¼“å­˜ç‰¹æ€§</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">getters</span>: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç±»ä¼¼ç»„ä»¶çš„ methods, å°è£…ä¸šåŠ¡é€»è¾‘, ä¿®æ”¹state</span></span><br><span class="line"><span class="comment">   * æ³¨æ„: é‡Œé¢çš„å‡½æ•°ä¸èƒ½å®šä¹‰æˆç®­å¤´å‡½æ•°(å‡½æ•°ä½“ä¸­ä¼šç”¨åˆ°this)</span></span><br><span class="line"><span class="comment">   * actions å¯ä»¥æ˜¯å¼‚æ­¥çš„ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­await ä»»ä½• API è°ƒç”¨ç”šè‡³å…¶ä»–æ“ä½œï¼</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">actions</span>: &#123;&#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ol start="4"><li>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼š</li></ol><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span></span></span><br><span class="line">import &#123;useStore&#125; from &#x27;../store&#x27;</span><br><span class="line">const store = useStore()</span><br><span class="line"></span><br><span class="line">let &#123;name,num&#125; = store</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line">&#123;&#123;num&#125;&#125;</span><br><span class="line">&#123;&#123;name&#125;&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="ç»„ä»¶ä¿®æ”¹-pinia-çš„-state-æ•°æ®storetorefs"><a class="markdownIt-Anchor" href="#ç»„ä»¶ä¿®æ”¹-pinia-çš„-state-æ•°æ®storetorefs">#</a> ç»„ä»¶ä¿®æ”¹ pinia çš„ state æ•°æ®: <code>storeToRefs</code></h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span></span></span><br><span class="line">import &#123;useStore&#125; from &#x27;../store&#x27;</span><br><span class="line">import &#123;storeToRefs&#125; from &#x27;pinia&#x27;</span><br><span class="line">const store = useStore()</span><br><span class="line"></span><br><span class="line">let &#123;name,num&#125; = storeToRefs(store)</span><br><span class="line">const btn = () =&gt; &#123;</span><br><span class="line">  name.value = &#x27;æå››&#x27;</span><br><span class="line">&#125;</span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span></span></span><br><span class="line">  &#123;&#123;name&#125;&#125;</span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;btn&quot;</span>&gt;</span></span></span></span>ä¿®æ”¹åç§°<span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span></span></span><br></pre></td></tr></table></figure><h2 id="æ‰¹é‡ä¿®æ”¹"><a class="markdownIt-Anchor" href="#æ‰¹é‡ä¿®æ”¹">#</a> æ‰¹é‡ä¿®æ”¹</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span></span></span><br><span class="line">.....</span><br><span class="line">store.$patch(state =&gt; &#123;</span><br><span class="line">  state.num++,</span><br><span class="line">  state.name = &#x27;ç‹äº”&#x27;</span><br><span class="line">&#125;)</span><br><span class="line">.....</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="pinia-åˆ†æ¨¡å—"><a class="markdownIt-Anchor" href="#pinia-åˆ†æ¨¡å—">#</a> pinia åˆ†æ¨¡å—</h2><h2 id="pinia-æŒä¹…åŒ–å­˜å‚¨æ’ä»¶å®ç°"><a class="markdownIt-Anchor" href="#pinia-æŒä¹…åŒ–å­˜å‚¨æ’ä»¶å®ç°">#</a> pinia æŒä¹…åŒ–å­˜å‚¨ [æ’ä»¶å®ç°]</h2><p>å¯ä»¥ç”¨ localStorageï¼Œä¹Ÿå¯ä»¥ç”¨æ’ä»¶ï¼š <code>pinia-plugin-persist</code></p><ol><li>å®‰è£…</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add pinia-plugin-persist --save</span><br></pre></td></tr></table></figure><p>2. <code>src/store/index.js</code> ä¸­ä½¿ç”¨:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"><span class="comment">//å¼•å…¥piniaæŒä¹…åŒ–å­˜å‚¨æ’ä»¶</span></span><br><span class="line"><span class="keyword">import</span> piniaPluginPersist <span class="keyword">from</span> <span class="string">`pinia-plugin-persist`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">defineStore</span>(<span class="string">&quot;storeId&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">num</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;å¼ ä¸‰&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;&#125;,</span><br><span class="line">  <span class="comment">//å¼€å¯æ•°æ®ç¼“å­˜</span></span><br><span class="line">  <span class="attr">persist</span>:&#123;</span><br><span class="line">    <span class="attr">enable</span>:<span class="literal">true</span>,</span><br><span class="line">    <span class="attr">strategies</span>:[</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">key</span>:<span class="string">&#x27;my_user&#x27;</span>,</span><br><span class="line">        <span class="attr">storage</span>:<span class="variable language_">localStorage</span>,<span class="comment">//é»˜è®¤æ˜¯sessionStorageï¼šåˆ·æ–°é¡µé¢ä¼šç¼“å­˜ï¼Œä½†å…³æ‰é¡µé¢å°±ä¼šæ¸…ç†æ‰ç¼“å­˜</span></span><br><span class="line">        <span class="attr">path</span>:[<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;age&#x27;</span>],<span class="comment">//æ¥å†³å®šstateä¸­çš„å“ªäº›æ•°æ®éœ€è¦æŒä¹…åŒ–å­˜å‚¨</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨æ’ä»¶</span></span><br><span class="line">useStore.<span class="title function_">use</span>(piniaPluginPersist)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useStore</span><br></pre></td></tr></table></figure><h1 id="å›¾ç‰‡æ‡’åŠ è½½"><a class="markdownIt-Anchor" href="#å›¾ç‰‡æ‡’åŠ è½½">#</a> å›¾ç‰‡æ‡’åŠ è½½</h1><p>å¼•å…¥æ‰€æœ‰å›¾ç‰‡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** globæ˜¯æ‡’åŠ è½½æ¨¡å¼</span></span><br><span class="line"><span class="comment"> * globEager é™æ€åŠ è½½</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> imgList = <span class="keyword">import</span>.<span class="property">meta</span>.<span class="title function_">globEager</span>(<span class="string">&quot;./assets/images/*.*&quot;</span>);</span><br></pre></td></tr></table></figure><h1 id="event-loop-å’Œ-nexttick"><a class="markdownIt-Anchor" href="#event-loop-å’Œ-nexttick">#</a> event loop å’Œ nextTick</h1><ul><li>JS æ‰§è¡Œæœºåˆ¶<br>åœ¨æˆ‘ä»¬å­¦ js çš„æ—¶å€™éƒ½çŸ¥é“ js æ˜¯å•çº¿ç¨‹çš„ï¼Œå¦‚æœæ˜¯å¤šçº¿ç¨‹çš„è¯ä¼šå¼•å‘ä¸€ä¸ªé—®é¢˜ â€”â€” åœ¨åŒä¸€æ—¶é—´åŒæ—¶æ“ä½œ DOM ä¸€ä¸ªå¢åŠ ä¸€ä¸ªåˆ é™¤ JS å°±ä¸çŸ¥é“åˆ°åº•è¦å¹²å˜›äº†ã€‚ä½†æ˜¯éšç€ HTML5 åˆ°æ¥ js ä¹Ÿæ”¯æŒäº†å¤šçº¿ç¨‹ webWorker ï¼Œä½†æ˜¯ä¹Ÿæ˜¯ä¸å…è®¸æ“ä½œ DOM</li></ul><p>å•çº¿ç¨‹å°±æ„å‘³ç€æ‰€æœ‰çš„ä»»åŠ¡éƒ½éœ€è¦æ’é˜Ÿï¼Œåé¢çš„ä»»åŠ¡éœ€è¦ç­‰å‰é¢çš„ä»»åŠ¡æ‰§è¡Œå®Œæ‰èƒ½æ‰§è¡Œï¼Œå¦‚æœå‰é¢çš„ä»»åŠ¡è€—æ—¶è¿‡é•¿ï¼Œåé¢çš„ä»»åŠ¡å°±éœ€è¦ä¸€ç›´ç­‰ï¼Œä¸€äº›ä»ç”¨æˆ·è§’åº¦ä¸Šä¸éœ€è¦ç­‰å¾…çš„ä»»åŠ¡å°±ä¼šä¸€ç›´ç­‰å¾…ï¼Œè¿™ä¸ªä»ä½“éªŒè§’åº¦ä¸Šæ¥è®²æ˜¯ä¸å¯æ¥å—çš„ï¼Œæ‰€ä»¥ JS ä¸­å°±å‡ºç°äº†å¼‚æ­¥çš„æ¦‚å¿µã€‚</p><ul><li>åŒæ­¥ä»»åŠ¡ï¼šåŒæ­¥ä»»åŠ¡</li><li>å¼‚æ­¥ä»»åŠ¡</li></ul><ol><li>å®ä»»åŠ¡<br>script (æ•´ä½“ä»£ç )ã€setTimeoutã€setIntervalã€UI äº¤äº’äº‹ä»¶ã€postMessageã€Ajax</li><li>å¾®ä»»åŠ¡<br>Promise.then catch finallyã€MutaionObserverã€process.nextTick (Node.js ç¯å¢ƒ)</li></ol><ul><li>è¿è¡Œæœºåˆ¶</li></ul><p>æ‰€æœ‰çš„åŒæ­¥ä»»åŠ¡éƒ½æ˜¯åœ¨ä¸»è¿›ç¨‹æ‰§è¡Œçš„å½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆï¼Œä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ª &quot;ä»»åŠ¡é˜Ÿåˆ—&quot;ï¼Œå¼‚æ­¥ä»»åŠ¡æ‰§è¡Œé˜Ÿåˆ—ä¸­å…ˆæ‰§è¡Œå®ä»»åŠ¡ï¼Œç„¶åæ¸…ç©ºå½“æ¬¡å®ä»»åŠ¡ä¸­çš„æ‰€æœ‰å¾®ä»»åŠ¡ï¼Œç„¶åè¿›è¡Œä¸‹ä¸€ä¸ª tick å¦‚æ­¤å½¢æˆå¾ªç¯ã€‚</p><p>nextTick å°±æ˜¯åˆ›å»ºä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œé‚£ä¹ˆå®ƒè‡ªç„¶è¦ç­‰åˆ°åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆåæ‰æ‰§è¡Œã€‚</p><h1 id="docker-ç¢°æ’-vue3"><a class="markdownIt-Anchor" href="#docker-ç¢°æ’-vue3">#</a> docker ç¢°æ’ vue3</h1><p>é¢†å¯¼è¦æ±‚ä½ ç»´æŠ¤å››ä¸ªé¡¹ç›®ï¼Œæ¯ä¸ªé¡¹ç›® node ç‰ˆæœ¬ä¸åŒï¼Œæ¡†æ¶ä¸åŒï¼Œæ˜¯ä¸æ˜¯éå¸¸å¤´ç–¼ï¼Ÿdocker å¯ä»¥å¸®ä½ è§£å†³è¿™ä¸ªé—®é¢˜<br><a target="_blank" rel="noopener" href="https://xiaoman.blog.csdn.net/article/details/126375948">https://xiaoman.blog.csdn.net/article/details/126375948</a></p><h1 id="ç¯å¢ƒå˜é‡"><a class="markdownIt-Anchor" href="#ç¯å¢ƒå˜é‡">#</a> ç¯å¢ƒå˜é‡</h1><p><a target="_blank" rel="noopener" href="https://xiaoman.blog.csdn.net/article/details/126375974">https://xiaoman.blog.csdn.net/article/details/126375974</a><br>ç¯å¢ƒå˜é‡ï¼šä»–çš„ä¸»è¦ä½œç”¨å°±æ˜¯è®©å¼€å‘è€…åŒºåˆ†ä¸åŒçš„è¿è¡Œç¯å¢ƒï¼Œæ¥å®ç° å…¼å®¹å¼€å‘å’Œç”Ÿäº§<br>ä¾‹å¦‚ npm run dev å°±æ˜¯å¼€å‘ç¯å¢ƒ npm run build å°±æ˜¯ç”Ÿäº§ç¯å¢ƒç­‰ç­‰<br>Vite åœ¨ä¸€ä¸ªç‰¹æ®Šçš„ import.meta.env å¯¹è±¡ä¸Šæš´éœ²ç¯å¢ƒå˜é‡ã€‚è¿™é‡Œæœ‰ä¸€äº›åœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½å¯ä»¥ä½¿ç”¨çš„å†…å»ºå˜é‡</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;BASE_URL&quot;</span><span class="punctuation">:</span><span class="string">&quot;/&quot;</span><span class="punctuation">,</span> <span class="comment">//éƒ¨ç½²æ—¶çš„URLå‰ç¼€</span></span><br><span class="line"><span class="attr">&quot;MODE&quot;</span><span class="punctuation">:</span><span class="string">&quot;development&quot;</span><span class="punctuation">,</span> <span class="comment">//è¿è¡Œæ¨¡å¼</span></span><br><span class="line"><span class="attr">&quot;DEV&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span><span class="string">&quot;  //æ˜¯å¦åœ¨devç¯å¢ƒ</span></span><br><span class="line"><span class="string">PROD&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span> <span class="comment">//æ˜¯å¦æ˜¯build ç¯å¢ƒ</span></span><br><span class="line"><span class="attr">&quot;SSR&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">false</span></span> <span class="comment">//æ˜¯å¦æ˜¯SSR æœåŠ¡ç«¯æ¸²æŸ“æ¨¡å¼</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„ä¸€ç‚¹å°±æ˜¯è¿™ä¸ªç¯å¢ƒå˜é‡ä¸èƒ½ä½¿ç”¨åŠ¨æ€èµ‹å€¼ import.meta.env [key] åº”ä¸ºè¿™äº›ç¯å¢ƒå˜é‡åœ¨æ‰“åŒ…çš„æ—¶å€™æ˜¯ä¼šè¢«ç¡¬ç¼–ç çš„é€šè¿‡ JSON.stringify æ³¨å…¥æµè§ˆå™¨çš„</p><ul><li>é…ç½®é¢å¤–çš„ç¯å¢ƒå˜é‡<br>åœ¨æ ¹ç›®å½•æ–°å»º env æ–‡ä»¶ <a target="_blank" rel="noopener" href="http://xn--env-i68dk7a64ltvdqwozjn.xxx">å¯ä»¥åˆ›å»ºå¤šä¸ª env.xxx</a></li></ul><h1 id="vue3-æ€§èƒ½ä¼˜åŒ–"><a class="markdownIt-Anchor" href="#vue3-æ€§èƒ½ä¼˜åŒ–">#</a> Vue3 æ€§èƒ½ä¼˜åŒ–</h1><p><a target="_blank" rel="noopener" href="https://xiaoman.blog.csdn.net/article/details/126811832">https://xiaoman.blog.csdn.net/article/details/126811832</a></p><h1 id="è·¨åŸŸ"><a class="markdownIt-Anchor" href="#è·¨åŸŸ">#</a> è·¨åŸŸ</h1><ol><li>é¦–å…ˆæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯è·¨åŸŸ<br>ä¸»è¦æ˜¯å‡ºäºæµè§ˆå™¨çš„åŒæºç­–ç•¥é™åˆ¶ï¼Œå®ƒæ˜¯æµè§ˆå™¨æœ€æ ¸å¿ƒä¹Ÿæœ€åŸºæœ¬çš„å®‰å…¨åŠŸèƒ½ã€‚</li></ol><p>å½“ä¸€ä¸ªè¯·æ±‚ url çš„ åè®®ã€åŸŸåã€ç«¯å£ ä¸‰è€…ä¹‹é—´ä»»æ„ä¸€ä¸ªä¸å½“å‰é¡µé¢ url ä¸åŒå³ä¸ºè·¨åŸŸã€‚</p><p>ä¾‹å¦‚ <a target="_blank" rel="noopener" href="http://xxxx.com">xxxx.com</a> -&gt; <a target="_blank" rel="noopener" href="http://xxxx.com">xxxx.com</a> å­˜åœ¨è·¨åŸŸ åè®®ä¸åŒ</p><p>ä¾‹å¦‚ 127.x.x.x:8001 -&gt; 127.x.x.x:8002 å­˜åœ¨è·¨åŸŸ ç«¯å£ä¸åŒ</p><p>ä¾‹å¦‚ <a target="_blank" rel="noopener" href="http://www.xxxx.com">www.xxxx.com</a> -&gt; <a target="_blank" rel="noopener" href="http://www.yyyy.com">www.yyyy.com</a> å­˜åœ¨è·¨åŸŸ åŸŸåä¸åŒ</p><ol start="2"><li>å¦‚ä½•è§£å†³è·¨åŸŸ<br>vite.config.js/ts ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>()],</span><br><span class="line">  <span class="attr">server</span>:&#123;</span><br><span class="line">     <span class="attr">proxy</span>:&#123;</span><br><span class="line">        <span class="string">&#x27;/api&#x27;</span>:&#123;</span><br><span class="line">            <span class="attr">target</span>:<span class="string">&quot;http://localhost:9001/&quot;</span>, <span class="comment">//è·¨åŸŸåœ°å€</span></span><br><span class="line">            <span class="attr">changeOrigin</span>:<span class="literal">true</span>, <span class="comment">//æ”¯æŒè·¨åŸŸ</span></span><br><span class="line">            <span class="attr">rewrite</span>:<span class="function">(<span class="params">path</span>) =&gt;</span> path.<span class="title function_">replace</span>(<span class="regexp">/^\/api/</span>, <span class="string">&quot;&quot;</span>)<span class="comment">//é‡å†™è·¯å¾„,æ›¿æ¢/api</span></span><br><span class="line">        &#125;</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>fetch æ›¿æ¢ /api ä»–ä¼šæˆªå– /api æ›¿æ¢æˆ target åœ°å€</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123;ref,reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">fetch</span>(<span class="string">&#x27;/api/xm&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></article><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« "><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://eucli.top/2023/03/15/Vue3%E8%A7%82%E5%AF%9F%E7%AC%94%E8%AE%B0/"></div><div class="reward-dec">ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« </div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=undefined&amp;url=https://eucli.top/2023/03/15/Vue3%E8%A7%82%E5%AF%9F%E7%AC%94%E8%AE%B0/&amp;pic=undefined" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="å¤åˆ¶é“¾æ¥" onclick="rm.copyPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/vue3/"><span class="tags-punctuation"><i class="anzhiyufont anzhiyu-icon-tag"></i></span>vue3<span class="tagsPageCount">4</span></a></div></div></div></div></div><div class="post-copyright"><i class="anzhiyufont anzhiyu-icon-copyright"></i><div class="post-copyright__author"><a class="post-copyright__original" title="è¯¥æ–‡ç« ä¸ºåŸåˆ›æ–‡ç« ï¼Œæ³¨æ„ç‰ˆæƒåè®®" href="https://eucli.top/2023/03/15/Vue3%E8%A7%82%E5%AF%9F%E7%AC%94%E8%AE%B0/">åŸåˆ›</a><a class="post-copyright-title"><span>Vue3è§‚å¯Ÿç¬”è®°</span></a></div><div class="post-copyright-info-box"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"></span><a class="link" href="https://eucli.top">è°å·äº†æˆ‘çš„ç”µé¥­é”…</a></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a class="link" href="https://eucli.top/2023/03/15/Vue3%E8%A7%82%E5%AF%9F%E7%AC%94%E8%AE%B0/">https://eucli.top/2023/03/15/Vue3%E8%A7%82%E5%AF%9F%E7%AC%94%E8%AE%B0/</a></span><span class="copy-button" onclick="rm.copyPageUrl()"><i class="anzhiyufont anzhiyu-icon-copy"></i></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://eucli.top" target="_blank">Eucli ã®å°çª</a>ï¼</span></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/03/10/%E6%8B%9B%E7%94%9F%E6%8F%90%E6%8A%A5%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../image/cover/11.png" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">æ‹›ç”ŸææŠ¥ç³»ç»Ÿ</div></div></a></div><div class="next-post pull-right"><a href="/2023/03/24/%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%EF%BC%9AVite%20+%20Vue3%20+%20Typescript%20+%20Pinia%20+%20Vueuse%E9%A1%B9%E7%9B%AE/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../image/cover/18.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">å¿«é€Ÿæ­å»ºï¼šVite + Vue3 + Typescript + Pinia + Vueuseé¡¹ç›®</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-vue"><span class="toc-number">1.</span> <span class="toc-text">ä»‹ç» vue</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vue3-%E6%96%B0%E7%89%B9%E6%80%A7%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.</span> <span class="toc-text">Vue3 æ–°ç‰¹æ€§ä»‹ç»</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-%E9%87%8D%E5%86%99%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A"><span class="toc-number">2.1.</span> <span class="toc-text">ä¸€ã€é‡å†™åŒå‘ç»‘å®š</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-vue3-%E4%BC%98%E5%8C%96-vdom"><span class="toc-number">2.2.</span> <span class="toc-text">äºŒã€Vue3 ä¼˜åŒ– Vdom</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#patch-flag-%E4%BC%98%E5%8C%96%E9%9D%99%E6%80%81%E6%A0%91"><span class="toc-number">2.2.1.</span> <span class="toc-text">patch flag ä¼˜åŒ–é™æ€æ ‘</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89-vue3-fragment"><span class="toc-number">2.3.</span> <span class="toc-text">ä¸‰ã€Vue3 Fragment</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B-vue3-tree-shaking"><span class="toc-number">2.4.</span> <span class="toc-text">å››ã€Vue3 Tree shaking</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94-vue-3-composition-api"><span class="toc-number">2.5.</span> <span class="toc-text">äº”ã€Vue 3 Composition Api</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vite-%E7%9B%AE%E5%BD%95-vue-%E5%8D%95%E6%96%87%E4%BB%B6%E7%BB%84%E4%BB%B6-npm-run-dev-%E8%AF%A6%E8%A7%A3"><span class="toc-number">3.</span> <span class="toc-text">Vite ç›®å½• &amp; Vue å•æ–‡ä»¶ç»„ä»¶ &amp; npm run dev è¯¦è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#vite-%E7%9B%AE%E5%BD%95"><span class="toc-number">3.1.</span> <span class="toc-text">Vite ç›®å½•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sfc-%E8%AF%AD%E6%B3%95%E8%A7%84%E8%8C%83"><span class="toc-number">3.2.</span> <span class="toc-text">SFC è¯­æ³•è§„èŒƒ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#npm-run-dev-%E8%AF%A6%E8%A7%A3"><span class="toc-number">3.3.</span> <span class="toc-text">npm run dev è¯¦è§£</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vue-%E6%A0%B8%E5%BF%83%E8%99%9A%E6%8B%9F-dom-%E5%92%8C-diff-%E7%AE%97%E6%B3%95"><span class="toc-number">4.</span> <span class="toc-text">Vue æ ¸å¿ƒè™šæ‹Ÿ Dom å’Œ diff ç®—æ³•</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vue3-%E6%96%B0%E8%AF%AD%E6%B3%95%E7%B3%96setup-script"><span class="toc-number">5.</span> <span class="toc-text">vue3 æ–°è¯­æ³•ç³– â€”â€”setup script</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ref%E5%92%8C-reactive"><span class="toc-number">6.</span> <span class="toc-text">ref () å’Œ reactive ()</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#v-model"><span class="toc-number">7.</span> <span class="toc-text">v-model</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4"><span class="toc-number">8.</span> <span class="toc-text">è‡ªå®šä¹‰æŒ‡ä»¤</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89-hooks"><span class="toc-number">9.</span> <span class="toc-text">è‡ªå®šä¹‰ Hooks</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BC%96%E5%86%99-vue3-%E6%8F%92%E4%BB%B6"><span class="toc-number">10.</span> <span class="toc-text">ç¼–å†™ Vue3 æ’ä»¶</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#computed-%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7"><span class="toc-number">11.</span> <span class="toc-text">computed è®¡ç®—å±æ€§</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#watch-%E4%BE%A6%E5%90%AC%E5%99%A8"><span class="toc-number">12.</span> <span class="toc-text">watch ä¾¦å¬å™¨</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#watcheffect-%E9%AB%98%E7%BA%A7%E4%BE%A6%E5%90%AC%E5%99%A8"><span class="toc-number">13.</span> <span class="toc-text">watchEffect é«˜çº§ä¾¦å¬å™¨</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vue3-%E5%AE%9A%E4%B9%89%E5%85%A8%E5%B1%80%E5%87%BD%E6%95%B0%E5%92%8C%E5%8F%98%E9%87%8F"><span class="toc-number">14.</span> <span class="toc-text">Vue3 å®šä¹‰å…¨å±€å‡½æ•°å’Œå˜é‡</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vue3-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">15.</span> <span class="toc-text">Vue3 ç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AF%A6%E8%A7%A3-scoped-%E5%92%8C%E6%A0%B7%E5%BC%8F%E7%A9%BF%E9%80%8F"><span class="toc-number">16.</span> <span class="toc-text">è¯¦è§£ Scoped å’Œæ ·å¼ç©¿é€</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#bem-%E6%9E%B6%E6%9E%84"><span class="toc-number">16.0.1.</span> <span class="toc-text">bem æ¶æ„</span></a></li></ol></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93v-for"><span class="toc-number">17.</span> <span class="toc-text">åˆ—è¡¨æ¸²æŸ“ï¼šv-for</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF%E5%BC%95%E7%94%A8"><span class="toc-number">18.</span> <span class="toc-text">æ¨¡æ¿å¼•ç”¨</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E9%97%B4%E9%80%9A%E4%BF%A1"><span class="toc-number">19.</span> <span class="toc-text">ç»„ä»¶é—´é€šä¿¡</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%88%B6%E4%BC%A0%E5%AD%90"><span class="toc-number">19.1.</span> <span class="toc-text">çˆ¶ä¼ å­</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%B6%E4%BC%A0%E5%AD%90props"><span class="toc-number">19.1.1.</span> <span class="toc-text">çˆ¶ä¼ å­ï¼šprops</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%B6%E4%BC%A0%E5%AD%90slot-%E6%8F%92%E6%A7%BD"><span class="toc-number">19.1.2.</span> <span class="toc-text">çˆ¶ä¼ å­ï¼šslot æ’æ§½</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B8%B2%E6%9F%93%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">19.1.2.1.</span> <span class="toc-text">æ¸²æŸ“ä½œç”¨åŸŸ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E5%86%85%E5%AE%B9"><span class="toc-number">19.1.2.2.</span> <span class="toc-text">é»˜è®¤å†…å®¹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD"><span class="toc-number">19.1.2.3.</span> <span class="toc-text">å…·åæ’æ§½</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD"><span class="toc-number">19.1.2.4.</span> <span class="toc-text">ä½œç”¨åŸŸæ’æ§½</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8%E7%88%B6%E4%BC%A0%E5%AD%90"><span class="toc-number">19.1.3.</span> <span class="toc-text">ç®€å•ä½¿ç”¨çˆ¶ä¼ å­</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#props"><span class="toc-number">19.1.3.1.</span> <span class="toc-text">props</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#slot-%E6%8F%92%E6%A7%BD"><span class="toc-number">19.1.3.2.</span> <span class="toc-text">slot æ’æ§½</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD-2"><span class="toc-number">19.1.3.3.</span> <span class="toc-text">å…·åæ’æ§½</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E7%BB%99%E7%88%B6%E4%B9%8B%E4%B8%80emits"><span class="toc-number">19.2.</span> <span class="toc-text">å­ç»™çˆ¶ä¹‹ä¸€ï¼šEmits</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E7%BB%99%E7%88%B6%E4%B9%8B%E4%BA%8Cdefineexpose"><span class="toc-number">19.3.</span> <span class="toc-text">å­ç»™çˆ¶ä¹‹äºŒï¼šdefineExpose</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E5%8F%8C%E5%90%91%E6%95%B0%E6%8D%AEprops-emits-v-model"><span class="toc-number">19.4.</span> <span class="toc-text">çˆ¶å­ç»„ä»¶åŒå‘æ•°æ®ï¼šprops + emits + v-model</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%84%E5%BC%9F%E7%BB%84%E4%BB%B6%E9%97%B4%E9%80%9A%E4%BF%A1"><span class="toc-number">19.5.</span> <span class="toc-text">å…„å¼Ÿç»„ä»¶é—´é€šä¿¡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#mitt-%E6%8F%92%E4%BB%B6%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0%E5%85%84%E5%BC%9F%E7%BB%84%E4%BB%B6%E9%97%B4%E9%80%9A%E4%BF%A1"><span class="toc-number">19.5.1.</span> <span class="toc-text">mitt æ’ä»¶æ–¹å¼å®ç°å…„å¼Ÿç»„ä»¶é—´é€šä¿¡</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#label-%E6%A0%87%E7%AD%BE"><span class="toc-number">20.</span> <span class="toc-text">label æ ‡ç­¾</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#h-%E5%87%BD%E6%95%B0"><span class="toc-number">21.</span> <span class="toc-text">h å‡½æ•°</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4-2"><span class="toc-number">22.</span> <span class="toc-text">è‡ªå®šä¹‰æŒ‡ä»¤</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">22.1.</span> <span class="toc-text">æŒ‡ä»¤çš„ç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4%E7%BB%83%E4%B9%A0%E6%97%B6%E9%97%B4%E6%88%B3"><span class="toc-number">22.2.</span> <span class="toc-text">è‡ªå®šä¹‰æŒ‡ä»¤ç»ƒä¹ ï¼›æ—¶é—´æˆ³</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vue-%E6%8F%92%E4%BB%B6"><span class="toc-number">23.</span> <span class="toc-text">Vue æ’ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6%E7%9A%84%E7%BC%96%E5%86%99%E6%96%B9%E5%BC%8F"><span class="toc-number">23.1.</span> <span class="toc-text">æ’ä»¶çš„ç¼–å†™æ–¹å¼</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vue3-%E5%A6%82%E4%BD%95%E6%B3%A8%E5%86%8C%E5%85%A8%E5%B1%80%E7%BB%84%E4%BB%B6%E6%96%B9%E6%B3%95%E6%9B%BF%E4%BB%A3-vue2-%E7%9A%84-vueprototype"><span class="toc-number">24.</span> <span class="toc-text">vue3 å¦‚ä½•æ³¨å†Œå…¨å±€ç»„ä»¶ &#x2F; æ–¹æ³•ï¼ˆæ›¿ä»£ vue2 çš„ Vue.prototypeï¼‰</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB-transition"><span class="toc-number">25.</span> <span class="toc-text">è¿‡æ¸¡åŠ¨ç”» transition</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#transition-group-%E8%BF%87%E6%B8%A1%E5%88%97%E8%A1%A8"><span class="toc-number">26.</span> <span class="toc-text">transition-group è¿‡æ¸¡åˆ—è¡¨</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#tsx"><span class="toc-number">27.</span> <span class="toc-text">TSX</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vuex-%E7%9A%84%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-number">28.</span> <span class="toc-text">Vuex çš„çŠ¶æ€ç®¡ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#store-%E4%BB%93%E5%BA%93"><span class="toc-number">28.1.</span> <span class="toc-text">Store ä»“åº“</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E4%B8%AD%E4%BD%BF%E7%94%A8-store"><span class="toc-number">28.1.1.</span> <span class="toc-text">ç»„ä»¶ä¸­ä½¿ç”¨ store</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E4%B8%80%E7%8A%B6%E6%80%81%E6%A0%91"><span class="toc-number">28.1.2.</span> <span class="toc-text">å•ä¸€çŠ¶æ€æ ‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E8%8E%B7%E5%8F%96%E7%8A%B6%E6%80%81"><span class="toc-number">28.1.3.</span> <span class="toc-text">ç»„ä»¶è·å–çŠ¶æ€</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8-setup-%E4%B8%AD%E4%BD%BF%E7%94%A8-mapstate"><span class="toc-number">28.1.3.1.</span> <span class="toc-text">åœ¨ setup ä¸­ä½¿ç”¨ mapState</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#getters-%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">28.1.3.2.</span> <span class="toc-text">getters çš„åŸºæœ¬ä½¿ç”¨</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mutation-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">28.1.4.</span> <span class="toc-text">Mutation åŸºæœ¬ä½¿ç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mapmutations-%E8%BE%85%E5%8A%A9%E5%87%BD%E6%95%B0"><span class="toc-number">28.1.5.</span> <span class="toc-text">mapMutations è¾…åŠ©å‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#actions-%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">28.1.6.</span> <span class="toc-text">actions çš„åŸºæœ¬ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#actions-%E7%9A%84%E5%88%86%E5%8F%91%E6%93%8D%E4%BD%9C"><span class="toc-number">28.1.6.1.</span> <span class="toc-text">actions çš„åˆ†å‘æ“ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#actions-%E7%9A%84%E8%BE%85%E5%8A%A9%E5%87%BD%E6%95%B0"><span class="toc-number">28.1.6.2.</span> <span class="toc-text">actions çš„è¾…åŠ©å‡½æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#actions-%E7%9A%84%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C"><span class="toc-number">28.1.6.3.</span> <span class="toc-text">actions çš„å¼‚æ­¥æ“ä½œ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#module-%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">28.1.7.</span> <span class="toc-text">module çš„åŸºæœ¬ä½¿ç”¨</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#nexttick"><span class="toc-number">29.</span> <span class="toc-text">nextTick</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#definecomponent"><span class="toc-number">30.</span> <span class="toc-text">defineComponent</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#teleport-%E4%BC%A0%E9%80%81%E7%BB%84%E4%BB%B6"><span class="toc-number">31.</span> <span class="toc-text">Teleport ä¼ é€ç»„ä»¶</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#keep-alive-%E7%BC%93%E5%AD%98%E7%BB%84%E4%BB%B6"><span class="toc-number">32.</span> <span class="toc-text">keep-alive ç¼“å­˜ç»„ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E5%90%AF-keep-alive-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%9A%84%E5%8F%98%E5%8C%96"><span class="toc-number">32.0.1.</span> <span class="toc-text">å¼€å¯ keep-alive ç”Ÿå‘½å‘¨æœŸçš„å˜åŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#include-%E5%92%8C-exclude"><span class="toc-number">32.0.2.</span> <span class="toc-text">include å’Œ exclude</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#component-%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6"><span class="toc-number">33.</span> <span class="toc-text">Component åŠ¨æ€ç»„ä»¶</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6"><span class="toc-number">34.</span> <span class="toc-text">å¼‚æ­¥ç»„ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B6%E5%B1%82-await-%E6%8A%80%E6%9C%AF"><span class="toc-number">34.1.</span> <span class="toc-text">é¡¶å±‚ await æŠ€æœ¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#suspense"><span class="toc-number">34.2.</span> <span class="toc-text">suspense</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF%E4%B8%80"><span class="toc-number">34.3.</span> <span class="toc-text">åœºæ™¯ä¸€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF%E4%BA%8C"><span class="toc-number">34.4.</span> <span class="toc-text">åœºæ™¯äºŒ</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#mixin-%E6%B7%B7%E5%85%A5"><span class="toc-number">35.</span> <span class="toc-text">Mixin æ··å…¥</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#mixin-%E5%92%8C-vuex-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">35.1.</span> <span class="toc-text">Mixin å’Œ Vuex çš„åŒºåˆ«ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">35.2.</span> <span class="toc-text">ä¼˜ç¼ºç‚¹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%98%E7%82%B9"><span class="toc-number">35.2.1.</span> <span class="toc-text">ä¼˜ç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%BA%E7%82%B9"><span class="toc-number">35.2.2.</span> <span class="toc-text">ç¼ºç‚¹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">35.3.</span> <span class="toc-text">ä½¿ç”¨</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#provide-%E5%92%8C-inject-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5"><span class="toc-number">36.</span> <span class="toc-text">Provide å’Œ Inject ä¾èµ–æ³¨å…¥</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vuex"><span class="toc-number">37.</span> <span class="toc-text">vuex</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#vuex-%E6%8C%81%E4%B9%85%E5%8C%96%E5%AD%98%E5%82%A8%E6%8F%92%E4%BB%B6%E5%AE%9E%E7%8E%B0"><span class="toc-number">37.1.</span> <span class="toc-text">vuex æŒä¹…åŒ–å­˜å‚¨ã€æ’ä»¶å®ç°ã€‘</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#pinia"><span class="toc-number">38.</span> <span class="toc-text">Pinia</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#pinia-%E5%92%8C-vuex-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">38.1.</span> <span class="toc-text">pinia å’Œ vuex çš„åŒºåˆ«ï¼š</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pinia-%E4%BD%BF%E7%94%A8"><span class="toc-number">38.2.</span> <span class="toc-text">pinia ä½¿ç”¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E4%BF%AE%E6%94%B9-pinia-%E7%9A%84-state-%E6%95%B0%E6%8D%AEstoretorefs"><span class="toc-number">38.3.</span> <span class="toc-text">ç»„ä»¶ä¿®æ”¹ pinia çš„ state æ•°æ®: storeToRefs</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9"><span class="toc-number">38.4.</span> <span class="toc-text">æ‰¹é‡ä¿®æ”¹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pinia-%E5%88%86%E6%A8%A1%E5%9D%97"><span class="toc-number">38.5.</span> <span class="toc-text">pinia åˆ†æ¨¡å—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pinia-%E6%8C%81%E4%B9%85%E5%8C%96%E5%AD%98%E5%82%A8%E6%8F%92%E4%BB%B6%E5%AE%9E%E7%8E%B0"><span class="toc-number">38.6.</span> <span class="toc-text">pinia æŒä¹…åŒ–å­˜å‚¨ [æ’ä»¶å®ç°]</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD"><span class="toc-number">39.</span> <span class="toc-text">å›¾ç‰‡æ‡’åŠ è½½</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#event-loop-%E5%92%8C-nexttick"><span class="toc-number">40.</span> <span class="toc-text">event loop å’Œ nextTick</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#docker-%E7%A2%B0%E6%92%9E-vue3"><span class="toc-number">41.</span> <span class="toc-text">docker ç¢°æ’ vue3</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">42.</span> <span class="toc-text">ç¯å¢ƒå˜é‡</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vue3-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="toc-number">43.</span> <span class="toc-text">Vue3 æ€§èƒ½ä¼˜åŒ–</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B7%A8%E5%9F%9F"><span class="toc-number">44.</span> <span class="toc-text">è·¨åŸŸ</span></a></li></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By è°å·äº†æˆ‘çš„ç”µé¥­é”…</div><div id="workboard"><img class="workSituationImg boardsign" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="null" alt="è·ç¦»æœˆå…¥25kä¹Ÿå°±è¿˜å·®ä¸€ä¸ªå¤§ä½¬å¸¦æˆ‘~" title="è·ç¦»æœˆå…¥25kä¹Ÿå°±è¿˜å·®ä¸€ä¸ªå¤§ä½¬å¸¦æˆ‘~"><div id="runtimeTextTip"></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="åšå®¢æ¡†æ¶ä¸ºHexo_v5.4.0" title="åšå®¢æ¡†æ¶ä¸ºHexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="åšå®¢æ¡†æ¶ä¸ºHexo_v5.4.0"></a><a class="github-badge" target="_blank" href="https://anzhiy.cn/" style="margin-inline:5px" data-title="æœ¬ç«™ä½¿ç”¨AnZhiYuä¸»é¢˜" title="æœ¬ç«™ä½¿ç”¨AnZhiYuä¸»é¢˜"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pan.anzhiy.cn/d/anzhiyu/svg/Theme-AnZhiYu-2E67D3.svg" alt="æœ¬ç«™ä½¿ç”¨AnZhiYuä¸»é¢˜"></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="æœ¬ç«™é¡¹ç›®ç”±Githubæ‰˜ç®¡" title="æœ¬ç«™é¡¹ç›®ç”±Githubæ‰˜ç®¡"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="æœ¬ç«™é¡¹ç›®ç”±Githubæ‰˜ç®¡"></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="æœ¬ç«™é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯" title="æœ¬ç«™é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="æœ¬ç«™é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯"></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="æœ¬ç«™é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯" title="æœ¬ç«™é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="æœ¬ç«™é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯"></a></p></div></footer><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display:none"></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/head.png" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">æ–‡ç« </div><div class="length-num">24</div></a><a href="/tags/" title="tag"><div class="headline">æ ‡ç­¾</div><div class="length-num">22</div></a><a href="/categories/" title="category"><div class="headline">åˆ†ç±»</div><div class="length-num">12</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span>æ–‡ç« </span></a><ul class="menus_item_child" style="left:-79px"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i><span> æ—¶é—´è½´</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i><span> æ ‡ç­¾</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/link/"><span>å‹äººå¸</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span>æˆ‘çš„</span></a><ul class="menus_item_child" style="left:-79px"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i><span> å…³äºæœ¬äºº</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i><span> ç›¸å†Œé›†</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size:.9em"></i><span> é—²è¨€ç¢è¯­</span></a></li></ul></div></div></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="center-console" type="button" title="ä¸­æ§å°"><i class="anzhiyufont anzhiyu-icon-fish"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="console"><div class="close-btn" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-xmark" style="font-size:35px"></i></div><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" alt="wechat" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/null"></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="alipay" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"></a><div class="post-qr-code-desc">alipay</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"></div><div class="console-card-group-right"><div class="console-card tags" onclick="anzhiyu.hideConsole()"><div class="card-content"><div class="author-content-item-tips">å…´è¶£ç‚¹</div><span class="author-content-item-title">å¯»æ‰¾ä½ æ„Ÿå…´è¶£çš„é¢†åŸŸ</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Element-Plus/" style="font-size:1.22em;color:#5f0fb0">Element Plus<sup>2</sup></a><a href="/tags/HTML/" style="font-size:1.15em;color:#23b18b">HTML<sup>1</sup></a><a href="/tags/JavaScript/" style="font-size:1.22em;color:#5291b1">JavaScript<sup>2</sup></a><a href="/tags/MATLAB/" style="font-size:1.15em;color:#400e13">MATLAB<sup>1</sup></a><a href="/tags/Nginx/" style="font-size:1.15em;color:#7c688d">Nginx<sup>1</sup></a><a href="/tags/ROOT/" style="font-size:1.15em;color:#281d1e">ROOT<sup>1</sup></a><a href="/tags/TypeScript/" style="font-size:1.45em;color:#758980">TypeScript<sup>6</sup></a><a href="/tags/Vue/" style="font-size:1.15em;color:#b74b21">Vue<sup>1</sup></a><a href="/tags/VueRouter/" style="font-size:1.15em;color:#47ae5c">VueRouter<sup>1</sup></a><a href="/tags/VueUse/" style="font-size:1.15em;color:#44314d">VueUse<sup>1</sup></a><a href="/tags/axios%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85/" style="font-size:1.15em;color:#c00394">axiosäºŒæ¬¡å°è£…<sup>1</sup></a><a href="/tags/css/" style="font-size:1.15em;color:#b74f4d">css<sup>1</sup></a><a href="/tags/electron/" style="font-size:1.15em;color:#a98f34">electron<sup>1</sup></a><a href="/tags/pinia/" style="font-size:1.3em;color:#713c47">pinia<sup>3</sup></a><a href="/tags/uni-app/" style="font-size:1.15em;color:#b97047">uni-app<sup>1</sup></a><a href="/tags/vite/" style="font-size:1.3em;color:#597584">vite<sup>3</sup></a><a href="/tags/vue3/" style="font-size:1.38em;color:#74a78d">vue3<sup>4</sup></a><a href="/tags/%E5%B0%8F%E6%8A%80%E5%B7%A7/" style="font-size:1.15em;color:#403705">å°æŠ€å·§<sup>1</sup></a><a href="/tags/%E6%97%A5%E5%B8%B8/" style="font-size:1.15em;color:#22563a">æ—¥å¸¸<sup>1</sup></a><a href="/tags/%E6%9D%82%E8%B0%88/" style="font-size:1.15em;color:#2fb5c4">æ‚è°ˆ<sup>1</sup></a><a href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96/" style="font-size:1.15em;color:#574a32">è‡ªåŠ¨åŒ–<sup>1</sup></a><a href="/tags/%E8%B7%AF%E7%94%B1/" style="font-size:1.15em;color:#6f8b44">è·¯ç”±<sup>1</sup></a></div></div><hr></div></div><div class="console-card history" onclick="anzhiyu.hideConsole()"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>æ–‡ç« </span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>å½’æ¡£</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">äº”æœˆ 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">å››æœˆ 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">9</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/03/"><span class="card-archive-list-date">ä¸‰æœˆ 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/01/"><span class="card-archive-list-date">ä¸€æœˆ 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/10/"><span class="card-archive-list-date">åæœˆ 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>ç¯‡</span></div></a></li></ul></div><hr></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" onclick="rm.switchDarkMode()" title="æ˜¾ç¤ºæ¨¡å¼åˆ‡æ¢" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="è¾¹æ æ˜¾ç¤ºæ§åˆ¶"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="çƒ­è¯„å¼€å…³"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="éŸ³ä¹å¼€å…³"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size:1rem"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>å¤åˆ¶é€‰ä¸­æ–‡æœ¬</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>ç²˜è´´æ–‡æœ¬</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>å¼•ç”¨åˆ°è¯„è®º</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>æ–°çª—å£æ‰“å¼€</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>å¤åˆ¶é“¾æ¥åœ°å€</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>å¤åˆ¶æ­¤å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>ä¸‹è½½æ­¤å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>æ–°çª—å£æ‰“å¼€å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>ç«™å†…æœç´¢</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>ç™¾åº¦æœç´¢</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>æ’­æ”¾éŸ³ä¹</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>åˆ‡æ¢åˆ°ä¸Šä¸€é¦–</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>åˆ‡æ¢åˆ°ä¸‹ä¸€é¦–</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display:none"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>æŸ¥çœ‹æ‰€æœ‰æ­Œæ›²</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>å¤åˆ¶æ­Œå</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>éšä¾¿é€›é€›</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>åšå®¢åˆ†ç±»</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>æ–‡ç« æ ‡ç­¾</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>å¤åˆ¶åœ°å€</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">å…³é—­çƒ­è¯„</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">æ·±è‰²æ¨¡å¼</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>è½‰ç‚ºç¹é«”</span></a></div></div><div id="rightmenu-mask"></div><div id="he-plugin-simple"></div><script>var WIDGET={CONFIG:{modules:"0124",background:"2",tmpColor:"FFFFFF",tmpSize:"16",cityColor:"FFFFFF",citySize:"16",aqiColor:"E8D87B",aqiSize:"16",weatherIconSize:"24",alertIconSize:"18",padding:"10px 10px 10px 10px",shadow:"0",language:"auto",borderRadius:"20",fixed:"true",vertical:"top",horizontal:"left",left:"20",top:"7.1",key:"df245676fb434a0691ead1c63341cd94"}}</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script><div><script src="https://npm.elemecdn.com/hexo-theme-anzhiyu@1.1.8/source/js/utils.js"></script><script src="https://npm.elemecdn.com/hexo-theme-anzhiyu@1.1.8/source/js/main.js"></script><script src="https://npm.elemecdn.com/hexo-theme-anzhiyu@1.1.8/source/js/tw_cn.js"></script><script src="https://npm.elemecdn.com/@fancyapps/ui@4.0.31/dist/fancybox.umd.js"></script><script src="https://npm.elemecdn.com/instant.page@5.1.1/instantpage.js" type="module"></script><script src="https://npm.elemecdn.com/vanilla-lazyload@17.3.1/dist/lazyload.iife.min.js"></script><script src="https://npm.elemecdn.com/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// æ¶ˆé™¤æ§åˆ¶å°æ‰“å°
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  console.log(1)
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //åœ¨æ¢å¤å‰è¾“å‡ºæ—¥å¿—
  const grt = new Date("10/15/2022 19:59:45"); //æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `å’Œè¿™ç¾¤è™«è±¸åœ¨ä¸€èµ·,æ€ä¹ˆTMèƒ½æå¥½æ”¿æ²»!`,
    `
        
       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—
      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â•šâ•â•â–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ•”â•  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â•šâ–ˆâ–ˆâ•”â•  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
      â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•â•â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•   â•šâ•â•    â•šâ•â•â•â•â•â•
        
        `,
    "å·²ä¸Šçº¿",
    dnum,
    "å¤©",
    "Â©2022 By Eucli",
  ];
  const ascll2 = [`NCC2-036`, `è°ƒç”¨å‰ç½®æ‘„åƒå¤´æ‹ç…§æˆåŠŸï¼Œè¯†åˆ«ä¸ºã€å°ç¬¨è›‹ã€‘.`, `Photo captured: `, `ğŸ¤ª`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#3b70fc",
      "",
      "color:#3b70fc",
      "color:#3b70fc",
      "",
      "color:#3b70fc",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c ä½ å¥½ï¼Œå°ç¬¨è›‹.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c âš¡ Powered by Eucli %c ä½ æ­£åœ¨è®¿é—® è°å·äº†æˆ‘çš„ç”µé¥­é”… çš„åšå®¢.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c ä½ å·²æ‰“å¼€æ§åˆ¶å°.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c ä½ ç°åœ¨æ­£å¤„äºç›‘æ§ä¸­.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script async>(function () {
  var grt = new Date("10/15/2022 19:59:45"); //è®¾ç½®ç½‘ç«™ä¸Šçº¿æ—¶é—´
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // è®¡ç®—å¹¶æ›´æ–°å¤©æ•°ã€å°æ—¶æ•°ã€åˆ†é’Ÿæ•°å’Œç§’æ•°
  function updateTime() {
    now = new Date(); // æ›´æ–° now çš„å€¼
    nowHour = now.getHours(); // æ›´æ–° nowHour çš„å€¼
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // æ›´æ–°ç½‘é¡µä¸­æ˜¾ç¤ºçš„ç½‘ç«™è¿è¡Œæ—¶é—´
  function updateHtml() {
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // å¦‚æœæ˜¯ä¸Šç­æ—¶é—´ï¼Œé»˜è®¤å°±æ˜¯"å®‰çŸ¥é±¼-ä¸Šç­æ‘¸é±¼ä¸­.svg"å›¾ç‰‡ï¼Œä¸éœ€è¦æ›´æ”¹
      currentTimeHtml = `æœ¬ç«™å±…ç„¶è¿è¡Œäº† ${dnum} å¤©<span id='runtime'> ${hnum} å°æ—¶ ${mnum} åˆ† ${snum} ç§’ </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // å¦‚æœæ˜¯ä¸‹ç­æ—¶é—´ï¼Œæ’å…¥"å®‰çŸ¥é±¼-ä¸‹ç­å•¦.svg"å›¾ç‰‡
      let img = document.querySelector("#workboard .workSituationImg");
      img.src = "";
      img.title = "ä¸‹ç­äº†å°±è¯¥å¼€å¼€å¿ƒå¿ƒçš„ç©è€ï¼Œå˜¿å˜¿~";
      img.alt = "ä¸‹ç­äº†å°±è¯¥å¼€å¼€å¿ƒå¿ƒçš„ç©è€ï¼Œå˜¿å˜¿~";

      currentTimeHtml = `æœ¬ç«™å±…ç„¶è¿è¡Œäº† ${dnum} å¤©<span id='runtime'> ${hnum} å°æ—¶ ${mnum} åˆ† ${snum} ç§’ </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><script src="https://npm.elemecdn.com/algoliasearch@4.14.2/dist/algoliasearch-lite.umd.js"></script><script src="https://npm.elemecdn.com/instantsearch.js@4.46.1/dist/instantsearch.production.min.js"></script><script src="https://npm.elemecdn.com/hexo-theme-anzhiyu@1.1.8/source/js/search/algolia.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>//åŠ¨æ€æ ‡é¢˜
let leaveTitle = 'w(ï¾ŸĞ”ï¾Ÿ)w ä¸è¦èµ°ï¼å†çœ‹çœ‹å˜›ï¼';
let backTitle = 'â™ª(^âˆ‡^*)æ¬¢è¿è‚¥æ¥ï¼';
let OriginTitile = document.title
let titleTime
document.addEventListener('visibilitychange', function () {
  if (document.hidden) {
    //ç¦»å¼€å½“å‰é¡µé¢æ—¶æ ‡ç­¾æ˜¾ç¤ºå†…å®¹
    document.title = leaveTitle
    clearTimeout(titleTime)
  } else {
    //è¿”å›å½“å‰é¡µé¢æ—¶æ ‡ç­¾æ˜¾ç¤ºå†…å®¹
    document.title = backTitle + OriginTitile
    //ä¸¤ç§’åå˜å›æ­£å¸¸æ ‡é¢˜
    titleTime = setTimeout(function () {
      document.title = OriginTitile
    }, 2000)
  }
})</script><script data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/catalog-bar/catalog-bar.js"></script><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/categoryBar/categoryBar.js"></script><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script>// åˆå§‹åŒ–å‡½æ•°
let rm = {};

//ç¦æ­¢å›¾ç‰‡æ‹–æ‹½
let imgElements = document.getElementsByTagName("img");
for (let i = 0; i < imgElements.length; i++) {
  imgElements[i].addEventListener("dragstart", function (event) {
    event.preventDefault();
  });
}

// æ˜¾ç¤ºèœå•
rm.showRightMenu = function (isTrue, x = 0, y = 0) {
  console.info(x, y)
  let rightMenu = document.getElementById("rightMenu");
  rightMenu.style.top = x + "px";
  rightMenu.style.left = y + "px";
  if (isTrue) {
    rightMenu.style.display = "block";
    stopMaskScroll();
  } else {
    rightMenu.style.display = "none";
  }
};

// éšè—èœå•
rm.hideRightMenu = function () {
  rm.showRightMenu(false);
  let rightMenuMask = document.querySelector("#rightmenu-mask");
  rightMenuMask.style.display = "none";
};

// å°ºå¯¸
let rmWidth = document.getElementById("rightMenu").offsetWidth;
let rmHeight = document.getElementById("rightMenu").offsetHeight;

// é‡æ–°å®šä¹‰å°ºå¯¸
rm.reloadrmSize = function () {
  rightMenu.style.visibility = "hidden";
  rightMenu.style.display = "block";
  // è·å–å®½åº¦å’Œé«˜åº¦
  rmWidth = document.getElementById("rightMenu").offsetWidth;
  rmHeight = document.getElementById("rightMenu").offsetHeight;
  rightMenu.style.visibility = "visible";
};

// è·å–ç‚¹å‡»çš„href
let domhref = "";
let domImgSrc = "";
let globalEvent = null;

// ç›‘å¬å³é”®åˆå§‹åŒ–
window.oncontextmenu = function (event) {
  if (document.body.clientWidth > 768) {
    let pageX = event.clientX + 10; //åŠ 10æ˜¯ä¸ºäº†é˜²æ­¢æ˜¾ç¤ºæ—¶é¼ æ ‡é®åœ¨èœå•ä¸Š
    let pageY = event.clientY;

    //å…¶ä»–é¢å¤–èœå•
    const $rightMenuOther = document.querySelector(".rightMenuOther");
    const $rightMenuPlugin = document.querySelector(".rightMenuPlugin");
    const $rightMenuCopyText = document.querySelector("#menu-copytext");
    const $rightMenuPasteText = document.querySelector("#menu-pastetext");
    const $rightMenuCommentText = document.querySelector("#menu-commenttext");
    const $rightMenuNewWindow = document.querySelector("#menu-newwindow");
    const $rightMenuNewWindowImg = document.querySelector("#menu-newwindowimg");
    const $rightMenuCopyLink = document.querySelector("#menu-copylink");
    const $rightMenuCopyImg = document.querySelector("#menu-copyimg");
    const $rightMenuDownloadImg = document.querySelector("#menu-downloadimg");
    const $rightMenuSearch = document.querySelector("#menu-search");
    const $rightMenuSearchBaidu = document.querySelector("#menu-searchBaidu");
    const $rightMenuMusicToggle = document.querySelector("#menu-music-toggle");
    const $rightMenuMusicBack = document.querySelector("#menu-music-back");
    const $rightMenuMusicForward = document.querySelector("#menu-music-forward");
    const $rightMenuMusicPlaylist = document.querySelector("#menu-music-playlist");
    const $rightMenuMusicCopyMusicName = document.querySelector("#menu-music-copyMusicName");

    let href = event.target.href;
    let imgsrc = event.target.currentSrc;

    // åˆ¤æ–­æ¨¡å¼ æ‰©å±•æ¨¡å¼ä¸ºæœ‰äº‹ä»¶
    let pluginMode = false;
    $rightMenuOther.style.display = "block";
    globalEvent = event;

    // æ£€æŸ¥æ˜¯å¦éœ€è¦å¤åˆ¶ æ˜¯å¦æœ‰é€‰ä¸­æ–‡æœ¬
    if (selectTextNow && window.getSelection()) {
      pluginMode = true;
      $rightMenuCopyText.style.display = "block";
      $rightMenuCommentText.style.display = "block";
      $rightMenuSearch.style.display = "block";
      $rightMenuSearchBaidu.style.display = "block";
    } else {
      $rightMenuCopyText.style.display = "none";
      $rightMenuCommentText.style.display = "none";
      $rightMenuSearchBaidu.style.display = "none";
      $rightMenuSearch.style.display = "none";
    }

    //æ£€æŸ¥æ˜¯å¦å³é”®ç‚¹å‡»äº†é“¾æ¥aæ ‡ç­¾
    if (href) {
      pluginMode = true;
      $rightMenuNewWindow.style.display = "block";
      $rightMenuCopyLink.style.display = "block";
      domhref = href;
    } else {
      $rightMenuNewWindow.style.display = "none";
      $rightMenuCopyLink.style.display = "none";
    }

    //æ£€æŸ¥æ˜¯å¦éœ€è¦å¤åˆ¶å›¾ç‰‡
    if (imgsrc) {
      pluginMode = true;
      $rightMenuCopyImg.style.display = "block";
      $rightMenuDownloadImg.style.display = "block";
      $rightMenuNewWindowImg.style.display = "block";
      document.getElementById("rightMenu").style.width="12rem"
      domImgSrc = imgsrc;
    } else {
      $rightMenuCopyImg.style.display = "none";
      $rightMenuDownloadImg.style.display = "none";
      $rightMenuNewWindowImg.style.display = "none";
    }

    // åˆ¤æ–­æ˜¯å¦ä¸ºè¾“å…¥æ¡†
    if (event.target.tagName.toLowerCase() === "input" || event.target.tagName.toLowerCase() === "textarea") {
      pluginMode = true;
      $rightMenuPasteText.style.display = "block";
    } else {
      $rightMenuPasteText.style.display = "none";
    }
    const navMusicEl = document.querySelector("#nav-music");
    //åˆ¤æ–­æ˜¯å¦æ˜¯éŸ³ä¹
    if (navMusicEl && navMusicEl.contains(event.target)) {
      pluginMode = true;
      $rightMenuMusicToggle.style.display = "block";
      $rightMenuMusicBack.style.display = "block";
      $rightMenuMusicForward.style.display = "block";
      $rightMenuMusicPlaylist.style.display = "block";
      $rightMenuMusicCopyMusicName.style.display = "block";
    } else {
      $rightMenuMusicToggle.style.display = "none";
      $rightMenuMusicBack.style.display = "none";
      $rightMenuMusicForward.style.display = "none";
      $rightMenuMusicPlaylist.style.display = "none";
      $rightMenuMusicCopyMusicName.style.display = "none";
    }

    // å¦‚æœä¸æ˜¯æ‰©å±•æ¨¡å¼åˆ™éšè—æ‰©å±•æ¨¡å—
    if (pluginMode) {
      $rightMenuOther.style.display = "none";
      $rightMenuPlugin.style.display = "block";
    } else {
      $rightMenuPlugin.style.display = "none";
    }

    rm.reloadrmSize();

    // é¼ æ ‡é»˜è®¤æ˜¾ç¤ºåœ¨é¼ æ ‡å³ä¸‹æ–¹ï¼Œå½“é¼ æ ‡é å³æˆ–é ä¸‹æ—¶ï¼Œå°†èœå•æ˜¾ç¤ºåœ¨é¼ æ ‡å·¦æ–¹\ä¸Šæ–¹
    if (pageX + rmWidth > window.innerWidth) {
      pageX -= rmWidth + 10;
    }
    if (pageY + rmHeight > window.innerHeight) {
      pageY -= pageY + rmHeight - window.innerHeight;
    }

    rm.showRightMenu(true, pageY, pageX);
    document.getElementById("rightmenu-mask").style.display = "flex";
    return false;
  }
};

// ä¸‹è½½å›¾ç‰‡çŠ¶æ€
rm.downloadimging = false;

// å¤åˆ¶å›¾ç‰‡åˆ°å‰ªè´´æ¿
rm.writeClipImg = function (imgsrc) {
  console.log("æŒ‰ä¸‹å¤åˆ¶");
  rm.hideRightMenu();
  anzhiyu.snackbarShow("æ­£åœ¨ä¸‹è½½ä¸­ï¼Œè¯·ç¨å", false, 10000);
  if (rm.downloadimging == false) {
    rm.downloadimging = true;
    setTimeout(function () {
      copyImage(imgsrc);
      anzhiyu.snackbarShow("å¤åˆ¶æˆåŠŸï¼å›¾ç‰‡å·²æ·»åŠ ç›²æ°´å°ï¼Œè¯·éµå®ˆç‰ˆæƒåè®®");
      rm.downloadimging = false;
    }, "10000");
  }
};

function imageToBlob(imageURL) {
  const img = new Image();
  const c = document.createElement("canvas");
  const ctx = c.getContext("2d");
  img.crossOrigin = "";
  img.src = imageURL;
  return new Promise(resolve => {
    img.onload = function () {
      c.width = this.naturalWidth;
      c.height = this.naturalHeight;
      ctx.drawImage(this, 0, 0);
      c.toBlob(
        blob => {
          // here the image is a blob
          resolve(blob);
        },
        "image/png",
        0.75
      );
    };
  });
}

async function copyImage(imageURL) {
  const blob = await imageToBlob(imageURL);
  const item = new ClipboardItem({ "image/png": blob });
  navigator.clipboard.write([item]);
}

rm.switchDarkMode = function () {
  // Switch Between Light And Dark Mode
  const nowMode = document.documentElement.getAttribute("data-theme") === "dark" ? "dark" : "light";
  if (nowMode === "light") {
    activateDarkMode();
    saveToLocal.set("theme", "dark", 2);
    GLOBAL_CONFIG.Snackbar !== undefined && anzhiyu.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night);
    document.querySelector(".menu-darkmode-text").textContent = "æµ…è‰²æ¨¡å¼";
  } else {
    activateLightMode();
    saveToLocal.set("theme", "light", 2);
    GLOBAL_CONFIG.Snackbar !== undefined && anzhiyu.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day);
    document.querySelector(".menu-darkmode-text").textContent = "æ·±è‰²æ¨¡å¼";
  }
  // handle some cases
  typeof runMermaid === "function" && window.runMermaid();
  rm.hideRightMenu();
  anzhiyu.darkModeStatus();
};

rm.copyUrl = function (id) {
  const input = document.createElement("input"); // Create a new <input> element
  input.id = "copyVal"; // Set the id of the new element to "copyVal"
  document.body.appendChild(input); // Append the new element to the end of the <body> element
  
  const text = id;
  input.value = text;
  input.select();
  input.setSelectionRange(0, input.value.length);
  document.execCommand("copy");
  
  input.remove(); // Remove the <input> element from the DOM
};

function stopMaskScroll() {
  if (document.getElementById("rightmenu-mask")) {
    let xscroll = document.getElementById("rightmenu-mask");
    xscroll.addEventListener(
      "mousewheel",
      function (e) {
        //é˜»æ­¢æµè§ˆå™¨é»˜è®¤æ–¹æ³•
        rm.hideRightMenu();
        // e.preventDefault();
      },
      false
    );
  }
  if (document.getElementById("rightMenu")) {
    let xscroll = document.getElementById("rightMenu");
    xscroll.addEventListener(
      "mousewheel",
      function (e) {
        //é˜»æ­¢æµè§ˆå™¨é»˜è®¤æ–¹æ³•
        rm.hideRightMenu();
        // e.preventDefault();
      },
      false
    );
  }
}

rm.rightmenuCopyText = function (txt) {
  if (navigator.clipboard) {
    navigator.clipboard.writeText(txt);
  }
  rm.hideRightMenu();
};

rm.copyPageUrl = function () {
  var url = window.location.href;
  rm.copyUrl(url);
  anzhiyu.snackbarShow("å¤åˆ¶æœ¬é¡µé“¾æ¥åœ°å€æˆåŠŸ", false, 2000);
  rm.hideRightMenu();
};

rm.sharePage = function () {
  var content = window.location.href;
  rm.copyUrl(url);
  anzhiyu.snackbarShow("å¤åˆ¶æœ¬é¡µé“¾æ¥åœ°å€æˆåŠŸ", false, 2000);
  rm.hideRightMenu();
};

// å¤åˆ¶å½“å‰é€‰ä¸­æ–‡æœ¬
var selectTextNow = "";
document.onmouseup = document.ondblclick = selceText;

function selceText() {
  var txt;
  if (document.selection) {
    txt = document.selection.createRange().text;
  } else {
    txt = window.getSelection().toString();
  }
  selectTextNow = txt !== "" ? txt : "";
}

// è¯»å–å‰ªåˆ‡æ¿
rm.readClipboard = function () {
  if (navigator.clipboard) {
    navigator.clipboard.readText().then(clipText => rm.insertAtCaret(globalEvent.target, clipText));
  }
};

// ç²˜è´´æ–‡æœ¬åˆ°ç„¦ç‚¹
rm.insertAtCaret = function (elemt, value) {
  const startPos = elemt.selectionStart,
    endPos = elemt.selectionEnd;
  if (document.selection) {
    elemt.focus();
    var sel = document.selection.createRange();
    sel.text = value;
    elemt.focus();
  } else {
    if (startPos || startPos == "0") {
      var scrollTop = elemt.scrollTop;
      elemt.value = elemt.value.substring(0, startPos) + value + elemt.value.substring(endPos, elemt.value.length);
      elemt.focus();
      elemt.selectionStart = startPos + value.length;
      elemt.selectionEnd = startPos + value.length;
      elemt.scrollTop = scrollTop;
    } else {
      elemt.value += value;
      elemt.focus();
    }
  }
};

//ç²˜è´´æ–‡æœ¬
rm.pasteText = function () {
  const result = rm.readClipboard() || "";
  rm.hideRightMenu();
};

//å¼•ç”¨åˆ°è¯„è®º
rm.rightMenuCommentText = function (txt) {
  rm.hideRightMenu();
  const postCommentDom = document.getElementById("post-comment");
  var domTop = postCommentDom.offsetTop;
  window.scrollTo(0, domTop - 80);
  if (txt == "undefined" || txt == "null") txt = "å¥½æ£’ï¼";
  function setText() {
    setTimeout(() => {
      var input = document.getElementsByClassName("el-textarea__inner")[0];
      if (!input) setText();
      let evt = document.createEvent("HTMLEvents");
      evt.initEvent("input", true, true);
      let inputValue = replaceAll(txt, "\n", "\n> ");
      input.value = "> " + inputValue + "\n\n";
      input.dispatchEvent(evt);
      input.focus();
      input.setSelectionRange(-1, -1);
      if (document.getElementById("comment-tips")) {
        document.getElementById("comment-tips").classList.add("show");
      }
    }, 100);
  }
  setText();
};

//æ›¿æ¢æ‰€æœ‰å†…å®¹
function replaceAll(string, search, replace) {
  return string.split(search).join(replace);
}

// ç™¾åº¦æœç´¢
rm.searchBaidu = function () {
  anzhiyu.snackbarShow("å³å°†è·³è½¬åˆ°ç™¾åº¦æœç´¢", false, 2000);
  setTimeout(function () {
    window.open("https://www.baidu.com/s?wd=" + selectTextNow);
  }, "2000");
  rm.hideRightMenu();
};

//åˆ†äº«é“¾æ¥
rm.copyLink = function () {
  rm.rightmenuCopyText(domhref);
  anzhiyu.snackbarShow("å·²å¤åˆ¶é“¾æ¥åœ°å€");
};

function addRightMenuClickEvent() {
  // æ·»åŠ ç‚¹å‡»äº‹ä»¶
  document.getElementById("menu-backward").addEventListener("click", function () {
  window.history.back();
    rm.hideRightMenu();
  });

  document.getElementById("menu-forward").addEventListener("click", function () {
    window.history.forward();
    rm.hideRightMenu();
  });

  document.getElementById("menu-refresh").addEventListener("click", function () {
    window.location.reload();
  });

  document.getElementById("menu-top").addEventListener("click", function () {
    anzhiyu.scrollToDest(0, 500);
    rm.hideRightMenu();
  });

  const menuLinks = document.querySelectorAll(".menu-link");
  menuLinks.forEach(function (link) {
    link.addEventListener("click", rm.hideRightMenu);
  });

  document.getElementById("menu-darkmode").addEventListener("click", rm.switchDarkMode);

  document.getElementById("menu-home") && document.getElementById("menu-home").addEventListener("click", function () {
    window.location.href = window.location.origin;
  });

  document.getElementById("menu-randomPost").addEventListener("click", function () {
    toRandomPost();
  });

  document.getElementById("menu-commentBarrage").addEventListener("click", anzhiyu.switchCommentBarrage);

  document.getElementById("rightmenu-mask").addEventListener("click", rm.hideRightMenu);

  document.getElementById("rightmenu-mask").addEventListener("contextmenu", function (event) {
    rm.hideRightMenu();
    event.preventDefault(); // Prevent the default context menu from appearing
  });

  document.getElementById("menu-copy").addEventListener("click", rm.copyPageUrl);

  document.getElementById("menu-pastetext").addEventListener("click", rm.pasteText);

  document.getElementById("menu-copytext").addEventListener("click", function () {
    rm.rightmenuCopyText(selectTextNow);
    anzhiyu.snackbarShow("å¤åˆ¶æˆåŠŸï¼Œå¤åˆ¶å’Œè½¬è½½è¯·æ ‡æ³¨æœ¬æ–‡åœ°å€");
  });

  document.getElementById("menu-commenttext").addEventListener("click", function () {
    rm.rightMenuCommentText(selectTextNow);
  });

  document.getElementById("menu-newwindow").addEventListener("click", function () {
    window.open(domhref);
    rm.hideRightMenu();
  });

  document.getElementById("menu-copylink").addEventListener("click", rm.copyLink);

  document.getElementById("menu-downloadimg").addEventListener("click", function () {
    anzhiyu.downloadImage(domImgSrc, "anzhiyu");
  });

  document.getElementById("menu-newwindowimg").addEventListener("click", function () {
    window.open(domImgSrc);
    rm.hideRightMenu();
  });

  document.getElementById("menu-copyimg").addEventListener("click", function () {
    rm.writeClipImg(domImgSrc);
  });

  document.getElementById("menu-searchBaidu").addEventListener("click", rm.searchBaidu);

  //éŸ³ä¹
  document.getElementById("menu-music-toggle").addEventListener("click", anzhiyu.musicToggle);

  document.getElementById("menu-music-back").addEventListener("click", anzhiyu.musicSkipBack);

  document.getElementById("menu-music-forward").addEventListener("click", anzhiyu.musicSkipForward);

  document.getElementById("menu-music-copyMusicName").addEventListener("click", function () {
    rm.rightmenuCopyText(anzhiyu.musicGetName());
    anzhiyu.snackbarShow("å¤åˆ¶æ­Œæ›²åç§°æˆåŠŸ", false, 3000);
  });

}

addRightMenuClickEvent();</script><script data-pjax>var themeColorMeta=document.querySelector('meta[name="theme-color"]'),pageHeaderEl=document.getElementById("page-header"),navMusicEl=document.getElementById("nav-music"),consoleEl=document.getElementById("console"),selectRandomSong=[],musicVolume=.8,changeMusicListFlag=!1,defaultPlayMusicList=[];document.getElementById("page-name").innerText=document.title.split(" | å®‰çŸ¥é±¼")[0],anzhiyu.initIndexEssay(),anzhiyu.changeTimeInEssay(),anzhiyu.removeBodyPaceClass(),anzhiyu.qrcodeCreate(),anzhiyu.changeTimeInAlbumDetail(),anzhiyu.reflashEssayWaterFall(),anzhiyu.sayhi(),anzhiyu.stopImgRightDrag(),anzhiyu.addNavBackgroundInit(),anzhiyu.setValueToBodyType(),anzhiyu.getCustomPlayList(),anzhiyu.addEventListenerConsoleMusicList(!1)</script><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.6/icon/ali_iconfont_css.css"><script src="https://npm.elemecdn.com/butterfly-extsrc@1.1.3/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://npm.elemecdn.com/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://npm.elemecdn.com/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)
  window.anzhiyuScrollFnToDo && window.removeEventListener('scroll', anzhiyuScrollFnToDo)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script></div></body></html><!-- rebuild by hrmmi -->