<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" href="https://eucli.top/rss.xml"><link rel="alternate" type="application/atom+xml" href="https://eucli.top/atom.xml"><link rel="alternate" type="application/json" href="https://eucli.top/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="Vue"><link rel="canonical" href="https://eucli.top/%E5%B0%9A%E5%93%81%E6%B1%87%E5%89%8D%E5%8F%B0%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/"><title>尚品汇前台项目实战 - 项目实战 - 前端开发 | Eucli の小窝 =</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">尚品汇前台项目实战</h1><div class="meta"><span class="item" title="创建时间：2022-10-16 19:59:45"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2022-10-16T19:59:45+08:00">2022-10-16</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>30k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>27 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Eucli の小窝</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="http://www.dmoe.cc/random.php?506049"></li><li class="item" data-background-image="http://www.dmoe.cc/random.php?255517"></li><li class="item" data-background-image="http://www.dmoe.cc/random.php?640501"></li><li class="item" data-background-image="http://www.dmoe.cc/random.php?799641"></li><li class="item" data-background-image="http://www.dmoe.cc/random.php?891133"></li><li class="item" data-background-image="http://www.dmoe.cc/random.php?399848"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" itemprop="item" rel="index" title="分类于 前端开发"><span itemprop="name">前端开发</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/" itemprop="item" rel="index" title="分类于 项目实战"><span itemprop="name">项目实战</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://eucli.top/%E5%B0%9A%E5%93%81%E6%B1%87%E5%89%8D%E5%8F%B0%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/head.png"><meta itemprop="name" content="谁偷了我的电饭锅"><meta itemprop="description" content=", 真不是二次元"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content=""></span><div class="body md" itemprop="articleBody"><h1 id="vue-cli-脚手架初始化项目-vue-create-app"><a class="anchor" href="#vue-cli-脚手架初始化项目-vue-create-app">#</a> vue-cli 脚手架初始化项目 vue create app</h1><h1 id="npm-常用的安装命令"><a class="anchor" href="#npm-常用的安装命令">#</a> npm 常用的安装命令</h1><ul><li>npm i 就是 npm install 简写</li><li>npm i xxx -D 就是 npm i xxx --save-dev</li><li>npm i xxx -S 就是 npm i xxx --save</li><li>npm i xxx -g 就是 全局安装</li><li>npm i xxx 就是 npm i xxx --save</li></ul><h1 id="初始项目中文件夹的作用"><a class="anchor" href="#初始项目中文件夹的作用">#</a> 初始项目中文件夹的作用</h1><ul><li><p>node_modules 项目依赖文件夹</p></li><li><p>public 一般放置一些静态资源 (图片)，需要注意放在 public 文件夹中的资源 webpack 打包的时候会原封不动打包到 dist 文件夹中</p></li><li><p>src (程序员源代码文件夹):</p><ul><li><p>assets 文件夹：一般也是放置一些静态资源 (一般放置多个组件共用的静态资源)，需要注意，放置在 assets 文件夹里的静态资源在 webpack 打包的时候会把静态资源当成一个模块，打包到 JS 文 里面</p></li><li><p>components 文件夹：一般放置的是非路由组件或者一些常用的全局组件</p></li><li><p>pages|views 文件夹：放置路由组件</p></li><li><p>router 文件夹：配置路由的地方</p></li><li><p>APP.vue: 整个项目中唯一的根组件</p></li><li><p>main.js: 程序入口文件，也是整个程序当中最先执行的文件</p></li></ul></li><li><p>babel.config.js: 配置文件 (babel 相关)</p></li><li><p>package.json: 记录项目的信息</p></li><li><p>package-lock.json: 缓存性文件</p></li></ul><h1 id="一些问题"><a class="anchor" href="#一些问题">#</a> 一些问题</h1><ul><li><p>vue 创建项目，报错 No Babel config file detected for..<br>解决办法：在 package.json 文件中增加 &quot;requireConfigureFile&quot;: false</p></li><li><p>【vue 报错】The template root requires exactly one element<br>解决：因为 vue2 的模版中只有能一个根节点，所以在 template 中插入第二个元素就会报错</p></li></ul><h1 id="一些配置"><a class="anchor" href="#一些配置">#</a> 一些配置：</h1><ol><li><p>项目运行起来的时候，让浏览器可以自动打开<br>办法：在 package.json 中：</p><pre><code>&quot;scripts&quot;: &#123;
&quot;serve&quot;: &quot;vue-cli-service serve --open&quot;,
&#125;
</code></pre></li><li><p>eslint 校验功能关闭<br>在 vue.config.js 中写 <code>lintOnSave: false</code></p></li><li><p>src 文件夹简写方式，配置别名 @代表 src 文件夹<br>jscpnfig.json 文件中：(省略)</p></li></ol><h1 id="项目的路由分析-vue-router"><a class="anchor" href="#项目的路由分析-vue-router">#</a> 项目的路由分析 vue-router</h1><ul><li><p>前端所谓路由：KV 键值对</p><ul><li>key:URL (浏览器地址栏中的路径 path)</li><li>value: 相应的路由组件 (component，注意后面没有 s)</li><li>注意：项目的上中下结构</li></ul></li><li><p>路由组件：</p><ul><li>Home 首页路由组件、Search 路由组件、login 登录路由组件、Refister 注册路由组件</li></ul></li><li><p>非路由组件：Header、Footer (在首页，搜索页)，但是在 登录 | 注册 页没有</p></li></ul><h1 id="在开发项目的时候"><a class="anchor" href="#在开发项目的时候">#</a> 在开发项目的时候：</h1><ol><li>书写静态页面 (HTML+CSS)</li><li>拆分组件</li><li>获取服务器的数据动态展示</li><li>完成相应的动态业务逻辑</li></ol><ul><li>注意：<ol><li>创建组件的时候，组件结构 + 组件的样式 + 图片资源</li><li>咱们的项目采用 less 样式，但浏览器不识别 less 样式，需要通过 less、less-loader 进行处理<br><code>npm i less less-loader@7</code> 安装 5 版本会报错<br>别忘了 style 标签中写 <code>&lt;style scoped lang=&quot;less&quot;&gt;</code></li><li>header 样式太高记得把 App.vue 里面的样式清除</li></ol></li></ul><h1 id="使用组件的步骤非路由组件"><a class="anchor" href="#使用组件的步骤非路由组件">#</a> 使用组件的步骤 (非路由组件)</h1><ol><li>创建或定义组件</li><li>引入：import 组件名 from ' 组件地址 ' 在需要使用这个组件的地方引入</li><li>注册 (vue3 使用 setup 语法糖不用注册)：components 中注册引入的组件名 (简写形式，KV 一致省略 V)</li><li>使用：以标签形式在 APP.vue 中使用</li></ol><h1 id="引入的-css-错乱记得引入默认的样式"><a class="anchor" href="#引入的-css-错乱记得引入默认的样式">#</a> 引入的 css 错乱，记得引入默认的样式</h1><p>public 文件夹中，创建一个清除默认样式的 css 文件，再在 public 下的 index.html 中引入这个 css 用 link</p><h1 id="路由的搭建-vue-router"><a class="anchor" href="#路由的搭建-vue-router">#</a> 路由的搭建 vue-router</h1><p>(ps. 创建项目的时候直接把路由选上就不用搭建了 doge)</p><p>安装： <code>npm i vue-router@3</code> 因为 vue2 不用 3 版本会报错</p><p>在上面的分析中，路由组件应该有四个： Home、Search、Login、Refister<br>components 文件夹：经常放非路由组件或共用全局组件<br>pages|views 文件夹：经常放置路由组件</p><h1 id="配置路由"><a class="anchor" href="#配置路由">#</a> 配置路由</h1><p>项目当中配置的路由一般都放在 router 文件夹中</p><pre><code class="language-配置路由">  //配置路由的地方
  import Vue from &quot;vue&quot;;
  import VueRouter from &quot;vue-router&quot;;

  //使用插件
  Vue.use(VueRouter)

  //引入路由组件
  import Home from '@/pages/Home'

  //配置路由
  export default new VueRouter(&#123;
  routes: [
      &#123;
      path:&quot;/&quot;,            //默认展示只写 /
      component:Home       //注意是 component 一定不要加 s
      &#125;
  ]
  &#125;)
</code></pre><p>除此之外，还需要在 main.js 中引入路由</p><pre><code>  //引入路由
  import router from '@/router'

  new Vue(&#123;
  //注册路由
  router
  &#125;).$mount('#app')
</code></pre><p>还有一件事，路由组件还需要出口 在需要展示路由组件的地方写 <code>&lt;router-view&gt;&lt;/router-view&gt;</code></p><p>ps. 配置路由的时候，可以给路由添加路由元信息 meta，路由需要配置对象，它的 key 不能瞎写</p><h1 id="路由组件与非路由组件的异同"><a class="anchor" href="#路由组件与非路由组件的异同">#</a> 路由组件与非路由组件的异同：</h1><ol><li>路由组件一般放置在 pages|views 文件夹中，非路由组件一般放置在 components 文件夹中</li><li>路由组件一般需要在 router 文件夹注册 (使用即为组件的名字，非路由组件在使用的时候还要占位)，非路由组件一般都是以标签的形式使用</li><li>注册完路由，不管是路由组件还是非路由组件身上都有<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mtext>和</mtext></mrow><annotation encoding="application/x-tex">route和</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord cjk_fallback">和</span></span></span></span> router 属性</li></ol><h1 id="route和router-属性"><a class="anchor" href="#route和router-属性">#</a> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>e</mi><mtext>和</mtext></mrow><annotation encoding="application/x-tex">route和</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord cjk_fallback">和</span></span></span></span> router 属性</h1><ul><li><code>$route</code> ：一般获取路由信息 (路径、query、params 等等)</li><li><code>$router</code> ：一般进行编程式导航进行路由跳转 (push|replace)</li></ul><h1 id="路由的跳转"><a class="anchor" href="#路由的跳转">#</a> 路由的跳转</h1><p>路由的跳转有两种形式：</p><ul><li>声明式导航 router-link 注意要有 to 属性</li><li>编程式导航 push|replace：声明式导航能做的，编程式导航都能做。而且编程式导航除了可以进行路由跳转，还可以做一些其他的业务逻辑</li></ul><h1 id="footer-组件的显示与隐藏"><a class="anchor" href="#footer-组件的显示与隐藏">#</a> Footer 组件的显示与隐藏</h1><p>Footer 组件：在 Home、Search 显示，在 Login、Register 时隐藏</p><h1 id="路由传参"><a class="anchor" href="#路由传参">#</a> 路由传参</h1><ol><li>路由的跳转有几种方式？<br>比如：A-&gt;B</li></ol><ul><li>声明式导航：route-link, 务必要有 to 属性</li><li>编程式导航：利用的是组件实例的 $router.push|replace 方法 可以写自己的业务</li></ul><ol start="2"><li>路由传参，参数有几种写法？</li></ol><ul><li>params 参数：属于路径当中的一部分，需要注意，在配置路由的时候，需要占位</li><li>query 参数：不属于路径当中的一部分，类似于 ajax 中的 queryString/home?k=v&amp;kv=, 不需要占位</li><li>三种方式：</li></ul><pre><code>  //第一种：字符串形式
  this.$router.push(&quot;/search/&quot; + this.keyword + &quot;?k=&quot; + this.keyword.toUpperCase());
  //第二种：模板字符串
  this.$router.push(`/search/$&#123;this.keyword&#125;?k=$&#123;this.keyword.toUpperCase()&#125;`);
  //第三种：对象写法   这种写法需要给路由起名字name   ☆最常用
  this.$router.push(&#123;
  name:&quot;search&quot;,
  params:&#123;keyword:this.keyword&#125;,
  query:&#123;k:this.keyword.toUpperCase()&#125;
  &#125;)
</code></pre><h1 id="路由传参相关面试题"><a class="anchor" href="#路由传参相关面试题">#</a> 路由传参相关面试题</h1><ol><li><p>路由传递参数 (对象写法) path 是否可以结合 params 参数一起使用？<br>不可以。<br>路由跳转传参的时候，对象写法可以是 name，path 形式，但 path 写法不能与 params 使用</p></li><li><p>如何指定 params 参数可传可不传？<br>比如：配置路由的时候，params 参数占位了，但是路由跳转的时候没有传递 params，那么路径会出现问题 <code>http://localhost:8080/#/?k=1123</code> 没有 search<br>解决：params 参数后面加？ <code>path:&quot;/search/:keyword?&quot;</code></p></li><li><p>params 参数可以传递也可以不传递，但如果传递的是空串如何解决？<br>// 答：用 undefined 解决 <code>params:&#123;keyword:''||undefined&#125;</code></p></li><li><p>路由组件能不能传递 props 数据？<br>可以，有三种方式 (但是实际开发中并不怎么用)</p></li></ol><ul><li>方式一：布尔值写法，只能传递 params 参数<br><code>props:true</code></li><li>方式二：对象写法 额外给路由组件传递一些 props<br><code>props:&#123;a:1,b:2&#125;</code></li><li>方式三 (最常用)：函数写法，可以把 params、query 参数，通过 props 传递给路由组件</li></ul><pre><code>  props:($route) =&gt; &#123;
    return &#123;
      keyword: $route.params.keyword,
      k: $route.query,k
    &#125;
  &#125;
</code></pre><ol start="5"><li>编程式导航跳转到当前路由 (参数不变)，多次执行会抛出错误警告？</li></ol><ul><li>声明式导航没有这类问题，因为 vue-router 底层已经处理好了</li><li>怎么解决：通过给 push 方法传递相应的成功、失败的回调，可以捕获到当前的错误，可以解决，只是治标不治本，将来在别的组件组件中使用 push|replace 还会有类似错误</li></ul><p>this：当前组件实例 (search)<br>this.$router 属性：属性值 vueRouter 类的一个实例<br>push：vueRouter 类的一个实例</p><h1 id="call-与-apply-区别"><a class="anchor" href="#call-与-apply-区别">#</a> call 与 apply 区别</h1><ul><li>相同点：都可以调用函数一次，都可以修改函数的上下文一次</li><li>不同点：call 传递参数用逗号隔开，apply 方法执行传递数组</li></ul><h1 id="home-模块的组件拆分"><a class="anchor" href="#home-模块的组件拆分">#</a> Home 模块的组件拆分</h1><ol><li>先把静态页面完成</li><li>拆分出静态组件</li><li>获取服务器的数据展示</li><li>动态业务</li></ol><h1 id="三级联动组件完成"><a class="anchor" href="#三级联动组件完成">#</a> 三级联动组件完成</h1><p>由于三级联动组件在 Home、Search、Detail 模块中都使用了，所有注册为一个全局组件 (在 main.js 注册):<br>// 先引入。三级联动的组件 -- 全局组件<br><code>import TypeNav from '@/pages/Home/TypeNav'</code><br>// 再注册。第一个参数：全局组件的名字 第二个参数：哪一个组件<br><code>Vue.component(TypeNav.name,TypeNav)</code></p><ul><li>好处：只需要注册一次，就可以在项目任意的地方使用，且使用的时候不需要引入</li></ul><h1 id="完成其余静态组件"><a class="anchor" href="#完成其余静态组件">#</a> 完成其余静态组件</h1><p>HTML + CSS + 图片资源</p><h1 id="postman-测试接口"><a class="anchor" href="#postman-测试接口">#</a> POSTMAN 测试接口</h1><ul><li>刚刚经过 postman 工具测试，接口是没有问题的</li><li>如果服务器返回的数据 code 字段为 200，代表服务器返回数据成功</li><li>整个项目，接口前缀都有 /api 字样</li></ul><h1 id="axios-二次封装"><a class="anchor" href="#axios-二次封装">#</a> axios 二次封装</h1><p>(发请求的几种方式：XMLHttpRequest、fetch、JQ、axios)</p><ol><li>为什么需要进行二次封装 axios<br>为了使用请求拦截器、响应拦截器：</li></ol><ul><li>请求拦截器：可以在发请求之前可以处理一些业务</li><li>响应拦截器：当服务器数据返回以后，可以处理一些事情</li></ul><ol start="2"><li>在项目中创建 api 文件夹关于 axios (在 src 文件夹目录下建立)</li></ol><ul><li>接口当中：路径都带有 /api</li><li>baseURL:&quot;/api&quot; 基础路径，发请求的时候，路径当中会出现 api，不用自己手写了</li></ul><ol start="3"><li>如果 axios 基础不好，可以参考 <span class="exturl" data-url="aHR0cHM6Ly93d3cuYXhpb3MtaHR0cC5jbi9kb2NzL2ludHJv">axios 中文文档</span></li></ol><h1 id="接口统一管理"><a class="anchor" href="#接口统一管理">#</a> 接口统一管理</h1><ul><li><p>项目很小：完全可以在组件的生命周期函数中发请求</p></li><li><p>项目大：axios.get ('xxx')</p><ol><li>跨域问题<br>什么是跨域：协议、域名、端口号不同请求，称之为跨域<br><span class="exturl" data-url="aHR0cDovL2xvY2FsaG9zdDo4MDgwLyMvaG9tZQ==">http://localhost:8080/#/home</span> 前端项目本地服务器<br><span class="exturl" data-url="aHR0cDovL2dtYWxsLWg1LWFwaS5hdGd1aWd1LmNu">http://gmall-h5-api.atguigu.cn</span> 后台服务器</li></ol><ul><li><p>解决跨域的几个方法：<br>JSONP、CROS、代理</p></li><li><p>webpack 代理配置</p></li></ul><pre><code>  devServer: &#123;
  proxy: &#123;
    '/api': &#123;
      target: 'http://gmall-h5-api.atguigu.cn',
    &#125;
  &#125;
&#125;
</code></pre></li></ul><h1 id="nprogress-进度条的使用"><a class="anchor" href="#nprogress-进度条的使用">#</a> nprogress 进度条的使用</h1><p>可以在 reques.js 文件中使用</p><ol><li><p>先引入：<br>// 引入进度条<br><code>import nprogress from &quot;nprogress&quot;;</code><br>// 引入进度条样式<br><code>import &quot;nprogress/nprogress.css&quot;</code></p></li><li><p>start：进度条开始 done：进度条结束<br>在请求拦截器中用 <code>1nprogress.start()</code> ，在响应拦截器中用 <code>nprogress.done()</code></p></li></ol><h1 id="vuex-状态管理库"><a class="anchor" href="#vuex-状态管理库">#</a> vuex 状态管理库</h1><ol><li>vuex 是什么？<br>官方提供的一个插件，是一个状态管理库，集中式管理项目中组件共用的数据。</li></ol><ul><li><p>state：仓库存储数据的地方</p></li><li><p>mutations：修改 state 的唯一手段</p></li><li><p>actions：处理 action，可以书写自己的业务逻辑，也可以处理异步。不能修改 state<br><code>actions是服务员，mutations是厨师，只有mutations能做菜(修改state)</code></p><p>getters：理解为计算属性，用于简化仓库数据，让组件获取仓库的数据更加方便<br>modules</p><p>vue2 要安装 vuex@3</p></li></ul><ol start="2"><li><p>vuex 基本使用<br>因为 vuex 是 Vue 框架中的一个插件，要使用插件需要引入 vue 与 vuex 并 <code>Vue.use()</code> 一下，<br>然后暴露出去一个 <code>export default new Vuex.Store(&#123;&#125;)</code><br>别忘了在 main.js 入口文件里引入、注册一下仓库</p></li><li><p>vuex 模块式开发</p></li></ol><ul><li>如果项目过大，组件过多，接口也很多，数据也很多，可以让 vuex 实现模块式开发</li><li>每个模块都有自己的一个小仓库，到时候引入到 store 的入口文件中，然后在 export default 中用 modules 对小仓库进行管理</li></ul><h1 id="vue-模块开发总结"><a class="anchor" href="#vue-模块开发总结">#</a> vue 模块开发总结！！！！！！！</h1><ol><li>先写静态页面 + 静态组件拆分出来。【组件中】</li><li>写请求。【api 文件夹的 <code>index.js</code> 中】</li><li>发请求 (API)。【组件的 <code>mounted()&#123;&#125;</code> 中】<br>(Actions,Mutations,State) 参考 vuex 工作流程图</li><li>vuex 三连环。【store 文件夹的对应小仓库中】</li><li>组件获取仓库数据。【组件的 <code>computed: &#123;&#125;</code> 中】</li><li>动态展示数据。【组件 html 结构上】</li></ol><h2 id="一-写静态页面-静态组件拆分"><a class="anchor" href="#一-写静态页面-静态组件拆分">#</a> 一、写静态页面 + 静态组件拆分</h2><h2 id="二-写请求"><a class="anchor" href="#二-写请求">#</a> 二、写请求。</h2><p>在 api 文件夹的 <code>index.js</code> 中</p><pre><code>export const reqGetSearchInfo = (params) =&gt; requests(&#123;
  url:'/list',
  method:'post',
  data:params
&#125;)
</code></pre><h2 id="三-发请求api"><a class="anchor" href="#三-发请求api">#</a> 三、发请求 (API)</h2><p>在组件的 <code>mounted()</code> 中发请求。即组件挂载完毕，通知 Vuex 向服务器发请求。</p><ul><li>dispatch：dispatch 是分发的意思，是 store 身上的一个 API，它包含两个参数，第一个是动作也可以说是一个操作，你通过这个操作调用 actions 里面的一个函数。第二个就是你要传递的参数 (也可以不传。但如果传递，到时候至少要传一个空对象，不然会报错)</li></ul><pre><code>mounted() &#123;
//派发 actions，通知 Vuex 发请求，获取数据存储于仓库之中
this.$store.dispatch('getGoodInfo',this.$route.params.skuid
&#125;

</code></pre><ul><li>要发请求，需要在对应的小仓库中先引入之前封装好的 api： <code>import &#123; reqCategoryList &#125; from &quot;@/api&quot;;</code></li></ul><h2 id="四-vuex三连环"><a class="anchor" href="#四-vuex三连环">#</a> 四、vuex (三连环)</h2><ol><li>第一环：Actions。<br>因为你使用了 dispatch，而其中的 <code>getGoodInfo</code> 未定义，因此要在 store 仓库中对应小仓库的 actions 中定义 getGoodInfo。通过 API 里面的接口函数调用，向服务器发请求，获取服务器的数据。<br>即 actions 中必须要有一个 getGoodInfo 方法来与之对应。其中参数 <code>&#123;commit&#125;</code> 是对 commit 的解构。commit 也是一个函数，有两个操作，第一个也是一个动作，第二个就是参数，通过 commit 将这次请求交给 mutations。<br>这第二个参数是在用户派发 actions 的时候，第二个参数传递过来的，至少要传一个空对象</li></ol><pre><code>
const actions = &#123;
async getGoodInfo(&#123;commit&#125;,skuId)&#123;
let result =await reqGoodsInfo(skuId)
if(result.code==200)&#123;
commit('GetGOODINFO',result.data)
&#125;
&#125;
&#125;

</code></pre><ol start="2"><li>第二环：Mutations</li></ol><ul><li>修改处理数据的唯一地方</li><li>在 mutations 中真正的处理数据并且渲染数据</li></ul><pre><code>
const mutations = &#123;
GetGOODINFO(state, categoryList) &#123;
state.categoryList = categoryList;
&#125;

</code></pre><ul><li>getters:<br>就是相当于计算属性，对 state 中的数据进行简化操作，就比如当你的数据很复杂时你需要简单的拿到数据。举个例子你的数据是：AAA.BBB.CCC.DDD.data, 那么你就可以使用计算属性将其变为 data.</li></ul><pre><code>skuInfo(state) &#123;
  return state.goodInfo.skuInfo || &#123;&#125;
&#125;

</code></pre><ul><li>使用 getters，在组件中获取仓库数据时用 <code>import &#123; mapGetters &#125; from &quot;vuex&quot;;</code> 不用 <code>&#123; mapState &#125;</code> 了</li></ul><ol start="3"><li>第三环：State<br>state 中数据默认初始值别瞎写，服务器返回对象，起始值是对象；服务器返回数组，起始值是数组。根据接口的返回值去初始化</li></ol><pre><code>
const state = &#123;
  categoryList: []
&#125;

</code></pre><h2 id="五-组件获取仓库数据"><a class="anchor" href="#五-组件获取仓库数据">#</a> 五、组件获取仓库数据</h2><p>回到实例 (组件) 中使用辅助函数 mapState 去获取： <code>import &#123; mapState &#125; from &quot;vuex&quot;;</code><br>并把数据映射为组件实例身上的一个属性：</p><pre><code>
computed: &#123;
...mapState(&#123;
categoryList: (state) =&gt; categoryList
&#125;)
&#125;

</code></pre><p>如果用了 getters，辅助函数要用 <code>import &#123; mapGetters &#125; from &quot;vuex&quot;;</code></p><pre><code>computed: &#123;
  //mapGetters里面的写法：传递的数组，因为getters计算没有划分模块
...mapGetters(['skuInfo'])
&#125;

</code></pre><h2 id="六-动态展示数据"><a class="anchor" href="#六-动态展示数据">#</a> 六、动态展示数据</h2><p>根据数据结构，在 template 把多余的结构去掉，只留一个，用 v-for 生成</p><p>————————————————————————————————————————————————</p><p>栗子：</p><h1 id="完成-typenav-三级联动展示数据业务"><a class="anchor" href="#完成-typenav-三级联动展示数据业务">#</a> 完成 TypeNav 三级联动展示数据业务</h1><p>把全局组件放到 components 文件夹中<br>axios 二次封装、vuex 准备工作。。。</p><ol><li>在三级联动组件中写 <code>mounted()</code> ，组件挂载完毕，通知 Vuex 向服务器发请求：</li></ol><pre><code>
mounted() &#123;
//派发 actions，通知 Vuex 发请求，获取数据存储于仓库之中
this.$store.dispatch(&quot;categoryList&quot;);
&#125;

</code></pre><ol start="2"><li>因为 &quot;categoryList&quot; 未定义，去 store 仓库中的 home 模块的小仓库中，在 actions 中定义 categoryList。<br>通过 API 里面的接口函数调用，向服务器发请求，获取服务器的数据<br>要发请求，需要引入之前封装 api： <code>import &#123; reqCategoryList &#125; from &quot;@/api&quot;;</code></li></ol><pre><code>
const actions = &#123;
  //通过API里面的接口函数调用，向服务器发请求，获取服务器的数据
  async categoryList(&#123; commit &#125;) &#123;
    //解构commit，提交mutations
    let result = await reqCategoryList();
    if (result.code == 200) &#123;
      //第一个参数是起名，第二个参数是提交的数据
      commit(&quot;GETCATEGORYLIST&quot;, result.data);
    &#125;
  &#125;,

</code></pre><ol start="3"><li>请求成功，commit 提交给 mutations 修改 state。在此之前 state 需要写一个初始值。</li></ol><pre><code>
const state = &#123;
categoryList: [],
&#125;
const mutations = &#123;
CATEGORYLIST(state, categoryList) &#123;
state.categoryList = categoryList;
&#125;,
&#125;;

</code></pre><ol start="4"><li>Home 组件中已经有了相应的数组，需要在三级联动 TypeNav 组件中拿到相应的数据进行展示<br>回到 TypeNav 组件中使用辅助函数 mapState 去获取： <code>import &#123; mapState &#125; from &quot;vuex&quot;;</code><br>并把数据映射为组件实例身上的一个属性：</li></ol><pre><code>
computed: &#123;
...mapState(&#123;
categoryList: (state) =&gt; state.home.categoryList,
&#125;),
&#125;

</code></pre><ol start="5"><li>展示数据。<br>先看数据的结构，发现一层套一层有三层，是一个三级菜单<br>在 template 把多余的结构去掉，只留一个，用 v-for 生成： <code>v-for=&quot;(c1, index) in categoryList&quot; :key=&quot;c1.categoryId&quot;</code><br>并把之前写死的数据替换： <code>c1.categoryName</code></li></ol><h1 id="完成一级分类动态添加背景颜色"><a class="anchor" href="#完成一级分类动态添加背景颜色">#</a> 完成一级分类动态添加背景颜色</h1><ul><li>方法一：采用样式完成 (可以的)</li><li>方法二：通过 JS 完成</li></ul><h1 id="通过-js-控制二三级商品分类的显示与隐藏"><a class="anchor" href="#通过-js-控制二三级商品分类的显示与隐藏">#</a> 通过 JS 控制二三级商品分类的显示与隐藏</h1><p>最开始的时候，是通过 CSS 样式的 display：block|none 显示与隐藏二三级商品分类</p><h1 id="函数的防抖与节流"><a class="anchor" href="#函数的防抖与节流">#</a> 函数的防抖与节流</h1><p>演示卡顿现象：事件触发非常频繁，而且每一次触发，回调函数都要去执行，如果事件很短，而且回调函数有计算，那么很可能出现浏览器卡顿</p><ul><li><p>节流：在规定的间隔时间范围内不会重复触发回调，只有大于这个时间间隔才会触发回调，把频繁触发变为少量触发</p></li><li><p>防抖：前面的所有的触发都被取消，最后一次执行在规定的时间后才会触发，也就是说如果连续快速的触发，只会执行一次</p></li></ul><h1 id="完成三级联动节流操作"><a class="anchor" href="#完成三级联动节流操作">#</a> 完成三级联动节流操作</h1><p>node_modules 里面已经有 lodash 了</p><ol><li>引入 lodash： <code>import * from 'lodash'</code></li><li>使用节流函数：</li></ol><pre><code>
changeIndex: \_.throttle(function(index) &#123;
//index:鼠标移上某一个一级分类的索引值
this.currentIndex = index
&#125;,50)

</code></pre><h1 id="三级联动组件的路由跳转与传递参数"><a class="anchor" href="#三级联动组件的路由跳转与传递参数">#</a> 三级联动组件的路由跳转与传递参数</h1><p>三级联动用户可以点击的：一级分类、二级分类、三级分类，当你点击的时候 Home 模块跳转到 Search 模块，一级会把用户选中的产品 (产品的名字、产品的 ID) 在路由跳转的时候，进行传递</p><ul><li>注意：如果使用声明式导航 router-link，可以实现路由的跳转与传递参数。但是会出现卡顿现象</li><li>原因：router-link 会创建很多组件，很耗内存。</li></ul><p>因此我们选择编程式导航，但是为了优化性能，不建议在每一个 a 标签上写，最好给它们的父节点上写声明式导航，然后利用事件的委派</p><ul><li><p>利用事件的委派存在一些问题：</p><ol><li><p>事件委派父节点下的子节点有很多，怎么知道一定是 a 标签<br>解决：给 a 标签添加自定义属性，以自定义属性为条件判断其是不是 a 标签</p></li><li><p>如何获取参数<br>解决：仍然给 a 标签添加自定义属性</p></li></ol></li></ul><h1 id="search-模块中的-typenav-商品分类菜单"><a class="anchor" href="#search-模块中的-typenav-商品分类菜单">#</a> Search 模块中的 TypeNav 商品分类菜单</h1><p>显示与隐藏</p><p>过渡动画效果：前提 组件 | 元素 必须有 <code>v-if|v-show</code> 指令才可以进行过渡动画<br>要用 transition 标签把需要添加过渡的元素包裹起来 可以加 name，不加 name 的话就是 <code>v-enter，v-leave</code></p><h1 id="优化商品分类三级列表"><a class="anchor" href="#优化商品分类三级列表">#</a> 优化商品分类三级列表</h1><p>把 <code>this.$store.dispatch(&quot;categoryList&quot;)</code> 从 TypeNav 组件放到 App 组件中<br>在 App 根组件中发请求，因为根组件 mounted 只会执行一次</p><h1 id="合并-params-与-query-参数"><a class="anchor" href="#合并-params-与-query-参数">#</a> 合并 params 与 query 参数</h1><h1 id="开发-home-首页当中的-listcontainer-组件与-floor-组件"><a class="anchor" href="#开发-home-首页当中的-listcontainer-组件与-floor-组件">#</a> 开发 Home 首页当中的 ListContainer 组件与 Floor 组件</h1><ul><li><p>注意：服务器返回的数据 (接口) 只有商品分类菜单分类数据，对于 ListContainer 组件与 Floor 组件数据服务器没有提供<br>解决方法：mock 数据 (模拟)：如果你想 mock 数据，需要用到插件 mockjs<br>前端 mock 的数据不会和服务器进行任何通信</p></li><li><p>mockjs 使用步骤：</p><ol><li>在项目当中 src 文件夹中创建 mock 文件夹，并创建相应的 JSON 文件</li><li>准备 JSON 数据 (一定要格式化一下，不能留有空格，不然跑不起来)</li><li>把 mock 数据需要的图片放置到 public 文件夹中【public 文件夹在打包的时候原封不动打包到 dist 文件夹中】</li><li>开始 mock 虚拟数据，通过 mockjs 实现：在 mock 文件夹下创建 mockServe.js 文件</li><li>mockServe.js 文件下：</li></ol></li></ul><pre><code>
    //先引入 mockjs 模块
    import Mock from &quot;mockjs&quot;;
    //把 JSON 数据格式引入进来(JSON 数据格式没有对外暴露，但是可以引入)
    //webpack 默认对外暴露的：图片、JSON 数据格式
    import banner from './banner.json'
    import floor from './floor.json'
    //mock 数据：第一个参数请求地址 第二个参数请求数据
    Mock.mock(&quot;/mock/banner&quot;,&#123;code:200,data:banner&#125;)
    Mock.mock(&quot;/mock/floor&quot;,&#123;code:200,data:floor&#125;) 6.把 mockServe.js 文件在 main.js 中引入一下

</code></pre><h1 id="swiper-基本使用"><a class="anchor" href="#swiper-基本使用">#</a> swiper 基本使用</h1><p>swiper 主要用来做轮播图<br>在 new Swiper 实例之前，页面的结构必须得先有</p><ul><li>第一步：引包 (相应 js|css)</li><li>第二步：页面中结构务必要有</li><li>第三步：new Swiper 实例【轮播图添加动态效果】</li></ul><pre><code>
  &lt;script&gt;
  var mySwiper = new Swiper ('.swiper', &#123;

    loop: true, // 循环模式选项

        // 如果需要分页器
        pagination: &#123;
          el: '.swiper-pagination',
          clickable:true
        &#125;,

        // 如果需要前进后退按钮
        navigation: &#123;
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev',
        &#125;,
      &#125;)

  &lt;/script&gt;

</code></pre><h1 id="listcontainer-组件开发重点"><a class="anchor" href="#listcontainer-组件开发重点">#</a> ListContainer 组件开发重点</h1><ol><li>安装 Swiper 插件：安装 5 版本 <code>npm i swiper@5</code></li><li>引包： <code>import Swiper from 'swiper</code></li><li>写轮播图：</li></ol><pre><code>
&lt;div class=&quot;swiper-wrapper&quot;&gt;
&lt;div class=&quot;swiper-slide&quot; v-for=&quot;(carousel,index) in bannerList&quot; :key=&quot;carousel.id&quot;&gt;
&lt;img :src=&quot;carousel.imgUrl&quot; /&gt;
&lt;/div&gt;
&lt;/div&gt;
</code></pre><ol start="3"><li>在 main.js 中引入样式，因为网站有好几个地方都使用了轮播图，这样引入一遍就可以了。<br>引入样式直接 import 引入就行，不用对外暴露，不用写 from： <code>import &quot;swiper/css/swiper.css&quot;</code></li><li>new Swiper 实例，注意不要在 mounted 中，因为 dispatch 涉及异步语句，导致 v-for 遍历的时候结构还没有完全，因此不行</li></ol><ul><li><p>watch 数据监听：监听已有数据的变化 (watch 有两种写法，一种是对象写法，一种是函数写法)</p></li><li><p>最完美的解决方案： watch + nextTick</p></li></ul><p>nextTick：在下次 DOM 更新循环之后执行延迟回调。在修改数据之后立即使用这个方法，获取更新后的 DOM</p><pre><code>   watch: &#123;
  //监听bannerList数据的变化：因为这条数据发生过变化，由空数组变为数组中有四个元素
  //handler:可以监听到新的值和旧的值
  bannerList: &#123;
    handler(newValue, oldValue) &#123;
      //如果执行handler方法，代表组件实例身上这个属性的数据已经有了。但只能保证有数据，不知道v-for有没有执行完
      //nextTick：在下次DOM更新循环之后执行延迟回调。在修改数据之后立即使用这个方法，获取更新后的DOM
      this.$nextTick(() =&gt; &#123;
        //当执行这个回调的时候，保证服务器数据回来了，v-for执行完毕
        var mySwiper = new Swiper(this.$refs.mySwiper, &#123;
          loop: true, // 循环模式选项

          // 如果需要分页器
          pagination: &#123;
            el: &quot;.swiper-pagination&quot;,
            clickable: true,
          &#125;,

          // 如果需要前进后退按钮
          navigation: &#123;
            nextEl: &quot;.swiper-button-next&quot;,
            prevEl: &quot;.swiper-button-prev&quot;,
          &#125;,
        &#125;);
      &#125;);
    &#125;,
  &#125;,
&#125;,
</code></pre><h1 id="开发-floor-组件"><a class="anchor" href="#开发-floor-组件">#</a> 开发 floor 组件</h1><ol><li>写 API<br>在 api 文件夹下的 index.js 中写： <code>export const reqFloorList = () =&gt; mockRequests.get('/floor')</code></li><li>写 vuex 三连环 在 store 文件夹下写</li></ol><ul><li>引入请求： <code>import &#123; reqFloorList &#125; from &quot;@/api&quot;;</code></li></ul><pre><code class="language-actions中：">  async getFloorList(&#123; commit &#125;) &#123;
  //获取发送请求的结果
  let result = await reqGetBannerList();
  if (result.code == 200) &#123;
  //提交 mutation
  commit(&quot;GETFLOORLIST&quot;, result.data);
    &#125;
  &#125;
  ```

```mutations中：
  GETFLOORLIST(state, floorList) &#123;
  state.floorList = floorList;
  &#125;
</code></pre><pre><code class="language-state中：">floorList: []
</code></pre><ul><li>注意： <code>getFloorList</code> 这个 action 在哪里触发？需要在 Home 路由组件中发。如果在 floor 组件内部触发没有办法 v-for 出来两个 floor。因为用了两个 floor</li></ul><ol start="3"><li><p>组件获取数据</p><ul><li>让组件拿到相应数据，使用辅助函数 mapState 去获取： <code>import &#123; mapState &#125; from &quot;vuex&quot;;</code></li><li>并把数据映射为组件实例身上的一个属性：<pre><code>computed: &#123;
  ...mapState(&#123;
    floorList: (state) =&gt; state.home.floorList
  &#125;)
&#125;
</code></pre></li></ul></li><li><p>展示数据<br>根据数据结构，在 template 把多余的结构去掉，只留一个，用 v-for 生成。(v-for 也可以在自定义标签中使用)</p><ul><li><p>因为 Floor 的数据在 Home 那里，而 Home 组件与 Floor 组件是父子关系，所以涉及到了父子间的组件通信</p></li><li><p>组件通信的方式有哪些？(面试频率极高)</p><ul><li>props：用于父子间组件通信</li><li>自定义事件 (@on @emit)：可以实现子给父通信</li><li>全局事件总线 ($bus)：全能</li><li>插槽</li><li>vuex</li></ul></li></ul><p>父传：<br><code>&lt;Floor v-for=&quot;(floor, index) in floorList&quot; :key=&quot;floor.id&quot; :list=&quot;floor&quot;/&gt;</code></p><p>子收：<br><code>props: ['list']</code></p><ul><li>动态展示数据<br>根据数据的格式和内容，将之前写的死数据替换成动态数据，把复用的删掉，该遍历的遍历<br><code>&#123;&#123;list.name&#125;&#125;,list.navList,&#123;&#123;nav.text&#125;&#125;</code> 等</li></ul></li></ol><h1 id="search-模块开发"><a class="anchor" href="#search-模块开发">#</a> search 模块开发</h1><ol><li>先写静态页面 + 静态组件拆分出来。【组件中】</li><li>发请求 (API)。【组件的 <code>mounted()&#123;&#125;</code> 中】</li><li>vuex 三连环。【store 文件夹的对应小仓库中】</li><li>组件获取数据。【组件的 <code>computed: &#123;&#125;</code> 中】</li><li>动态展示数据。【组件 html 结构上】</li></ol><h2 id="写请求-在-api-文件夹下的indexjs中"><a class="anchor" href="#写请求-在-api-文件夹下的indexjs中">#</a> 写请求 在 api 文件夹下的 <code>index.js</code> 中</h2><pre><code>//当前这个接口，给服务器传递一个默认的参数params，至少是一个空对象，不然会报错
export const reqGetSearchInfo = (params) =&gt; requests(&#123;
  url:'/list',
  method:'post',
  data:params
&#125;)

</code></pre><h2 id="search-模块根据不同的参数获取数据展示"><a class="anchor" href="#search-模块根据不同的参数获取数据展示">#</a> Search 模块根据不同的参数获取数据展示</h2><p>因为 mounted 只会调用一次，所以将 <code>this.$store.dispatch(&quot;getSearchList&quot;, &#123;&#125;)</code> 封装成一个函数，写在 methods 中，需要的时候调用即可</p><pre><code>  data() &#123;
    return &#123;
      searchParams: &#123;
        //一级分类的id
        category1Id: &quot;&quot;,
        //二级分类的id
        category2Id: &quot;&quot;,
        //三级分类的id
        category3Id: &quot;&quot;,
        //分类的名字
        categoryName: &quot;&quot;,
        //关键字
        keyword: &quot;&quot;,
        //排序
        order: &quot;&quot;,
        //分页器
        pageNo: 1,
        //代表每一页展示数据的个数
        pageSize: 10,
        //平台售卖属性操作带的参数
        props: [],
        //品牌
        trademark: &quot;&quot;,
      &#125;,
    &#125;;
  &#125;,
  beforeMount() &#123;
    //使用Object.assign:ES6 新增的语法，合并对象 整理参数
    Object.assign(this.searchParams, this.$route.query, this.$route.params);
  &#125;,
  mounted() &#123;
    //在发请求之前带给服务器参数【searchParams参数发生变化有数值带给服务器】
    this.getData();
  &#125;,
  methods: &#123;
    //向服务器发请求获取search数据(根据参数不同返回不同的数据进行展示)
    getData() &#123;
      this.$store.dispatch(&quot;getSearchList&quot;, this.searchParams);
    &#125;,
  &#125;
</code></pre><h2 id="监听路由的变化再次发请求获取数据"><a class="anchor" href="#监听路由的变化再次发请求获取数据">#</a> 监听路由的变化再次发请求获取数据</h2><pre><code>  watch: &#123;
    $route(newValue,oldValue) &#123;
      //再次发请求之前还需要整理带给服务器的参数
      Object.assign(this.searchParams, this.$route.query, this.$route.params);
      //再次发起ajax请求
      this.getData()
      //每次一请求完毕，应该把相应的一二三级分类的id置空，让他接收下一次的相应的id
      this.searchParams.category1Id = ''
      this.searchParams.category2Id = ''
      this.searchParams.category3Id = ''
    &#125;
  &#125;
</code></pre><h2 id="面包屑分类处理"><a class="anchor" href="#面包屑分类处理">#</a> 面包屑分类处理</h2><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fl sui-tag<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>with-x<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>searchParams.categoryName<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment"></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>removeCategoryName<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>x<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><pre><code class="language-script中的methods">    //删除分类的名字
    removeCategoryName() &#123;
      //一点击“x”，就把categoryName置空(恢复默认页面)，还需要向服务器发请求
      //也可以不置空，而是写成undefined，这样这个字段就不会带给服务器，提高性能
      this.searchParams.categoryName = undefined
      this.searchParams.category1Id = undefined
      this.searchParams.category2Id = undefined
      this.searchParams.category3Id = undefined
      this.getData()
      //地址栏也需要修改：进行路由的修改,自己跳自己
      //严谨：本意是删除query，如果路径中出现params不应该删除，路由跳转的时候应该带着
      if(this.$route.params) &#123;
        this.$router.push(&#123;
          name:&quot;search&quot;,
          params:this.$route.params
        &#125;)
      &#125;

    &#125;
</code></pre><h2 id="平台售卖属性操作"><a class="anchor" href="#平台售卖属性操作">#</a> 平台售卖属性操作</h2><ul><li>给售卖属性绑定点击事件</li></ul><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>type-wrap<span class="token punctuation">"</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(attr,index) in attrList<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>attr.attrId<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">&lt;!-- 平台售卖属性：比如说颜色 --></span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fl key<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token comment"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fl value<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>type-list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token comment">&lt;!-- 平台相应的属性值：粉色，蓝色，黑色。。。--></span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(attrValue,index) in attr.attrValueList<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>attrValue<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>attrInfo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">></span></span><span class="token comment"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><pre><code class="language-js,SeachSelectr组件中，methods方法中:">
//平台售卖属性值的点击事件
attrInfo(attr,attrVal) &#123;
//[&quot;属性ID：属性值：属性名&quot;]
  this.$emit(&quot;attrInfo&quot;,attr,attrValue)
&#125;
</code></pre><pre><code class="language-js,Search组件中，methods方法中:">attrInfo(attr,attrValue) &#123;
  //[&quot;属性ID：属性值：属性名&quot;]
  //参数格式整理好
  let props = `$&#123;attr.attrID&#125;:$&#123;attrValue&#125;:$&#123;attr.attrName&#125;`
  this.searchParams.props(props)
  //再次发请求
  this.getData()
&#125;
</code></pre><h2 id="数组去重"><a class="anchor" href="#数组去重">#</a> 数组去重</h2><pre><code>if(this.array.x.indexOf(x)==-1) &#123;
  this.array.x.push(x)
&#125;
</code></pre><h2 id="排序操作"><a class="anchor" href="#排序操作">#</a> 排序操作</h2><p>api 接口给出的 order 排序参数：<br>1：综合<br>2：价格<br>asc：升序<br>desc：降序<br>一共有四种情况</p><ol><li>判断 active 动态类名在谁身上？</li></ol><ul><li>通过 order 属性值中包含 1 (综合)| 包含 2 (价格)</li></ul><pre><code>&lt;ul class=&quot;sui-nav&quot;&gt;
  &lt;li :class=&quot;&#123;active:searchParams.order.indexOf('1'!=-1)&#125;&quot;&gt;
    &lt;a&gt;综合&lt;/a&gt;
  &lt;/li&gt;
  &lt;li :class=&quot;&#123;active:searchParams.order.indexOf('2'!=-1)&#125;&quot;&gt;
    &lt;a&gt;价格&lt;/a&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</code></pre><ol start="2"><li>判断箭头</li></ol><pre><code>//太长了可以写在计算属性里
&lt;li :class=&quot;&#123;active:isOne&#125;&quot;&gt;
  &lt;a&gt;综合&lt;span v-show=&quot;isOne&quot; class=&quot;iconfont&quot; :class=&quot;&#123;'icon-UP':isAsc,'icon-DOWN':isDesc&#125;&quot;&gt;&lt;/span&gt;&lt;/a&gt;
&lt;/li&gt;
</code></pre><ol start="3"><li>点击事件</li></ol><pre><code class="language-methods">changeOrder(flag) &#123;
  //flag形参：它是一个标记，代表用户点击的是综合(1)还是价格(2)  用户点击的时候传递进来的
  let originOrder = this.searchParams.order
  //这里获取到的是最开始的状态
  let originFlag = this.searchParams.order.split(&quot;:&quot;)[0]
  let originSort = this.searchParams.order.split(&quot;:&quot;)[1]
  //准备一个新的order的属性值
  let newOrder = ''
  //确定点击的一定是“综合”
  if(flag == originFlag) &#123;
    newOrder = `$&#123;originFlag&#125;:$&#123;originSort==&quot;desc&quot;?&quot;asc&quot;:&quot;desc&quot;&#125;`
  &#125;else &#123;
  //确定点击的一定是“价格”
  newOrder = `$&#123;flag&#125;:$&#123;&quot;desc&quot;&#125;`
  &#125;
  //将newOrder赋予searchParams
  this.searchParams.order = newOrder
  //再次发请求
  this.getData()
&#125;
</code></pre><h1 id="分页器"><a class="anchor" href="#分页器">#</a> 分页器</h1><ul><li>为什么很多项目采用分页功能，因为有的平台同时展示的数据有很多</li><li>对于分页器而言，自定义数据需要知道四个前提条件<ol><li>pageNo：当前第几页</li><li>pageSize：代表每一页展示多少条数据</li><li>total：代表整个分页一共要展示多少条数据</li><li>continues：代表分页连续页码个数</li></ol></li><li>自定义分页器，在开发的时候先自己传递假的数据进行测试，调试成功后在用服务器数据</li><li>对于分页器而言，很重要的一个地方即为【算出：连续页面起始数字和结束数字】</li></ul><pre><code>export default &#123;
  name: &quot;Pagination&quot;,
  props: [&quot;pageNo&quot;, &quot;pageSize&quot;, &quot;total&quot;, &quot;continues&quot;],
  computed: &#123;
    //总共多少页
    totalPage() &#123;
      //向上取整
      return Math.ceil(this.total / this.pageSize);
    &#125;,
    //计算出连续页码的起始数字与结束数字[连续的页码数字，至少是5]
    startNumAndEndNum() &#123;
      //解构
      const &#123; continues, pageNo, totalPage &#125; = this;
      //先定义两个变量存储起始数字与结束数字
      let start = 0,
        end = 0;
      //连续页码数字5【就是至少5页】，如果出现不正常现象(就是不够五页)
      //不正常现象：总页数没有连续页码多
      if (continues &gt; totalPage) &#123;
        start = 1;
        end = totalPage;
      &#125; else &#123;
        //正常现象
        //起始数字
        start = pageNo - parseInt(continues / 2);
        //结束数字
        end = pageNo + parseInt(continues / 2);
        //把出现的不正常现象(start数字出现0或负数)纠正
        if (start &lt; 1) &#123;
          start = 1;
          end = continues;
        &#125;
        //把出现的不正常现象(end数字大于总页码)纠正
        if (end &gt; totalPage) &#123;
          end = totalPage;
          start = totalPage - continues + 1;
        &#125;
      &#125;
      return &#123; start, end &#125;;
    &#125;,
  &#125;,
&#125;;
</code></pre><h2 id="分页器动态展示"><a class="anchor" href="#分页器动态展示">#</a> 分页器动态展示</h2><pre><code class="language-html">
</code></pre><p>——————————Search 模块结束，再开发 “详情” 模块</p><h1 id="开发某一个商品的详情页面"><a class="anchor" href="#开发某一个商品的详情页面">#</a> 开发某一个商品的详情页面</h1><ol><li>搭静态组件<ul><li>详情页的组件还没有注册路由组件 (router 文件夹中)：</li></ul></li></ol><pre><code>import Detail from from '@/pages/Detail'

routes: [
  &#123;
    //点击商品跳到其详情页，需要进行路由跳转并带参(产品的id给详情页面)，所以还要占位/:skuid
      path:&quot;/detail/:skuid&quot;,
      component:Detail,
      meta: &#123;show:true&#125;
    &#125;,
]
</code></pre><ul><li>同时还要让商品图片可点击（跳转详情页）【search 模块中】</li></ul><pre><code>//在路由跳转的时候别忘记带id（params）参数
&lt;router-link :to=&quot;`/detail/$&#123;good.id&#125;`&quot;&gt;
  &lt;img :src=&quot;good.defaultImg&quot;&gt;
&lt;/router-link&gt;
</code></pre><ul><li>在跳转后还需要让滚轮回到顶上。vuerouter 滚动行为【router 文件夹中】</li></ul><pre><code>const router = new VueRouter(&#123;
  routes:[...],
  scrollBehavior(to,savedPosition) &#123;
    //return 期望滚动到哪个的位置
    return &#123;y:0&#125;
  &#125;
&#125;)
</code></pre><ol start="2"><li>发请求【api 文件夹中】</li></ol><ul><li>获取商品详情数据<br>// 获取商品详细信息的接口 URL：/api/item/{skuId} 请求方式：get<br>export const reqGoodsInfo = (skuId) =&gt;<br>requests({<br>url: <code>/item/$&#123;skuId&#125;</code> ,<br>method: &quot;get&quot;,<br>});</li></ul><ol start="3"><li>vuex--- 获取商品详情信息</li></ol><ul><li>vuex 中（store 文件夹中）还需要新增一个模块 detail.</li></ul><pre><code>const state= &#123;&#125;
const mutations = &#123;&#125;
const actions = &#123;&#125;
const getters = &#123;&#125;

export default &#123;
   state,
   actions,
   mutations,
   getters
&#125;
</code></pre><ul><li>搞完之后还需要回到大仓库中进行合并【store 文件夹中 index.js 中】</li></ul><pre><code>import detail from &quot;./detail&quot;;
//对外暴露Store类的一个实例
export default new Vuex.Store(&#123;
  //实现Vuex仓库模块式开发存储数据
  modules:&#123;
    detail
  &#125;
</code></pre><ul><li>派发 action，发请求捞数据【detail 模块 index.vue 中】</li></ul><pre><code>
</code></pre><ol start="4"><li>动态展示组件</li></ol><h1 id="面试分页器封装原理"><a class="anchor" href="#面试分页器封装原理">#</a> 面试：分页器封装原理</h1><p>封装一个分页器组件 pagination</p><ol><li>知道当前是第几页：pageNo</li><li>知道分页器一共需要展示多少条数据：total</li><li>知道每一页需要展示数据的个数：pageSize，根据 2,3 能算出一共有多少页：totalPage</li><li>知道连续的页码数：continues</li></ol><h1 id="zoom-放大镜展示数据"><a class="anchor" href="#zoom-放大镜展示数据">#</a> zoom 放大镜展示数据</h1><ul><li><p>遮罩层随鼠标移动<br>let left = event.offsetX-mask.offsetWidth/2<br>let top = event.offsetY-mask.offsetHeight/2</p><p><img data-src="https://eucli-1314359160.cos.ap-beijing.myqcloud.com/test/HWT%5D5JAIEXRTU@0%25%7D9C()19.png" alt=""></p></li></ul><p><img data-src="https://eucli-1314359160.cos.ap-beijing.myqcloud.com/test/5ZHB%7D4YUP1GE%F4YJ8BLR$4.png" alt=""></p><h1 id="商品售卖属性-排他操作点击高亮"><a class="anchor" href="#商品售卖属性-排他操作点击高亮">#</a> 商品售卖属性 排他操作，点击高亮</h1><h1 id="购买产品个数的操作"><a class="anchor" href="#购买产品个数的操作">#</a> 购买产品个数的操作</h1><h1 id="加入购物车重要"><a class="anchor" href="#加入购物车重要">#</a> 加入购物车（重要）</h1><ul><li><p>以前的路由跳转，就是从 A 路由跳到 B 路由，这里加入购物车、路由跳转之前，还要发请求。把你购买的产品的信息通过请求的形式通知服务器，服务器进行相应的存储</p></li><li><p>加入购物车（发请求）以后，前台将参数带给服务器，服务器写入数据成功，并没有返回其他的数据，只返回了 code=200，代表这次操作成功。所以不用 vue 三连环存仓库了</p></li><li><p>派发 action 操作实际上就是调用仓库中的 addOrUpdateShopCart，它是 async 函数，返回的结果是 Promise，只有成功和失败两种情况，为了判断购物车是否成功加入，store 仓库的 detail.js 中的 addOrUpdateShopCart 函数要进行判断，如果 code=200 则返回成功的回调，否则返回失败的回调。<br>写 try catch<br>![]( <span class="exturl" data-url="aHR0cHM6Ly9ldWNsaS0xMzE0MzU5MTYwLmNvcy5hcC1iZWlqaW5nLm15cWNsb3VkLmNvbS90ZXN0L1pGUA==">https://eucli-1314359160.cos.ap-beijing.myqcloud.com/test/ZFP</span>}3KBYS7(OJ(2D{$(_M~D.png)</p><ul><li>浏览器存储功能：HTML5 中新增的，本地存储和会话存储。一般存储的是字符串，不能存对象。要先把对象转化为字符串才能进行存储，JSON.stringify ()。捞到之后再转化回对象：JSON.parse ()</li></ul><p><img data-src="https://eucli-1314359160.cos.ap-beijing.myqcloud.com/test/3%7D" alt="">%ZR}ERURV(R3V$]Z9MP8.png)</p><h1 id="购物车模块"><a class="anchor" href="#购物车模块">#</a> 购物车模块</h1><ol><li>购物车静态组件</li><li>向服务器发起 ajax 请求，获取服务车数据，操作 vuex 三连环、组件获取数据展示数据</li></ol><ul><li>问题：发请求的时候，获取不到你购物车里面的数据，因为服务器不知道你是谁</li></ul><ol start="3"><li>UUID 临时游客身份</li></ol><ul><li>生成 uuid，localStorage 存储</li></ul><p>detail.js 中</p><pre><code>const state = &#123;
//游客的临时身份
uuid_token: getUUID()
&#125;;
</code></pre><p>新建一个 utils 文件夹放 uuid_token.js</p><pre><code>import &#123; v4 as uuidv4 &#125; from 'uuid';
//要随机生成一个字符串，且每次执行不能发生变化，游客身份持久存储
export const getUUID = () =&gt; &#123;
//先从本地存储获取uuid（看本地存储是否有）
let uuid_token = localStorage.getItem('UUIDTOKEN')
//如果没有我则生成
if(!uuid_token) &#123;
  uuid_token = uuidv4()
  //本地存储一次
  localStorage.setItem('UUIDTOKEN',uuid_token)
&#125;
 //切记有返回值，没有返回值undefined
return uuid_token
&#125;
</code></pre><p>api 文件夹中 request.js</p><pre><code>//在当前模块中引入store
import store from &quot;@/store&quot;;

//请求拦截器
requests.interceptors.request.use((config) =&gt; &#123;
  if(store.state.detail.uuid_token) &#123;
  //给请求头添加一个字段(userTempId)：和后台老师商量好
  config.headers.userTempId = store.state.detail.uuid_token
</code></pre></li></ul><p>})</p><ol start="4"><li>动态展示购物车</li></ol><ul><li><p>数据格式有点不完美</p></li><li><p>全选效果：用数组的 every 方法</p></li><li><p>处理购物车数量（+，-，输入的数值）<br>三个地方触发一个回调<br><img data-src="https://eucli-1314359160.cos.ap-beijing.myqcloud.com/test/HTZ8$@2$UO%60LRH5%5DY%7DJ%60RI8.png" alt=""></p></li><li><p>购物车删除操作<br>用户删除的太快，可能会出现负的情况（即使已经做了限制） 解决：节流</p></li><li><p>删除选中的所有商品操作<br>没有一次删除很多产品的接口，但是有通过 ID 删除产品的接口（一次删一个）<br>传入参数 context 再调用 deleteCartListBySkuId</p></li></ul><p>Promise.all () 只有所有的 promise 都成功才能调用<br><img data-src="https://eucli-1314359160.cos.ap-beijing.myqcloud.com/test/4MTF" alt=""> 9W3%6Z8AK9) 840DLOD.png)<br>![](<span class="exturl" data-url="aHR0cHM6Ly9ldWNsaS0xMzE0MzU5MTYwLmNvcy5hcC1iZWlqaW5nLm15cWNsb3VkLmNvbS90ZXN0L1NVRzlONjhJUVolMjVYKDBHSEsyJTVCTTNDQi5wbmcp">https://eucli-1314359160.cos.ap-beijing.myqcloud.com/test/SUG9N68IQZ%X(0GHK2[M3CB.png)</span></p><p>删完之后 await,async, 再次调用 getData<br><img data-src="https://eucli-1314359160.cos.ap-beijing.myqcloud.com/test/V%7D3%7DR17~XO0CS42CS02EL~8.png" alt=""></p><h1 id="登录与注册非常重要"><a class="anchor" href="#登录与注册非常重要">#</a> 登录与注册（非常重要）</h1><ol><li>登录与注册的静态组件</li></ol><ul><li>assets 文件夹：放置全部组件共用静态资源， webpack 打包的时候会把静态资源当成一个模块，打包到 JS 文 里面</li><li>在 css 中写相对路径也可以用 @（@表示 src），但在 css 中要在 @前加个～。</li></ul><figure class="highlight css"><figcaption data-lang="CSS"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector">.list-item</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>~@/assets/images/icons.png<span class="token punctuation">)</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ol start="2"><li>注册业务</li></ol><ul><li>获取验证码的接口</li></ul><ol start="3"><li>登录业务</li></ol><ul><li><p>注册：通过数据库存储用户信息（账号，密码）</p></li><li><p>登录：登录成功的时候，后台为了区分你这个用户是谁，服务器下方 token【令牌：唯一标识符】</p></li><li><p>将来经常通过带 token 找服务器要用户信息进行展示</p></li><li><p>注意：vuex 仓库存储数据 —— 不是持久化</p></li><li><p>当用户注册完成，用户登录【用户名 + 密码】向服务器发请求（组件派发 action：userLogin），登陆成功获取 token，存储于仓库当中（非持久化的）。</p></li></ul><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// 登录业务</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">async</span> <span class="token function">userLogin</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span>commit<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">reqUserLogin</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// 服务器下发 token，用户唯一标识符</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 将来经常通过带 token 找服务器要用用户信息进行展示</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">"USERLOGIN"</span><span class="token punctuation">,</span>result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>token<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token keyword">return</span> <span class="token string">"ok"</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"faile"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>随后路由跳转到 home 首页，因此在首页当中（mounted）派发 action（getUserInfo）获取用户信息，以及动态展示 header 组件的内容。<br>问题：一刷新 home 首页，会获取不到用户信息（token：vuex 非持久化存储）</p><ul><li>持久化存储</li></ul><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token literal-property property">token</span><span class="token operator">:</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"TOKEN"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token comment">// 登录业务</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">async</span> <span class="token function">userLogin</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span>commit<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">reqUserLogin</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// 服务器下发 token，用户唯一标识符</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 将来经常通过带 token 找服务器要用用户信息进行展示</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">"USERLOGIN"</span><span class="token punctuation">,</span>result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>token<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token comment">// 持久化存储 token</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"TOKEN"</span><span class="token punctuation">,</span>result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>token<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token keyword">return</span> <span class="token string">"ok"</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"faile"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="存在的问题"><a class="anchor" href="#存在的问题">#</a> 存在的问题</h2><ol><li>多个组件展示用户信息需要在每一个组件的 mounted 中触发 <code>this.$store.dispatch('getUserInfo')</code></li><li>用户已经登陆了，就不应该再回登录页</li></ol><ul><li></li></ul><ol><li>有接口，现在 api 里 export 接口，写明接口地址和请求方式</li><li>然后在 store 里引入请求，写 vue 三连环，</li><li>在相应的位置派发 action</li></ol><ul><li><p>路由跳转不是你想跳就能跳的</p></li><li><p>tips：空对象隐式转换为布尔值为真，所以空对象作为条件一定为真</p></li></ul><h2 id="导航守卫"><a class="anchor" href="#导航守卫">#</a> 导航守卫</h2><p>导航：表示进行路由跳转<br>守卫：看门的，</p><ul><li><p>全局守卫：全部都要排查。<br>eg. 皇宫（皇帝，妃子，大臣）大门守卫，全部排查</p></li><li><p>路由独享守卫：是相应的（皇帝，妃子，大臣）毕竟之路上的守卫</p></li><li><p>组件内守卫：已经进去了，但还是要接受排查</p></li></ul><h3 id="全局前置守卫routerbeforeeach在路由跳转之前进行判断"><a class="anchor" href="#全局前置守卫routerbeforeeach在路由跳转之前进行判断">#</a> 全局前置守卫：router.beforeEach（在路由跳转之前进行判断）</h3><p>在 router 中进行全局前置守卫配置:</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 全局前置守卫</span></pre></td></tr><tr><td data-num="2"></td><td><pre>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span>from<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token comment">//to: 可以获取到你要跳转到的那个路由的信息（去哪里）</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">//from: 可以获取到你从哪个路由而来的信息（从哪来）</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token comment">//next: 放行函数，  next () 全部放行 next (path) 放行到指定路径  nextfalse)</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token comment">// 用户登录了才会有 token，未登录一定不会有 token</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token keyword">let</span> token <span class="token operator">=</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>token<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token comment">// 用户信息</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token keyword">let</span> name <span class="token operator">=</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>userInfo<span class="token punctuation">.</span>name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token comment">// 用户已经登陆了</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token keyword">if</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">// 用户已经登陆了还想去 login：不能去，停留在首页</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>path<span class="token operator">==</span><span class="token string">'/login'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'/home'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      <span class="token comment">// 登录，去得不是 login：home/search/detail/shopcart</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token comment">// 如果用户名已有</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token keyword">if</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token comment">// 没有用户信息，派发 action 让仓库存储用户信息再跳转</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>          <span class="token comment">// 获取用户信息成功</span></pre></td></tr><tr><td data-num="26"></td><td><pre>          <span class="token keyword">await</span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'getUserInfo'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="27"></td><td><pre>          <span class="token comment">// 放行</span></pre></td></tr><tr><td data-num="28"></td><td><pre>          <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>          <span class="token comment">//token 失效了</span></pre></td></tr><tr><td data-num="31"></td><td><pre>          <span class="token comment">// 清除 token</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token comment">// 没有用户信息</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="38"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h1 id="trade交易页面组件"><a class="anchor" href="#trade交易页面组件">#</a> trade（交易）页面组件</h1><ul><li><p>排他：被选中的那个展示样式<br><img data-src="https://eucli-1314359160.cos.ap-beijing.myqcloud.com/test/WPKZDCBG%25HS8L%25WC7NEH$BG.png" alt=""></p></li><li><p>import *as 命名 from URL 地址 统一引入<br>不需要一个个引入了，所有请求的接口统一接收，并且挂载到 vue.prototype 原型对象身上。到时候组件直接用就行，不用一个个引了</p></li></ul><p>在 main.js 中</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 统一接口 api 文件夹里面全部请求函数</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> <span class="token constant">API</span> <span class="token keyword">from</span> <span class="token string">"@/api"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">h</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token comment">// 全局事件总线</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$<span class="token constant">API</span> <span class="token operator">=</span> <span class="token constant">API</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">"#app"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ul><li>不用 vuex 怎么获取支付信息？</li></ul><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token comment">// 订单号</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      <span class="token literal-property property">order</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token comment">// 提交订单</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">async</span> <span class="token function">submitOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token comment">// 交易编码</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token keyword">let</span> <span class="token punctuation">&#123;</span> tradeNo <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>orderInfo<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>      <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$<span class="token constant">API</span><span class="token punctuation">.</span><span class="token function">reqSubmitOrder</span><span class="token punctuation">(</span>tradeNo<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token comment">// 提交订单成功</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>orderId <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token comment">// 路由跳转 + 路由传参</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"/pay?orderId="</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>orderId<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token comment">// 提交订单失败</span></pre></td></tr><tr><td data-num="23"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="27"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ul><li>注意：不要在生命周期函数中使用 async</li></ul><h1 id="elementui-使用按需引入"><a class="anchor" href="#elementui-使用按需引入">#</a> elementUI 使用 + 按需引入</h1><ul><li>已经学习过的组件库<br>react:antd [PC]、antd-mobile [移动端]<br>Vue:ElementUIp [PC]、vant [移动端]</li></ul><ol><li>安装</li></ol><pre><code># 选择一个你喜欢的包管理器

# NPM
$ npm install element-plus --save

# Yarn
$ yarn add element-plus

# pnpm
$ pnpm install element-plus
</code></pre><ol start="2"><li>引入 elementUI</li></ol><ul><li>完全引入</li></ul><pre><code>// main.ts
import &#123; createApp &#125; from 'vue'
import ElementPlus from 'element-plus'
import 'element-plus/dist/index.css'
import App from './App.vue'

const app = createApp(App)

app.use(ElementPlus)
app.mount('#app')
</code></pre><ul><li>按需导入</li></ul><pre><code># 自动导入，首先安装unplugin-vue-components 和 unplugin-auto-import这两款插件
npm install -D unplugin-vue-components unplugin-auto-import
</code></pre><p>然后把下列代码插入到你的 Vite 或 Webpack 的配置文件中</p><p>Webpack：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// webpack.config.js</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> AutoImport <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"unplugin-auto-import/webpack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> Components <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"unplugin-vue-components/webpack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> <span class="token punctuation">&#123;</span> ElementPlusResolver <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"unplugin-vue-components/resolvers"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token function">AutoImport</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token literal-property property">resolvers</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">ElementPlusResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token function">Components</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token literal-property property">resolvers</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">ElementPlusResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-config-provider</span> <span class="token attr-name">:size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>size<span class="token punctuation">"</span></span> <span class="token attr-name">:z-index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zIndex<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app</span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-config-provider</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token keyword">import</span> <span class="token punctuation">&#123;</span> defineComponent <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token keyword">import</span> <span class="token punctuation">&#123;</span> ElConfigProvider <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"element-plus"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      ElConfigProvider<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token literal-property property">zIndex</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token string">"small"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><ul><li>ElementUI 注册组件的时候，还有一种写法，挂在原型上。</li></ul><h1 id="支付"><a class="anchor" href="#支付">#</a> 支付</h1><ul><li>生成二维码</li></ul><pre><code>npm i qrcode --save
</code></pre><p>注意：${url} 和 / 之间要有一个空格，不然图片不显示<br><img data-src="https://eucli-1314359160.cos.ap-beijing.myqcloud.com/test/DG%5DS224H69@C0NQ%5DI%5B%7BMQBD.png" alt=""></p><ul><li>弹出二维码后，需要知道支付成功 | 失败<br><img data-src="https://eucli-1314359160.cos.ap-beijing.myqcloud.com/test/3QAX" alt=""> 5 [NXJTG9`ES@6~MA] 4.png)</li></ul><h1 id="二级路由"><a class="anchor" href="#二级路由">#</a> 二级路由</h1><ol><li>拆分<br>将不变的内容留下，将会根据点击发生页面变化的内容拆分到子组件中</li></ol><ul><li>注意拆分后路径会有不对的地方，记得改</li><li>样式，把父组件中样式的 scoped 去掉</li></ul><ol start="2"><li>在 router.js 中引入二级路由</li></ol><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 引入二级路由组件</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> MyOrder <span class="token keyword">from</span> <span class="token string">"@/views/Center/myOrder"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> GroupOrder <span class="token keyword">from</span> <span class="token string">"@/views/Center/groupOrder"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 配置路由</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">"/center"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token literal-property property">component</span><span class="token operator">:</span> Center<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">isShow</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token comment">// 二级路由组件</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">"myOrder"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token literal-property property">component</span><span class="token operator">:</span> MyOrder<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">"groupOrder"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token literal-property property">component</span><span class="token operator">:</span> GroupOrder<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ol start="3"><li><p>把点击会发生路由变化的地方换成 <code>&lt;router-linl to=&quot;/center/myorder&quot;&gt;我的订单&lt;/router-linl&gt;</code> 包裹，并设置二级路由组件的出口位置，让组件显示： <code>&lt;router-view&gt;&lt;/router-view&gt;</code></p></li><li><p>重定向。设置默认显示的路由（不能让用户一切换过来看一个半边空白的页面，还得点击才能显示）<br>router.js 中：</p></li></ol><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">"/center"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">component</span><span class="token operator">:</span> Center<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">isShow</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 二级路由组件</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">"myOrder"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token literal-property property">component</span><span class="token operator">:</span> MyOrder<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">"groupOrder"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token literal-property property">component</span><span class="token operator">:</span> GroupOrder<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token comment">// 重定向</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">"/center"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token string">"/center/myorder"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ul><li><p>面试的时候问是否封装过组件：分页器，日历</p></li><li><p>完善路由守卫</p></li></ul><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 全局前置守卫</span></pre></td></tr><tr><td data-num="2"></td><td><pre>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span>from<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token comment">//to: 可以获取到你要跳转到的那个路由的信息（去哪里）</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">//from: 可以获取到你从哪个路由而来的信息（从哪来）</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token comment">//next: 放行函数，  next () 全部放行 next (path) 放行到指定路径  nextfalse)</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token comment">// 用户登录了才会有 token，未登录一定不会有 token</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token keyword">let</span> token <span class="token operator">=</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>token<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token comment">// 用户信息</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token keyword">let</span> name <span class="token operator">=</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>userInfo<span class="token punctuation">.</span>name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token comment">// 用户已经登陆了</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token keyword">if</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">// 用户已经登陆了还想去 login：不能去，停留在首页</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>path<span class="token operator">==</span><span class="token string">'/login'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'/home'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      <span class="token comment">// 登录，去得不是 login：home/search/detail/shopcart</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token comment">// 如果用户名已有</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token keyword">if</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token comment">// 没有用户信息，派发 action 让仓库存储用户信息再跳转</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>          <span class="token comment">// 获取用户信息成功</span></pre></td></tr><tr><td data-num="26"></td><td><pre>          <span class="token keyword">await</span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'getUserInfo'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="27"></td><td><pre>          <span class="token comment">// 放行</span></pre></td></tr><tr><td data-num="28"></td><td><pre>          <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>          <span class="token comment">//token 失效了</span></pre></td></tr><tr><td data-num="31"></td><td><pre>          <span class="token comment">// 清除 token</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token comment">// 未登录：不能去交易相关、不能去支付相关【pay、paysuccess】、不能去个人中心</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token comment">// 未登录想去上面这些路由 --- 跳转到登录页</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token keyword">let</span> toPath <span class="token operator">=</span> to<span class="token punctuation">.</span>path<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>toPath<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'/trade'</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">||</span>toPath<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'/pay'</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">||</span>toPath<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'/center'</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>      <span class="token comment">// 把未登录的时候想去而没有去成的信息，存储于地址栏中【路由】</span></pre></td></tr><tr><td data-num="41"></td><td><pre>      <span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'/login?redirect='</span><span class="token operator">+</span>toPath<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>      <span class="token comment">// 去的不是上面这些路由（home、search、shopCard）--- 放行</span></pre></td></tr><tr><td data-num="44"></td><td><pre>      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><ul><li><p>登录后不是回首页，而是到你之前点击却被提示登录的那个页面<br><img data-src="https://eucli-1314359160.cos.ap-beijing.myqcloud.com/test/0FT%7DO~%7BM41H%7D%250OJXEEEOU1.png" alt=""></p></li><li><p>路由独享守卫<br>！[](<span class="exturl" data-url="aHR0cHM6Ly9ldWNsaS0xMzE0MzU5MTYwLmNvcy5hcC1iZWlqaW5nLm15cWNsb3VkLmNvbS90ZXN0LyhKNTYlMjUxQEFETyUyNVZWQkpSJFclNjBPJTdCVUUucG5nKQ==">https://eucli-1314359160.cos.ap-beijing.myqcloud.com/test/(J56%1@ADO%VVBJR$W`O{UE.png)</span></p></li><li><p>组件内守卫</p></li></ul><h1 id="图片懒加载-vue-lazyload"><a class="anchor" href="#图片懒加载-vue-lazyload">#</a> 图片懒加载 vue-lazyload</h1><ul><li><p>使用插件 <code>Vue.use(VueLazyload)</code> ,vuex，vuerouter 也是插件</p></li><li><p>图片、json 可以直接引用，它们是默认对外暴露的</p></li></ul><p>![](<span class="exturl" data-url="aHR0cHM6Ly9ldWNsaS0xMzE0MzU5MTYwLmNvcy5hcC1iZWlqaW5nLm15cWNsb3VkLmNvbS90ZXN0L0pZJTYwJCRA">https://eucli-1314359160.cos.ap-beijing.myqcloud.com/test/JY`$$@</span>](M45T3}YVVE9{VN6.png)</p><h1 id="封装自定义插件"><a class="anchor" href="#封装自定义插件">#</a> 封装自定义插件</h1><p>![](<span class="exturl" data-url="aHR0cHM6Ly9ldWNsaS0xMzE0MzU5MTYwLmNvcy5hcC1iZWlqaW5nLm15cWNsb3VkLmNvbS90ZXN0L1lYVFcoWjY5JTVCXzhTTjVQRTNNOFRaRE4ucG5nKQ==">https://eucli-1314359160.cos.ap-beijing.myqcloud.com/test/YXTW(Z69[_8SN5PE3M8TZDN.png)</span></p><h1 id="vee-validate-表单验证-了解"><a class="anchor" href="#vee-validate-表单验证-了解">#</a> vee-validate 表单验证 （了解）</h1><ol><li>安装</li><li>引入</li><li>使用</li></ol><p>![](<span class="exturl" data-url="aHR0cHM6Ly9ldWNsaS0xMzE0MzU5MTYwLmNvcy5hcC1iZWlqaW5nLm15cWNsb3VkLmNvbS90ZXN0Lw==">https://eucli-1314359160.cos.ap-beijing.myqcloud.com/test/</span>[_`IH(QLVOZKL0HD33}2ZU7.png)</p><p>![](<span class="exturl" data-url="aHR0cHM6Ly9ldWNsaS0xMzE0MzU5MTYwLmNvcy5hcC1iZWlqaW5nLm15cWNsb3VkLmNvbS90ZXN0Lw==">https://eucli-1314359160.cos.ap-beijing.myqcloud.com/test/</span>]98(9U9F(9L_8)E[{IO~~J6.png)</p><h1 id="路由懒加载"><a class="anchor" href="#路由懒加载">#</a> 路由懒加载</h1><p>当打包构建应用时，JavaScript 包会变得非常大，影响页面加载。如果我们能把不同路由对应的组件分割成不同的代码块，然后当路由被访问的时候才加载对应组件，这样就会更加高效。</p><h1 id="打包上线"><a class="anchor" href="#打包上线">#</a> 打包上线</h1><ol><li>打包 <code>npm run build</code></li></ol><ul><li>map<br>项目打包后，代码都是经过压缩加密的，如果运行时报错，输出的错误信息无法准确得知是哪里的代码报错。<br>有了 map 就可以像未加密的代码一样，准确输出是哪一行有错。<br>没有，该文件如果项目不需要是可以去掉的<br>vue.config.js 配置：</li></ul><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token literal-property property">productionSourceMap</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ol start="2"><li><p>购买服务器</p></li><li><p>设置安全组</p></li><li><p>利用 Xshell 工具登录服务器</p></li><li><p>利用 Xftp 把本地文件上传到云服务器</p></li></ol><ul><li><p>问题 1：刚刚在服务器上：/root/www/shangpinhui/dist<br>如何保证一访问 ip 地址就展示 dist 内容而不是展示其他文件夹内容？<br>解决：配置一些东西</p></li><li><p>问题 2：项目数据来自于本地服务器，如何让用户在访问买的 ip 地址时捞到本地服务器的数据？<br>解决：nginx 反向代理</p></li></ul><ol start="6"><li><p>nginx 反向代理<br>配置：</p></li><li><p>Xshell 进入 <code>/</code> 根目录下有一个 <code>etc</code> 目录，其下又有一个 <code>nginx</code> 目录。安装 nginx， <code>yum install nginx</code></p></li><li><p>安装完 nginx 服务器以后，nginx 目录下会多一个 ngxinx.conf 文件，在这个文件中进行配置。<br>通过 <code>vim nginx.conf</code> 指令进行编辑，主要添加如下两项：<br>![](<span class="exturl" data-url="aHR0cHM6Ly9ldWNsaS0xMzE0MzU5MTYwLmNvcy5hcC1iZWlqaW5nLm15cWNsb3VkLmNvbS90ZXN0LzB+Mkow">https://eucli-1314359160.cos.ap-beijing.myqcloud.com/test/0~2J0</span> <code>BXN%A6($%G2O8AS]8.png) 按 INSERT 编辑，编辑完 ESC 退出编辑，输入</code> :wq` 保存</p></li><li><p><code>serve nginx start</code></p></li></ol><ul><li>Linux<br><code>/</code> 是 linux 系统的根目录</li></ul><p>常见 linux 命令</p><ul><li><code>ls</code> ：列出你想要的目录的内容（默认情况下为当前目录）</li><li><code>alias</code> ：允许你在 shell 会话中定义临时别名</li><li><code>unalias</code> ：从已定义的别名中删除 alias</li><li><code>pwd</code> ：输出你所在目录的绝对路径</li><li><code>cd</code> ：更改目录<br><code>cd</code> ： 进入 home 文件夹<br><code>cd ..</code> ：向上移动一个级别<br><code>cd -</code> ：返回上一个目录</li><li><code>cp</code> ：复制文件和文件夹。要使用 cp 命令，只需将其与源文件和目标文件一起键入即可： <code>cp file_to_copy.txt new_file.txt</code></li><li><code>rm</code> ：删除文件和目录</li><li><code>mv</code> ：在文件系统中移动（或重命名）文件和目录</li><li><code>mkdir</code> ：在 shell 中创建文件夹</li><li><code>man</code> ：显示任何其他命令的手册页面（只要有）。</li><li><code>chmod</code> ：快速更改文件的模式（权限)，文件的基本权限包括：r (只读)、w (写入)、x (执行)</li><li><code>sudo</code> ：此命令代表 “超级用户 do”，它允许您在运行特定命令时充当超级用户或根用户。这就是 Linux 如何保护自己，防止用户意外修改机器的文件系统或安装不合适的软件包。</li><li><code>vim</code> ：编辑文件</li></ul><div class="tags"><a href="/tags/Vue/" rel="tag"><i class="ic i-tag"></i> Vue</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2023-03-04 17:44:54" itemprop="dateModified" datetime="2023-03-04T17:44:54+08:00">2023-03-04</time></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="谁偷了我的电饭锅 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="谁偷了我的电饭锅 支付宝"><p>支付宝</p></div><div><img data-src="/images/paypal.png" alt="谁偷了我的电饭锅 贝宝"><p>贝宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>谁偷了我的电饭锅 <i class="ic i-at"><em>@</em></i></li><li class="link"><strong>本文链接：</strong> <a href="https://eucli.top/%E5%B0%9A%E5%93%81%E6%B1%87%E5%89%8D%E5%8F%B0%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/" title="尚品汇前台项目实战">https://eucli.top/尚品汇前台项目实战/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/%E7%AC%AC%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0%EF%BC%9AHello-World/" itemprop="url" rel="prev" data-background-image="http:&#x2F;&#x2F;www.dmoe.cc&#x2F;random.php?432459" title="第一篇文章：Hello World"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 日常记录</span><h3>第一篇文章：Hello World</h3></a></div><div class="item right"><a href="/HTML%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" itemprop="url" rel="next" data-background-image="http:&#x2F;&#x2F;www.dmoe.cc&#x2F;random.php?504222" title="HTML基础知识"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 前端知识点</span><h3>HTML基础知识</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#vue-cli-%E8%84%9A%E6%89%8B%E6%9E%B6%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE-vue-create-app"><span class="toc-number">1.</span> <span class="toc-text">vue-cli 脚手架初始化项目 vue create app</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#npm-%E5%B8%B8%E7%94%A8%E7%9A%84%E5%AE%89%E8%A3%85%E5%91%BD%E4%BB%A4"><span class="toc-number">2.</span> <span class="toc-text">npm 常用的安装命令</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E9%A1%B9%E7%9B%AE%E4%B8%AD%E6%96%87%E4%BB%B6%E5%A4%B9%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">3.</span> <span class="toc-text">初始项目中文件夹的作用</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98"><span class="toc-number">4.</span> <span class="toc-text">一些问题</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E4%BA%9B%E9%85%8D%E7%BD%AE"><span class="toc-number">5.</span> <span class="toc-text">一些配置：</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E7%9A%84%E8%B7%AF%E7%94%B1%E5%88%86%E6%9E%90-vue-router"><span class="toc-number">6.</span> <span class="toc-text">项目的路由分析 vue-router</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9C%A8%E5%BC%80%E5%8F%91%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%97%B6%E5%80%99"><span class="toc-number">7.</span> <span class="toc-text">在开发项目的时候：</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%BB%84%E4%BB%B6%E7%9A%84%E6%AD%A5%E9%AA%A4%E9%9D%9E%E8%B7%AF%E7%94%B1%E7%BB%84%E4%BB%B6"><span class="toc-number">8.</span> <span class="toc-text">使用组件的步骤 (非路由组件)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E7%9A%84-css-%E9%94%99%E4%B9%B1%E8%AE%B0%E5%BE%97%E5%BC%95%E5%85%A5%E9%BB%98%E8%AE%A4%E7%9A%84%E6%A0%B7%E5%BC%8F"><span class="toc-number">9.</span> <span class="toc-text">引入的 css 错乱，记得引入默认的样式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%9A%84%E6%90%AD%E5%BB%BA-vue-router"><span class="toc-number">10.</span> <span class="toc-text">路由的搭建 vue-router</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1"><span class="toc-number">11.</span> <span class="toc-text">配置路由</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%BB%84%E4%BB%B6%E4%B8%8E%E9%9D%9E%E8%B7%AF%E7%94%B1%E7%BB%84%E4%BB%B6%E7%9A%84%E5%BC%82%E5%90%8C"><span class="toc-number">12.</span> <span class="toc-text">路由组件与非路由组件的异同：</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#route%E5%92%8Crouter-%E5%B1%9E%E6%80%A7"><span class="toc-number">13.</span> <span class="toc-text">route和route和route和 router 属性</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%9A%84%E8%B7%B3%E8%BD%AC"><span class="toc-number">14.</span> <span class="toc-text">路由的跳转</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#footer-%E7%BB%84%E4%BB%B6%E7%9A%84%E6%98%BE%E7%A4%BA%E4%B8%8E%E9%9A%90%E8%97%8F"><span class="toc-number">15.</span> <span class="toc-text">Footer 组件的显示与隐藏</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E4%BC%A0%E5%8F%82"><span class="toc-number">16.</span> <span class="toc-text">路由传参</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E4%BC%A0%E5%8F%82%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="toc-number">17.</span> <span class="toc-text">路由传参相关面试题</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#call-%E4%B8%8E-apply-%E5%8C%BA%E5%88%AB"><span class="toc-number">18.</span> <span class="toc-text">call 与 apply 区别</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#home-%E6%A8%A1%E5%9D%97%E7%9A%84%E7%BB%84%E4%BB%B6%E6%8B%86%E5%88%86"><span class="toc-number">19.</span> <span class="toc-text">Home 模块的组件拆分</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E7%BA%A7%E8%81%94%E5%8A%A8%E7%BB%84%E4%BB%B6%E5%AE%8C%E6%88%90"><span class="toc-number">20.</span> <span class="toc-text">三级联动组件完成</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%8C%E6%88%90%E5%85%B6%E4%BD%99%E9%9D%99%E6%80%81%E7%BB%84%E4%BB%B6"><span class="toc-number">21.</span> <span class="toc-text">完成其余静态组件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#postman-%E6%B5%8B%E8%AF%95%E6%8E%A5%E5%8F%A3"><span class="toc-number">22.</span> <span class="toc-text">POSTMAN 测试接口</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#axios-%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85"><span class="toc-number">23.</span> <span class="toc-text">axios 二次封装</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E7%BB%9F%E4%B8%80%E7%AE%A1%E7%90%86"><span class="toc-number">24.</span> <span class="toc-text">接口统一管理</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#nprogress-%E8%BF%9B%E5%BA%A6%E6%9D%A1%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">25.</span> <span class="toc-text">nprogress 进度条的使用</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vuex-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%BA%93"><span class="toc-number">26.</span> <span class="toc-text">vuex 状态管理库</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vue-%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E6%80%BB%E7%BB%93"><span class="toc-number">27.</span> <span class="toc-text">vue 模块开发总结！！！！！！！</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-%E5%86%99%E9%9D%99%E6%80%81%E9%A1%B5%E9%9D%A2-%E9%9D%99%E6%80%81%E7%BB%84%E4%BB%B6%E6%8B%86%E5%88%86"><span class="toc-number">27.1.</span> <span class="toc-text">一、写静态页面 + 静态组件拆分</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-%E5%86%99%E8%AF%B7%E6%B1%82"><span class="toc-number">27.2.</span> <span class="toc-text">二、写请求。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89-%E5%8F%91%E8%AF%B7%E6%B1%82api"><span class="toc-number">27.3.</span> <span class="toc-text">三、发请求 (API)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B-vuex%E4%B8%89%E8%BF%9E%E7%8E%AF"><span class="toc-number">27.4.</span> <span class="toc-text">四、vuex (三连环)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94-%E7%BB%84%E4%BB%B6%E8%8E%B7%E5%8F%96%E4%BB%93%E5%BA%93%E6%95%B0%E6%8D%AE"><span class="toc-number">27.5.</span> <span class="toc-text">五、组件获取仓库数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD-%E5%8A%A8%E6%80%81%E5%B1%95%E7%A4%BA%E6%95%B0%E6%8D%AE"><span class="toc-number">27.6.</span> <span class="toc-text">六、动态展示数据</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%8C%E6%88%90-typenav-%E4%B8%89%E7%BA%A7%E8%81%94%E5%8A%A8%E5%B1%95%E7%A4%BA%E6%95%B0%E6%8D%AE%E4%B8%9A%E5%8A%A1"><span class="toc-number">28.</span> <span class="toc-text">完成 TypeNav 三级联动展示数据业务</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%8C%E6%88%90%E4%B8%80%E7%BA%A7%E5%88%86%E7%B1%BB%E5%8A%A8%E6%80%81%E6%B7%BB%E5%8A%A0%E8%83%8C%E6%99%AF%E9%A2%9C%E8%89%B2"><span class="toc-number">29.</span> <span class="toc-text">完成一级分类动态添加背景颜色</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%80%9A%E8%BF%87-js-%E6%8E%A7%E5%88%B6%E4%BA%8C%E4%B8%89%E7%BA%A7%E5%95%86%E5%93%81%E5%88%86%E7%B1%BB%E7%9A%84%E6%98%BE%E7%A4%BA%E4%B8%8E%E9%9A%90%E8%97%8F"><span class="toc-number">30.</span> <span class="toc-text">通过 JS 控制二三级商品分类的显示与隐藏</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E9%98%B2%E6%8A%96%E4%B8%8E%E8%8A%82%E6%B5%81"><span class="toc-number">31.</span> <span class="toc-text">函数的防抖与节流</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%8C%E6%88%90%E4%B8%89%E7%BA%A7%E8%81%94%E5%8A%A8%E8%8A%82%E6%B5%81%E6%93%8D%E4%BD%9C"><span class="toc-number">32.</span> <span class="toc-text">完成三级联动节流操作</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E7%BA%A7%E8%81%94%E5%8A%A8%E7%BB%84%E4%BB%B6%E7%9A%84%E8%B7%AF%E7%94%B1%E8%B7%B3%E8%BD%AC%E4%B8%8E%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0"><span class="toc-number">33.</span> <span class="toc-text">三级联动组件的路由跳转与传递参数</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#search-%E6%A8%A1%E5%9D%97%E4%B8%AD%E7%9A%84-typenav-%E5%95%86%E5%93%81%E5%88%86%E7%B1%BB%E8%8F%9C%E5%8D%95"><span class="toc-number">34.</span> <span class="toc-text">Search 模块中的 TypeNav 商品分类菜单</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BC%98%E5%8C%96%E5%95%86%E5%93%81%E5%88%86%E7%B1%BB%E4%B8%89%E7%BA%A7%E5%88%97%E8%A1%A8"><span class="toc-number">35.</span> <span class="toc-text">优化商品分类三级列表</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%90%88%E5%B9%B6-params-%E4%B8%8E-query-%E5%8F%82%E6%95%B0"><span class="toc-number">36.</span> <span class="toc-text">合并 params 与 query 参数</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%80%E5%8F%91-home-%E9%A6%96%E9%A1%B5%E5%BD%93%E4%B8%AD%E7%9A%84-listcontainer-%E7%BB%84%E4%BB%B6%E4%B8%8E-floor-%E7%BB%84%E4%BB%B6"><span class="toc-number">37.</span> <span class="toc-text">开发 Home 首页当中的 ListContainer 组件与 Floor 组件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#swiper-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">38.</span> <span class="toc-text">swiper 基本使用</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#listcontainer-%E7%BB%84%E4%BB%B6%E5%BC%80%E5%8F%91%E9%87%8D%E7%82%B9"><span class="toc-number">39.</span> <span class="toc-text">ListContainer 组件开发重点</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%80%E5%8F%91-floor-%E7%BB%84%E4%BB%B6"><span class="toc-number">40.</span> <span class="toc-text">开发 floor 组件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#search-%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91"><span class="toc-number">41.</span> <span class="toc-text">search 模块开发</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%99%E8%AF%B7%E6%B1%82-%E5%9C%A8-api-%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E7%9A%84indexjs%E4%B8%AD"><span class="toc-number">41.1.</span> <span class="toc-text">写请求 在 api 文件夹下的 index.js 中</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#search-%E6%A8%A1%E5%9D%97%E6%A0%B9%E6%8D%AE%E4%B8%8D%E5%90%8C%E7%9A%84%E5%8F%82%E6%95%B0%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%B1%95%E7%A4%BA"><span class="toc-number">41.2.</span> <span class="toc-text">Search 模块根据不同的参数获取数据展示</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%91%E5%90%AC%E8%B7%AF%E7%94%B1%E7%9A%84%E5%8F%98%E5%8C%96%E5%86%8D%E6%AC%A1%E5%8F%91%E8%AF%B7%E6%B1%82%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-number">41.3.</span> <span class="toc-text">监听路由的变化再次发请求获取数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%A2%E5%8C%85%E5%B1%91%E5%88%86%E7%B1%BB%E5%A4%84%E7%90%86"><span class="toc-number">41.4.</span> <span class="toc-text">面包屑分类处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B9%B3%E5%8F%B0%E5%94%AE%E5%8D%96%E5%B1%9E%E6%80%A7%E6%93%8D%E4%BD%9C"><span class="toc-number">41.5.</span> <span class="toc-text">平台售卖属性操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%8E%BB%E9%87%8D"><span class="toc-number">41.6.</span> <span class="toc-text">数组去重</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F%E6%93%8D%E4%BD%9C"><span class="toc-number">41.7.</span> <span class="toc-text">排序操作</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E5%99%A8"><span class="toc-number">42.</span> <span class="toc-text">分页器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E5%99%A8%E5%8A%A8%E6%80%81%E5%B1%95%E7%A4%BA"><span class="toc-number">42.1.</span> <span class="toc-text">分页器动态展示</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E6%9F%90%E4%B8%80%E4%B8%AA%E5%95%86%E5%93%81%E7%9A%84%E8%AF%A6%E6%83%85%E9%A1%B5%E9%9D%A2"><span class="toc-number">43.</span> <span class="toc-text">开发某一个商品的详情页面</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E5%88%86%E9%A1%B5%E5%99%A8%E5%B0%81%E8%A3%85%E5%8E%9F%E7%90%86"><span class="toc-number">44.</span> <span class="toc-text">面试：分页器封装原理</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#zoom-%E6%94%BE%E5%A4%A7%E9%95%9C%E5%B1%95%E7%A4%BA%E6%95%B0%E6%8D%AE"><span class="toc-number">45.</span> <span class="toc-text">zoom 放大镜展示数据</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%95%86%E5%93%81%E5%94%AE%E5%8D%96%E5%B1%9E%E6%80%A7-%E6%8E%92%E4%BB%96%E6%93%8D%E4%BD%9C%E7%82%B9%E5%87%BB%E9%AB%98%E4%BA%AE"><span class="toc-number">46.</span> <span class="toc-text">商品售卖属性 排他操作，点击高亮</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B4%AD%E4%B9%B0%E4%BA%A7%E5%93%81%E4%B8%AA%E6%95%B0%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-number">47.</span> <span class="toc-text">购买产品个数的操作</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8A%A0%E5%85%A5%E8%B4%AD%E7%89%A9%E8%BD%A6%E9%87%8D%E8%A6%81"><span class="toc-number">48.</span> <span class="toc-text">加入购物车（重要）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B4%AD%E7%89%A9%E8%BD%A6%E6%A8%A1%E5%9D%97"><span class="toc-number">49.</span> <span class="toc-text">购物车模块</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E4%B8%8E%E6%B3%A8%E5%86%8C%E9%9D%9E%E5%B8%B8%E9%87%8D%E8%A6%81"><span class="toc-number">50.</span> <span class="toc-text">登录与注册（非常重要）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">50.1.</span> <span class="toc-text">存在的问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BC%E8%88%AA%E5%AE%88%E5%8D%AB"><span class="toc-number">50.2.</span> <span class="toc-text">导航守卫</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%89%8D%E7%BD%AE%E5%AE%88%E5%8D%ABrouterbeforeeach%E5%9C%A8%E8%B7%AF%E7%94%B1%E8%B7%B3%E8%BD%AC%E4%B9%8B%E5%89%8D%E8%BF%9B%E8%A1%8C%E5%88%A4%E6%96%AD"><span class="toc-number">50.2.1.</span> <span class="toc-text">全局前置守卫：router.beforeEach（在路由跳转之前进行判断）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#trade%E4%BA%A4%E6%98%93%E9%A1%B5%E9%9D%A2%E7%BB%84%E4%BB%B6"><span class="toc-number">51.</span> <span class="toc-text">trade（交易）页面组件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#elementui-%E4%BD%BF%E7%94%A8%E6%8C%89%E9%9C%80%E5%BC%95%E5%85%A5"><span class="toc-number">52.</span> <span class="toc-text">elementUI 使用 + 按需引入</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%94%AF%E4%BB%98"><span class="toc-number">53.</span> <span class="toc-text">支付</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E7%BA%A7%E8%B7%AF%E7%94%B1"><span class="toc-number">54.</span> <span class="toc-text">二级路由</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD-vue-lazyload"><span class="toc-number">55.</span> <span class="toc-text">图片懒加载 vue-lazyload</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8F%92%E4%BB%B6"><span class="toc-number">56.</span> <span class="toc-text">封装自定义插件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vee-validate-%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81-%E4%BA%86%E8%A7%A3"><span class="toc-number">57.</span> <span class="toc-text">vee-validate 表单验证 （了解）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E6%87%92%E5%8A%A0%E8%BD%BD"><span class="toc-number">58.</span> <span class="toc-text">路由懒加载</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%89%93%E5%8C%85%E4%B8%8A%E7%BA%BF"><span class="toc-number">59.</span> <span class="toc-text">打包上线</span></a></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li class="active"><a href="/%E5%B0%9A%E5%93%81%E6%B1%87%E5%89%8D%E5%8F%B0%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/" rel="bookmark" title="尚品汇前台项目实战">尚品汇前台项目实战</a></li><li><a href="/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AE%9E%E6%88%98/" rel="bookmark" title="微信小程序项目实战">微信小程序项目实战</a></li><li><a href="/%E6%8B%9B%E7%94%9F%E6%8F%90%E6%8A%A5%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE/" rel="bookmark" title="招生提报系统">招生提报系统</a></li><li><a href="/Vite%20+%20Vue3%20+%20Typescript%20+%20Pinia%20+%20Vueuse%E9%A1%B9%E7%9B%AE/" rel="bookmark" title="Vite + Vue3 + Typescript + Pinia + Vueuse项目">Vite + Vue3 + Typescript + Pinia + Vueuse项目</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="谁偷了我的电饭锅" data-src="/images/head.png"><p class="name" itemprop="name">谁偷了我的电饭锅</p><div class="description" itemprop="description">真不是二次元</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">21</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">11</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">21</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL21vbm9rdW1hMzEyMQ==" title="https:&#x2F;&#x2F;github.com&#x2F;monokuma3121"><i class="ic i-github"></i></span> <span class="exturl item twitter" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9hbWVoaW1l" title="https:&#x2F;&#x2F;twitter.com&#x2F;amehime"><i class="ic i-twitter"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS9ydXJpc216aw==" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;rurismzk"><i class="ic i-zhihu"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTEyODg2ODIz" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;12886823"><i class="ic i-cloud-music"></i></span> <span class="exturl item weibo" data-url="aHR0cHM6Ly93ZWliby5jb20vYW1laGltZQ==" title="https:&#x2F;&#x2F;weibo.com&#x2F;amehime"><i class="ic i-weibo"></i></span> <span class="exturl item about" data-url="aHR0cHM6Ly9hYm91dC5tZS9hbWVoaW1l" title="https:&#x2F;&#x2F;about.me&#x2F;amehime"><i class="ic i-address-card"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友链</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/%E7%AC%AC%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0%EF%BC%9AHello-World/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/HTML%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"></div><div class="status"><div class="copyright">&copy; 2022 – <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">谁偷了我的电饭锅 @ Eucli の小窝</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">134k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">2:02</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"尚品汇前台项目实战/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>